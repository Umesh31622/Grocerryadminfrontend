{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   // DATA\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n\n//   // UI state\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   // FORM state\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [isCopyMode, setIsCopyMode] = useState(false);\n\n//   // category/subcategory add UI\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   const [addingSub, setAddingSub] = useState(false);\n//   const [newSubName, setNewSubName] = useState(\"\");\n//   const [newSubImage, setNewSubImage] = useState(null);\n//   const [newSubPreview, setNewSubPreview] = useState(null);\n\n//   // bulk\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   // csv import\n//   const [csvFile, setCsvFile] = useState(null);\n//   const csvInputRef = useRef();\n\n//   // pagination\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   // -------------------- FETCH --------------------\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//     // eslint-disable-next-line\n//   }, []);\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data && res.data.success) setItems(res.data.data || []);\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       alert(\"Could not fetch items\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       alert(\"Could not fetch categories\");\n//     }\n//   };\n\n//   // -------------------- SUBCATEGORY AUTO LOAD --------------------\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n\n//     const cat = categories.find((c) => c._id === form.category);\n//     const subs = (cat && cat.subcategories) || [];\n//     setSubcategories(subs);\n\n//     // keep current subcategory if exists in new subs, otherwise reset\n//     const exists = subs.some((s) => s._id === form.subcategory);\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//   }, [form.category, categories]);\n\n//   // -------------------- CREATE CATEGORY --------------------\n//   const handleCreateCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newCategoryName.trim());\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//       const res = await axios.post(CATEGORY_URL, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Category created\");\n//         setNewCategoryName(\"\");\n//         setNewCategoryImage(null);\n//         setNewCategoryPreview(null);\n//         setAddingCategory(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Category creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create category error\", err);\n//       alert(\"Category creation failed\");\n//     }\n//   };\n\n//   // -------------------- CREATE SUBCATEGORY --------------------\n//   const handleCreateSub = async () => {\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n//     if (!form.category) return alert(\"Select category first\");\n\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newSubName.trim());\n//       if (newSubImage) fd.append(\"image\", newSubImage);\n\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Subcategory created\");\n//         setNewSubName(\"\");\n//         setNewSubImage(null);\n//         setNewSubPreview(null);\n//         setAddingSub(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Subcategory creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create sub error\", err);\n//       alert(\"Subcategory creation failed\");\n//     }\n//   };\n\n//   // -------------------- FORM HANDLING --------------------\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files && files.length) {\n//       // file input (both image for product and category/sub)\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   // -------------------- SUBMIT (ADD / UPDATE / COPY) --------------------\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       // append all keys (including 0 or empty string when necessary)\n//       Object.keys(form).forEach((k) => {\n//         const val = form[k];\n//         if (val !== undefined && val !== null) {\n//           fd.append(k, val);\n//         }\n//       });\n\n//       let res;\n//       if (isCopyMode) {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Copied as new item\");\n//       } else if (editId) {\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\n//         alert(\"Updated\");\n//       } else {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Added\");\n//       }\n\n//       // refresh\n//       await fetchItems();\n//       await fetchCategories();\n\n//       // reset\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         subcategory: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n//       setEditId(null);\n//       setIsCopyMode(false);\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // -------------------- EDIT --------------------\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       difference: item.difference ?? \"\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     // preload subs for better UX\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(item._id);\n//     setIsCopyMode(false);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // -------------------- COPY --------------------\n//   const handleCopyToEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       difference: item.difference ?? \"\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(null);\n//     setIsCopyMode(true);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // -------------------- DELETE --------------------\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       alert(\"Delete failed\");\n//     }\n//   };\n\n//   // -------------------- STATUS TOGGLE --------------------\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       alert(\"Status update failed\");\n//     }\n//   };\n\n//   // -------------------- BULK --------------------\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         name: x.name,\n//         basePrice: x.basePrice,\n//         difference: x.difference,\n//         validTill: x.validTill,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       alert(\"Bulk save failed\");\n//     }\n//   };\n\n//   // -------------------- CSV IMPORT/EXPORT --------------------\n//   const handleCsvSelect = (e) => {\n//     setCsvFile(e.target.files[0]);\n//   };\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Select CSV file\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"file\", csvFile);\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data && res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//         fetchItems();\n//       } else {\n//         alert(\"CSV import failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"CSV import error\", err);\n//       alert(\"CSV import failed\");\n//     }\n//   };\n\n//   const handleExportCsv = async () => {\n//     try {\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"prices.csv\";\n//       a.click();\n//       URL.revokeObjectURL(url);\n//     } catch (err) {\n//       console.error(\"CSV export error\", err);\n//       alert(\"CSV export failed\");\n//     }\n//   };\n\n//   const handleExportSelectedCsv = () => {\n//     if (!selectedItems.length) return alert(\"Select items to export\");\n\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"difference\",\n//       \"finalPrice\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = selectedData.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.difference ?? \"\",\n//       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `selected_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   // -------------------- SEARCH & PAGINATION --------------------\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     return (\n//       (item.name || \"\").toString().toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t)\n//     );\n//   });\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n//   // -------------------- RENDER --------------------\n//   return (\n//     <div className=\"price-container\">\n//       {/* HEADER */}\n//       <div className=\"header-section\">\n//         <h1>üí∞ Product Management</h1>\n//         <p>Manage prices, categories, images, CSV & bulk actions.</p>\n//       </div>\n\n//       {/* SEARCH */}\n//       <div className=\"search-bar\">\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product, category or subcategory...\"\n//           value={search}\n//           onChange={(e) => {\n//             setSearch(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//         />\n//       </div>\n\n//       {/* BULK BAR */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-bar\">\n//           <span>{selectedItems.length} selected</span>\n\n//           {!bulkMode ? (\n//             <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 10 }}>\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n\n//               <button className=\"btn small\" onClick={handleExportSelectedCsv}>\n//                 ‚§ì Export Selected\n//               </button>\n//             </div>\n//           ) : (\n//             <div className=\"bulk-panel\">\n//               <h3>‚úè Bulk Edit Selected Items</h3>\n\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} className=\"bulk-edit-item-box\">\n//                     <h4>{item.name}</h4>\n\n//                     <div className=\"form-grid\">\n//                       <div className=\"form-group\">\n//                         <label>Name</label>\n//                         <input\n//                           type=\"text\"\n//                           value={item.name}\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\n//                         />\n//                       </div>\n\n//                       <div className=\"form-group\">\n//                         <label>Base Price</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.basePrice}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\n//                           }\n//                         />\n//                       </div>\n//                           <div className=\"form-group\">\n//   <label>Category</label>\n//   <select\n//     value={item.category?._id || \"\"}\n//     onChange={(e) => {\n//       const newCat = e.target.value;\n\n//       updateLocalItemField(item._id, \"category\", { _id: newCat });\n\n//       const catObj = categories.find((c) => c._id === newCat);\n//       const firstSub = catObj?.subcategories?.[0]?._id || \"\";\n\n//       updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\n//     }}\n//   >\n//     <option value=\"\">Select Category</option>\n//     {categories.map((c) => (\n//       <option key={c._id} value={c._id}>\n//         {c.name}\n//       </option>\n//     ))}\n//   </select>\n// </div>\n\n// <div className=\"form-group\">\n//   <label>Subcategory</label>\n//   <select\n//     value={item.subcategory?._id || \"\"}\n//     onChange={(e) =>\n//       updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\n//     }\n//   >\n//     <option value=\"\">Select Subcategory</option>\n\n//     {categories\n//       .find((c) => c._id === item.category?._id)\n//       ?.subcategories?.map((s) => (\n//         <option key={s._id} value={s._id}>\n//           {s.name}\n//         </option>\n//       ))}\n//   </select>\n// </div>\n//                       <div className=\"form-group\">\n//                         <label>Difference</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.difference || 0}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\n//                           }\n//                         />\n//                       </div>\n\n//                       {/* <div className=\"form-group\">\n//                         <label>Valid Till</label>\n//                         <input\n//                           type=\"date\"\n//                           value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\n//                           onChange={(e) => updateLocalItemField(item._id, \"validTill\", e.target.value)}\n//                         />\n//                       </div> */}\n//                     </div>\n//                   </div>\n//                 ))}\n\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\n//                 <button className=\"btn primary\" onClick={handleBulkSave}>\n//                   ‚úî Save All\n//                 </button>\n//                 <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\n//                   ‚úñ Cancel\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* FORM */}\n//       <div className=\"price-form-card\">\n//         <h2>{isCopyMode ? \"üìÑ Save Duplicate Product\" : editId ? \"‚úè Update Product\" : \"‚ûï Add Product\"}</h2>\n\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             {/* NAME */}\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\n//             </div>\n\n//             {/* CATEGORY */}\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select\n//                   required\n//                   name=\"category\"\n//                   value={form.category}\n//                   onChange={(e) => {\n//                     handleChange(e);\n//                     // reset subcategory on category change (useEffect will set subs)\n//                     setForm((p) => ({ ...p, subcategory: \"\" }));\n//                   }}\n//                 >\n//                   <option value=\"\">Select Category</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 <button type=\"button\" className=\"btn small\" onClick={() => setAddingCategory((v) => !v)}>\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {/* ADD CATEGORY UI */}\n//             {addingCategory && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>Add New Category</label>\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Category name\"\n//                   />\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewCategoryImage(e.target.files[0]);\n//                       setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                     }}\n//                   />\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateCategory}>\n//                     Create\n//                   </button>\n//                 </div>\n//                 {newCategoryPreview && <img src={newCategoryPreview} className=\"categoryPreview\" alt=\"preview\" />}\n//               </div>\n//             )}\n\n//             {/* SUBCATEGORY */}\n//             <div className=\"form-group\">\n//               <label>Subcategory</label>\n//               <div className=\"category-row\">\n//                 <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length}>\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (\n//                     <option value={s._id} key={s._id}>\n//                       {s.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 {form.category && (\n//                   <button type=\"button\" className=\"btn small\" onClick={() => setAddingSub((v) => !v)}>\n//                     {addingSub ? \"Close\" : \"Add\"}\n//                   </button>\n//                 )}\n//               </div>\n//             </div>\n\n//             {/* ADD SUBCATEGORY UI */}\n//             {addingSub && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>Add New Subcategory</label>\n//                 <div className=\"category-row\">\n//                   <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" />\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewSubImage(e.target.files[0]);\n//                       setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                     }}\n//                   />\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateSub}>\n//                     Create\n//                   </button>\n//                 </div>\n//                 {newSubPreview && <img src={newSubPreview} className=\"categoryPreview\" alt=\"preview\" />}\n//               </div>\n//             )}\n\n//             {/* BASE PRICE */}\n//             <div className=\"form-group\">\n//               <label>Base Price *</label>\n//               <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} />\n//             </div>\n\n//             {/* DIFFERENCE */}\n//             <div className=\"form-group\">\n//               <label>Difference</label>\n//               <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} />\n//             </div>\n\n//             {/* VALID TILL */}\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} />\n//             </div>\n\n//             {/* IMAGE */}\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n//             </div>\n//           </div>\n\n//           {/* DESCRIPTION */}\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea name=\"description\" value={form.description} onChange={handleChange}></textarea>\n//           </div>\n\n//           {/* ACTIONS */}\n//           <div className=\"form-actions\">\n//             <button className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : editId ? \"Update\" : \"Add\"}\n//             </button>\n\n//             {(editId || isCopyMode) && (\n//               <button\n//                 type=\"button\"\n//                 className=\"btn cancel\"\n//                 onClick={() => {\n//                   setEditId(null);\n//                   setIsCopyMode(false);\n//                   setForm({\n//                     name: \"\",\n//                     category: \"\",\n//                     subcategory: \"\",\n//                     description: \"\",\n//                     basePrice: \"\",\n//                     difference: \"\",\n//                     validTill: \"\",\n//                     file: null,\n//                   });\n//                 }}\n//               >\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV CONTROLS */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <div style={{ display: \"flex\", gap: 8 }}>\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\n//             Export All CSV\n//           </button>\n\n//           <button className=\"btn\" onClick={handleExportSelectedCsv}>\n//             Export Selected CSV\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* TABLE */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Items</h2>\n//           <span>Total: {filteredItems.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th>Sr</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Subcategory</th>\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Status</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                       }\n//                     />\n//                   </td>\n\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td>{item.image ? <img src={item.image} alt=\"\" /> : \"No Img\"}</td>\n\n//                   <td>{item.name}</td>\n//                   <td>{item.category?.name || \"-\"}</td>\n//                   <td>{item.subcategory?.name || \"-\"}</td>\n\n//                   <td>‚Çπ{item.basePrice}</td>\n//                   <td>{item.difference || 0}</td>\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n//                   <td>\n//                     <button\n//                       className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \" Active\" : \" Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\n\n//                   <td className=\"actions\">\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                       Edit\n//                     </button>\n\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                       Delete\n//                     </button>\n\n//                     <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\n//                       Copy\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {currentItems.map((item) => (\n//               <div key={item._id} className=\"mobile-card\">\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() =>\n//                     setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                   }\n//                 />\n\n//                 {item.image ? <img src={item.image} alt=\"\" /> : <div>No Image</div>}\n\n//                 <h3>{item.name}</h3>\n\n//                 <p>\n//                   <b>Category:</b> {item.category?.name || \"-\"}\n//                 </p>\n\n//                 <p>\n//                   <b>Subcategory:</b> {item.subcategory?.name || \"-\"}\n//                 </p>\n\n//                 <p>\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\n//                 </p>\n\n//                 <p>\n//                   <b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\n//                 </p>\n\n//                 <button className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"} onClick={() => handleStatusToggle(item)}>\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                 </button>\n\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                     Edit\n//                   </button>\n\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                     Delete\n//                   </button>\n\n//                   <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\n//                     Copy\n//                   </button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* PAGINATION */}\n//         <div className=\"pagination\">\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }, (_, i) => (\n//             <button key={i} className={i + 1 === currentPage ? \"active-page\" : \"\"} onClick={() => setCurrentPage(i + 1)}>\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    difference: \"\",\n    validTill: \"\",\n    file: null\n  });\n  const [editId, setEditId] = useState(null);\n  const [isCopyMode, setIsCopyMode] = useState(false);\n  const [showForm, setShowForm] = useState(false); // ADD PRODUCT FORM TOGGLE\n  const [showPopup, setShowPopup] = useState(false); // EDIT/COPY POPUP\n\n  // 3 DOT MENU OPEN ROW\n  const [openMenuRow, setOpenMenuRow] = useState(null);\n\n  // ADD CATEGORY UI\n  const [addingCategory, setAddingCategory] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n  // ADD SUBCATEGORY UI\n  const [addingSub, setAddingSub] = useState(false);\n  const [newSubName, setNewSubName] = useState(\"\");\n  const [newSubImage, setNewSubImage] = useState(null);\n  const [newSubPreview, setNewSubPreview] = useState(null);\n\n  // CSV\n  const [csvFile, setCsvFile] = useState(null);\n  const csvInputRef = useRef();\n\n  // Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n\n  // FETCH\n  useEffect(() => {\n    fetchItems();\n    fetchCategories();\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  const fetchItems = async () => {\n    try {\n      var _res$data;\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.success) setItems(res.data.data || []);\n    } catch (err) {\n      alert(\"Could not fetch items\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      var _res$data2;\n      const res = await axios.get(CATEGORY_URL);\n      if ((_res$data2 = res.data) !== null && _res$data2 !== void 0 && _res$data2.success) setCategories(res.data.categories || []);\n    } catch {\n      alert(\"Could not fetch categories\");\n    }\n  };\n\n  // AUTO LOAD SUBS\n  useEffect(() => {\n    if (!form.category) {\n      setSubcategories([]);\n      return;\n    }\n    const cat = categories.find(c => c._id === form.category);\n    const subs = (cat === null || cat === void 0 ? void 0 : cat.subcategories) || [];\n    setSubcategories(subs);\n  }, [form.category, categories]);\n\n  // SUBMIT\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (!form.name || !form.category || !form.basePrice) {\n        alert(\"Required fields missing\");\n        setLoading(false);\n        return;\n      }\n      const fd = new FormData();\n      Object.keys(form).forEach(k => {\n        if (form[k] !== undefined && form[k] !== null) fd.append(k, form[k]);\n      });\n      if (isCopyMode) {\n        await axios.post(API_URL, fd);\n        alert(\"Copied as new item\");\n      } else if (editId) {\n        await axios.put(`${API_URL}/${editId}`, fd);\n        alert(\"Updated\");\n      } else {\n        await axios.post(API_URL, fd);\n        alert(\"Added\");\n      }\n      fetchItems();\n      fetchCategories();\n      resetForm();\n      setShowForm(false);\n      setShowPopup(false);\n    } catch {\n      alert(\"Save failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetForm = () => {\n    setForm({\n      name: \"\",\n      category: \"\",\n      subcategory: \"\",\n      description: \"\",\n      basePrice: \"\",\n      difference: \"\",\n      validTill: \"\",\n      file: null\n    });\n    setEditId(null);\n    setIsCopyMode(false);\n  };\n\n  // EDIT POPUP\n  const handleEdit = item => {\n    var _item$category, _item$subcategory, _item$basePrice, _item$difference, _item$validTill;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category._id) || \"\",\n      subcategory: ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : _item$subcategory._id) || \"\",\n      description: item.description || \"\",\n      basePrice: (_item$basePrice = item.basePrice) !== null && _item$basePrice !== void 0 ? _item$basePrice : \"\",\n      difference: (_item$difference = item.difference) !== null && _item$difference !== void 0 ? _item$difference : \"\",\n      validTill: ((_item$validTill = item.validTill) === null || _item$validTill === void 0 ? void 0 : _item$validTill.split(\"T\")[0]) || \"\",\n      file: null\n    });\n    setEditId(item._id);\n    setIsCopyMode(false);\n    setShowPopup(true);\n    setOpenMenuRow(null);\n  };\n\n  // COPY POPUP\n  const handleCopyToEdit = item => {\n    var _item$category2, _item$subcategory2, _item$basePrice2, _item$difference2, _item$validTill2;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2._id) || \"\",\n      subcategory: ((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : _item$subcategory2._id) || \"\",\n      description: item.description || \"\",\n      basePrice: (_item$basePrice2 = item.basePrice) !== null && _item$basePrice2 !== void 0 ? _item$basePrice2 : \"\",\n      difference: (_item$difference2 = item.difference) !== null && _item$difference2 !== void 0 ? _item$difference2 : \"\",\n      validTill: ((_item$validTill2 = item.validTill) === null || _item$validTill2 === void 0 ? void 0 : _item$validTill2.split(\"T\")[0]) || \"\",\n      file: null\n    });\n    setEditId(null);\n    setIsCopyMode(true);\n    setShowPopup(true);\n    setOpenMenuRow(null);\n  };\n\n  // DELETE\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete?\")) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`);\n      setItems(prev => prev.filter(x => x._id !== id));\n      setOpenMenuRow(null);\n    } catch {\n      alert(\"Delete failed\");\n    }\n  };\n\n  // SEARCH\n  const filteredItems = items.filter(item => {\n    var _item$name, _item$category3, _item$category3$name, _item$subcategory3, _item$subcategory3$na;\n    const t = search.toLowerCase();\n    return ((_item$name = item.name) === null || _item$name === void 0 ? void 0 : _item$name.toLowerCase().includes(t)) || ((_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : (_item$category3$name = _item$category3.name) === null || _item$category3$name === void 0 ? void 0 : _item$category3$name.toLowerCase().includes(t)) || ((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : (_item$subcategory3$na = _item$subcategory3.name) === null || _item$subcategory3$na === void 0 ? void 0 : _item$subcategory3$na.toLowerCase().includes(t));\n  });\n  const indexOfLast = currentPage * itemsPerPage;\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"price-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCE6 Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn primary add-btn\",\n        onClick: () => setShowForm(!showForm),\n        children: showForm ? \"Close Form\" : \"Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Search...\",\n        value: search,\n        onChange: e => {\n          setSearch(e.target.value);\n          setCurrentPage(1);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1178,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price-form-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u2795 Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1192,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"name\",\n              value: form.name,\n              onChange: e => setForm({\n                ...form,\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1198,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1202,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"category\",\n              value: form.category,\n              onChange: e => setForm({\n                ...form,\n                category: e.target.value,\n                subcategory: \"\"\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1208,\n                columnNumber: 19\n              }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c._id,\n                children: c.name\n              }, c._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1210,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1203,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1201,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"subcategory\",\n              value: form.subcategory,\n              onChange: e => setForm({\n                ...form,\n                subcategory: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1222,\n                columnNumber: 19\n              }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: s._id,\n                children: s.name\n              }, s._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1224,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Base Price *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"basePrice\",\n              value: form.basePrice,\n              onChange: e => setForm({\n                ...form,\n                basePrice: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1231,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1229,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Difference\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1240,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"difference\",\n              value: form.difference,\n              onChange: e => setForm({\n                ...form,\n                difference: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1241,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1239,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Valid Till\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"validTill\",\n              value: form.validTill,\n              onChange: e => setForm({\n                ...form,\n                validTill: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1251,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              onChange: e => setForm({\n                ...form,\n                file: e.target.files[0]\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1261,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1259,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1195,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group full-width\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: form.description,\n            onChange: e => setForm({\n              ...form,\n              description: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1267,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary\",\n          children: loading ? \"Saving...\" : \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1194,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1191,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-card\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"scroll-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Sr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1280,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Img\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1281,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Subcat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Base\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Diff\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Final\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u22EF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1289,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1279,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: currentItems.map((item, i) => {\n            var _item$category4, _item$subcategory4;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: (currentPage - 1) * itemsPerPage + (i + 1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image,\n                  className: \"tbl-img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1298,\n                  columnNumber: 35\n                }, this) : \"‚Äî\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1298,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1300,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: (_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : _item$category4.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: (_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"\\u20B9\", item.basePrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1303,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.difference\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1304,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"\\u20B9\", Number(item.basePrice) + Number(item.difference || 0)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: item.status === \"active\" ? \"status-active\" : \"status-inactive\",\n                  children: item.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1308,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1307,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"dot-menu-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dots\",\n                  onClick: () => setOpenMenuRow(openMenuRow === item._id ? null : item._id),\n                  children: \"\\u22EE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1316,\n                  columnNumber: 19\n                }, this), openMenuRow === item._id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"popup-menu\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    onClick: () => handleEdit(item),\n                    children: \"\\u270F Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1325,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    onClick: () => handleCopyToEdit(item),\n                    children: \"\\uD83D\\uDCC4 Copy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1326,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    onClick: () => handleDelete(item._id),\n                    children: \"\\uD83D\\uDDD1 Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1327,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1324,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1315,\n                columnNumber: 17\n              }, this)]\n            }, item._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1295,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1277,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1276,\n      columnNumber: 7\n    }, this), showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popup-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-grid small-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1348,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: form.name,\n                onChange: e => setForm({\n                  ...form,\n                  name: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1349,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1347,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Base Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1356,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: form.basePrice,\n                onChange: e => setForm({\n                  ...form,\n                  basePrice: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1357,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1355,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1345,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn primary\",\n            children: isCopyMode ? \"Save Copy\" : \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn cancel\",\n            onClick: () => {\n              setShowPopup(false);\n              resetForm();\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1368,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1344,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1340,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1339,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1166,\n    columnNumber: 5\n  }, this);\n}\n_s(PriceList, \"r59/HV+6h3RJiEaPCY6dHEnC4TU=\");\n_c = PriceList;\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsxDEV","_jsxDEV","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","isMobile","setIsMobile","window","innerWidth","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","difference","validTill","file","editId","setEditId","isCopyMode","setIsCopyMode","showForm","setShowForm","showPopup","setShowPopup","openMenuRow","setOpenMenuRow","addingCategory","setAddingCategory","newCategoryName","setNewCategoryName","newCategoryImage","setNewCategoryImage","newCategoryPreview","setNewCategoryPreview","addingSub","setAddingSub","newSubName","setNewSubName","newSubImage","setNewSubImage","newSubPreview","setNewSubPreview","csvFile","setCsvFile","csvInputRef","currentPage","setCurrentPage","itemsPerPage","fetchItems","fetchCategories","handleResize","addEventListener","removeEventListener","_res$data","res","get","data","success","err","alert","_res$data2","cat","find","c","_id","subs","handleSubmit","e","preventDefault","fd","FormData","Object","keys","forEach","k","undefined","append","post","put","resetForm","handleEdit","item","_item$category","_item$subcategory","_item$basePrice","_item$difference","_item$validTill","split","handleCopyToEdit","_item$category2","_item$subcategory2","_item$basePrice2","_item$difference2","_item$validTill2","handleDelete","id","confirm","delete","prev","filter","x","filteredItems","_item$name","_item$category3","_item$category3$name","_item$subcategory3","_item$subcategory3$na","t","toLowerCase","includes","indexOfLast","currentItems","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","target","onSubmit","map","s","type","files","i","_item$category4","_item$subcategory4","image","src","Number","status","_c","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   // DATA\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n\r\n//   // UI state\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // FORM state\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [isCopyMode, setIsCopyMode] = useState(false);\r\n\r\n//   // category/subcategory add UI\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   const [addingSub, setAddingSub] = useState(false);\r\n//   const [newSubName, setNewSubName] = useState(\"\");\r\n//   const [newSubImage, setNewSubImage] = useState(null);\r\n//   const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n//   // bulk\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   // csv import\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const csvInputRef = useRef();\r\n\r\n//   // pagination\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   // -------------------- FETCH --------------------\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//     // eslint-disable-next-line\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data && res.data.success) setItems(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       alert(\"Could not fetch items\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       alert(\"Could not fetch categories\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- SUBCATEGORY AUTO LOAD --------------------\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     const subs = (cat && cat.subcategories) || [];\r\n//     setSubcategories(subs);\r\n\r\n//     // keep current subcategory if exists in new subs, otherwise reset\r\n//     const exists = subs.some((s) => s._id === form.subcategory);\r\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//   }, [form.category, categories]);\r\n\r\n//   // -------------------- CREATE CATEGORY --------------------\r\n//   const handleCreateCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newCategoryName.trim());\r\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//       const res = await axios.post(CATEGORY_URL, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Category created\");\r\n//         setNewCategoryName(\"\");\r\n//         setNewCategoryImage(null);\r\n//         setNewCategoryPreview(null);\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Category creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create category error\", err);\r\n//       alert(\"Category creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- CREATE SUBCATEGORY --------------------\r\n//   const handleCreateSub = async () => {\r\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n//     if (!form.category) return alert(\"Select category first\");\r\n\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newSubName.trim());\r\n//       if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Subcategory created\");\r\n//         setNewSubName(\"\");\r\n//         setNewSubImage(null);\r\n//         setNewSubPreview(null);\r\n//         setAddingSub(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Subcategory creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create sub error\", err);\r\n//       alert(\"Subcategory creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- FORM HANDLING --------------------\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files && files.length) {\r\n//       // file input (both image for product and category/sub)\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- SUBMIT (ADD / UPDATE / COPY) --------------------\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       // append all keys (including 0 or empty string when necessary)\r\n//       Object.keys(form).forEach((k) => {\r\n//         const val = form[k];\r\n//         if (val !== undefined && val !== null) {\r\n//           fd.append(k, val);\r\n//         }\r\n//       });\r\n\r\n//       let res;\r\n//       if (isCopyMode) {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Copied as new item\");\r\n//       } else if (editId) {\r\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n//         alert(\"Updated\");\r\n//       } else {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Added\");\r\n//       }\r\n\r\n//       // refresh\r\n//       await fetchItems();\r\n//       await fetchCategories();\r\n\r\n//       // reset\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         subcategory: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n//       setEditId(null);\r\n//       setIsCopyMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- EDIT --------------------\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       difference: item.difference ?? \"\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     // preload subs for better UX\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(item._id);\r\n//     setIsCopyMode(false);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // -------------------- COPY --------------------\r\n//   const handleCopyToEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       difference: item.difference ?? \"\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(null);\r\n//     setIsCopyMode(true);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // -------------------- DELETE --------------------\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       alert(\"Delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- STATUS TOGGLE --------------------\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       alert(\"Status update failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- BULK --------------------\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         name: x.name,\r\n//         basePrice: x.basePrice,\r\n//         difference: x.difference,\r\n//         validTill: x.validTill,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       alert(\"Bulk save failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- CSV IMPORT/EXPORT --------------------\r\n//   const handleCsvSelect = (e) => {\r\n//     setCsvFile(e.target.files[0]);\r\n//   };\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Select CSV file\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"file\", csvFile);\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//         fetchItems();\r\n//       } else {\r\n//         alert(\"CSV import failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"CSV import error\", err);\r\n//       alert(\"CSV import failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"prices.csv\";\r\n//       a.click();\r\n//       URL.revokeObjectURL(url);\r\n//     } catch (err) {\r\n//       console.error(\"CSV export error\", err);\r\n//       alert(\"CSV export failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleExportSelectedCsv = () => {\r\n//     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"difference\",\r\n//       \"finalPrice\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = selectedData.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.difference ?? \"\",\r\n//       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `selected_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   // -------------------- SEARCH & PAGINATION --------------------\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     return (\r\n//       (item.name || \"\").toString().toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t)\r\n//     );\r\n//   });\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n//   // -------------------- RENDER --------------------\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       {/* HEADER */}\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Product Management</h1>\r\n//         <p>Manage prices, categories, images, CSV & bulk actions.</p>\r\n//       </div>\r\n\r\n//       {/* SEARCH */}\r\n//       <div className=\"search-bar\">\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product, category or subcategory...\"\r\n//           value={search}\r\n//           onChange={(e) => {\r\n//             setSearch(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//         />\r\n//       </div>\r\n\r\n//       {/* BULK BAR */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-bar\">\r\n//           <span>{selectedItems.length} selected</span>\r\n\r\n//           {!bulkMode ? (\r\n//             <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 10 }}>\r\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n\r\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n\r\n\r\n//               <button className=\"btn small\" onClick={handleExportSelectedCsv}>\r\n//                 ‚§ì Export Selected\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div className=\"bulk-panel\">\r\n//               <h3>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} className=\"bulk-edit-item-box\">\r\n//                     <h4>{item.name}</h4>\r\n\r\n//                     <div className=\"form-grid\">\r\n//                       <div className=\"form-group\">\r\n//                         <label>Name</label>\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           value={item.name}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div className=\"form-group\">\r\n//                         <label>Base Price</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.basePrice}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n//                           <div className=\"form-group\">\r\n//   <label>Category</label>\r\n//   <select\r\n//     value={item.category?._id || \"\"}\r\n//     onChange={(e) => {\r\n//       const newCat = e.target.value;\r\n\r\n//       updateLocalItemField(item._id, \"category\", { _id: newCat });\r\n\r\n//       const catObj = categories.find((c) => c._id === newCat);\r\n//       const firstSub = catObj?.subcategories?.[0]?._id || \"\";\r\n\r\n//       updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\r\n//     }}\r\n//   >\r\n//     <option value=\"\">Select Category</option>\r\n//     {categories.map((c) => (\r\n//       <option key={c._id} value={c._id}>\r\n//         {c.name}\r\n//       </option>\r\n//     ))}\r\n//   </select>\r\n// </div>\r\n\r\n// <div className=\"form-group\">\r\n//   <label>Subcategory</label>\r\n//   <select\r\n//     value={item.subcategory?._id || \"\"}\r\n//     onChange={(e) =>\r\n//       updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\r\n//     }\r\n//   >\r\n//     <option value=\"\">Select Subcategory</option>\r\n\r\n//     {categories\r\n//       .find((c) => c._id === item.category?._id)\r\n//       ?.subcategories?.map((s) => (\r\n//         <option key={s._id} value={s._id}>\r\n//           {s.name}\r\n//         </option>\r\n//       ))}\r\n//   </select>\r\n// </div>\r\n//                       <div className=\"form-group\">\r\n//                         <label>Difference</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.difference || 0}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n\r\n//                       {/* <div className=\"form-group\">\r\n//                         <label>Valid Till</label>\r\n//                         <input\r\n//                           type=\"date\"\r\n//                           value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"validTill\", e.target.value)}\r\n//                         />\r\n//                       </div> */}\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n//                 <button className=\"btn primary\" onClick={handleBulkSave}>\r\n//                   ‚úî Save All\r\n//                 </button>\r\n//                 <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n//                   ‚úñ Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* FORM */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{isCopyMode ? \"üìÑ Save Duplicate Product\" : editId ? \"‚úè Update Product\" : \"‚ûï Add Product\"}</h2>\r\n\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             {/* NAME */}\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* CATEGORY */}\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select\r\n//                   required\r\n//                   name=\"category\"\r\n//                   value={form.category}\r\n//                   onChange={(e) => {\r\n//                     handleChange(e);\r\n//                     // reset subcategory on category change (useEffect will set subs)\r\n//                     setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                   }}\r\n//                 >\r\n//                   <option value=\"\">Select Category</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 <button type=\"button\" className=\"btn small\" onClick={() => setAddingCategory((v) => !v)}>\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {/* ADD CATEGORY UI */}\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>Add New Category</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Category name\"\r\n//                   />\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewCategoryImage(e.target.files[0]);\r\n//                       setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                     }}\r\n//                   />\r\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateCategory}>\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//                 {newCategoryPreview && <img src={newCategoryPreview} className=\"categoryPreview\" alt=\"preview\" />}\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* SUBCATEGORY */}\r\n//             <div className=\"form-group\">\r\n//               <label>Subcategory</label>\r\n//               <div className=\"category-row\">\r\n//                 <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length}>\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (\r\n//                     <option value={s._id} key={s._id}>\r\n//                       {s.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 {form.category && (\r\n//                   <button type=\"button\" className=\"btn small\" onClick={() => setAddingSub((v) => !v)}>\r\n//                     {addingSub ? \"Close\" : \"Add\"}\r\n//                   </button>\r\n//                 )}\r\n//               </div>\r\n//             </div>\r\n\r\n//             {/* ADD SUBCATEGORY UI */}\r\n//             {addingSub && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>Add New Subcategory</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" />\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewSubImage(e.target.files[0]);\r\n//                       setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                     }}\r\n//                   />\r\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateSub}>\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//                 {newSubPreview && <img src={newSubPreview} className=\"categoryPreview\" alt=\"preview\" />}\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* BASE PRICE */}\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price *</label>\r\n//               <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* DIFFERENCE */}\r\n//             <div className=\"form-group\">\r\n//               <label>Difference</label>\r\n//               <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* VALID TILL */}\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* IMAGE */}\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* DESCRIPTION */}\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea name=\"description\" value={form.description} onChange={handleChange}></textarea>\r\n//           </div>\r\n\r\n//           {/* ACTIONS */}\r\n//           <div className=\"form-actions\">\r\n//             <button className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : editId ? \"Update\" : \"Add\"}\r\n//             </button>\r\n\r\n//             {(editId || isCopyMode) && (\r\n//               <button\r\n//                 type=\"button\"\r\n//                 className=\"btn cancel\"\r\n//                 onClick={() => {\r\n//                   setEditId(null);\r\n//                   setIsCopyMode(false);\r\n//                   setForm({\r\n//                     name: \"\",\r\n//                     category: \"\",\r\n//                     subcategory: \"\",\r\n//                     description: \"\",\r\n//                     basePrice: \"\",\r\n//                     difference: \"\",\r\n//                     validTill: \"\",\r\n//                     file: null,\r\n//                   });\r\n//                 }}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV CONTROLS */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <div style={{ display: \"flex\", gap: 8 }}>\r\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//             Export All CSV\r\n//           </button>\r\n\r\n//           <button className=\"btn\" onClick={handleExportSelectedCsv}>\r\n//             Export Selected CSV\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* TABLE */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Items</h2>\r\n//           <span>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Sr</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Subcategory</th>\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Status</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td>{item.image ? <img src={item.image} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n//                   <td>{item.name}</td>\r\n//                   <td>{item.category?.name || \"-\"}</td>\r\n//                   <td>{item.subcategory?.name || \"-\"}</td>\r\n\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n//                   <td>{item.difference || 0}</td>\r\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n//                   <td>\r\n//                     <button\r\n//                       className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \" Active\" : \" Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n//                   <td className=\"actions\">\r\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                       Edit\r\n//                     </button>\r\n\r\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                       Delete\r\n//                     </button>\r\n\r\n//                     <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\r\n//                       Copy\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {currentItems.map((item) => (\r\n//               <div key={item._id} className=\"mobile-card\">\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() =>\r\n//                     setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                   }\r\n//                 />\r\n\r\n//                 {item.image ? <img src={item.image} alt=\"\" /> : <div>No Image</div>}\r\n\r\n//                 <h3>{item.name}</h3>\r\n\r\n//                 <p>\r\n//                   <b>Category:</b> {item.category?.name || \"-\"}\r\n//                 </p>\r\n\r\n//                 <p>\r\n//                   <b>Subcategory:</b> {item.subcategory?.name || \"-\"}\r\n//                 </p>\r\n\r\n//                 <p>\r\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\r\n//                 </p>\r\n\r\n//                 <p>\r\n//                   <b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\r\n//                 </p>\r\n\r\n//                 <button className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"} onClick={() => handleStatusToggle(item)}>\r\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                 </button>\r\n\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                     Edit\r\n//                   </button>\r\n\r\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                     Delete\r\n//                   </button>\r\n\r\n//                   <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\r\n//                     Copy\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* PAGINATION */}\r\n//         <div className=\"pagination\">\r\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }, (_, i) => (\r\n//             <button key={i} className={i + 1 === currentPage ? \"active-page\" : \"\"} onClick={() => setCurrentPage(i + 1)}>\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\";\r\n\r\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    difference: \"\",\r\n    validTill: \"\",\r\n    file: null,\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [isCopyMode, setIsCopyMode] = useState(false);\r\n\r\n  const [showForm, setShowForm] = useState(false); // ADD PRODUCT FORM TOGGLE\r\n  const [showPopup, setShowPopup] = useState(false); // EDIT/COPY POPUP\r\n\r\n  // 3 DOT MENU OPEN ROW\r\n  const [openMenuRow, setOpenMenuRow] = useState(null);\r\n\r\n  // ADD CATEGORY UI\r\n  const [addingCategory, setAddingCategory] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n  // ADD SUBCATEGORY UI\r\n  const [addingSub, setAddingSub] = useState(false);\r\n  const [newSubName, setNewSubName] = useState(\"\");\r\n  const [newSubImage, setNewSubImage] = useState(null);\r\n  const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n  // CSV\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const csvInputRef = useRef();\r\n\r\n  // Pagination\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  // FETCH\r\n  useEffect(() => {\r\n    fetchItems();\r\n    fetchCategories();\r\n\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n      if (res.data?.success) setItems(res.data.data || []);\r\n    } catch (err) {\r\n      alert(\"Could not fetch items\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data?.success) setCategories(res.data.categories || []);\r\n    } catch {\r\n      alert(\"Could not fetch categories\");\r\n    }\r\n  };\r\n\r\n  // AUTO LOAD SUBS\r\n  useEffect(() => {\r\n    if (!form.category) {\r\n      setSubcategories([]);\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === form.category);\r\n    const subs = cat?.subcategories || [];\r\n    setSubcategories(subs);\r\n  }, [form.category, categories]);\r\n\r\n  // SUBMIT\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!form.name || !form.category || !form.basePrice) {\r\n        alert(\"Required fields missing\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const fd = new FormData();\r\n      Object.keys(form).forEach((k) => {\r\n        if (form[k] !== undefined && form[k] !== null) fd.append(k, form[k]);\r\n      });\r\n\r\n      if (isCopyMode) {\r\n        await axios.post(API_URL, fd);\r\n        alert(\"Copied as new item\");\r\n      } else if (editId) {\r\n        await axios.put(`${API_URL}/${editId}`, fd);\r\n        alert(\"Updated\");\r\n      } else {\r\n        await axios.post(API_URL, fd);\r\n        alert(\"Added\");\r\n      }\r\n\r\n      fetchItems();\r\n      fetchCategories();\r\n\r\n      resetForm();\r\n      setShowForm(false);\r\n      setShowPopup(false);\r\n    } catch {\r\n      alert(\"Save failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      category: \"\",\r\n      subcategory: \"\",\r\n      description: \"\",\r\n      basePrice: \"\",\r\n      difference: \"\",\r\n      validTill: \"\",\r\n      file: null,\r\n    });\r\n    setEditId(null);\r\n    setIsCopyMode(false);\r\n  };\r\n\r\n  // EDIT POPUP\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id || \"\",\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice ?? \"\",\r\n      difference: item.difference ?? \"\",\r\n      validTill: item.validTill?.split(\"T\")[0] || \"\",\r\n      file: null,\r\n    });\r\n\r\n    setEditId(item._id);\r\n    setIsCopyMode(false);\r\n    setShowPopup(true);\r\n    setOpenMenuRow(null);\r\n  };\r\n\r\n  // COPY POPUP\r\n  const handleCopyToEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id || \"\",\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice ?? \"\",\r\n      difference: item.difference ?? \"\",\r\n      validTill: item.validTill?.split(\"T\")[0] || \"\",\r\n      file: null,\r\n    });\r\n\r\n    setEditId(null);\r\n    setIsCopyMode(true);\r\n    setShowPopup(true);\r\n    setOpenMenuRow(null);\r\n  };\r\n\r\n  // DELETE\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete?\")) return;\r\n\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      setItems((prev) => prev.filter((x) => x._id !== id));\r\n      setOpenMenuRow(null);\r\n    } catch {\r\n      alert(\"Delete failed\");\r\n    }\r\n  };\r\n\r\n  // SEARCH\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n    return (\r\n      item.name?.toLowerCase().includes(t) ||\r\n      item.category?.name?.toLowerCase().includes(t) ||\r\n      item.subcategory?.name?.toLowerCase().includes(t)\r\n    );\r\n  });\r\n\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n\r\n  return (\r\n    <div className=\"price-container\">\r\n\r\n      {/* HEADER */}\r\n      <div className=\"header-section\">\r\n        <h1>üì¶ Products</h1>\r\n\r\n        <button className=\"btn primary add-btn\" onClick={() => setShowForm(!showForm)}>\r\n          {showForm ? \"Close Form\" : \"Add Product\"}\r\n        </button>\r\n      </div>\r\n\r\n      {/* SEARCH */}\r\n      <div className=\"search-bar\">\r\n        <input\r\n          placeholder=\"Search...\"\r\n          value={search}\r\n          onChange={(e) => {\r\n            setSearch(e.target.value);\r\n            setCurrentPage(1);\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* ADD FORM (SLIDE TOGGLE) */}\r\n      {showForm && (\r\n        <div className=\"price-form-card\">\r\n          <h2>‚ûï Add Product</h2>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-grid\">\r\n              <div className=\"form-group\">\r\n                <label>Name *</label>\r\n                <input name=\"name\" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })} />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Category *</label>\r\n                <select\r\n                  name=\"category\"\r\n                  value={form.category}\r\n                  onChange={(e) => setForm({ ...form, category: e.target.value, subcategory: \"\" })}\r\n                >\r\n                  <option value=\"\">Select</option>\r\n                  {categories.map((c) => (\r\n                    <option key={c._id} value={c._id}>{c.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Subcategory</label>\r\n                <select\r\n                  name=\"subcategory\"\r\n                  value={form.subcategory}\r\n                  onChange={(e) => setForm({ ...form, subcategory: e.target.value })}\r\n                >\r\n                  <option value=\"\">Select</option>\r\n                  {subcategories.map((s) => (\r\n                    <option key={s._id} value={s._id}>{s.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Base Price *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"basePrice\"\r\n                  value={form.basePrice}\r\n                  onChange={(e) => setForm({ ...form, basePrice: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Difference</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"difference\"\r\n                  value={form.difference}\r\n                  onChange={(e) => setForm({ ...form, difference: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Valid Till</label>\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"validTill\"\r\n                  value={form.validTill}\r\n                  onChange={(e) => setForm({ ...form, validTill: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Image</label>\r\n                <input type=\"file\" onChange={(e) => setForm({ ...form, file: e.target.files[0] })} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-group full-width\">\r\n              <label>Description</label>\r\n              <textarea value={form.description} onChange={(e) => setForm({ ...form, description: e.target.value })} />\r\n            </div>\r\n\r\n            <button className=\"btn primary\">{loading ? \"Saving...\" : \"Save\"}</button>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* TABLE */}\r\n      <div className=\"table-card\">\r\n        <table className=\"scroll-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Sr</th>\r\n              <th>Img</th>\r\n              <th>Name</th>\r\n              <th>Category</th>\r\n              <th>Subcat</th>\r\n              <th>Base</th>\r\n              <th>Diff</th>\r\n              <th>Final</th>\r\n              <th>Status</th>\r\n              <th>‚ãØ</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {currentItems.map((item, i) => (\r\n              <tr key={item._id}>\r\n                <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n                <td>{item.image ? <img src={item.image} className=\"tbl-img\" /> : \"‚Äî\"}</td>\r\n\r\n                <td>{item.name}</td>\r\n                <td>{item.category?.name}</td>\r\n                <td>{item.subcategory?.name}</td>\r\n                <td>‚Çπ{item.basePrice}</td>\r\n                <td>{item.difference}</td>\r\n                <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n                <td>\r\n                  <button\r\n                    className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\r\n                  >\r\n                    {item.status}\r\n                  </button>\r\n                </td>\r\n\r\n                <td className=\"dot-menu-wrapper\">\r\n                  <div\r\n                    className=\"dots\"\r\n                    onClick={() => setOpenMenuRow(openMenuRow === item._id ? null : item._id)}\r\n                  >\r\n                    ‚ãÆ\r\n                  </div>\r\n\r\n                  {openMenuRow === item._id && (\r\n                    <div className=\"popup-menu\">\r\n                      <p onClick={() => handleEdit(item)}>‚úè Edit</p>\r\n                      <p onClick={() => handleCopyToEdit(item)}>üìÑ Copy</p>\r\n                      <p onClick={() => handleDelete(item._id)}>üóë Delete</p>\r\n                    </div>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* EDIT / COPY POPUP FORM */}\r\n      {showPopup && (\r\n        <div className=\"popup-overlay\">\r\n          <div className=\"popup-card\">\r\n\r\n            <h2>{isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"}</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-grid small-grid\">\r\n\r\n                <div className=\"form-group\">\r\n                  <label>Name</label>\r\n                  <input\r\n                    value={form.name}\r\n                    onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label>Base Price</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={form.basePrice}\r\n                    onChange={(e) => setForm({ ...form, basePrice: e.target.value })}\r\n                  />\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <button className=\"btn primary\">{isCopyMode ? \"Save Copy\" : \"Update\"}</button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn cancel\"\r\n                onClick={() => {\r\n                  setShowPopup(false);\r\n                  resetForm();\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </form>\r\n\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,MAAMC,OAAO,GAAG,+CAA+C;AAC/D,MAAMC,YAAY,GAAG,mDAAmD;AAExE,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACa,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAEtD,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAACiB,MAAM,CAACC,UAAU,GAAG,GAAG,CAAC;EACjE,MAAM,CAACC,MAAM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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}