{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n//   const [editId, setEditId] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [csvFile, setCsvFile] = useState(null);\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const csvInputRef = useRef();\n\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(API_URL);\n//       if (res.data.success) setItems(res.data.data);\n//     } catch (err) {\n//       console.error(\"Error fetching items:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories);\n//     } catch (err) {\n//       console.error(\"Error fetching categories:\", err);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files) setForm({ ...form, file: files[0] });\n//     else setForm({ ...form, [name]: value });\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category, and base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((key) => {\n//         if (form[key]) fd.append(key, form[key]);\n//       });\n\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\n//       else await axios.post(API_URL, fd);\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n//       setEditId(null);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Error saving price:\", err);\n//       alert(\"Failed to save price.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n//     setEditId(item._id);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this item?\")) return;\n//     setLoading(true);\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Error deleting item:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleCancel = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       difference: \"\",\n//       validTill: \"\",\n//       file: null,\n//     });\n//     setEditId(null);\n//   };\n\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n//     try {\n//       const res = await axios.post(CATEGORY_URL, { name: newCategoryName.trim() });\n//       if (res.data.success) {\n//         setNewCategoryName(\"\");\n//         setAddingCategory(false);\n//         fetchCategories();\n//         alert(\"Category added successfully!\");\n//       } else {\n//         alert(res.data.message || \"Failed to add category\");\n//       }\n//     } catch (err) {\n//       console.error(\"Add category error:\", err);\n//       alert(\"Add category failed\");\n//     }\n//   };\n\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Choose a CSV file first\");\n//     const fd = new FormData();\n//     fd.append(\"file\", csvFile);\n//     setLoading(true);\n//     try {\n//       const res = await axios.post(`${API_URL}/import`, fd, {\n//         headers: { \"Content-Type\": \"multipart/form-data\" },\n//       });\n//       if (res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         fetchItems();\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//       } else alert(\"Import failed, check file format\");\n//     } catch (err) {\n//       console.error(\"Import error:\", err);\n//       alert(\"Import failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleExportCsv = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n//       const blob = new Blob([res.data], { type: \"text/csv;charset=utf-8;\" });\n//       const url = window.URL.createObjectURL(blob);\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = `prices_export_${Date.now()}.csv`;\n//       document.body.appendChild(a);\n//       a.click();\n//       a.remove();\n//       window.URL.revokeObjectURL(url);\n//     } catch (err) {\n//       console.error(\"Export error:\", err);\n//       alert(\"Export failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"price-container\">\n//       <div className=\"header-section\">\n//         <h1>üí∞ Price Management</h1>\n//         <p>Manage prices, import/export CSV, and add new categories easily.</p>\n//       </div>\n\n//       {/* Add/Edit Form */}\n//       <div className=\"price-form-card\">\n//         <h2>{editId ? \"‚úèÔ∏è Edit Price\" : \"‚ûï Add New Price\"}</h2>\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Enter name\" required />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select name=\"category\" value={form.category} onChange={handleChange} required>\n//                   <option value=\"\">Select Category</option>\n//                   {categories.map((cat) => (\n//                     <option key={cat._id} value={cat._id}>\n//                       {cat.name}\n//                     </option>\n//                   ))}\n//                 </select>\n//                 <button\n//                   type=\"button\"\n//                   className=\"btn small\"\n//                   onClick={() => setAddingCategory(!addingCategory)}\n//                 >\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {addingCategory && (\n//               <div className=\"form-group full-width\">\n//                 <label>New Category</label>\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Enter new category\"\n//                   />\n//                   <button\n//                     type=\"button\"\n//                     className=\"btn primary\"\n//                     onClick={handleAddCategory}\n//                   >\n//                     Create\n//                   </button>\n//                 </div>\n//               </div>\n//             )}\n\n//             <div className=\"form-group\">\n//               <label>Base Price (‚Çπ) *</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"basePrice\"\n//                 value={form.basePrice}\n//                 onChange={handleChange}\n//                 required\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Difference (‚Çπ)</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"difference\"\n//                 value={form.difference}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input\n//                 type=\"date\"\n//                 name=\"validTill\"\n//                 value={form.validTill}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" name=\"file\" onChange={handleChange} accept=\"image/*\" />\n//             </div>\n//           </div>\n\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea\n//               name=\"description\"\n//               value={form.description}\n//               onChange={handleChange}\n//               placeholder=\"Write product details...\"\n//             />\n//           </div>\n\n//           <div className=\"form-actions\">\n//             <button type=\"submit\" className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : editId ? \"Update Price\" : \"Add Price\"}\n//             </button>\n//             {editId && (\n//               <button type=\"button\" className=\"btn cancel\" onClick={handleCancel}>\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV Section */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input\n//             type=\"file\"\n//             accept=\".csv,text/csv\"\n//             ref={csvInputRef}\n//             onChange={handleCsvSelect}\n//           />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             üì• Import CSV\n//           </button>\n//         </div>\n//         <div>\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\n//             üì§ Export CSV\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* Table + Mobile Card */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Price List</h2>\n//           <span>Total: {items.length}</span>\n//         </div>\n\n//         {loading ? (\n//           <div className=\"loader\">Loading...</div>\n//         ) : items.length === 0 ? (\n//           <p className=\"empty\">No data found</p>\n//         ) : !isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base Price</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {items.map((item) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     {item.image ? (\n//                       <img src={item.image} alt={item.name} />\n//                     ) : (\n//                       <span className=\"no-img\">No Img</span>\n//                     )}\n//                   </td>\n//                   <td>{item.name}</td>\n//                   <td>{item.category?.name || \"N/A\"}</td>\n//                   <td>‚Çπ{item.basePrice}</td>\n//                   <td>{item.difference || 0}</td>\n//                   <td>‚Çπ{item.basePrice + (item.difference || 0)}</td>\n//                   <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n//                       : \"-\"}\n//                   </td>\n//                   <td className=\"actions\">\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                       Edit\n//                     </button>\n//                     <button\n//                       className=\"btn delete\"\n//                       onClick={() => handleDelete(item._id)}\n//                     >\n//                       Delete\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {items.map((item) => (\n//               <div className=\"mobile-card\" key={item._id}>\n//                 {item.image ? (\n//                   <img src={item.image} alt={item.name} />\n//                 ) : (\n//                   <div className=\"no-img\">No Image</div>\n//                 )}\n//                 <h3>{item.name}</h3>\n//                 <p><strong>Category:</strong> {item.category?.name || \"N/A\"}</p>\n//                 <p><strong>Base Price:</strong> ‚Çπ{item.basePrice}</p>\n//                 <p><strong>Difference:</strong> ‚Çπ{item.difference || 0}</p>\n//                 <p><strong>Final:</strong> ‚Çπ{item.basePrice + (item.difference || 0)}</p>\n//                 <p>\n//                   <strong>Valid Till:</strong>{\" \"}\n//                   {item.validTill\n//                     ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n//                     : \"-\"}\n//                 </p>\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                     Edit\n//                   </button>\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                     Delete\n//                   </button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n//   const [editId, setEditId] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [csvFile, setCsvFile] = useState(null);\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkPrice, setBulkPrice] = useState(\"\");\n//   const [bulkMode, setBulkMode] = useState(false);\n//   const csvInputRef = useRef();\n\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(API_URL);\n//       if (res.data.success) setItems(res.data.data);\n//     } catch (err) {\n//       console.error(\"Error fetching items:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories);\n//     } catch (err) {\n//       console.error(\"Error fetching categories:\", err);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files) setForm({ ...form, file: files[0] });\n//     else setForm({ ...form, [name]: value });\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category, and base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((key) => {\n//         if (form[key]) fd.append(key, form[key]);\n//       });\n\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\n//       else await axios.post(API_URL, fd);\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n//       setEditId(null);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Error saving price:\", err);\n//       alert(\"Failed to save price.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n//     setEditId(item._id);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this item?\")) return;\n//     setLoading(true);\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Error deleting item:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleCancel = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       difference: \"\",\n//       validTill: \"\",\n//       file: null,\n//     });\n//     setEditId(null);\n//   };\n\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n//     try {\n//       const res = await axios.post(CATEGORY_URL, { name: newCategoryName.trim() });\n//       if (res.data.success) {\n//         setNewCategoryName(\"\");\n//         setAddingCategory(false);\n//         fetchCategories();\n//         alert(\"Category added successfully!\");\n//       } else {\n//         alert(res.data.message || \"Failed to add category\");\n//       }\n//     } catch (err) {\n//       console.error(\"Add category error:\", err);\n//       alert(\"Add category failed\");\n//     }\n//   };\n\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Choose a CSV file first\");\n//     const fd = new FormData();\n//     fd.append(\"file\", csvFile);\n//     setLoading(true);\n//     try {\n//       const res = await axios.post(`${API_URL}/import`, fd, {\n//         headers: { \"Content-Type\": \"multipart/form-data\" },\n//       });\n//       if (res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         fetchItems();\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//       } else alert(\"Import failed, check file format\");\n//     } catch (err) {\n//       console.error(\"Import error:\", err);\n//       alert(\"Import failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleExportCsv = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n//       const blob = new Blob([res.data], { type: \"text/csv;charset=utf-8;\" });\n//       const url = window.URL.createObjectURL(blob);\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = `prices_export_${Date.now()}.csv`;\n//       document.body.appendChild(a);\n//       a.click();\n//       a.remove();\n//       window.URL.revokeObjectURL(url);\n//     } catch (err) {\n//       console.error(\"Export error:\", err);\n//       alert(\"Export failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // üß© BULK ACTIONS\n//   const toggleSelectAll = () => {\n//     if (selectedItems.length === items.length) setSelectedItems([]);\n//     else setSelectedItems(items.map((i) => i._id));\n//   };\n\n//   const toggleSelectOne = (id) => {\n//     if (selectedItems.includes(id)) {\n//       setSelectedItems(selectedItems.filter((i) => i !== id));\n//     } else {\n//       setSelectedItems([...selectedItems, id]);\n//     }\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (selectedItems.length === 0) return alert(\"No items selected!\");\n//     if (!window.confirm(`Delete ${selectedItems.length} selected items?`)) return;\n\n//     try {\n//       setLoading(true);\n//       for (let id of selectedItems) {\n//         await axios.delete(`${API_URL}/${id}`);\n//       }\n//       alert(\"Bulk delete successful!\");\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk delete error:\", err);\n//       alert(\"Bulk delete failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleBulkPriceUpdate = async () => {\n//     if (selectedItems.length === 0) return alert(\"No items selected!\");\n//     if (!bulkPrice) return alert(\"Enter a new base price\");\n\n//     try {\n//       setLoading(true);\n//       for (let id of selectedItems) {\n//         await axios.put(`${API_URL}/${id}`, { basePrice: Number(bulkPrice) });\n//       }\n//       alert(\"Base prices updated successfully!\");\n//       setSelectedItems([]);\n//       setBulkPrice(\"\");\n//       setBulkMode(false);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk price update error:\", err);\n//       alert(\"Bulk update failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"price-container\">\n//       <div className=\"header-section\">\n//         <h1>üí∞ Price Management</h1>\n//         <p>Manage prices, import/export CSV, and bulk edit/delete.</p>\n//       </div>\n\n//       {/* ===== Bulk Actions ===== */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-bar\">\n//           <span>{selectedItems.length} selected</span>\n//           {!bulkMode ? (\n//             <div className=\"bulk-actions\">\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\n//                 üóëÔ∏è Bulk Delete\n//               </button>\n//               <button\n//                 className=\"btn primary\"\n//                 onClick={() => setBulkMode(true)}\n//               >\n//                 ‚úèÔ∏è Bulk Edit Price\n//               </button>\n//             </div>\n//           ) : (\n//             <div className=\"bulk-actions\">\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Enter new base price\"\n//                 value={bulkPrice}\n//                 onChange={(e) => setBulkPrice(e.target.value)}\n//               />\n//               <button className=\"btn primary\" onClick={handleBulkPriceUpdate}>\n//                 Update\n//               </button>\n//               <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\n//                 Cancel\n//               </button>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* ====== Add/Edit Form ====== */}\n//       {/* Same as your original form */}\n//       {/* Keeping full structure */}\n//       <div className=\"price-form-card\">\n//         <h2>{editId ? \"‚úèÔ∏è Edit Price\" : \"‚ûï Add New Price\"}</h2>\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Enter name\" required />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select name=\"category\" value={form.category} onChange={handleChange} required>\n//                   <option value=\"\">Select Category</option>\n//                   {categories.map((cat) => (\n//                     <option key={cat._id} value={cat._id}>\n//                       {cat.name}\n//                     </option>\n//                   ))}\n//                 </select>\n//                 <button\n//                   type=\"button\"\n//                   className=\"btn small\"\n//                   onClick={() => setAddingCategory(!addingCategory)}\n//                 >\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {addingCategory && (\n//               <div className=\"form-group full-width\">\n//                 <label>New Category</label>\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Enter new category\"\n//                   />\n//                   <button\n//                     type=\"button\"\n//                     className=\"btn primary\"\n//                     onClick={handleAddCategory}\n//                   >\n//                     Create\n//                   </button>\n//                 </div>\n//               </div>\n//             )}\n\n//             <div className=\"form-group\">\n//               <label>Base Price (‚Çπ) *</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"basePrice\"\n//                 value={form.basePrice}\n//                 onChange={handleChange}\n//                 required\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Difference (‚Çπ)</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"difference\"\n//                 value={form.difference}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input\n//                 type=\"date\"\n//                 name=\"validTill\"\n//                 value={form.validTill}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" name=\"file\" onChange={handleChange} accept=\"image/*\" />\n//             </div>\n//           </div>\n\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea\n//               name=\"description\"\n//               value={form.description}\n//               onChange={handleChange}\n//               placeholder=\"Write product details...\"\n//             />\n//           </div>\n\n//           <div className=\"form-actions\">\n//             <button type=\"submit\" className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : editId ? \"Update Price\" : \"Add Price\"}\n//             </button>\n//             {editId && (\n//               <button type=\"button\" className=\"btn cancel\" onClick={handleCancel}>\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* ===== CSV Section ===== */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input\n//             type=\"file\"\n//             accept=\".csv,text/csv\"\n//             ref={csvInputRef}\n//             onChange={handleCsvSelect}\n//           />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             üì• Import CSV\n//           </button>\n//         </div>\n//         <div>\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\n//             üì§ Export CSV\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* ===== Table / Mobile Card ===== */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Price List</h2>\n//           <span>Total: {items.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === items.length}\n//                     onChange={toggleSelectAll}\n//                   />\n//                 </th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base Price</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {items.map((item) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() => toggleSelectOne(item._id)}\n//                     />\n//                   </td>\n//                   <td>\n//                     {item.image ? (\n//                       <img src={item.image} alt={item.name} />\n//                     ) : (\n//                       <span className=\"no-img\">No Img</span>\n//                     )}\n//                   </td>\n//                   <td>{item.name}</td>\n//                   <td>{item.category?.name || \"N/A\"}</td>\n//                   <td>‚Çπ{item.basePrice}</td>\n//                   <td>{item.difference || 0}</td>\n//                   <td>‚Çπ{item.basePrice + (item.difference || 0)}</td>\n//                   <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n//                       : \"-\"}\n//                   </td>\n//                   <td className=\"actions\">\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                       Edit\n//                     </button>\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                       Delete\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {items.map((item) => (\n//               <div className=\"mobile-card\" key={item._id}>\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() => toggleSelectOne(item._id)}\n//                 />\n//                 {item.image ? (\n//                   <img src={item.image} alt={item.name} />\n//                 ) : (\n//                   <div className=\"no-img\">No Image</div>\n//                 )}\n//                 <h3>{item.name}</h3>\n//                 <p><strong>Category:</strong> {item.category?.name || \"N/A\"}</p>\n//                 <p><strong>Base Price:</strong> ‚Çπ{item.basePrice}</p>\n//                 <p><strong>Final:</strong> ‚Çπ{item.basePrice + (item.difference || 0)}</p>\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>Edit</button>\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>Delete</button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [csvFile, setCsvFile] = useState(null);\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkPrice, setBulkPrice] = useState(\"\");\n//   const [bulkMode, setBulkMode] = useState(false);\n//   const csvInputRef = useRef();\n\n//   // Pagination\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 10;\n\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(API_URL);\n//       if (res.data.success) setItems(res.data.data || []);\n//     } catch (err) {\n//       console.error(\"Fetch items error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error:\", err);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files) setForm({ ...form, file: files[0] });\n//     else setForm({ ...form, [name]: value });\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price required\");\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((key) => {\n//         if (form[key]) fd.append(key, form[key]);\n//       });\n\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\n//       else await axios.post(API_URL, fd);\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n\n//       setEditId(null);\n//       setCurrentPage(1);\n//       fetchItems();\n//     } catch (err) {\n//       console.log(\"Save error:\", err);\n//       alert(\"Failed to save\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     setEditId(item._id);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     setLoading(true);\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch (err) {\n//       console.log(\"Delete error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Category name required\");\n//     try {\n//       const res = await axios.post(CATEGORY_URL, { name: newCategoryName });\n//       if (res.data.success) {\n//         setNewCategoryName(\"\");\n//         setAddingCategory(false);\n//         fetchCategories();\n//         alert(\"Category added!\");\n//       }\n//     } catch (err) {\n//       console.log(\"Category error:\", err);\n//     }\n//   };\n\n//   // CSV Import\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Choose CSV file\");\n//     const fd = new FormData();\n//     fd.append(\"file\", csvFile);\n\n//     setLoading(true);\n//     try {\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data.success) {\n//         alert(\"Imported successfully!\");\n//         fetchItems();\n//       }\n//     } catch (err) {\n//       console.log(\"Import error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // Export CSV\n//   const handleExportCsv = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(`${API_URL}/export`, {\n//         responseType: \"blob\",\n//       });\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"prices.csv\";\n//       a.click();\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // Bulk Selection\n//   const toggleSelectAll = () => {\n//     if (selectedItems.length === items.length) setSelectedItems([]);\n//     else setSelectedItems(items.map((i) => i._id));\n//   };\n\n//   const toggleSelectOne = (id) => {\n//     selectedItems.includes(id)\n//       ? setSelectedItems(selectedItems.filter((x) => x !== id))\n//       : setSelectedItems([...selectedItems, id]);\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (selectedItems.length === 0) return;\n//     if (!window.confirm(\"Delete selected?\")) return;\n\n//     setLoading(true);\n//     try {\n//       await Promise.all(\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\n//       );\n//       fetchItems();\n//       setSelectedItems([]);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleBulkPriceUpdate = async () => {\n//     if (!bulkPrice) return alert(\"Enter price\");\n\n//     setLoading(true);\n//     try {\n//       await Promise.all(\n//         selectedItems.map((id) =>\n//           axios.put(`${API_URL}/${id}`, { basePrice: Number(bulkPrice) })\n//         )\n//       );\n//       fetchItems();\n//       setBulkMode(false);\n//       setBulkPrice(\"\");\n//       setSelectedItems([]);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // STATUS TOGGLE ‚Äî (Fixed API)\n//   const handleStatusToggle = async (item) => {\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n\n//     try {\n//       await axios.put(`${API_URL}/status/${item._id}`, {\n//         status: newStatus,\n//       });\n\n//       setItems((prev) =>\n//         prev.map((it) =>\n//           it._id === item._id ? { ...it, status: newStatus } : it\n//         )\n//       );\n//     } catch (err) {\n//       console.log(\"Status error:\", err);\n//     }\n//   };\n\n//   // Pagination Logic\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const indexOfFirst = indexOfLast - itemsPerPage;\n//   const currentItems = items.slice(indexOfFirst, indexOfLast);\n//   const totalPages = Math.ceil(items.length / itemsPerPage);\n\n//   return (\n//     <div className=\"price-container\">\n//       <div className=\"header-section\">\n//         <h1>üí∞ Price Management</h1>\n//         <p>Manage prices, categories, CSV, bulk actions & status toggle.</p>\n//       </div>\n\n//       {/* Bulk Bar */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-bar\">\n//           <span>{selectedItems.length} selected</span>\n\n//           {!bulkMode ? (\n//             <div className=\"bulk-actions\">\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n//             </div>\n//           ) : (\n//             <div className=\"bulk-actions\">\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Enter new price\"\n//                 value={bulkPrice}\n//                 onChange={(e) => setBulkPrice(e.target.value)}\n//               />\n//               <button className=\"btn primary\" onClick={handleBulkPriceUpdate}>\n//                 Update\n//               </button>\n//               <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\n//                 Cancel\n//               </button>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* Add/Edit Form */}\n//       <div className=\"price-form-card\">\n//         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\n\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select\n//                   required\n//                   name=\"category\"\n//                   value={form.category}\n//                   onChange={handleChange}\n//                 >\n//                   <option value=\"\">Select</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 <button\n//                   type=\"button\"\n//                   className=\"btn small\"\n//                   onClick={() => setAddingCategory(!addingCategory)}\n//                 >\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {addingCategory && (\n//               <div className=\"form-group full-width\">\n//                 <label>New Category</label>\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Category name\"\n//                   />\n//                   <button\n//                     type=\"button\"\n//                     className=\"btn primary\"\n//                     onClick={handleAddCategory}\n//                   >\n//                     Create\n//                   </button>\n//                 </div>\n//               </div>\n//             )}\n\n//             <div className=\"form-group\">\n//               <label>Base Price *</label>\n//               <input\n//                 required\n//                 type=\"number\"\n//                 name=\"basePrice\"\n//                 value={form.basePrice}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Difference</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"difference\"\n//                 value={form.difference}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input\n//                 type=\"date\"\n//                 name=\"validTill\"\n//                 value={form.validTill}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n//             </div>\n//           </div>\n\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea\n//               name=\"description\"\n//               value={form.description}\n//               onChange={handleChange}\n//             ></textarea>\n//           </div>\n\n//           <div className=\"form-actions\">\n//             <button className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\n//             </button>\n\n//             {editId && (\n//               <button\n//                 type=\"button\"\n//                 className=\"btn cancel\"\n//                 onClick={() => setEditId(null)}\n//               >\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV Section */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input\n//             type=\"file\"\n//             accept=\".csv\"\n//             ref={csvInputRef}\n//             onChange={handleCsvSelect}\n//           />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\n//           Export CSV\n//         </button>\n//       </div>\n\n//       {/* Table */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Items</h2>\n//           <span>Total: {items.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={\n//                       selectedItems.length === items.length &&\n//                       items.length > 0\n//                     }\n//                     onChange={toggleSelectAll}\n//                   />\n//                 </th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Status</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() => toggleSelectOne(item._id)}\n//                     />\n//                   </td>\n\n//                   <td>\n//                     {item.image ? (\n//                       <img src={item.image} alt={item.name} />\n//                     ) : (\n//                       <span>No Img</span>\n//                     )}\n//                   </td>\n\n//                   <td>{item.name}</td>\n//                   <td>{item.category?.name}</td>\n//                   <td>‚Çπ{item.basePrice}</td>\n//                   <td>{item.difference || 0}</td>\n//                   <td>\n//                     ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\n//                   </td>\n\n//                   <td>\n//                     <button\n//                       className={\n//                         item.status === \"active\"\n//                           ? \"status-active\"\n//                           : \"status-inactive\"\n//                       }\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\"\n//                         ? \"üü¢ Active\"\n//                         : \"üî¥ Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n//                       : \"-\"}\n//                   </td>\n\n//                   <td className=\"actions\">\n//                     <button\n//                       className=\"btn edit\"\n//                       onClick={() => handleEdit(item)}\n//                     >\n//                       Edit\n//                     </button>\n\n//                     <button\n//                       className=\"btn delete\"\n//                       onClick={() => handleDelete(item._id)}\n//                     >\n//                       Delete\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           // Mobile Card View\n//           <div className=\"mobile-list\">\n//             {currentItems.map((item) => (\n//               <div className=\"mobile-card\" key={item._id}>\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() => toggleSelectOne(item._id)}\n//                 />\n\n//                 {item.image ? (\n//                   <img src={item.image} alt={item.name} />\n//                 ) : (\n//                   <div>No Image</div>\n//                 )}\n\n//                 <h3>{item.name}</h3>\n//                 <p>\n//                   <b>Category:</b> {item.category?.name}\n//                 </p>\n//                 <p>\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\n//                 </p>\n//                 <p>\n//                   <b>Final:</b>{\" \"}\n//                   ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\n//                 </p>\n\n//                 <button\n//                   className={\n//                     item.status === \"active\"\n//                       ? \"status-active\"\n//                       : \"status-inactive\"\n//                   }\n//                   onClick={() => handleStatusToggle(item)}\n//                 >\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                 </button>\n\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                     Edit\n//                   </button>\n//                   <button\n//                     className=\"btn delete\"\n//                     onClick={() => handleDelete(item._id)}\n//                   >\n//                     Delete\n//                   </button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* Pagination */}\n//         <div className=\"pagination\">\n//           <button\n//             disabled={currentPage === 1}\n//             onClick={() => setCurrentPage((p) => p - 1)}\n//           >\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }).map((_, i) => (\n//             <button\n//               key={i}\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button\n//             disabled={currentPage === totalPages}\n//             onClick={() => setCurrentPage((p) => p + 1)}\n//           >\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// // import React, { useEffect, useState, useRef } from \"react\";\n// // import axios from \"axios\";\n// // import \"./PriceList.css\";\n\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// // export default function PriceList() {\n// //   const [items, setItems] = useState([]);\n// //   const [categories, setCategories] = useState([]);\n// //   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n\n// //   const [form, setForm] = useState({\n// //     name: \"\",\n// //     category: \"\",\n// //     description: \"\",\n// //     basePrice: \"\",\n// //     difference: \"\",\n// //     validTill: \"\",\n// //     file: null,\n// //   });\n\n// //   const [editId, setEditId] = useState(null);\n// //   const [loading, setLoading] = useState(false);\n// //   const [csvFile, setCsvFile] = useState(null);\n// //   const [addingCategory, setAddingCategory] = useState(false);\n// //   const [newCategoryName, setNewCategoryName] = useState(\"\");\n// //   const [selectedItems, setSelectedItems] = useState([]);\n// //   const [bulkMode, setBulkMode] = useState(false);\n// //   const csvInputRef = useRef();\n\n// //   // Pagination\n// //   const [currentPage, setCurrentPage] = useState(1);\n// //   const itemsPerPage = 10;\n\n// //   // Fetch Items\n// //   useEffect(() => {\n// //     fetchItems();\n// //     fetchCategories();\n// //     const handleResize = () => setIsMobile(window.innerWidth < 768);\n// //     window.addEventListener(\"resize\", handleResize);\n// //     return () => window.removeEventListener(\"resize\", handleResize);\n// //   }, []);\n\n// //   const fetchItems = async () => {\n// //     setLoading(true);\n// //     try {\n// //       const res = await axios.get(API_URL);\n// //       if (res.data.success) setItems(res.data.data || []);\n// //     } catch (err) {\n// //       console.error(\"Fetch items error:\", err);\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   const fetchCategories = async () => {\n// //     try {\n// //       const res = await axios.get(CATEGORY_URL);\n// //       if (res.data.success) setCategories(res.data.categories || []);\n// //     } catch (err) {\n// //       console.error(\"Fetch categories error:\", err);\n// //     }\n// //   };\n\n// //   // Input change\n// //   const handleChange = (e) => {\n// //     const { name, value, files } = e.target;\n// //     if (files) setForm({ ...form, file: files[0] });\n// //     else setForm({ ...form, [name]: value });\n// //   };\n\n// //   // Submit / Update\n// //   const handleSubmit = async (e) => {\n// //     e.preventDefault();\n// //     setLoading(true);\n\n// //     try {\n// //       if (!form.name || !form.category || !form.basePrice) {\n// //         alert(\"Name, category & base price required\");\n// //         return;\n// //       }\n\n// //       const fd = new FormData();\n// //       Object.keys(form).forEach((key) => {\n// //         if (form[key]) fd.append(key, form[key]);\n// //       });\n\n// //       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\n// //       else await axios.post(API_URL, fd);\n\n// //       setForm({\n// //         name: \"\",\n// //         category: \"\",\n// //         description: \"\",\n// //         basePrice: \"\",\n// //         difference: \"\",\n// //         validTill: \"\",\n// //         file: null,\n// //       });\n\n// //       setEditId(null);\n// //       setCurrentPage(1);\n// //       fetchItems();\n// //     } catch (err) {\n// //       alert(\"Failed to save\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // Edit\n// //   const handleEdit = (item) => {\n// //     setForm({\n// //       name: item.name,\n// //       category: item.category?._id || \"\",\n// //       description: item.description || \"\",\n// //       basePrice: item.basePrice,\n// //       difference: item.difference,\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n// //       file: null,\n// //     });\n\n// //     setEditId(item._id);\n// //     window.scrollTo({ top: 0, behavior: \"smooth\" });\n// //   };\n\n// //   // Delete\n// //   const handleDelete = async (id) => {\n// //     if (!window.confirm(\"Delete this item?\")) return;\n// //     setLoading(true);\n// //     try {\n// //       await axios.delete(`${API_URL}/${id}`);\n// //       fetchItems();\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // Add new Category\n// //   const handleAddCategory = async () => {\n// //     if (!newCategoryName.trim()) return alert(\"Category name required\");\n// //     try {\n// //       const res = await axios.post(CATEGORY_URL, { name: newCategoryName });\n// //       if (res.data.success) {\n// //         setNewCategoryName(\"\");\n// //         setAddingCategory(false);\n// //         fetchCategories();\n// //         alert(\"Category added!\");\n// //       }\n// //     } catch (err) {\n// //       console.log(\"Category error:\", err);\n// //     }\n// //   };\n\n// //   // CSV Import\n// //   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n// //   const handleImportCsv = async () => {\n// //     if (!csvFile) return alert(\"Choose CSV file\");\n// //     const fd = new FormData();\n// //     fd.append(\"file\", csvFile);\n\n// //     setLoading(true);\n// //     try {\n// //       const res = await axios.post(`${API_URL}/import`, fd);\n// //       if (res.data.success) {\n// //         alert(\"Imported successfully!\");\n// //         fetchItems();\n// //       }\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // Export CSV\n// //   const handleExportCsv = async () => {\n// //     try {\n// //       setLoading(true);\n// //       const res = await axios.get(`${API_URL}/export`, {\n// //         responseType: \"blob\",\n// //       });\n// //       const url = window.URL.createObjectURL(new Blob([res.data]));\n// //       const a = document.createElement(\"a\");\n// //       a.href = url;\n// //       a.download = \"prices.csv\";\n// //       a.click();\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // Select all items\n// //   const toggleSelectAll = () => {\n// //     if (selectedItems.length === items.length) setSelectedItems([]);\n// //     else setSelectedItems(items.map((i) => i._id));\n// //   };\n\n// //   // Select one\n// //   const toggleSelectOne = (id) => {\n// //     selectedItems.includes(id)\n// //       ? setSelectedItems(selectedItems.filter((x) => x !== id))\n// //       : setSelectedItems([...selectedItems, id]);\n// //   };\n\n// //   // Status toggle\n// //   const handleStatusToggle = async (item) => {\n// //     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n\n// //     try {\n// //       await axios.put(`${API_URL}/status/${item._id}`, {\n// //         status: newStatus,\n// //       });\n\n// //       setItems((prev) =>\n// //         prev.map((it) =>\n// //           it._id === item._id ? { ...it, status: newStatus } : it\n// //         )\n// //       );\n// //     } catch (err) {\n// //       console.log(\"Status error:\", err);\n// //     }\n// //   };\n\n// //   // Pagination Logic\n// //   const indexOfLast = currentPage * itemsPerPage;\n// //   const indexOfFirst = indexOfLast - itemsPerPage;\n// //   const currentItems = items.slice(indexOfFirst, indexOfLast);\n// //   const totalPages = Math.ceil(items.length / itemsPerPage);\n\n// //   return (\n// //     <div className=\"price-container\">\n// //       <div className=\"header-section\">\n// //         <h1>üí∞ Product Management</h1>\n// //         <p>Manage prices, categories, CSV, bulk actions & status toggle.</p>\n// //       </div>\n\n// //       {/* -------------------- BULK EDIT PANEL -------------------- */}\n// //       {selectedItems.length > 0 && (\n// //         <div className=\"bulk-bar\">\n// //           <span>{selectedItems.length} selected</span>\n\n// //           {!bulkMode ? (\n// //             <div className=\"bulk-actions\">\n// //               <button className=\"btn delete\" onClick={async () => {\n// //                 if (!window.confirm(\"Delete selected?\")) return;\n// //                 await Promise.all(\n// //                   selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\n// //                 );\n// //                 fetchItems();\n// //                 setSelectedItems([]);\n// //               }}>\n// //                 üóë Bulk Delete\n// //               </button>\n\n// //               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\n// //                 ‚úè Bulk Edit\n// //               </button>\n// //             </div>\n// //           ) : (\n// //             <div className=\"bulk-edit-panel\">\n// //               <h3>‚úè Bulk Edit Selected Items</h3>\n\n// //               {items\n// //                 .filter((x) => selectedItems.includes(x._id))\n// //                 .map((p) => (\n// //                   <div key={p._id} className=\"bulk-edit-item-box\">\n// //                     <h4>{p.name}</h4>\n\n// //                     <input\n// //                       type=\"text\"\n// //                       placeholder=\"Edit Name\"\n// //                       defaultValue={p.name}\n// //                       onChange={(e) =>\n// //                         setItems((prev) =>\n// //                           prev.map((it) =>\n// //                             it._id === p._id\n// //                               ? { ...it, name: e.target.value }\n// //                               : it\n// //                           )\n// //                         )\n// //                       }\n// //                     />\n\n// //                     <input\n// //                       type=\"number\"\n// //                       placeholder=\"Edit Base Price\"\n// //                       defaultValue={p.basePrice}\n// //                       onChange={(e) =>\n// //                         setItems((prev) =>\n// //                           prev.map((it) =>\n// //                             it._id === p._id\n// //                               ? { ...it, basePrice: Number(e.target.value) }\n// //                               : it\n// //                           )\n// //                         )\n// //                       }\n// //                     />\n\n// //                     <input\n// //                       type=\"number\"\n// //                       placeholder=\"Edit Difference\"\n// //                       defaultValue={p.difference || 0}\n// //                       onChange={(e) =>\n// //                         setItems((prev) =>\n// //                           prev.map((it) =>\n// //                             it._id === p._id\n// //                               ? { ...it, difference: Number(e.target.value) }\n// //                               : it\n// //                           )\n// //                         )\n// //                       }\n// //                     />\n\n// //                     <input\n// //                       type=\"date\"\n// //                       defaultValue={\n// //                         p.validTill ? p.validTill.split(\"T\")[0] : \"\"\n// //                       }\n// //                       onChange={(e) =>\n// //                         setItems((prev) =>\n// //                           prev.map((it) =>\n// //                             it._id === p._id\n// //                               ? { ...it, validTill: e.target.value }\n// //                               : it\n// //                           )\n// //                         )\n// //                       }\n// //                     />\n// //                   </div>\n// //                 ))}\n\n// //               <button\n// //                 className=\"btn primary\"\n// //                 onClick={async () => {\n// //                   const updates = items\n// //                     .filter((x) => selectedItems.includes(x._id))\n// //                     .map((x) => ({\n// //                       id: x._id,\n// //                       name: x.name,\n// //                       basePrice: x.basePrice,\n// //                       difference: x.difference,\n// //                       validTill: x.validTill,\n// //                     }));\n\n// //                   await axios.post(`${API_URL}/bulk-update`, {\n// //                     products: updates,\n// //                   });\n\n// //                   fetchItems();\n// //                   setBulkMode(false);\n// //                   setSelectedItems([]);\n// //                 }}\n// //               >\n// //                 Save Bulk Update\n// //               </button>\n\n// //               <button\n// //                 className=\"btn cancel\"\n// //                 onClick={() => setBulkMode(false)}\n// //               >\n// //                 Cancel\n// //               </button>\n// //             </div>\n// //           )}\n// //         </div>\n// //       )}\n\n// //       {/* -------------------- ADD / EDIT FORM -------------------- */}\n// //       <div className=\"price-form-card\">\n// //         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\n\n// //         <form onSubmit={handleSubmit}>\n// //           <div className=\"form-grid\">\n// //             <div className=\"form-group\">\n// //               <label>Product Name *</label>\n// //               <input required name=\"name\" value={form.name} onChange={handleChange} />\n// //             </div>\n\n// //             <div className=\"form-group\">\n// //               <label>Category *</label>\n// //               <div className=\"category-row\">\n// //                 <select\n// //                   required\n// //                   name=\"category\"\n// //                   value={form.category}\n// //                   onChange={handleChange}\n// //                 >\n// //                   <option value=\"\">Select</option>\n// //                   {categories.map((c) => (\n// //                     <option value={c._id} key={c._id}>\n// //                       {c.name}\n// //                     </option>\n// //                   ))}\n// //                 </select>\n\n// //                 <button\n// //                   type=\"button\"\n// //                   className=\"btn small\"\n// //                   onClick={() => setAddingCategory(!addingCategory)}\n// //                 >\n// //                   {addingCategory ? \"Close\" : \"Add\"}\n// //                 </button>\n// //               </div>\n// //             </div>\n\n// //             {addingCategory && (\n// //               <div className=\"form-group full-width\">\n// //                 <label>New Category</label>\n// //                 <div className=\"category-row\">\n// //                   <input\n// //                     value={newCategoryName}\n// //                     onChange={(e) => setNewCategoryName(e.target.value)}\n// //                     placeholder=\"Category name\"\n// //                   />\n// //                   <button\n// //                     type=\"button\"\n// //                     className=\"btn primary\"\n// //                     onClick={handleAddCategory}\n// //                   >\n// //                     Create\n// //                   </button>\n// //                 </div>\n// //               </div>\n// //             )}\n\n// //             <div className=\"form-group\">\n// //               <label>Base Price *</label>\n// //               <input\n// //                 required\n// //                 type=\"number\"\n// //                 name=\"basePrice\"\n// //                 value={form.basePrice}\n// //                 onChange={handleChange}\n// //               />\n// //             </div>\n\n// //             <div className=\"form-group\">\n// //               <label>Difference</label>\n// //               <input\n// //                 type=\"number\"\n// //                 name=\"difference\"\n// //                 value={form.difference}\n// //                 onChange={handleChange}\n// //               />\n// //             </div>\n\n// //             <div className=\"form-group\">\n// //               <label>Valid Till</label>\n// //               <input\n// //                 type=\"date\"\n// //                 name=\"validTill\"\n// //                 value={form.validTill}\n// //                 onChange={handleChange}\n// //               />\n// //             </div>\n\n// //             <div className=\"form-group\">\n// //               <label>Image</label>\n// //               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n// //             </div>\n// //           </div>\n\n// //           <div className=\"form-group full-width\">\n// //             <label>Description</label>\n// //             <textarea\n// //               name=\"description\"\n// //               value={form.description}\n// //               onChange={handleChange}\n// //             ></textarea>\n// //           </div>\n\n// //           <div className=\"form-actions\">\n// //             <button className=\"btn primary\" disabled={loading}>\n// //               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\n// //             </button>\n\n// //             {editId && (\n// //               <button\n// //                 type=\"button\"\n// //                 className=\"btn cancel\"\n// //                 onClick={() => setEditId(null)}\n// //               >\n// //                 Cancel\n// //               </button>\n// //             )}\n// //           </div>\n// //         </form>\n// //       </div>\n\n// //       {/* -------------------- CSV IMPORT / EXPORT -------------------- */}\n// //       <div className=\"csv-controls\">\n// //         <div>\n// //           <input\n// //             type=\"file\"\n// //             accept=\".csv\"\n// //             ref={csvInputRef}\n// //             onChange={handleCsvSelect}\n// //           />\n// //           <button className=\"btn small\" onClick={handleImportCsv}>\n// //             Import CSV\n// //           </button>\n// //         </div>\n\n// //         <button className=\"btn primary\" onClick={handleExportCsv}>\n// //           Export CSV\n// //         </button>\n// //       </div>\n\n// //       {/* -------------------- MAIN TABLE -------------------- */}\n// //       <div className=\"table-card\">\n// //         <div className=\"table-header\">\n// //           <h2>üìã Items</h2>\n// //           <span>Total: {items.length}</span>\n// //         </div>\n\n// //         {!isMobile ? (\n// //           <table>\n// //             <thead>\n// //               <tr>\n// //                 <th>\n// //                   <input\n// //                     type=\"checkbox\"\n// //                     checked={selectedItems.length === items.length && items.length > 0}\n// //                     onChange={toggleSelectAll}\n// //                   />\n// //                 </th>\n// //                 <th>Sr. No</th>\n// //                 <th>Image</th>\n// //                 <th>Name</th>\n// //                 <th>Category</th>\n// //                 <th>Base</th>\n// //                 <th>Diff</th>\n// //                 <th>Final</th>\n// //                 <th>Status</th>\n// //                 <th>Valid Till</th>\n// //                 <th>Actions</th>\n// //               </tr>\n// //             </thead>\n\n// //             <tbody>\n// //               {currentItems.map((item, index) => (\n// //                 <tr key={item._id}>\n// //                   <td>\n// //                     <input\n// //                       type=\"checkbox\"\n// //                       checked={selectedItems.includes(item._id)}\n// //                       onChange={() => toggleSelectOne(item._id)}\n// //                     />\n// //                   </td>\n\n// //                   <td>{(currentPage - 1) * itemsPerPage + (index + 1)}</td>\n\n// //                   <td>{item.image ? <img src={item.image} alt={item.name} /> : \"No Img\"}</td>\n\n// //                   <td>{item.name}</td>\n\n// //                   <td>{item.category?.name}</td>\n\n// //                   <td>‚Çπ{item.basePrice}</td>\n\n// //                   <td>{item.difference || 0}</td>\n\n// //                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n// //                   <td>\n// //                     <button\n// //                       className={\n// //                         item.status === \"active\" ? \"status-active\" : \"status-inactive\"\n// //                       }\n// //                       onClick={() => handleStatusToggle(item)}\n// //                     >\n// //                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\n// //                     </button>\n// //                   </td>\n\n// //                   <td>\n// //                     {item.validTill\n// //                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n// //                       : \"-\"}\n// //                   </td>\n\n// //                   <td className=\"actions\">\n// //                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n// //                       Edit\n// //                     </button>\n\n// //                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n// //                       Delete\n// //                     </button>\n// //                   </td>\n// //                 </tr>\n// //               ))}\n// //             </tbody>\n// //           </table>\n// //         ) : (\n// //           <div className=\"mobile-list\">\n// //             {currentItems.map((item) => (\n// //               <div className=\"mobile-card\" key={item._id}>\n// //                 <input\n// //                   type=\"checkbox\"\n// //                   checked={selectedItems.includes(item._id)}\n// //                   onChange={() => toggleSelectOne(item._id)}\n// //                 />\n\n// //                 {item.image ? <img src={item.image} alt={item.name} /> : <div>No Image</div>}\n\n// //                 <h3>{item.name}</h3>\n\n// //                 <p><b>Category:</b> {item.category?.name}</p>\n\n// //                 <p><b>Base:</b> ‚Çπ{item.basePrice}</p>\n\n// //                 <p><b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</p>\n\n// //                 <button\n// //                   className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\n// //                   onClick={() => handleStatusToggle(item)}\n// //                 >\n// //                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n// //                 </button>\n\n// //                 <div className=\"actions\">\n// //                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>Edit</button>\n// //                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>Delete</button>\n// //                 </div>\n// //               </div>\n// //             ))}\n// //           </div>\n// //         )}\n\n// //         {/* Pagination */}\n// //         <div className=\"pagination\">\n// //           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n// //             Previous\n// //           </button>\n\n// //           {Array.from({ length: totalPages }).map((_, i) => (\n// //             <button\n// //               key={i}\n// //               className={currentPage === i + 1 ? \"active-page\" : \"\"}\n// //               onClick={() => setCurrentPage(i + 1)}\n// //             >\n// //               {i + 1}\n// //             </button>\n// //           ))}\n\n// //           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n// //             Next\n// //           </button>\n// //         </div>\n// //       </div>\n// //     </div>\n// //   );\n// // }\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [csvFile, setCsvFile] = useState(null);\n\n//   // ADD CATEGORY IMAGE SUPPORT\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n//   const csvInputRef = useRef();\n\n//   // Pagination\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 10;\n\n//   // Fetch Items\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(API_URL);\n//       if (res.data.success) setItems(res.data.data || []);\n//     } catch (err) {\n//       console.error(\"Fetch items error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error:\", err);\n//     }\n//   };\n\n//   // Input change\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files) setForm({ ...form, file: files[0] });\n//     else setForm({ ...form, [name]: value });\n//   };\n\n//   // Submit / Update\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price required\");\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((key) => {\n//         if (form[key]) fd.append(key, form[key]);\n//       });\n\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\n//       else await axios.post(API_URL, fd);\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n\n//       setEditId(null);\n//       setCurrentPage(1);\n//       fetchItems();\n//     } catch (err) {\n//       alert(\"Failed to save\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // Edit\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     setEditId(item._id);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // Delete\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch {}\n//   };\n\n//   // ADD NEW CATEGORY (with Image)\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Category name required\");\n\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newCategoryName);\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//       const res = await axios.post(CATEGORY_URL, fd, {\n//         headers: { \"Content-Type\": \"multipart/form-data\" },\n//       });\n\n//       if (res.data.success) {\n//         setNewCategoryName(\"\");\n//         setNewCategoryImage(null);\n//         setNewCategoryPreview(null);\n//         setAddingCategory(false);\n//         fetchCategories();\n//         alert(\"Category added with image!\");\n//       }\n//     } catch (err) {\n//       console.log(\"Category error:\", err);\n//       alert(\"Failed to add category\");\n//     }\n//   };\n\n//   // CSV Import\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Choose CSV file\");\n//     const fd = new FormData();\n//     fd.append(\"file\", csvFile);\n\n//     setLoading(true);\n//     try {\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data.success) {\n//         alert(\"Imported successfully!\");\n//         fetchItems();\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // Export CSV\n//   const handleExportCsv = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(`${API_URL}/export`, {\n//         responseType: \"blob\",\n//       });\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"prices.csv\";\n//       a.click();\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // Select all items\n//   const toggleSelectAll = () => {\n//     if (selectedItems.length === items.length) setSelectedItems([]);\n//     else setSelectedItems(items.map((i) => i._id));\n//   };\n\n//   // Select one\n//   const toggleSelectOne = (id) => {\n//     selectedItems.includes(id)\n//       ? setSelectedItems(selectedItems.filter((x) => x !== id))\n//       : setSelectedItems([...selectedItems, id]);\n//   };\n\n//   // Status toggle\n//   const handleStatusToggle = async (item) => {\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n\n//     try {\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n\n//       setItems((prev) =>\n//         prev.map((it) =>\n//           it._id === item._id ? { ...it, status: newStatus } : it\n//         )\n//       );\n//     } catch (err) {\n//       console.log(\"Status error:\", err);\n//     }\n//   };\n\n//   // Pagination Logic\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const indexOfFirst = indexOfLast - itemsPerPage;\n//   const currentItems = items.slice(indexOfFirst, indexOfLast);\n//   const totalPages = Math.ceil(items.length / itemsPerPage);\n\n//   return (\n//     <div className=\"price-container\">\n//       <div className=\"header-section\">\n//         <h1>üí∞ Product Management</h1>\n//         <p>Manage prices, categories, CSV, bulk actions & status toggle.</p>\n//       </div>\n\n//       {/* ADD / EDIT PRICE FORM */}\n//       <div className=\"price-form-card\">\n//         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\n\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select\n//                   required\n//                   name=\"category\"\n//                   value={form.category}\n//                   onChange={handleChange}\n//                 >\n//                   <option value=\"\">Select</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 <button\n//                   type=\"button\"\n//                   className=\"btn small\"\n//                   onClick={() => setAddingCategory(!addingCategory)}\n//                 >\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {addingCategory && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>New Category</label>\n\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Category name\"\n//                   />\n\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewCategoryImage(e.target.files[0]);\n//                       setNewCategoryPreview(URL.createObjectURL(e.target.files[0]));\n//                     }}\n//                   />\n\n//                   <button\n//                     type=\"button\"\n//                     className=\"btn primary\"\n//                     onClick={handleAddCategory}\n//                   >\n//                     Create\n//                   </button>\n//                 </div>\n\n//                 {newCategoryPreview && (\n//                   <img src={newCategoryPreview} className=\"categoryPreview\" alt=\"preview\" />\n//                 )}\n//               </div>\n//             )}\n\n//             <div className=\"form-group\">\n//               <label>Base Price *</label>\n//               <input\n//                 required\n//                 type=\"number\"\n//                 name=\"basePrice\"\n//                 value={form.basePrice}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Difference</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"difference\"\n//                 value={form.difference}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input\n//                 type=\"date\"\n//                 name=\"validTill\"\n//                 value={form.validTill}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n//             </div>\n//           </div>\n\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea\n//               name=\"description\"\n//               value={form.description}\n//               onChange={handleChange}\n//             ></textarea>\n//           </div>\n\n//           <div className=\"form-actions\">\n//             <button className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\n//             </button>\n\n//             {editId && (\n//               <button\n//                 type=\"button\"\n//                 className=\"btn cancel\"\n//                 onClick={() => setEditId(null)}\n//               >\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV IMPORT / EXPORT */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input\n//             type=\"file\"\n//             accept=\".csv\"\n//             ref={csvInputRef}\n//             onChange={handleCsvSelect}\n//           />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\n//           Export CSV\n//         </button>\n//       </div>\n\n//       {/* MAIN TABLE */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Items</h2>\n//           <span>Total: {items.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === items.length && items.length > 0}\n//                     onChange={toggleSelectAll}\n//                   />\n//                 </th>\n//                 <th>Sr. No</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Status</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, index) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() => toggleSelectOne(item._id)}\n//                     />\n//                   </td>\n\n//                   <td>{(currentPage - 1) * itemsPerPage + (index + 1)}</td>\n\n//                   <td>{item.image ? <img src={item.image} alt={item.name} /> : \"No Img\"}</td>\n\n//                   <td>{item.name}</td>\n\n//                   <td>{item.category?.name}</td>\n\n//                   <td>‚Çπ{item.basePrice}</td>\n\n//                   <td>{item.difference || 0}</td>\n\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n//                   <td>\n//                     <button\n//                       className={\n//                         item.status === \"active\" ? \"status-active\" : \"status-inactive\"\n//                       }\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n//                       : \"-\"}\n//                   </td>\n\n//                   <td className=\"actions\">\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                       Edit\n//                     </button>\n\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                       Delete\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {currentItems.map((item) => (\n//               <div className=\"mobile-card\" key={item._id}>\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() => toggleSelectOne(item._id)}\n//                 />\n\n//                 {item.image ? <img src={item.image} alt={item.name} /> : <div>No Image</div>}\n\n//                 <h3>{item.name}</h3>\n\n//                 <p><b>Category:</b> {item.category?.name}</p>\n\n//                 <p><b>Base:</b> ‚Çπ{item.basePrice}</p>\n\n//                 <p><b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</p>\n\n//                 <button\n//                   className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\n//                   onClick={() => handleStatusToggle(item)}\n//                 >\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                 </button>\n\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>Edit</button>\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>Delete</button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* Pagination */}\n//         <div className=\"pagination\">\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }).map((_, i) => (\n//             <button\n//               key={i}\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n\n//   const [search, setSearch] = useState(\"\"); // üîç SEARCH STATE\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [csvFile, setCsvFile] = useState(null);\n\n//   // ADD CATEGORY IMAGE SUPPORT\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   // BULK\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const csvInputRef = useRef();\n\n//   // Pagination\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 10;\n\n//   // Fetch Items & Categories\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(API_URL);\n//       if (res.data.success) setItems(res.data.data || []);\n//     } catch (err) {\n//       console.error(\"Fetch items error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error:\", err);\n//     }\n//   };\n\n//   // Input change\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files) setForm({ ...form, file: files[0] });\n//     else setForm({ ...form, [name]: value });\n//   };\n\n//   // Submit / Update\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price required\");\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((key) => {\n//         if (form[key] !== undefined && form[key] !== null && form[key] !== \"\")\n//           fd.append(key, form[key]);\n//       });\n\n//       if (editId) {\n//         await axios.put(`${API_URL}/${editId}`, fd);\n//       } else {\n//         await axios.post(API_URL, fd);\n//       }\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n\n//       setEditId(null);\n//       setCurrentPage(1);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Save error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // Edit\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     setEditId(item._id);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // Delete\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch {}\n//   };\n\n//   // ADD NEW CATEGORY (with Image)\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Category name required\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newCategoryName);\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//       const res = await axios.post(CATEGORY_URL, fd);\n//       if (res.data.success) {\n//         setNewCategoryName(\"\");\n//         setNewCategoryImage(null);\n//         setNewCategoryPreview(null);\n//         setAddingCategory(false);\n//         fetchCategories();\n//         alert(\"Category Added!\");\n//       }\n//     } catch (err) {\n//       console.error(\"Category error:\", err);\n//     }\n//   };\n\n//   // CSV Import\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Choose CSV file\");\n//     const fd = new FormData();\n//     fd.append(\"file\", csvFile);\n\n//     try {\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data.success) fetchItems();\n//       alert(\"Imported!\");\n//     } catch (err) {\n//       console.error(err);\n//     }\n//   };\n\n//   // Export CSV\n//   const handleExportCsv = async () => {\n//     try {\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"prices.csv\";\n//       a.click();\n//     } catch (err) {\n//       console.log(\"Export error:\", err);\n//     }\n//   };\n\n//   // Select All\n//   const toggleSelectAll = () => {\n//     if (selectedItems.length === items.length) setSelectedItems([]);\n//     else setSelectedItems(items.map((i) => i._id));\n//   };\n\n//   // Select One\n//   const toggleSelectOne = (id) => {\n//     selectedItems.includes(id)\n//       ? setSelectedItems(selectedItems.filter((x) => x !== id))\n//       : setSelectedItems([...selectedItems, id]);\n//   };\n\n//   // Status Toggle\n//   const handleStatusToggle = async (item) => {\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//     await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n\n//     setItems((prev) =>\n//       prev.map((it) => (it._id === item._id ? { ...it, status: newStatus } : it))\n//     );\n//   };\n\n//   // BULK DELETE\n//   const handleBulkDelete = async () => {\n//     if (!window.confirm(\"Delete selected?\")) return;\n\n//     await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n//     setSelectedItems([]);\n//     fetchItems();\n//   };\n\n//   // BULK UPDATE\n//   const handleBulkSave = async () => {\n//     const updates = items\n//       .filter((i) => selectedItems.includes(i._id))\n//       .map((i) => ({\n//         id: i._id,\n//         name: i.name,\n//         basePrice: i.basePrice,\n//         difference: i.difference,\n//         validTill: i.validTill,\n//       }));\n\n//     await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//     setBulkMode(false);\n//     setSelectedItems([]);\n//     fetchItems();\n//   };\n\n//   // üîç FILTER LOGIC (Name + Category)\n//   const filteredItems = items.filter((item) => {\n//     const text = search.toLowerCase();\n//     return (\n//       item.name.toLowerCase().includes(text) ||\n//       item.category?.name?.toLowerCase().includes(text)\n//     );\n//   });\n\n//   // Pagination\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const indexOfFirst = indexOfLast - itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfFirst, indexOfLast);\n//   const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\n\n//   const updateLocalItemField = (id, field, value) => {\n//     setItems((prev) => prev.map((it) => (it._id === id ? { ...it, [field]: value } : it)));\n//   };\n\n//   return (\n//     <div className=\"price-container\">\n//       <div className=\"header-section\">\n//         <h1>üí∞ Product Management</h1>\n//         <p>Manage prices, categories, CSV, bulk actions & search.</p>\n//       </div>\n\n//       {/* üîç SEARCH BAR */}\n//       <div className=\"search-bar\">\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search by product or category...\"\n//           value={search}\n//           onChange={(e) => setSearch(e.target.value)}\n//         />\n//       </div>\n// {/* BULK BAR */}\n// {selectedItems.length > 0 && (\n//   <div className=\"bulk-bar\">\n//     <span>{selectedItems.length} selected</span>\n\n//     {!bulkMode ? (\n//       <div className=\"bulk-actions\">\n//         <button className=\"btn delete\" onClick={handleBulkDelete}>\n//           üóë Bulk Delete\n//         </button>\n//         <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\n//           ‚úè Bulk Edit\n//         </button>\n//       </div>\n//     ) : (\n//       <div style={{ width: \"100%\" }}>\n//         <h3 style={{ marginBottom: \"10px\" }}>‚úè Bulk Edit Selected Items</h3>\n\n//         {items\n//           .filter((i) => selectedItems.includes(i._id))\n//           .map((item) => (\n//             <div key={item._id} className=\"bulk-edit-item-box\">\n//               <h4>{item.name}</h4>\n\n//               <div className=\"form-grid\">\n//                 {/* NAME */}\n//                 <div className=\"form-group\">\n//                   <label>Name</label>\n//                   <input\n//                     type=\"text\"\n//                     value={item.name}\n//                     onChange={(e) =>\n//                       updateLocalItemField(item._id, \"name\", e.target.value)\n//                     }\n//                   />\n//                 </div>\n\n//                 {/* BASE PRICE */}\n//                 <div className=\"form-group\">\n//                   <label>Base Price</label>\n//                   <input\n//                     type=\"number\"\n//                     value={item.basePrice}\n//                     onChange={(e) =>\n//                       updateLocalItemField(\n//                         item._id,\n//                         \"basePrice\",\n//                         Number(e.target.value)\n//                       )\n//                     }\n//                   />\n//                 </div>\n\n//                 {/* DIFFERENCE */}\n//                 <div className=\"form-group\">\n//                   <label>Difference</label>\n//                   <input\n//                     type=\"number\"\n//                     value={item.difference || 0}\n//                     onChange={(e) =>\n//                       updateLocalItemField(\n//                         item._id,\n//                         \"difference\",\n//                         Number(e.target.value)\n//                       )\n//                     }\n//                   />\n//                 </div>\n\n//                 {/* VALID TILL */}\n//                 <div className=\"form-group\">\n//                   <label>Valid Till</label>\n//                   <input\n//                     type=\"date\"\n//                     value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\n//                     onChange={(e) =>\n//                       updateLocalItemField(\n//                         item._id,\n//                         \"validTill\",\n//                         e.target.value\n//                       )\n//                     }\n//                   />\n//                 </div>\n//               </div>\n//             </div>\n//           ))}\n\n//         <div style={{ marginTop: \"10px\", display: \"flex\", gap: \"10px\" }}>\n//           <button className=\"btn primary\" onClick={handleBulkSave}>\n//             ‚úî Save All\n//           </button>\n//           <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\n//             ‚úñ Cancel\n//           </button>\n//         </div>\n//       </div>\n//     )}\n//   </div>\n// )}\n\n//       {/* ADD / EDIT PRICE FORM */}\n//       <div className=\"price-form-card\">\n//         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\n\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input\n//                 required\n//                 name=\"name\"\n//                 value={form.name}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select\n//                   required\n//                   name=\"category\"\n//                   value={form.category}\n//                   onChange={handleChange}\n//                 >\n//                   <option value=\"\">Select</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 <button\n//                   type=\"button\"\n//                   className=\"btn small\"\n//                   onClick={() => setAddingCategory(!addingCategory)}\n//                 >\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {addingCategory && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>New Category</label>\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Category name\"\n//                   />\n\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewCategoryImage(e.target.files[0]);\n//                       setNewCategoryPreview(\n//                         e.target.files[0]\n//                           ? URL.createObjectURL(e.target.files[0])\n//                           : null\n//                       );\n//                     }}\n//                   />\n\n//                   <button\n//                     type=\"button\"\n//                     className=\"btn primary\"\n//                     onClick={handleAddCategory}\n//                   >\n//                     Create\n//                   </button>\n//                 </div>\n\n//                 {newCategoryPreview && (\n//                   <img\n//                     src={newCategoryPreview}\n//                     className=\"categoryPreview\"\n//                     alt=\"preview\"\n//                   />\n//                 )}\n//               </div>\n//             )}\n\n//             <div className=\"form-group\">\n//               <label>Base Price *</label>\n//               <input\n//                 required\n//                 type=\"number\"\n//                 name=\"basePrice\"\n//                 value={form.basePrice}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Difference</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"difference\"\n//                 value={form.difference}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input\n//                 type=\"date\"\n//                 name=\"validTill\"\n//                 value={form.validTill}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n//             </div>\n//           </div>\n\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea\n//               name=\"description\"\n//               value={form.description}\n//               onChange={handleChange}\n//             ></textarea>\n//           </div>\n\n//           <div className=\"form-actions\">\n//             <button className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\n//             </button>\n\n//             {editId && (\n//               <button\n//                 type=\"button\"\n//                 className=\"btn cancel\"\n//                 onClick={() => setEditId(null)}\n//               >\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV IMPORT / EXPORT */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\n//           Export CSV\n//         </button>\n//       </div>\n\n//       {/* MAIN TABLE */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Items</h2>\n//           <span>Total: {filteredItems.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={\n//                       selectedItems.length === filteredItems.length &&\n//                       filteredItems.length > 0\n//                     }\n//                     onChange={toggleSelectAll}\n//                   />\n//                 </th>\n//                 <th>Sr. No</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Status</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, index) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() => toggleSelectOne(item._id)}\n//                     />\n//                   </td>\n\n//                   <td>{(currentPage - 1) * itemsPerPage + (index + 1)}</td>\n\n//                   <td>\n//                     {item.image ? (\n//                       <img src={item.image} alt={item.name} />\n//                     ) : (\n//                       <span className=\"no-img\">No Img</span>\n//                     )}\n//                   </td>\n\n//                   <td>{item.name}</td>\n\n//                   <td>{item.category?.name}</td>\n\n//                   <td>‚Çπ{item.basePrice}</td>\n\n//                   <td>{item.difference || 0}</td>\n\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n//                   <td>\n//                     <button\n//                       className={\n//                         item.status === \"active\" ? \"status-active\" : \"status-inactive\"\n//                       }\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\n//                       : \"-\"}\n//                   </td>\n\n//                   <td className=\"actions\">\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                       Edit\n//                     </button>\n\n//                     <button\n//                       className=\"btn delete\"\n//                       onClick={() => handleDelete(item._id)}\n//                     >\n//                       Delete\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {currentItems.map((item) => (\n//               <div className=\"mobile-card\" key={item._id}>\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() => toggleSelectOne(item._id)}\n//                 />\n\n//                 {item.image ? (\n//                   <img src={item.image} alt={item.name} />\n//                 ) : (\n//                   <div>No Image</div>\n//                 )}\n\n//                 <h3>{item.name}</h3>\n\n//                 <p><b>Category:</b> {item.category?.name}</p>\n\n//                 <p><b>Base:</b> ‚Çπ{item.basePrice}</p>\n\n//                 <p><b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</p>\n\n//                 <button\n//                   className={\n//                     item.status === \"active\" ? \"status-active\" : \"status-inactive\"\n//                   }\n//                   onClick={() => handleStatusToggle(item)}\n//                 >\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                 </button>\n\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                     Edit\n//                   </button>\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                     Delete\n//                   </button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* Pagination */}\n//         <div className=\"pagination\">\n//           <button\n//             disabled={currentPage === 1}\n//             onClick={() => setCurrentPage((p) => p - 1)}\n//           >\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }).map((_, i) => (\n//             <button\n//               key={i}\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button\n//             disabled={currentPage === totalPages}\n//             onClick={() => setCurrentPage((p) => p + 1)}\n//           >\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n\n//   const [search, setSearch] = useState(\"\");\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [csvFile, setCsvFile] = useState(null);\n\n//   // COPY MODE\n//   const [isCopyMode, setIsCopyMode] = useState(false);\n\n//   // CATEGORY ADD\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   // BULK\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const csvInputRef = useRef();\n\n//   // PAGINATION\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   // ----------------- FETCH ITEMS -----------------\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL); // Admin API returns ALL items\n//       if (res.data.success) setItems(res.data.data || []);\n//     } catch (err) {\n//       console.log(\"Fetch error\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.log(\"Cat fetch err\", err);\n//     }\n//   };\n//   // ----------------- CREATE CATEGORY -----------------\n// const handleCreateCategory = async () => {\n//   if (!newCategoryName) return alert(\"Enter category name\");\n\n//   try {\n//     const fd = new FormData();\n//     fd.append(\"name\", newCategoryName);\n//     if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//     const res = await axios.post(CATEGORY_URL, fd);\n\n//     if (res.data.success) {\n//       alert(\"Category Created!\");\n\n//       // Reset form\n//       setNewCategoryName(\"\");\n//       setNewCategoryImage(null);\n//       setNewCategoryPreview(null);\n//       setAddingCategory(false);\n\n//       // Refresh list\n//       fetchCategories();\n//     }\n//   } catch (err) {\n//     console.log(\"Category create error\", err);\n//     alert(\"Category create failed\");\n//   }\n// };\n\n//   // ----------------- HANDLE INPUTS -----------------\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files) setForm({ ...form, file: files[0] });\n//     else setForm({ ...form, [name]: value });\n//   };\n\n//   // ----------------- SUBMIT FORM -----------------\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price required\");\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((k) => {\n//         if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\n//       });\n\n//       if (isCopyMode) {\n//         await axios.post(API_URL, fd);\n//         alert(\"Copied as new item!\");\n//       } else if (editId) {\n//         await axios.put(`${API_URL}/${editId}`, fd);\n//       } else {\n//         await axios.post(API_URL, fd);\n//       }\n\n//       // Reset\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n\n//       setEditId(null);\n//       setIsCopyMode(false);\n//       fetchItems();\n//     } catch (err) {\n//       console.log(\"Save error\", err);\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // ----------------- EDIT -----------------\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     setIsCopyMode(false);\n//     setEditId(item._id);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // ----------------- COPY ‚Üí NEW ENTRY -----------------\n//   const handleCopyToEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice,\n//       difference: item.difference,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     setEditId(null);\n//     setIsCopyMode(true);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // ----------------- DELETE -----------------\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       alert(\"Delete failed\");\n//     }\n//   };\n\n//   // ----------------- STATUS TOGGLE -----------------\n//   const handleStatusToggle = async (item) => {\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n\n//     try {\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) =>\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\n//       );\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       alert(\"Status update failed\");\n//     }\n//   };\n\n//   // ----------------- BULK DELETE -----------------\n//   const handleBulkDelete = async () => {\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\n//       );\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n\n//   // ----------------- BULK HELPERS -----------------\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) =>\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\n//     );\n//   };\n\n//   const handleBulkSave = async () => {\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         name: x.name,\n//         basePrice: x.basePrice,\n//         difference: x.difference,\n//         validTill: x.validTill,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       alert(\"Bulk save failed\");\n//     }\n//   };\n\n//   // ----------------- CSV IMPORT -----------------\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Select CSV\");\n\n//     const fd = new FormData();\n//     fd.append(\"file\", csvFile);\n\n//     try {\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data.success) {\n//         fetchItems();\n//         alert(\"CSV Imported!\");\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//       } else {\n//         alert(\"CSV import failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"CSV import error\", err);\n//       alert(\"CSV import failed\");\n//     }\n//   };\n\n//   // ----------------- CSV EXPORT -----------------\n//   const handleExportCsv = async () => {\n//     try {\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"prices.csv\";\n//       a.click();\n//     } catch (err) {\n//       console.error(\"CSV export error\", err);\n//       alert(\"CSV export failed\");\n//     }\n//   };\n\n//   // ----------------- SEARCH FILTER -----------------\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     return (\n//       item.name.toLowerCase().includes(t) ||\n//       item.category?.name?.toLowerCase().includes(t)\n//     );\n//   });\n\n//   // ----------------- PAGINATION -----------------\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(\n//     indexOfLast - itemsPerPage,\n//     indexOfLast\n//   );\n//   const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\n\n//   return (\n//     <div className=\"price-container\">\n\n//       {/* HEADER */}\n//       <div className=\"header-section\">\n//         <h1>üí∞ Product Management</h1>\n//         <p>Manage prices, categories, images, CSV & bulk actions.</p>\n//       </div>\n\n//       {/* SEARCH */}\n//       <div className=\"search-bar\">\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product or category...\"\n//           value={search}\n//           onChange={(e) => setSearch(e.target.value)}\n//         />\n//       </div>\n\n//       {/* BULK BAR */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-bar\">\n//           <span>{selectedItems.length} selected</span>\n\n//           {!bulkMode ? (\n//             <div className=\"bulk-actions\">\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n//             </div>\n//           ) : (\n//             <div className=\"bulk-panel\">\n\n//               <h3>‚úè Bulk Edit Selected Items</h3>\n\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} className=\"bulk-edit-item-box\">\n//                     <h4>{item.name}</h4>\n\n//                     <div className=\"form-grid\">\n\n//                       <div className=\"form-group\">\n//                         <label>Name</label>\n//                         <input\n//                           type=\"text\"\n//                           value={item.name}\n//                           onChange={(e) =>\n//                             updateLocalItemField(\n//                               item._id,\n//                               \"name\",\n//                               e.target.value\n//                             )\n//                           }\n//                         />\n//                       </div>\n\n//                       <div className=\"form-group\">\n//                         <label>Base Price</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.basePrice}\n//                           onChange={(e) =>\n//                             updateLocalItemField(\n//                               item._id,\n//                               \"basePrice\",\n//                               Number(e.target.value)\n//                             )\n//                           }\n//                         />\n//                       </div>\n\n//                       <div className=\"form-group\">\n//                         <label>Difference</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.difference || 0}\n//                           onChange={(e) =>\n//                             updateLocalItemField(\n//                               item._id,\n//                               \"difference\",\n//                               Number(e.target.value)\n//                             )\n//                           }\n//                         />\n//                       </div>\n\n//                       <div className=\"form-group\">\n//                         <label>Valid Till</label>\n//                         <input\n//                           type=\"date\"\n//                           value={\n//                             item.validTill\n//                               ? item.validTill.split(\"T\")[0]\n//                               : \"\"\n//                           }\n//                           onChange={(e) =>\n//                             updateLocalItemField(\n//                               item._id,\n//                               \"validTill\",\n//                               e.target.value\n//                             )\n//                           }\n//                         />\n//                       </div>\n\n//                     </div>\n//                   </div>\n//                 ))}\n\n//               <button className=\"btn primary\" onClick={handleBulkSave}>\n//                 ‚úî Save All\n//               </button>\n\n//               <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\n//                 ‚úñ Cancel\n//               </button>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* ADD / EDIT FORM */}\n//       <div className=\"price-form-card\">\n//         <h2>\n//           {isCopyMode\n//             ? \"üìÑ Save Duplicate Product\"\n//             : editId\n//             ? \"‚úè Upgrade Product\"\n//             : \"‚ûï Add Product\"}\n//         </h2>\n\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input\n//                 required\n//                 name=\"name\"\n//                 value={form.name}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select\n//                   required\n//                   name=\"category\"\n//                   value={form.category}\n//                   onChange={handleChange}\n//                 >\n//                   <option value=\"\">Select</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 <button\n//                   type=\"button\"\n//                   className=\"btn small\"\n//                   onClick={() => setAddingCategory(!addingCategory)}\n//                 >\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {addingCategory && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>New Category</label>\n\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Category name\"\n//                   />\n\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewCategoryImage(e.target.files[0]);\n//                       setNewCategoryPreview(\n//                         e.target.files[0]\n//                           ? URL.createObjectURL(e.target.files[0])\n//                           : null\n//                       );\n//                     }}\n//                   />\n\n//                   <button\n//   className=\"btn primary\"\n//   type=\"button\"\n//   onClick={handleCreateCategory}\n// >\n//   Create\n// </button>\n\n//                 </div>\n\n//                 {newCategoryPreview && (\n//                   <img src={newCategoryPreview} className=\"categoryPreview\" />\n//                 )}\n//               </div>\n//             )}\n\n//             <div className=\"form-group\">\n//               <label>Base Price *</label>\n//               <input\n//                 type=\"number\"\n//                 required\n//                 name=\"basePrice\"\n//                 value={form.basePrice}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Difference</label>\n//               <input\n//                 type=\"number\"\n//                 name=\"difference\"\n//                 value={form.difference}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input\n//                 type=\"date\"\n//                 name=\"validTill\"\n//                 value={form.validTill}\n//                 onChange={handleChange}\n//               />\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n//             </div>\n//           </div>\n\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea\n//               name=\"description\"\n//               value={form.description}\n//               onChange={handleChange}\n//             ></textarea>\n//           </div>\n\n//           <div className=\"form-actions\">\n//             <button className=\"btn primary\" disabled={loading}>\n//               {loading\n//                 ? \"Saving...\"\n//                 : isCopyMode\n//                 ? \"Save Copy\"\n//                 : editId\n//                 ? \"Upgrade\"\n//                 : \"Add\"}\n//             </button>\n\n//             {(editId || isCopyMode) && (\n//               <button\n//                 type=\"button\"\n//                 className=\"btn cancel\"\n//                 onClick={() => {\n//                   setEditId(null);\n//                   setIsCopyMode(false);\n//                 }}\n//               >\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV IMPORT EXPORT */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input\n//             type=\"file\"\n//             accept=\".csv\"\n//             ref={csvInputRef}\n//             onChange={handleCsvSelect}\n//           />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\n//           Export CSV\n//         </button>\n//       </div>\n\n//       {/* TABLE */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Items</h2>\n//           <span>Total: {filteredItems.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={\n//                       selectedItems.length === filteredItems.length &&\n//                       filteredItems.length > 0\n//                     }\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length)\n//                         setSelectedItems([]);\n//                       else\n//                         setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th>Sr</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Status</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         selectedItems.includes(item._id)\n//                           ? setSelectedItems(\n//                               selectedItems.filter((x) => x !== item._id)\n//                             )\n//                           : setSelectedItems([...selectedItems, item._id])\n//                       }\n//                     />\n//                   </td>\n\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td>\n//                     {item.image ? (\n//                       <img src={item.image} alt=\"img\" />\n//                     ) : (\n//                       \"No Img\"\n//                     )}\n//                   </td>\n\n//                   <td>{item.name}</td>\n\n//                   <td>{item.category?.name}</td>\n\n//                   <td>‚Çπ{item.basePrice}</td>\n\n//                   <td>{item.difference || 0}</td>\n\n//                   {/* FINAL PRICE (Admin: always show) */}\n//                   <td>\n//                     ‚Çπ\n//                     {Number(item.basePrice) + Number(item.difference || 0)}\n//                   </td>\n\n//                   <td>\n//                     <button\n//                       className={\n//                         item.status === \"active\"\n//                           ? \"status-active\"\n//                           : \"status-inactive\"\n//                       }\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString()\n//                       : \"-\"}\n//                   </td>\n\n//                   <td className=\"actions\">\n\n//                     <button\n//                       className=\"btn edit\"\n//                       onClick={() => handleEdit(item)}\n//                     >\n//                       Edit\n//                     </button>\n\n//                     <button\n//                       className=\"btn delete\"\n//                       onClick={() => handleDelete(item._id)}\n//                     >\n//                       Delete\n//                     </button>\n\n//                     <button\n//                       className=\"btn small\"\n//                       style={{ background: \"#6f42c1\", color: \"#fff\" }}\n//                       onClick={() => handleCopyToEdit(item)}\n//                     >\n//                       Copy\n//                     </button>\n\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {currentItems.map((item) => (\n//               <div key={item._id} className=\"mobile-card\">\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() =>\n//                     selectedItems.includes(item._id)\n//                       ? setSelectedItems(\n//                           selectedItems.filter((x) => x !== item._id)\n//                         )\n//                       : setSelectedItems([...selectedItems, item._id])\n//                   }\n//                 />\n\n//                 {item.image ? (\n//                   <img src={item.image} alt=\"img\" />\n//                 ) : (\n//                   <div>No Image</div>\n//                 )}\n\n//                 <h3>{item.name}</h3>\n\n//                 <p>\n//                   <b>Category:</b> {item.category?.name}\n//                 </p>\n//                 <p>\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\n//                 </p>\n//                 <p>\n//                   <b>Final:</b> ‚Çπ\n//                   {Number(item.basePrice) + Number(item.difference || 0)}\n//                 </p>\n\n//                 <button\n//                   className={\n//                     item.status === \"active\"\n//                       ? \"status-active\"\n//                       : \"status-inactive\"\n//                   }\n//                   onClick={() => handleStatusToggle(item)}\n//                 >\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                 </button>\n\n//                 <div className=\"actions\">\n//                   <button\n//                     className=\"btn edit\"\n//                     onClick={() => handleEdit(item)}\n//                   >\n//                     Edit\n//                   </button>\n\n//                   <button\n//                     className=\"btn delete\"\n//                     onClick={() => handleDelete(item._id)}\n//                   >\n//                     Delete\n//                   </button>\n\n//                   <button\n//                     className=\"btn small\"\n//                     style={{ background: \"#6f42c1\", color: \"#fff\" }}\n//                     onClick={() => handleCopyToEdit(item)}\n//                   >\n//                     Copy\n//                   </button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* PAGINATION */}\n//         <div className=\"pagination\">\n//           <button\n//             disabled={currentPage === 1}\n//             onClick={() => setCurrentPage((p) => p - 1)}\n//           >\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }).map((_, i) => (\n//             <button\n//               key={i}\n//               className={i + 1 === currentPage ? \"active-page\" : \"\"}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button\n//             disabled={currentPage === totalPages}\n//             onClick={() => setCurrentPage((p) => p + 1)}\n//           >\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n  const [search, setSearch] = useState(\"\");\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    difference: \"\",\n    validTill: \"\",\n    file: null\n  });\n  const [editId, setEditId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [csvFile, setCsvFile] = useState(null);\n\n  // COPY MODE\n  const [isCopyMode, setIsCopyMode] = useState(false);\n\n  // CATEGORY ADD\n  const [addingCategory, setAddingCategory] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n  // SUB CATEGORY ADD\n  const [addingSub, setAddingSub] = useState(false);\n  const [newSubName, setNewSubName] = useState(\"\");\n  const [newSubImage, setNewSubImage] = useState(null);\n  const [newSubPreview, setNewSubPreview] = useState(null);\n\n  // BULK\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [bulkMode, setBulkMode] = useState(false);\n  const csvInputRef = useRef();\n\n  // PAGINATION\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n\n  // ----------------- FETCH ITEMS -----------------\n  useEffect(() => {\n    fetchItems();\n    fetchCategories();\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  const fetchItems = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      if (res.data.success) setItems(res.data.data || []);\n    } catch (err) {\n      console.log(\"Fetch error\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      const res = await axios.get(CATEGORY_URL);\n      if (res.data.success) {\n        setCategories(res.data.categories || []);\n      }\n    } catch (err) {\n      console.log(\"Cat fetch err\", err);\n    }\n  };\n  // ----------------- WHEN CATEGORY SELECT ‚Üí LOAD SUBCATEGORIES -----------------\n  useEffect(() => {\n    if (!form.category) {\n      setSubcategories([]);\n      setForm(prev => ({\n        ...prev,\n        subcategory: \"\"\n      }));\n      return;\n    }\n    const categoryObj = categories.find(c => c._id === form.category);\n    if (categoryObj && categoryObj.subcategories) {\n      setSubcategories(categoryObj.subcategories);\n    } else {\n      setSubcategories([]);\n    }\n    setForm(prev => ({\n      ...prev,\n      subcategory: \"\"\n    }));\n  }, [form.category, categories]);\n\n  // ----------------- CREATE CATEGORY -----------------\n  const handleCreateCategory = async () => {\n    if (!newCategoryName) return alert(\"Enter category name\");\n    try {\n      const fd = new FormData();\n      fd.append(\"name\", newCategoryName);\n      if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n      const res = await axios.post(CATEGORY_URL, fd);\n      if (res.data.success) {\n        alert(\"Category Created!\");\n        setNewCategoryName(\"\");\n        setNewCategoryImage(null);\n        setNewCategoryPreview(null);\n        setAddingCategory(false);\n        fetchCategories();\n      }\n    } catch (err) {\n      console.log(\"Category create error\", err);\n      alert(\"Category create failed\");\n    }\n  };\n\n  // ----------------- CREATE SUB CATEGORY -----------------\n  const handleCreateSub = async () => {\n    if (!newSubName) return alert(\"Enter subcategory name\");\n    if (!form.category) return alert(\"Select category first\");\n    try {\n      const fd = new FormData();\n      fd.append(\"name\", newSubName);\n      if (newSubImage) fd.append(\"image\", newSubImage);\n      const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n      if (res.data.success) {\n        alert(\"Subcategory Created!\");\n        setNewSubName(\"\");\n        setNewSubImage(null);\n        setNewSubPreview(null);\n        setAddingSub(false);\n        fetchCategories();\n      }\n    } catch (err) {\n      console.log(\"Subcategory create error\", err);\n      alert(\"Subcategory create failed\");\n    }\n  };\n\n  // ----------------- HANDLE INPUTS -----------------\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (files) setForm({\n      ...form,\n      file: files[0]\n    });else setForm({\n      ...form,\n      [name]: value\n    });\n  };\n\n  // ----------------- SUBMIT FORM -----------------\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (!form.name || !form.category || !form.basePrice) {\n        alert(\"Name, category & base price required\");\n        return;\n      }\n      const fd = new FormData();\n      Object.keys(form).forEach(k => {\n        if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\n      });\n      if (isCopyMode) {\n        await axios.post(API_URL, fd);\n        alert(\"Copied as new item!\");\n      } else if (editId) {\n        await axios.put(`${API_URL}/${editId}`, fd);\n      } else {\n        await axios.post(API_URL, fd);\n      }\n      setForm({\n        name: \"\",\n        category: \"\",\n        subcategory: \"\",\n        description: \"\",\n        basePrice: \"\",\n        difference: \"\",\n        validTill: \"\",\n        file: null\n      });\n      setEditId(null);\n      setIsCopyMode(false);\n      fetchItems();\n    } catch (err) {\n      console.log(\"Save error\", err);\n      alert(\"Save failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ----------------- EDIT -----------------\n  const handleEdit = item => {\n    var _item$category, _item$category$_id, _item$subcategory, _item$subcategory$_id;\n    setForm({\n      name: item.name,\n      category: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : (_item$category$_id = _item$category._id) === null || _item$category$_id === void 0 ? void 0 : _item$category$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : (_item$subcategory$_id = _item$subcategory._id) === null || _item$subcategory$_id === void 0 ? void 0 : _item$subcategory$_id.toString()) || \"\",\n      description: item.description || \"\",\n      basePrice: item.basePrice,\n      difference: item.difference,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null\n    });\n    setIsCopyMode(false);\n    setEditId(item._id);\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n\n  // ----------------- COPY ‚Üí NEW ENTRY -----------------\n  const handleCopyToEdit = item => {\n    var _item$category2, _item$category2$_id, _item$subcategory2, _item$subcategory2$_i;\n    setForm({\n      name: item.name,\n      category: ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : (_item$category2$_id = _item$category2._id) === null || _item$category2$_id === void 0 ? void 0 : _item$category2$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : (_item$subcategory2$_i = _item$subcategory2._id) === null || _item$subcategory2$_i === void 0 ? void 0 : _item$subcategory2$_i.toString()) || \"\",\n      description: item.description || \"\",\n      basePrice: item.basePrice,\n      difference: item.difference,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null\n    });\n    setEditId(null);\n    setIsCopyMode(true);\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n  // ----------------- DELETE -----------------\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete?\")) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`);\n      fetchItems();\n    } catch (err) {\n      console.error(\"Delete error\", err);\n      alert(\"Delete failed\");\n    }\n  };\n\n  // ----------------- STATUS TOGGLE -----------------\n  const handleStatusToggle = async item => {\n    const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n    try {\n      await axios.put(`${API_URL}/status/${item._id}`, {\n        status: newStatus\n      });\n      setItems(prev => prev.map(x => x._id === item._id ? {\n        ...x,\n        status: newStatus\n      } : x));\n    } catch (err) {\n      console.error(\"Status toggle error\", err);\n      alert(\"Status update failed\");\n    }\n  };\n\n  // ----------------- BULK DELETE -----------------\n  const handleBulkDelete = async () => {\n    if (!window.confirm(\"Delete selected items?\")) return;\n    try {\n      await Promise.all(selectedItems.map(id => axios.delete(`${API_URL}/${id}`)));\n      setSelectedItems([]);\n      fetchItems();\n    } catch (err) {\n      console.error(\"Bulk delete error\", err);\n      alert(\"Bulk delete failed\");\n    }\n  };\n\n  // ----------------- BULK HELPERS -----------------\n  const updateLocalItemField = (id, key, value) => {\n    setItems(prev => prev.map(x => x._id === id ? {\n      ...x,\n      [key]: value\n    } : x));\n  };\n  const handleBulkSave = async () => {\n    const updates = items.filter(x => selectedItems.includes(x._id)).map(x => ({\n      id: x._id,\n      name: x.name,\n      basePrice: x.basePrice,\n      difference: x.difference,\n      validTill: x.validTill\n    }));\n    try {\n      await axios.post(`${API_URL}/bulk-update`, {\n        products: updates\n      });\n      setBulkMode(false);\n      setSelectedItems([]);\n      fetchItems();\n    } catch (err) {\n      console.error(\"Bulk save error\", err);\n      alert(\"Bulk save failed\");\n    }\n  };\n\n  // ----------------- CSV IMPORT -----------------\n  const handleCsvSelect = e => setCsvFile(e.target.files[0]);\n  const handleImportCsv = async () => {\n    if (!csvFile) return alert(\"Select CSV\");\n    const fd = new FormData();\n    fd.append(\"file\", csvFile);\n    try {\n      const res = await axios.post(`${API_URL}/import`, fd);\n      if (res.data.success) {\n        fetchItems();\n        alert(\"CSV Imported!\");\n        setCsvFile(null);\n        if (csvInputRef.current) csvInputRef.current.value = null;\n      } else {\n        alert(\"CSV import failed\");\n      }\n    } catch (err) {\n      console.error(\"CSV import error\", err);\n      alert(\"CSV import failed\");\n    }\n  };\n\n  // ----------------- CSV EXPORT -----------------\n  const handleExportCsv = async () => {\n    try {\n      const res = await axios.get(`${API_URL}/export`, {\n        responseType: \"blob\"\n      });\n      const url = window.URL.createObjectURL(new Blob([res.data]));\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = \"prices.csv\";\n      a.click();\n    } catch (err) {\n      console.error(\"CSV export error\", err);\n      alert(\"CSV export failed\");\n    }\n  };\n\n  // ----------------- SEARCH FILTER -----------------\n  const filteredItems = items.filter(item => {\n    var _item$category3, _item$category3$name, _item$subcategory3, _item$subcategory3$na;\n    const t = search.toLowerCase();\n    return item.name.toLowerCase().includes(t) || ((_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : (_item$category3$name = _item$category3.name) === null || _item$category3$name === void 0 ? void 0 : _item$category3$name.toLowerCase().includes(t)) || ((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : (_item$subcategory3$na = _item$subcategory3.name) === null || _item$subcategory3$na === void 0 ? void 0 : _item$subcategory3$na.toLowerCase().includes(t));\n  });\n\n  // ----------------- PAGINATION -----------------\n  const indexOfLast = currentPage * itemsPerPage;\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n  const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"price-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCB0 Product Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4799,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Manage prices, categories, images, CSV & bulk actions.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4800,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4798,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search product, category or subcategory...\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4805,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4804,\n      columnNumber: 7\n    }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bulk-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [selectedItems.length, \" selected\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4816,\n        columnNumber: 11\n      }, this), !bulkMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn delete\",\n          onClick: handleBulkDelete,\n          children: \"\\uD83D\\uDDD1 Bulk Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4820,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary\",\n          onClick: () => setBulkMode(true),\n          children: \"\\u270F Bulk Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4824,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4819,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u270F Bulk Edit Selected Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4830,\n          columnNumber: 15\n        }, this), items.filter(item => selectedItems.includes(item._id)).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bulk-edit-item-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4836,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4840,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: item.name,\n                onChange: e => updateLocalItemField(item._id, \"name\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4841,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4839,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Base Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4851,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: item.basePrice,\n                onChange: e => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4852,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4850,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Difference\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4866,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: item.difference || 0,\n                onChange: e => updateLocalItemField(item._id, \"difference\", Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4867,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4865,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Valid Till\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4881,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n                onChange: e => updateLocalItemField(item._id, \"validTill\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4882,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4880,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4838,\n            columnNumber: 21\n          }, this)]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4835,\n          columnNumber: 19\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary\",\n          onClick: handleBulkSave,\n          children: \"\\u2714 Save All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4898,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn cancel\",\n          onClick: () => setBulkMode(false),\n          children: \"\\u2716 Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4902,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4829,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4815,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price-form-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: isCopyMode ? \"üìÑ Save Duplicate Product\" : editId ? \"‚úè Update Product\" : \"‚ûï Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4912,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4925,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              name: \"name\",\n              value: form.name,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4926,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4924,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4936,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                required: true,\n                name: \"category\",\n                value: form.category,\n                onChange: handleChange,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4944,\n                  columnNumber: 19\n                }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c._id,\n                  children: c.name\n                }, c._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4946,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4938,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn small\",\n                onClick: () => setAddingCategory(!addingCategory),\n                children: addingCategory ? \"Close\" : \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4952,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4937,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4935,\n            columnNumber: 13\n          }, this), addingCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group full-width addCategoryBox\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Add New Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4965,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: newCategoryName,\n                onChange: e => setNewCategoryName(e.target.value),\n                placeholder: \"Category name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4968,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  setNewCategoryImage(e.target.files[0]);\n                  setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4974,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                type: \"button\",\n                onClick: handleCreateCategory,\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4987,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4967,\n              columnNumber: 17\n            }, this), newCategoryPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: newCategoryPreview,\n              className: \"categoryPreview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4993,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4964,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5000,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"subcategory\",\n                value: form.subcategory,\n                onChange: handleChange,\n                disabled: !subcategories.length,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5008,\n                  columnNumber: 19\n                }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: s._id,\n                  children: s.name\n                }, s._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5010,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5002,\n                columnNumber: 17\n              }, this), form.category && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn small\",\n                onClick: () => setAddingSub(!addingSub),\n                children: addingSub ? \"Close\" : \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5017,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5001,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4999,\n            columnNumber: 13\n          }, this), addingSub && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group full-width addCategoryBox\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Add New Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5031,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: newSubName,\n                onChange: e => setNewSubName(e.target.value),\n                placeholder: \"Subcategory name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5034,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  setNewSubImage(e.target.files[0]);\n                  setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5040,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                type: \"button\",\n                onClick: handleCreateSub,\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5053,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5033,\n              columnNumber: 17\n            }, this), newSubPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: newSubPreview,\n              className: \"categoryPreview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5059,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5030,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Base Price *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5066,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              required: true,\n              name: \"basePrice\",\n              value: form.basePrice,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5067,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5065,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Difference\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5078,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"difference\",\n              value: form.difference,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5079,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5077,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Valid Till\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5089,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"validTill\",\n              value: form.validTill,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5090,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5088,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5101,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5099,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4921,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group full-width\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn primary\",\n            disabled: loading,\n            children: loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : editId ? \"Update\" : \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5117,\n            columnNumber: 13\n          }, this), (editId || isCopyMode) && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn cancel\",\n            onClick: () => {\n              setEditId(null);\n              setIsCopyMode(false);\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4920,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4911,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"csv-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".csv\",\n          ref: csvInputRef,\n          onChange: handleCsvSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn small\",\n          onClick: handleImportCsv,\n          children: \"Import CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn primary\",\n        onClick: handleExportCsv,\n        children: \"Export CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDCCB Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Total: \", filteredItems.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5164,\n        columnNumber: 9\n      }, this), !isMobile ? /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: selectedItems.length === filteredItems.length && filteredItems.length > 0,\n                onChange: () => {\n                  if (selectedItems.length === filteredItems.length) setSelectedItems([]);else setSelectedItems(filteredItems.map(x => x._id));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5174,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5173,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Sr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Base\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5193,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Diff\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5194,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Final\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5195,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5196,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Valid Till\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5198,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5172,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5171,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: currentItems.map((item, i) => {\n            var _item$category4, _item$subcategory4;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedItems.includes(item._id),\n                  onChange: () => selectedItems.includes(item._id) ? setSelectedItems(selectedItems.filter(x => x !== item._id)) : setSelectedItems([...selectedItems, item._id])\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5206,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5205,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: (currentPage - 1) * itemsPerPage + (i + 1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image,\n                  alt: \"img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5219,\n                  columnNumber: 37\n                }, this) : \"No Img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5219,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: (_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : _item$category4.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5223,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4.name) || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5225,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"\\u20B9\", item.basePrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.difference || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5229,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"\\u20B9\", Number(item.basePrice) + Number(item.difference || 0)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: item.status === \"active\" ? \"status-active\" : \"status-inactive\",\n                  onClick: () => handleStatusToggle(item),\n                  children: item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5234,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5244,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn edit\",\n                  onClick: () => handleEdit(item),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5251,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn delete\",\n                  onClick: () => handleDelete(item._id),\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5255,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn small\",\n                  style: {\n                    background: \"#6f42c1\",\n                    color: \"#fff\"\n                  },\n                  onClick: () => handleCopyToEdit(item),\n                  children: \"Copy\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5259,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5250,\n                columnNumber: 19\n              }, this)]\n            }, item._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5204,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5170,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-list\",\n        children: currentItems.map(item => {\n          var _item$category5, _item$subcategory5;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mobile-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: selectedItems.includes(item._id),\n              onChange: () => selectedItems.includes(item._id) ? setSelectedItems(selectedItems.filter(x => x !== item._id)) : setSelectedItems([...selectedItems, item._id])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5275,\n              columnNumber: 17\n            }, this), item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image,\n              alt: \"img\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5286,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"No Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5288,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Category:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5294,\n                columnNumber: 19\n              }, this), \" \", (_item$category5 = item.category) === null || _item$category5 === void 0 ? void 0 : _item$category5.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5293,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Subcategory:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5298,\n                columnNumber: 19\n              }, this), \" \", ((_item$subcategory5 = item.subcategory) === null || _item$subcategory5 === void 0 ? void 0 : _item$subcategory5.name) || \"-\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5297,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Base:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5302,\n                columnNumber: 19\n              }, this), \" \\u20B9\", item.basePrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5301,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Final:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5306,\n                columnNumber: 19\n              }, this), \" \\u20B9\", Number(item.basePrice) + Number(item.difference || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5305,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: item.status === \"active\" ? \"status-active\" : \"status-inactive\",\n              onClick: () => handleStatusToggle(item),\n              children: item.status === \"active\" ? \"Active\" : \"Inactive\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5310,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn edit\",\n                onClick: () => handleEdit(item),\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn delete\",\n                onClick: () => handleDelete(item._id),\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5324,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn small\",\n                style: {\n                  background: \"#6f42c1\",\n                  color: \"#fff\"\n                },\n                onClick: () => handleCopyToEdit(item),\n                children: \"Copy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5328,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5319,\n              columnNumber: 17\n            }, this)]\n          }, item._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5274,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5272,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: currentPage === 1,\n          onClick: () => setCurrentPage(p => p - 1),\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5343,\n          columnNumber: 11\n        }, this), Array.from({\n          length: totalPages\n        }).map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: i + 1 === currentPage ? \"active-page\" : \"\",\n          onClick: () => setCurrentPage(i + 1),\n          children: i + 1\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5351,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: currentPage === totalPages,\n          onClick: () => setCurrentPage(p => p + 1),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5360,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 4795,\n    columnNumber: 5\n  }, this);\n}\n_s(PriceList, \"DDEUHig5MNSyCljswvt59Zj56xc=\");\n_c = PriceList;\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsxDEV","_jsxDEV","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","isMobile","setIsMobile","window","innerWidth","search","setSearch","form","setForm","name","category","subcategory","description","basePrice","difference","validTill","file","editId","setEditId","loading","setLoading","csvFile","setCsvFile","isCopyMode","setIsCopyMode","addingCategory","setAddingCategory","newCategoryName","setNewCategoryName","newCategoryImage","setNewCategoryImage","newCategoryPreview","setNewCategoryPreview","addingSub","setAddingSub","newSubName","setNewSubName","newSubImage","setNewSubImage","newSubPreview","setNewSubPreview","selectedItems","setSelectedItems","bulkMode","setBulkMode","csvInputRef","currentPage","setCurrentPage","itemsPerPage","fetchItems","fetchCategories","handleResize","addEventListener","removeEventListener","res","get","data","success","err","console","log","prev","categoryObj","find","c","_id","handleCreateCategory","alert","fd","FormData","append","post","handleCreateSub","handleChange","e","value","files","target","handleSubmit","preventDefault","Object","keys","forEach","k","put","handleEdit","item","_item$category","_item$category$_id","_item$subcategory","_item$subcategory$_id","toString","split","scrollTo","top","behavior","handleCopyToEdit","_item$category2","_item$category2$_id","_item$subcategory2","_item$subcategory2$_i","handleDelete","id","confirm","delete","error","handleStatusToggle","newStatus","status","map","x","handleBulkDelete","Promise","all","updateLocalItemField","key","handleBulkSave","updates","filter","includes","products","handleCsvSelect","handleImportCsv","current","handleExportCsv","responseType","url","URL","createObjectURL","Blob","a","document","createElement","href","download","click","filteredItems","_item$category3","_item$category3$name","_item$subcategory3","_item$subcategory3$na","t","toLowerCase","indexOfLast","currentItems","slice","totalPages","Math","ceil","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","Number","onSubmit","required","accept","src","disabled","s","ref","checked","i","_item$category4","_item$subcategory4","image","alt","Date","toLocaleDateString","style","background","color","_item$category5","_item$subcategory5","p","Array","from","_","_c","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const csvInputRef = useRef();\r\n\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data.success) setItems(res.data.data);\r\n//     } catch (err) {\r\n//       console.error(\"Error fetching items:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories);\r\n//     } catch (err) {\r\n//       console.error(\"Error fetching categories:\", err);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files) setForm({ ...form, file: files[0] });\r\n//     else setForm({ ...form, [name]: value });\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category, and base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((key) => {\r\n//         if (form[key]) fd.append(key, form[key]);\r\n//       });\r\n\r\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\r\n//       else await axios.post(API_URL, fd);\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n//       setEditId(null);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Error saving price:\", err);\r\n//       alert(\"Failed to save price.\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n//     setEditId(item._id);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Are you sure you want to delete this item?\")) return;\r\n//     setLoading(true);\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Error deleting item:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleCancel = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       difference: \"\",\r\n//       validTill: \"\",\r\n//       file: null,\r\n//     });\r\n//     setEditId(null);\r\n//   };\r\n\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n//     try {\r\n//       const res = await axios.post(CATEGORY_URL, { name: newCategoryName.trim() });\r\n//       if (res.data.success) {\r\n//         setNewCategoryName(\"\");\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//         alert(\"Category added successfully!\");\r\n//       } else {\r\n//         alert(res.data.message || \"Failed to add category\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Add category error:\", err);\r\n//       alert(\"Add category failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Choose a CSV file first\");\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", csvFile);\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/import`, fd, {\r\n//         headers: { \"Content-Type\": \"multipart/form-data\" },\r\n//       });\r\n//       if (res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         fetchItems();\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//       } else alert(\"Import failed, check file format\");\r\n//     } catch (err) {\r\n//       console.error(\"Import error:\", err);\r\n//       alert(\"Import failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n//       const blob = new Blob([res.data], { type: \"text/csv;charset=utf-8;\" });\r\n//       const url = window.URL.createObjectURL(blob);\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = `prices_export_${Date.now()}.csv`;\r\n//       document.body.appendChild(a);\r\n//       a.click();\r\n//       a.remove();\r\n//       window.URL.revokeObjectURL(url);\r\n//     } catch (err) {\r\n//       console.error(\"Export error:\", err);\r\n//       alert(\"Export failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Price Management</h1>\r\n//         <p>Manage prices, import/export CSV, and add new categories easily.</p>\r\n//       </div>\r\n\r\n//       {/* Add/Edit Form */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{editId ? \"‚úèÔ∏è Edit Price\" : \"‚ûï Add New Price\"}</h2>\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Enter name\" required />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select name=\"category\" value={form.category} onChange={handleChange} required>\r\n//                   <option value=\"\">Select Category</option>\r\n//                   {categories.map((cat) => (\r\n//                     <option key={cat._id} value={cat._id}>\r\n//                       {cat.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   className=\"btn small\"\r\n//                   onClick={() => setAddingCategory(!addingCategory)}\r\n//                 >\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width\">\r\n//                 <label>New Category</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Enter new category\"\r\n//                   />\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     className=\"btn primary\"\r\n//                     onClick={handleAddCategory}\r\n//                   >\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price (‚Çπ) *</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"basePrice\"\r\n//                 value={form.basePrice}\r\n//                 onChange={handleChange}\r\n//                 required\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Difference (‚Çπ)</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"difference\"\r\n//                 value={form.difference}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input\r\n//                 type=\"date\"\r\n//                 name=\"validTill\"\r\n//                 value={form.validTill}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" name=\"file\" onChange={handleChange} accept=\"image/*\" />\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea\r\n//               name=\"description\"\r\n//               value={form.description}\r\n//               onChange={handleChange}\r\n//               placeholder=\"Write product details...\"\r\n//             />\r\n//           </div>\r\n\r\n//           <div className=\"form-actions\">\r\n//             <button type=\"submit\" className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : editId ? \"Update Price\" : \"Add Price\"}\r\n//             </button>\r\n//             {editId && (\r\n//               <button type=\"button\" className=\"btn cancel\" onClick={handleCancel}>\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV Section */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\".csv,text/csv\"\r\n//             ref={csvInputRef}\r\n//             onChange={handleCsvSelect}\r\n//           />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             üì• Import CSV\r\n//           </button>\r\n//         </div>\r\n//         <div>\r\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//             üì§ Export CSV\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Table + Mobile Card */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Price List</h2>\r\n//           <span>Total: {items.length}</span>\r\n//         </div>\r\n\r\n//         {loading ? (\r\n//           <div className=\"loader\">Loading...</div>\r\n//         ) : items.length === 0 ? (\r\n//           <p className=\"empty\">No data found</p>\r\n//         ) : !isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base Price</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {items.map((item) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     {item.image ? (\r\n//                       <img src={item.image} alt={item.name} />\r\n//                     ) : (\r\n//                       <span className=\"no-img\">No Img</span>\r\n//                     )}\r\n//                   </td>\r\n//                   <td>{item.name}</td>\r\n//                   <td>{item.category?.name || \"N/A\"}</td>\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n//                   <td>{item.difference || 0}</td>\r\n//                   <td>‚Çπ{item.basePrice + (item.difference || 0)}</td>\r\n//                   <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n//                       : \"-\"}\r\n//                   </td>\r\n//                   <td className=\"actions\">\r\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                       Edit\r\n//                     </button>\r\n//                     <button\r\n//                       className=\"btn delete\"\r\n//                       onClick={() => handleDelete(item._id)}\r\n//                     >\r\n//                       Delete\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {items.map((item) => (\r\n//               <div className=\"mobile-card\" key={item._id}>\r\n//                 {item.image ? (\r\n//                   <img src={item.image} alt={item.name} />\r\n//                 ) : (\r\n//                   <div className=\"no-img\">No Image</div>\r\n//                 )}\r\n//                 <h3>{item.name}</h3>\r\n//                 <p><strong>Category:</strong> {item.category?.name || \"N/A\"}</p>\r\n//                 <p><strong>Base Price:</strong> ‚Çπ{item.basePrice}</p>\r\n//                 <p><strong>Difference:</strong> ‚Çπ{item.difference || 0}</p>\r\n//                 <p><strong>Final:</strong> ‚Çπ{item.basePrice + (item.difference || 0)}</p>\r\n//                 <p>\r\n//                   <strong>Valid Till:</strong>{\" \"}\r\n//                   {item.validTill\r\n//                     ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n//                     : \"-\"}\r\n//                 </p>\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                     Edit\r\n//                   </button>\r\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                     Delete\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkPrice, setBulkPrice] = useState(\"\");\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n//   const csvInputRef = useRef();\r\n\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data.success) setItems(res.data.data);\r\n//     } catch (err) {\r\n//       console.error(\"Error fetching items:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories);\r\n//     } catch (err) {\r\n//       console.error(\"Error fetching categories:\", err);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files) setForm({ ...form, file: files[0] });\r\n//     else setForm({ ...form, [name]: value });\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category, and base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((key) => {\r\n//         if (form[key]) fd.append(key, form[key]);\r\n//       });\r\n\r\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\r\n//       else await axios.post(API_URL, fd);\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n//       setEditId(null);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Error saving price:\", err);\r\n//       alert(\"Failed to save price.\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n//     setEditId(item._id);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Are you sure you want to delete this item?\")) return;\r\n//     setLoading(true);\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Error deleting item:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleCancel = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       difference: \"\",\r\n//       validTill: \"\",\r\n//       file: null,\r\n//     });\r\n//     setEditId(null);\r\n//   };\r\n\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n//     try {\r\n//       const res = await axios.post(CATEGORY_URL, { name: newCategoryName.trim() });\r\n//       if (res.data.success) {\r\n//         setNewCategoryName(\"\");\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//         alert(\"Category added successfully!\");\r\n//       } else {\r\n//         alert(res.data.message || \"Failed to add category\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Add category error:\", err);\r\n//       alert(\"Add category failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Choose a CSV file first\");\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", csvFile);\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/import`, fd, {\r\n//         headers: { \"Content-Type\": \"multipart/form-data\" },\r\n//       });\r\n//       if (res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         fetchItems();\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//       } else alert(\"Import failed, check file format\");\r\n//     } catch (err) {\r\n//       console.error(\"Import error:\", err);\r\n//       alert(\"Import failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n//       const blob = new Blob([res.data], { type: \"text/csv;charset=utf-8;\" });\r\n//       const url = window.URL.createObjectURL(blob);\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = `prices_export_${Date.now()}.csv`;\r\n//       document.body.appendChild(a);\r\n//       a.click();\r\n//       a.remove();\r\n//       window.URL.revokeObjectURL(url);\r\n//     } catch (err) {\r\n//       console.error(\"Export error:\", err);\r\n//       alert(\"Export failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // üß© BULK ACTIONS\r\n//   const toggleSelectAll = () => {\r\n//     if (selectedItems.length === items.length) setSelectedItems([]);\r\n//     else setSelectedItems(items.map((i) => i._id));\r\n//   };\r\n\r\n//   const toggleSelectOne = (id) => {\r\n//     if (selectedItems.includes(id)) {\r\n//       setSelectedItems(selectedItems.filter((i) => i !== id));\r\n//     } else {\r\n//       setSelectedItems([...selectedItems, id]);\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (selectedItems.length === 0) return alert(\"No items selected!\");\r\n//     if (!window.confirm(`Delete ${selectedItems.length} selected items?`)) return;\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       for (let id of selectedItems) {\r\n//         await axios.delete(`${API_URL}/${id}`);\r\n//       }\r\n//       alert(\"Bulk delete successful!\");\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error:\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkPriceUpdate = async () => {\r\n//     if (selectedItems.length === 0) return alert(\"No items selected!\");\r\n//     if (!bulkPrice) return alert(\"Enter a new base price\");\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       for (let id of selectedItems) {\r\n//         await axios.put(`${API_URL}/${id}`, { basePrice: Number(bulkPrice) });\r\n//       }\r\n//       alert(\"Base prices updated successfully!\");\r\n//       setSelectedItems([]);\r\n//       setBulkPrice(\"\");\r\n//       setBulkMode(false);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk price update error:\", err);\r\n//       alert(\"Bulk update failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Price Management</h1>\r\n//         <p>Manage prices, import/export CSV, and bulk edit/delete.</p>\r\n//       </div>\r\n\r\n//       {/* ===== Bulk Actions ===== */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-bar\">\r\n//           <span>{selectedItems.length} selected</span>\r\n//           {!bulkMode ? (\r\n//             <div className=\"bulk-actions\">\r\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n//                 üóëÔ∏è Bulk Delete\r\n//               </button>\r\n//               <button\r\n//                 className=\"btn primary\"\r\n//                 onClick={() => setBulkMode(true)}\r\n//               >\r\n//                 ‚úèÔ∏è Bulk Edit Price\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div className=\"bulk-actions\">\r\n//               <input\r\n//                 type=\"number\"\r\n//                 placeholder=\"Enter new base price\"\r\n//                 value={bulkPrice}\r\n//                 onChange={(e) => setBulkPrice(e.target.value)}\r\n//               />\r\n//               <button className=\"btn primary\" onClick={handleBulkPriceUpdate}>\r\n//                 Update\r\n//               </button>\r\n//               <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* ====== Add/Edit Form ====== */}\r\n//       {/* Same as your original form */}\r\n//       {/* Keeping full structure */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{editId ? \"‚úèÔ∏è Edit Price\" : \"‚ûï Add New Price\"}</h2>\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Enter name\" required />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select name=\"category\" value={form.category} onChange={handleChange} required>\r\n//                   <option value=\"\">Select Category</option>\r\n//                   {categories.map((cat) => (\r\n//                     <option key={cat._id} value={cat._id}>\r\n//                       {cat.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   className=\"btn small\"\r\n//                   onClick={() => setAddingCategory(!addingCategory)}\r\n//                 >\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width\">\r\n//                 <label>New Category</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Enter new category\"\r\n//                   />\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     className=\"btn primary\"\r\n//                     onClick={handleAddCategory}\r\n//                   >\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price (‚Çπ) *</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"basePrice\"\r\n//                 value={form.basePrice}\r\n//                 onChange={handleChange}\r\n//                 required\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Difference (‚Çπ)</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"difference\"\r\n//                 value={form.difference}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input\r\n//                 type=\"date\"\r\n//                 name=\"validTill\"\r\n//                 value={form.validTill}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" name=\"file\" onChange={handleChange} accept=\"image/*\" />\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea\r\n//               name=\"description\"\r\n//               value={form.description}\r\n//               onChange={handleChange}\r\n//               placeholder=\"Write product details...\"\r\n//             />\r\n//           </div>\r\n\r\n//           <div className=\"form-actions\">\r\n//             <button type=\"submit\" className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : editId ? \"Update Price\" : \"Add Price\"}\r\n//             </button>\r\n//             {editId && (\r\n//               <button type=\"button\" className=\"btn cancel\" onClick={handleCancel}>\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* ===== CSV Section ===== */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\".csv,text/csv\"\r\n//             ref={csvInputRef}\r\n//             onChange={handleCsvSelect}\r\n//           />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             üì• Import CSV\r\n//           </button>\r\n//         </div>\r\n//         <div>\r\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//             üì§ Export CSV\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* ===== Table / Mobile Card ===== */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Price List</h2>\r\n//           <span>Total: {items.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === items.length}\r\n//                     onChange={toggleSelectAll}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base Price</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {items.map((item) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() => toggleSelectOne(item._id)}\r\n//                     />\r\n//                   </td>\r\n//                   <td>\r\n//                     {item.image ? (\r\n//                       <img src={item.image} alt={item.name} />\r\n//                     ) : (\r\n//                       <span className=\"no-img\">No Img</span>\r\n//                     )}\r\n//                   </td>\r\n//                   <td>{item.name}</td>\r\n//                   <td>{item.category?.name || \"N/A\"}</td>\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n//                   <td>{item.difference || 0}</td>\r\n//                   <td>‚Çπ{item.basePrice + (item.difference || 0)}</td>\r\n//                   <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n//                       : \"-\"}\r\n//                   </td>\r\n//                   <td className=\"actions\">\r\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                       Edit\r\n//                     </button>\r\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                       Delete\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {items.map((item) => (\r\n//               <div className=\"mobile-card\" key={item._id}>\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() => toggleSelectOne(item._id)}\r\n//                 />\r\n//                 {item.image ? (\r\n//                   <img src={item.image} alt={item.name} />\r\n//                 ) : (\r\n//                   <div className=\"no-img\">No Image</div>\r\n//                 )}\r\n//                 <h3>{item.name}</h3>\r\n//                 <p><strong>Category:</strong> {item.category?.name || \"N/A\"}</p>\r\n//                 <p><strong>Base Price:</strong> ‚Çπ{item.basePrice}</p>\r\n//                 <p><strong>Final:</strong> ‚Çπ{item.basePrice + (item.difference || 0)}</p>\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>Edit</button>\r\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>Delete</button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkPrice, setBulkPrice] = useState(\"\");\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n//   const csvInputRef = useRef();\r\n\r\n//   // Pagination\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 10;\r\n\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data.success) setItems(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files) setForm({ ...form, file: files[0] });\r\n//     else setForm({ ...form, [name]: value });\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price required\");\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((key) => {\r\n//         if (form[key]) fd.append(key, form[key]);\r\n//       });\r\n\r\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\r\n//       else await axios.post(API_URL, fd);\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n\r\n//       setEditId(null);\r\n//       setCurrentPage(1);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.log(\"Save error:\", err);\r\n//       alert(\"Failed to save\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     setEditId(item._id);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     setLoading(true);\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.log(\"Delete error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Category name required\");\r\n//     try {\r\n//       const res = await axios.post(CATEGORY_URL, { name: newCategoryName });\r\n//       if (res.data.success) {\r\n//         setNewCategoryName(\"\");\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//         alert(\"Category added!\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.log(\"Category error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // CSV Import\r\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Choose CSV file\");\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", csvFile);\r\n\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data.success) {\r\n//         alert(\"Imported successfully!\");\r\n//         fetchItems();\r\n//       }\r\n//     } catch (err) {\r\n//       console.log(\"Import error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Export CSV\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(`${API_URL}/export`, {\r\n//         responseType: \"blob\",\r\n//       });\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"prices.csv\";\r\n//       a.click();\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Bulk Selection\r\n//   const toggleSelectAll = () => {\r\n//     if (selectedItems.length === items.length) setSelectedItems([]);\r\n//     else setSelectedItems(items.map((i) => i._id));\r\n//   };\r\n\r\n//   const toggleSelectOne = (id) => {\r\n//     selectedItems.includes(id)\r\n//       ? setSelectedItems(selectedItems.filter((x) => x !== id))\r\n//       : setSelectedItems([...selectedItems, id]);\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (selectedItems.length === 0) return;\r\n//     if (!window.confirm(\"Delete selected?\")) return;\r\n\r\n//     setLoading(true);\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n//       );\r\n//       fetchItems();\r\n//       setSelectedItems([]);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkPriceUpdate = async () => {\r\n//     if (!bulkPrice) return alert(\"Enter price\");\r\n\r\n//     setLoading(true);\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedItems.map((id) =>\r\n//           axios.put(`${API_URL}/${id}`, { basePrice: Number(bulkPrice) })\r\n//         )\r\n//       );\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//       setBulkPrice(\"\");\r\n//       setSelectedItems([]);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // STATUS TOGGLE ‚Äî (Fixed API)\r\n//   const handleStatusToggle = async (item) => {\r\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n\r\n//     try {\r\n//       await axios.put(`${API_URL}/status/${item._id}`, {\r\n//         status: newStatus,\r\n//       });\r\n\r\n//       setItems((prev) =>\r\n//         prev.map((it) =>\r\n//           it._id === item._id ? { ...it, status: newStatus } : it\r\n//         )\r\n//       );\r\n//     } catch (err) {\r\n//       console.log(\"Status error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // Pagination Logic\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const indexOfFirst = indexOfLast - itemsPerPage;\r\n//   const currentItems = items.slice(indexOfFirst, indexOfLast);\r\n//   const totalPages = Math.ceil(items.length / itemsPerPage);\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Price Management</h1>\r\n//         <p>Manage prices, categories, CSV, bulk actions & status toggle.</p>\r\n//       </div>\r\n\r\n//       {/* Bulk Bar */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-bar\">\r\n//           <span>{selectedItems.length} selected</span>\r\n\r\n//           {!bulkMode ? (\r\n//             <div className=\"bulk-actions\">\r\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div className=\"bulk-actions\">\r\n//               <input\r\n//                 type=\"number\"\r\n//                 placeholder=\"Enter new price\"\r\n//                 value={bulkPrice}\r\n//                 onChange={(e) => setBulkPrice(e.target.value)}\r\n//               />\r\n//               <button className=\"btn primary\" onClick={handleBulkPriceUpdate}>\r\n//                 Update\r\n//               </button>\r\n//               <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Add/Edit Form */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\r\n\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select\r\n//                   required\r\n//                   name=\"category\"\r\n//                   value={form.category}\r\n//                   onChange={handleChange}\r\n//                 >\r\n//                   <option value=\"\">Select</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   className=\"btn small\"\r\n//                   onClick={() => setAddingCategory(!addingCategory)}\r\n//                 >\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width\">\r\n//                 <label>New Category</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Category name\"\r\n//                   />\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     className=\"btn primary\"\r\n//                     onClick={handleAddCategory}\r\n//                   >\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price *</label>\r\n//               <input\r\n//                 required\r\n//                 type=\"number\"\r\n//                 name=\"basePrice\"\r\n//                 value={form.basePrice}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Difference</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"difference\"\r\n//                 value={form.difference}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input\r\n//                 type=\"date\"\r\n//                 name=\"validTill\"\r\n//                 value={form.validTill}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea\r\n//               name=\"description\"\r\n//               value={form.description}\r\n//               onChange={handleChange}\r\n//             ></textarea>\r\n//           </div>\r\n\r\n//           <div className=\"form-actions\">\r\n//             <button className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\r\n//             </button>\r\n\r\n//             {editId && (\r\n//               <button\r\n//                 type=\"button\"\r\n//                 className=\"btn cancel\"\r\n//                 onClick={() => setEditId(null)}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV Section */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\".csv\"\r\n//             ref={csvInputRef}\r\n//             onChange={handleCsvSelect}\r\n//           />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//           Export CSV\r\n//         </button>\r\n//       </div>\r\n\r\n//       {/* Table */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Items</h2>\r\n//           <span>Total: {items.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={\r\n//                       selectedItems.length === items.length &&\r\n//                       items.length > 0\r\n//                     }\r\n//                     onChange={toggleSelectAll}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Status</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() => toggleSelectOne(item._id)}\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     {item.image ? (\r\n//                       <img src={item.image} alt={item.name} />\r\n//                     ) : (\r\n//                       <span>No Img</span>\r\n//                     )}\r\n//                   </td>\r\n\r\n//                   <td>{item.name}</td>\r\n//                   <td>{item.category?.name}</td>\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n//                   <td>{item.difference || 0}</td>\r\n//                   <td>\r\n//                     ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     <button\r\n//                       className={\r\n//                         item.status === \"active\"\r\n//                           ? \"status-active\"\r\n//                           : \"status-inactive\"\r\n//                       }\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\"\r\n//                         ? \"üü¢ Active\"\r\n//                         : \"üî¥ Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n//                       : \"-\"}\r\n//                   </td>\r\n\r\n//                   <td className=\"actions\">\r\n//                     <button\r\n//                       className=\"btn edit\"\r\n//                       onClick={() => handleEdit(item)}\r\n//                     >\r\n//                       Edit\r\n//                     </button>\r\n\r\n//                     <button\r\n//                       className=\"btn delete\"\r\n//                       onClick={() => handleDelete(item._id)}\r\n//                     >\r\n//                       Delete\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           // Mobile Card View\r\n//           <div className=\"mobile-list\">\r\n//             {currentItems.map((item) => (\r\n//               <div className=\"mobile-card\" key={item._id}>\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() => toggleSelectOne(item._id)}\r\n//                 />\r\n\r\n//                 {item.image ? (\r\n//                   <img src={item.image} alt={item.name} />\r\n//                 ) : (\r\n//                   <div>No Image</div>\r\n//                 )}\r\n\r\n//                 <h3>{item.name}</h3>\r\n//                 <p>\r\n//                   <b>Category:</b> {item.category?.name}\r\n//                 </p>\r\n//                 <p>\r\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\r\n//                 </p>\r\n//                 <p>\r\n//                   <b>Final:</b>{\" \"}\r\n//                   ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\r\n//                 </p>\r\n\r\n//                 <button\r\n//                   className={\r\n//                     item.status === \"active\"\r\n//                       ? \"status-active\"\r\n//                       : \"status-inactive\"\r\n//                   }\r\n//                   onClick={() => handleStatusToggle(item)}\r\n//                 >\r\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                 </button>\r\n\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                     Edit\r\n//                   </button>\r\n//                   <button\r\n//                     className=\"btn delete\"\r\n//                     onClick={() => handleDelete(item._id)}\r\n//                   >\r\n//                     Delete\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* Pagination */}\r\n//         <div className=\"pagination\">\r\n//           <button\r\n//             disabled={currentPage === 1}\r\n//             onClick={() => setCurrentPage((p) => p - 1)}\r\n//           >\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }).map((_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button\r\n//             disabled={currentPage === totalPages}\r\n//             onClick={() => setCurrentPage((p) => p + 1)}\r\n//           >\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// // import React, { useEffect, useState, useRef } from \"react\";\r\n// // import axios from \"axios\";\r\n// // import \"./PriceList.css\";\r\n\r\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// // export default function PriceList() {\r\n// //   const [items, setItems] = useState([]);\r\n// //   const [categories, setCategories] = useState([]);\r\n// //   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n// //   const [form, setForm] = useState({\r\n// //     name: \"\",\r\n// //     category: \"\",\r\n// //     description: \"\",\r\n// //     basePrice: \"\",\r\n// //     difference: \"\",\r\n// //     validTill: \"\",\r\n// //     file: null,\r\n// //   });\r\n\r\n// //   const [editId, setEditId] = useState(null);\r\n// //   const [loading, setLoading] = useState(false);\r\n// //   const [csvFile, setCsvFile] = useState(null);\r\n// //   const [addingCategory, setAddingCategory] = useState(false);\r\n// //   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n// //   const [selectedItems, setSelectedItems] = useState([]);\r\n// //   const [bulkMode, setBulkMode] = useState(false);\r\n// //   const csvInputRef = useRef();\r\n\r\n// //   // Pagination\r\n// //   const [currentPage, setCurrentPage] = useState(1);\r\n// //   const itemsPerPage = 10;\r\n\r\n// //   // Fetch Items\r\n// //   useEffect(() => {\r\n// //     fetchItems();\r\n// //     fetchCategories();\r\n// //     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n// //     window.addEventListener(\"resize\", handleResize);\r\n// //     return () => window.removeEventListener(\"resize\", handleResize);\r\n// //   }, []);\r\n\r\n// //   const fetchItems = async () => {\r\n// //     setLoading(true);\r\n// //     try {\r\n// //       const res = await axios.get(API_URL);\r\n// //       if (res.data.success) setItems(res.data.data || []);\r\n// //     } catch (err) {\r\n// //       console.error(\"Fetch items error:\", err);\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   const fetchCategories = async () => {\r\n// //     try {\r\n// //       const res = await axios.get(CATEGORY_URL);\r\n// //       if (res.data.success) setCategories(res.data.categories || []);\r\n// //     } catch (err) {\r\n// //       console.error(\"Fetch categories error:\", err);\r\n// //     }\r\n// //   };\r\n\r\n// //   // Input change\r\n// //   const handleChange = (e) => {\r\n// //     const { name, value, files } = e.target;\r\n// //     if (files) setForm({ ...form, file: files[0] });\r\n// //     else setForm({ ...form, [name]: value });\r\n// //   };\r\n\r\n// //   // Submit / Update\r\n// //   const handleSubmit = async (e) => {\r\n// //     e.preventDefault();\r\n// //     setLoading(true);\r\n\r\n// //     try {\r\n// //       if (!form.name || !form.category || !form.basePrice) {\r\n// //         alert(\"Name, category & base price required\");\r\n// //         return;\r\n// //       }\r\n\r\n// //       const fd = new FormData();\r\n// //       Object.keys(form).forEach((key) => {\r\n// //         if (form[key]) fd.append(key, form[key]);\r\n// //       });\r\n\r\n// //       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\r\n// //       else await axios.post(API_URL, fd);\r\n\r\n// //       setForm({\r\n// //         name: \"\",\r\n// //         category: \"\",\r\n// //         description: \"\",\r\n// //         basePrice: \"\",\r\n// //         difference: \"\",\r\n// //         validTill: \"\",\r\n// //         file: null,\r\n// //       });\r\n\r\n// //       setEditId(null);\r\n// //       setCurrentPage(1);\r\n// //       fetchItems();\r\n// //     } catch (err) {\r\n// //       alert(\"Failed to save\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // Edit\r\n// //   const handleEdit = (item) => {\r\n// //     setForm({\r\n// //       name: item.name,\r\n// //       category: item.category?._id || \"\",\r\n// //       description: item.description || \"\",\r\n// //       basePrice: item.basePrice,\r\n// //       difference: item.difference,\r\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n// //       file: null,\r\n// //     });\r\n\r\n// //     setEditId(item._id);\r\n// //     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n// //   };\r\n\r\n// //   // Delete\r\n// //   const handleDelete = async (id) => {\r\n// //     if (!window.confirm(\"Delete this item?\")) return;\r\n// //     setLoading(true);\r\n// //     try {\r\n// //       await axios.delete(`${API_URL}/${id}`);\r\n// //       fetchItems();\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // Add new Category\r\n// //   const handleAddCategory = async () => {\r\n// //     if (!newCategoryName.trim()) return alert(\"Category name required\");\r\n// //     try {\r\n// //       const res = await axios.post(CATEGORY_URL, { name: newCategoryName });\r\n// //       if (res.data.success) {\r\n// //         setNewCategoryName(\"\");\r\n// //         setAddingCategory(false);\r\n// //         fetchCategories();\r\n// //         alert(\"Category added!\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.log(\"Category error:\", err);\r\n// //     }\r\n// //   };\r\n\r\n// //   // CSV Import\r\n// //   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n// //   const handleImportCsv = async () => {\r\n// //     if (!csvFile) return alert(\"Choose CSV file\");\r\n// //     const fd = new FormData();\r\n// //     fd.append(\"file\", csvFile);\r\n\r\n// //     setLoading(true);\r\n// //     try {\r\n// //       const res = await axios.post(`${API_URL}/import`, fd);\r\n// //       if (res.data.success) {\r\n// //         alert(\"Imported successfully!\");\r\n// //         fetchItems();\r\n// //       }\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // Export CSV\r\n// //   const handleExportCsv = async () => {\r\n// //     try {\r\n// //       setLoading(true);\r\n// //       const res = await axios.get(`${API_URL}/export`, {\r\n// //         responseType: \"blob\",\r\n// //       });\r\n// //       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n// //       const a = document.createElement(\"a\");\r\n// //       a.href = url;\r\n// //       a.download = \"prices.csv\";\r\n// //       a.click();\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // Select all items\r\n// //   const toggleSelectAll = () => {\r\n// //     if (selectedItems.length === items.length) setSelectedItems([]);\r\n// //     else setSelectedItems(items.map((i) => i._id));\r\n// //   };\r\n\r\n// //   // Select one\r\n// //   const toggleSelectOne = (id) => {\r\n// //     selectedItems.includes(id)\r\n// //       ? setSelectedItems(selectedItems.filter((x) => x !== id))\r\n// //       : setSelectedItems([...selectedItems, id]);\r\n// //   };\r\n\r\n// //   // Status toggle\r\n// //   const handleStatusToggle = async (item) => {\r\n// //     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n\r\n// //     try {\r\n// //       await axios.put(`${API_URL}/status/${item._id}`, {\r\n// //         status: newStatus,\r\n// //       });\r\n\r\n// //       setItems((prev) =>\r\n// //         prev.map((it) =>\r\n// //           it._id === item._id ? { ...it, status: newStatus } : it\r\n// //         )\r\n// //       );\r\n// //     } catch (err) {\r\n// //       console.log(\"Status error:\", err);\r\n// //     }\r\n// //   };\r\n\r\n// //   // Pagination Logic\r\n// //   const indexOfLast = currentPage * itemsPerPage;\r\n// //   const indexOfFirst = indexOfLast - itemsPerPage;\r\n// //   const currentItems = items.slice(indexOfFirst, indexOfLast);\r\n// //   const totalPages = Math.ceil(items.length / itemsPerPage);\r\n\r\n// //   return (\r\n// //     <div className=\"price-container\">\r\n// //       <div className=\"header-section\">\r\n// //         <h1>üí∞ Product Management</h1>\r\n// //         <p>Manage prices, categories, CSV, bulk actions & status toggle.</p>\r\n// //       </div>\r\n\r\n// //       {/* -------------------- BULK EDIT PANEL -------------------- */}\r\n// //       {selectedItems.length > 0 && (\r\n// //         <div className=\"bulk-bar\">\r\n// //           <span>{selectedItems.length} selected</span>\r\n\r\n// //           {!bulkMode ? (\r\n// //             <div className=\"bulk-actions\">\r\n// //               <button className=\"btn delete\" onClick={async () => {\r\n// //                 if (!window.confirm(\"Delete selected?\")) return;\r\n// //                 await Promise.all(\r\n// //                   selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n// //                 );\r\n// //                 fetchItems();\r\n// //                 setSelectedItems([]);\r\n// //               }}>\r\n// //                 üóë Bulk Delete\r\n// //               </button>\r\n\r\n// //               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n// //                 ‚úè Bulk Edit\r\n// //               </button>\r\n// //             </div>\r\n// //           ) : (\r\n// //             <div className=\"bulk-edit-panel\">\r\n// //               <h3>‚úè Bulk Edit Selected Items</h3>\r\n\r\n// //               {items\r\n// //                 .filter((x) => selectedItems.includes(x._id))\r\n// //                 .map((p) => (\r\n// //                   <div key={p._id} className=\"bulk-edit-item-box\">\r\n// //                     <h4>{p.name}</h4>\r\n\r\n// //                     <input\r\n// //                       type=\"text\"\r\n// //                       placeholder=\"Edit Name\"\r\n// //                       defaultValue={p.name}\r\n// //                       onChange={(e) =>\r\n// //                         setItems((prev) =>\r\n// //                           prev.map((it) =>\r\n// //                             it._id === p._id\r\n// //                               ? { ...it, name: e.target.value }\r\n// //                               : it\r\n// //                           )\r\n// //                         )\r\n// //                       }\r\n// //                     />\r\n\r\n// //                     <input\r\n// //                       type=\"number\"\r\n// //                       placeholder=\"Edit Base Price\"\r\n// //                       defaultValue={p.basePrice}\r\n// //                       onChange={(e) =>\r\n// //                         setItems((prev) =>\r\n// //                           prev.map((it) =>\r\n// //                             it._id === p._id\r\n// //                               ? { ...it, basePrice: Number(e.target.value) }\r\n// //                               : it\r\n// //                           )\r\n// //                         )\r\n// //                       }\r\n// //                     />\r\n\r\n// //                     <input\r\n// //                       type=\"number\"\r\n// //                       placeholder=\"Edit Difference\"\r\n// //                       defaultValue={p.difference || 0}\r\n// //                       onChange={(e) =>\r\n// //                         setItems((prev) =>\r\n// //                           prev.map((it) =>\r\n// //                             it._id === p._id\r\n// //                               ? { ...it, difference: Number(e.target.value) }\r\n// //                               : it\r\n// //                           )\r\n// //                         )\r\n// //                       }\r\n// //                     />\r\n\r\n// //                     <input\r\n// //                       type=\"date\"\r\n// //                       defaultValue={\r\n// //                         p.validTill ? p.validTill.split(\"T\")[0] : \"\"\r\n// //                       }\r\n// //                       onChange={(e) =>\r\n// //                         setItems((prev) =>\r\n// //                           prev.map((it) =>\r\n// //                             it._id === p._id\r\n// //                               ? { ...it, validTill: e.target.value }\r\n// //                               : it\r\n// //                           )\r\n// //                         )\r\n// //                       }\r\n// //                     />\r\n// //                   </div>\r\n// //                 ))}\r\n\r\n// //               <button\r\n// //                 className=\"btn primary\"\r\n// //                 onClick={async () => {\r\n// //                   const updates = items\r\n// //                     .filter((x) => selectedItems.includes(x._id))\r\n// //                     .map((x) => ({\r\n// //                       id: x._id,\r\n// //                       name: x.name,\r\n// //                       basePrice: x.basePrice,\r\n// //                       difference: x.difference,\r\n// //                       validTill: x.validTill,\r\n// //                     }));\r\n\r\n// //                   await axios.post(`${API_URL}/bulk-update`, {\r\n// //                     products: updates,\r\n// //                   });\r\n\r\n// //                   fetchItems();\r\n// //                   setBulkMode(false);\r\n// //                   setSelectedItems([]);\r\n// //                 }}\r\n// //               >\r\n// //                 Save Bulk Update\r\n// //               </button>\r\n\r\n// //               <button\r\n// //                 className=\"btn cancel\"\r\n// //                 onClick={() => setBulkMode(false)}\r\n// //               >\r\n// //                 Cancel\r\n// //               </button>\r\n// //             </div>\r\n// //           )}\r\n// //         </div>\r\n// //       )}\r\n\r\n// //       {/* -------------------- ADD / EDIT FORM -------------------- */}\r\n// //       <div className=\"price-form-card\">\r\n// //         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\r\n\r\n// //         <form onSubmit={handleSubmit}>\r\n// //           <div className=\"form-grid\">\r\n// //             <div className=\"form-group\">\r\n// //               <label>Product Name *</label>\r\n// //               <input required name=\"name\" value={form.name} onChange={handleChange} />\r\n// //             </div>\r\n\r\n// //             <div className=\"form-group\">\r\n// //               <label>Category *</label>\r\n// //               <div className=\"category-row\">\r\n// //                 <select\r\n// //                   required\r\n// //                   name=\"category\"\r\n// //                   value={form.category}\r\n// //                   onChange={handleChange}\r\n// //                 >\r\n// //                   <option value=\"\">Select</option>\r\n// //                   {categories.map((c) => (\r\n// //                     <option value={c._id} key={c._id}>\r\n// //                       {c.name}\r\n// //                     </option>\r\n// //                   ))}\r\n// //                 </select>\r\n\r\n// //                 <button\r\n// //                   type=\"button\"\r\n// //                   className=\"btn small\"\r\n// //                   onClick={() => setAddingCategory(!addingCategory)}\r\n// //                 >\r\n// //                   {addingCategory ? \"Close\" : \"Add\"}\r\n// //                 </button>\r\n// //               </div>\r\n// //             </div>\r\n\r\n// //             {addingCategory && (\r\n// //               <div className=\"form-group full-width\">\r\n// //                 <label>New Category</label>\r\n// //                 <div className=\"category-row\">\r\n// //                   <input\r\n// //                     value={newCategoryName}\r\n// //                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n// //                     placeholder=\"Category name\"\r\n// //                   />\r\n// //                   <button\r\n// //                     type=\"button\"\r\n// //                     className=\"btn primary\"\r\n// //                     onClick={handleAddCategory}\r\n// //                   >\r\n// //                     Create\r\n// //                   </button>\r\n// //                 </div>\r\n// //               </div>\r\n// //             )}\r\n\r\n// //             <div className=\"form-group\">\r\n// //               <label>Base Price *</label>\r\n// //               <input\r\n// //                 required\r\n// //                 type=\"number\"\r\n// //                 name=\"basePrice\"\r\n// //                 value={form.basePrice}\r\n// //                 onChange={handleChange}\r\n// //               />\r\n// //             </div>\r\n\r\n// //             <div className=\"form-group\">\r\n// //               <label>Difference</label>\r\n// //               <input\r\n// //                 type=\"number\"\r\n// //                 name=\"difference\"\r\n// //                 value={form.difference}\r\n// //                 onChange={handleChange}\r\n// //               />\r\n// //             </div>\r\n\r\n// //             <div className=\"form-group\">\r\n// //               <label>Valid Till</label>\r\n// //               <input\r\n// //                 type=\"date\"\r\n// //                 name=\"validTill\"\r\n// //                 value={form.validTill}\r\n// //                 onChange={handleChange}\r\n// //               />\r\n// //             </div>\r\n\r\n// //             <div className=\"form-group\">\r\n// //               <label>Image</label>\r\n// //               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n// //             </div>\r\n// //           </div>\r\n\r\n// //           <div className=\"form-group full-width\">\r\n// //             <label>Description</label>\r\n// //             <textarea\r\n// //               name=\"description\"\r\n// //               value={form.description}\r\n// //               onChange={handleChange}\r\n// //             ></textarea>\r\n// //           </div>\r\n\r\n// //           <div className=\"form-actions\">\r\n// //             <button className=\"btn primary\" disabled={loading}>\r\n// //               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\r\n// //             </button>\r\n\r\n// //             {editId && (\r\n// //               <button\r\n// //                 type=\"button\"\r\n// //                 className=\"btn cancel\"\r\n// //                 onClick={() => setEditId(null)}\r\n// //               >\r\n// //                 Cancel\r\n// //               </button>\r\n// //             )}\r\n// //           </div>\r\n// //         </form>\r\n// //       </div>\r\n\r\n// //       {/* -------------------- CSV IMPORT / EXPORT -------------------- */}\r\n// //       <div className=\"csv-controls\">\r\n// //         <div>\r\n// //           <input\r\n// //             type=\"file\"\r\n// //             accept=\".csv\"\r\n// //             ref={csvInputRef}\r\n// //             onChange={handleCsvSelect}\r\n// //           />\r\n// //           <button className=\"btn small\" onClick={handleImportCsv}>\r\n// //             Import CSV\r\n// //           </button>\r\n// //         </div>\r\n\r\n// //         <button className=\"btn primary\" onClick={handleExportCsv}>\r\n// //           Export CSV\r\n// //         </button>\r\n// //       </div>\r\n\r\n// //       {/* -------------------- MAIN TABLE -------------------- */}\r\n// //       <div className=\"table-card\">\r\n// //         <div className=\"table-header\">\r\n// //           <h2>üìã Items</h2>\r\n// //           <span>Total: {items.length}</span>\r\n// //         </div>\r\n\r\n// //         {!isMobile ? (\r\n// //           <table>\r\n// //             <thead>\r\n// //               <tr>\r\n// //                 <th>\r\n// //                   <input\r\n// //                     type=\"checkbox\"\r\n// //                     checked={selectedItems.length === items.length && items.length > 0}\r\n// //                     onChange={toggleSelectAll}\r\n// //                   />\r\n// //                 </th>\r\n// //                 <th>Sr. No</th>\r\n// //                 <th>Image</th>\r\n// //                 <th>Name</th>\r\n// //                 <th>Category</th>\r\n// //                 <th>Base</th>\r\n// //                 <th>Diff</th>\r\n// //                 <th>Final</th>\r\n// //                 <th>Status</th>\r\n// //                 <th>Valid Till</th>\r\n// //                 <th>Actions</th>\r\n// //               </tr>\r\n// //             </thead>\r\n\r\n// //             <tbody>\r\n// //               {currentItems.map((item, index) => (\r\n// //                 <tr key={item._id}>\r\n// //                   <td>\r\n// //                     <input\r\n// //                       type=\"checkbox\"\r\n// //                       checked={selectedItems.includes(item._id)}\r\n// //                       onChange={() => toggleSelectOne(item._id)}\r\n// //                     />\r\n// //                   </td>\r\n\r\n// //                   <td>{(currentPage - 1) * itemsPerPage + (index + 1)}</td>\r\n\r\n// //                   <td>{item.image ? <img src={item.image} alt={item.name} /> : \"No Img\"}</td>\r\n\r\n// //                   <td>{item.name}</td>\r\n\r\n// //                   <td>{item.category?.name}</td>\r\n\r\n// //                   <td>‚Çπ{item.basePrice}</td>\r\n\r\n// //                   <td>{item.difference || 0}</td>\r\n\r\n// //                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n// //                   <td>\r\n// //                     <button\r\n// //                       className={\r\n// //                         item.status === \"active\" ? \"status-active\" : \"status-inactive\"\r\n// //                       }\r\n// //                       onClick={() => handleStatusToggle(item)}\r\n// //                     >\r\n// //                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\r\n// //                     </button>\r\n// //                   </td>\r\n\r\n// //                   <td>\r\n// //                     {item.validTill\r\n// //                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n// //                       : \"-\"}\r\n// //                   </td>\r\n\r\n// //                   <td className=\"actions\">\r\n// //                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n// //                       Edit\r\n// //                     </button>\r\n\r\n// //                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n// //                       Delete\r\n// //                     </button>\r\n// //                   </td>\r\n// //                 </tr>\r\n// //               ))}\r\n// //             </tbody>\r\n// //           </table>\r\n// //         ) : (\r\n// //           <div className=\"mobile-list\">\r\n// //             {currentItems.map((item) => (\r\n// //               <div className=\"mobile-card\" key={item._id}>\r\n// //                 <input\r\n// //                   type=\"checkbox\"\r\n// //                   checked={selectedItems.includes(item._id)}\r\n// //                   onChange={() => toggleSelectOne(item._id)}\r\n// //                 />\r\n\r\n// //                 {item.image ? <img src={item.image} alt={item.name} /> : <div>No Image</div>}\r\n\r\n// //                 <h3>{item.name}</h3>\r\n\r\n// //                 <p><b>Category:</b> {item.category?.name}</p>\r\n\r\n// //                 <p><b>Base:</b> ‚Çπ{item.basePrice}</p>\r\n\r\n// //                 <p><b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</p>\r\n\r\n// //                 <button\r\n// //                   className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\r\n// //                   onClick={() => handleStatusToggle(item)}\r\n// //                 >\r\n// //                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n// //                 </button>\r\n\r\n// //                 <div className=\"actions\">\r\n// //                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>Edit</button>\r\n// //                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>Delete</button>\r\n// //                 </div>\r\n// //               </div>\r\n// //             ))}\r\n// //           </div>\r\n// //         )}\r\n\r\n// //         {/* Pagination */}\r\n// //         <div className=\"pagination\">\r\n// //           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n// //             Previous\r\n// //           </button>\r\n\r\n// //           {Array.from({ length: totalPages }).map((_, i) => (\r\n// //             <button\r\n// //               key={i}\r\n// //               className={currentPage === i + 1 ? \"active-page\" : \"\"}\r\n// //               onClick={() => setCurrentPage(i + 1)}\r\n// //             >\r\n// //               {i + 1}\r\n// //             </button>\r\n// //           ))}\r\n\r\n// //           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n// //             Next\r\n// //           </button>\r\n// //         </div>\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n\r\n//   // ADD CATEGORY IMAGE SUPPORT\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n//   const csvInputRef = useRef();\r\n\r\n//   // Pagination\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 10;\r\n\r\n//   // Fetch Items\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data.success) setItems(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // Input change\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files) setForm({ ...form, file: files[0] });\r\n//     else setForm({ ...form, [name]: value });\r\n//   };\r\n\r\n//   // Submit / Update\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price required\");\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((key) => {\r\n//         if (form[key]) fd.append(key, form[key]);\r\n//       });\r\n\r\n//       if (editId) await axios.put(`${API_URL}/${editId}`, fd);\r\n//       else await axios.post(API_URL, fd);\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n\r\n//       setEditId(null);\r\n//       setCurrentPage(1);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       alert(\"Failed to save\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Edit\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     setEditId(item._id);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // Delete\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch {}\r\n//   };\r\n\r\n//   // ADD NEW CATEGORY (with Image)\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Category name required\");\r\n\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newCategoryName);\r\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//       const res = await axios.post(CATEGORY_URL, fd, {\r\n//         headers: { \"Content-Type\": \"multipart/form-data\" },\r\n//       });\r\n\r\n//       if (res.data.success) {\r\n//         setNewCategoryName(\"\");\r\n//         setNewCategoryImage(null);\r\n//         setNewCategoryPreview(null);\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//         alert(\"Category added with image!\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.log(\"Category error:\", err);\r\n//       alert(\"Failed to add category\");\r\n//     }\r\n//   };\r\n\r\n//   // CSV Import\r\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Choose CSV file\");\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", csvFile);\r\n\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data.success) {\r\n//         alert(\"Imported successfully!\");\r\n//         fetchItems();\r\n//       }\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Export CSV\r\n//   const handleExportCsv = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(`${API_URL}/export`, {\r\n//         responseType: \"blob\",\r\n//       });\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"prices.csv\";\r\n//       a.click();\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Select all items\r\n//   const toggleSelectAll = () => {\r\n//     if (selectedItems.length === items.length) setSelectedItems([]);\r\n//     else setSelectedItems(items.map((i) => i._id));\r\n//   };\r\n\r\n//   // Select one\r\n//   const toggleSelectOne = (id) => {\r\n//     selectedItems.includes(id)\r\n//       ? setSelectedItems(selectedItems.filter((x) => x !== id))\r\n//       : setSelectedItems([...selectedItems, id]);\r\n//   };\r\n\r\n//   // Status toggle\r\n//   const handleStatusToggle = async (item) => {\r\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n\r\n//     try {\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n\r\n//       setItems((prev) =>\r\n//         prev.map((it) =>\r\n//           it._id === item._id ? { ...it, status: newStatus } : it\r\n//         )\r\n//       );\r\n//     } catch (err) {\r\n//       console.log(\"Status error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // Pagination Logic\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const indexOfFirst = indexOfLast - itemsPerPage;\r\n//   const currentItems = items.slice(indexOfFirst, indexOfLast);\r\n//   const totalPages = Math.ceil(items.length / itemsPerPage);\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Product Management</h1>\r\n//         <p>Manage prices, categories, CSV, bulk actions & status toggle.</p>\r\n//       </div>\r\n\r\n//       {/* ADD / EDIT PRICE FORM */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\r\n\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select\r\n//                   required\r\n//                   name=\"category\"\r\n//                   value={form.category}\r\n//                   onChange={handleChange}\r\n//                 >\r\n//                   <option value=\"\">Select</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   className=\"btn small\"\r\n//                   onClick={() => setAddingCategory(!addingCategory)}\r\n//                 >\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>New Category</label>\r\n\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Category name\"\r\n//                   />\r\n\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewCategoryImage(e.target.files[0]);\r\n//                       setNewCategoryPreview(URL.createObjectURL(e.target.files[0]));\r\n//                     }}\r\n//                   />\r\n\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     className=\"btn primary\"\r\n//                     onClick={handleAddCategory}\r\n//                   >\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n\r\n//                 {newCategoryPreview && (\r\n//                   <img src={newCategoryPreview} className=\"categoryPreview\" alt=\"preview\" />\r\n//                 )}\r\n//               </div>\r\n//             )}\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price *</label>\r\n//               <input\r\n//                 required\r\n//                 type=\"number\"\r\n//                 name=\"basePrice\"\r\n//                 value={form.basePrice}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Difference</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"difference\"\r\n//                 value={form.difference}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input\r\n//                 type=\"date\"\r\n//                 name=\"validTill\"\r\n//                 value={form.validTill}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea\r\n//               name=\"description\"\r\n//               value={form.description}\r\n//               onChange={handleChange}\r\n//             ></textarea>\r\n//           </div>\r\n\r\n//           <div className=\"form-actions\">\r\n//             <button className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\r\n//             </button>\r\n\r\n//             {editId && (\r\n//               <button\r\n//                 type=\"button\"\r\n//                 className=\"btn cancel\"\r\n//                 onClick={() => setEditId(null)}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV IMPORT / EXPORT */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\".csv\"\r\n//             ref={csvInputRef}\r\n//             onChange={handleCsvSelect}\r\n//           />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//           Export CSV\r\n//         </button>\r\n//       </div>\r\n\r\n//       {/* MAIN TABLE */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Items</h2>\r\n//           <span>Total: {items.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === items.length && items.length > 0}\r\n//                     onChange={toggleSelectAll}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Sr. No</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Status</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, index) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() => toggleSelectOne(item._id)}\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (index + 1)}</td>\r\n\r\n//                   <td>{item.image ? <img src={item.image} alt={item.name} /> : \"No Img\"}</td>\r\n\r\n//                   <td>{item.name}</td>\r\n\r\n//                   <td>{item.category?.name}</td>\r\n\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n\r\n//                   <td>{item.difference || 0}</td>\r\n\r\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n//                   <td>\r\n//                     <button\r\n//                       className={\r\n//                         item.status === \"active\" ? \"status-active\" : \"status-inactive\"\r\n//                       }\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n//                       : \"-\"}\r\n//                   </td>\r\n\r\n//                   <td className=\"actions\">\r\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                       Edit\r\n//                     </button>\r\n\r\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                       Delete\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {currentItems.map((item) => (\r\n//               <div className=\"mobile-card\" key={item._id}>\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() => toggleSelectOne(item._id)}\r\n//                 />\r\n\r\n//                 {item.image ? <img src={item.image} alt={item.name} /> : <div>No Image</div>}\r\n\r\n//                 <h3>{item.name}</h3>\r\n\r\n//                 <p><b>Category:</b> {item.category?.name}</p>\r\n\r\n//                 <p><b>Base:</b> ‚Çπ{item.basePrice}</p>\r\n\r\n//                 <p><b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</p>\r\n\r\n//                 <button\r\n//                   className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\r\n//                   onClick={() => handleStatusToggle(item)}\r\n//                 >\r\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                 </button>\r\n\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>Edit</button>\r\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>Delete</button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* Pagination */}\r\n//         <div className=\"pagination\">\r\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }).map((_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n//   const [search, setSearch] = useState(\"\"); // üîç SEARCH STATE\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n\r\n//   // ADD CATEGORY IMAGE SUPPORT\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   // BULK\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const csvInputRef = useRef();\r\n\r\n//   // Pagination\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 10;\r\n\r\n//   // Fetch Items & Categories\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data.success) setItems(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // Input change\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files) setForm({ ...form, file: files[0] });\r\n//     else setForm({ ...form, [name]: value });\r\n//   };\r\n\r\n//   // Submit / Update\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price required\");\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((key) => {\r\n//         if (form[key] !== undefined && form[key] !== null && form[key] !== \"\")\r\n//           fd.append(key, form[key]);\r\n//       });\r\n\r\n//       if (editId) {\r\n//         await axios.put(`${API_URL}/${editId}`, fd);\r\n//       } else {\r\n//         await axios.post(API_URL, fd);\r\n//       }\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n\r\n//       setEditId(null);\r\n//       setCurrentPage(1);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Save error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Edit\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     setEditId(item._id);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // Delete\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch {}\r\n//   };\r\n\r\n//   // ADD NEW CATEGORY (with Image)\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Category name required\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newCategoryName);\r\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//       const res = await axios.post(CATEGORY_URL, fd);\r\n//       if (res.data.success) {\r\n//         setNewCategoryName(\"\");\r\n//         setNewCategoryImage(null);\r\n//         setNewCategoryPreview(null);\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//         alert(\"Category Added!\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Category error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // CSV Import\r\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Choose CSV file\");\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", csvFile);\r\n\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data.success) fetchItems();\r\n//       alert(\"Imported!\");\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//     }\r\n//   };\r\n\r\n//   // Export CSV\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"prices.csv\";\r\n//       a.click();\r\n//     } catch (err) {\r\n//       console.log(\"Export error:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // Select All\r\n//   const toggleSelectAll = () => {\r\n//     if (selectedItems.length === items.length) setSelectedItems([]);\r\n//     else setSelectedItems(items.map((i) => i._id));\r\n//   };\r\n\r\n//   // Select One\r\n//   const toggleSelectOne = (id) => {\r\n//     selectedItems.includes(id)\r\n//       ? setSelectedItems(selectedItems.filter((x) => x !== id))\r\n//       : setSelectedItems([...selectedItems, id]);\r\n//   };\r\n\r\n//   // Status Toggle\r\n//   const handleStatusToggle = async (item) => {\r\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//     await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n\r\n//     setItems((prev) =>\r\n//       prev.map((it) => (it._id === item._id ? { ...it, status: newStatus } : it))\r\n//     );\r\n//   };\r\n\r\n//   // BULK DELETE\r\n//   const handleBulkDelete = async () => {\r\n//     if (!window.confirm(\"Delete selected?\")) return;\r\n\r\n//     await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n//     setSelectedItems([]);\r\n//     fetchItems();\r\n//   };\r\n\r\n//   // BULK UPDATE\r\n//   const handleBulkSave = async () => {\r\n//     const updates = items\r\n//       .filter((i) => selectedItems.includes(i._id))\r\n//       .map((i) => ({\r\n//         id: i._id,\r\n//         name: i.name,\r\n//         basePrice: i.basePrice,\r\n//         difference: i.difference,\r\n//         validTill: i.validTill,\r\n//       }));\r\n\r\n//     await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//     setBulkMode(false);\r\n//     setSelectedItems([]);\r\n//     fetchItems();\r\n//   };\r\n\r\n//   // üîç FILTER LOGIC (Name + Category)\r\n//   const filteredItems = items.filter((item) => {\r\n//     const text = search.toLowerCase();\r\n//     return (\r\n//       item.name.toLowerCase().includes(text) ||\r\n//       item.category?.name?.toLowerCase().includes(text)\r\n//     );\r\n//   });\r\n\r\n//   // Pagination\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const indexOfFirst = indexOfLast - itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfFirst, indexOfLast);\r\n//   const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\r\n\r\n//   const updateLocalItemField = (id, field, value) => {\r\n//     setItems((prev) => prev.map((it) => (it._id === id ? { ...it, [field]: value } : it)));\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Product Management</h1>\r\n//         <p>Manage prices, categories, CSV, bulk actions & search.</p>\r\n//       </div>\r\n\r\n//       {/* üîç SEARCH BAR */}\r\n//       <div className=\"search-bar\">\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search by product or category...\"\r\n//           value={search}\r\n//           onChange={(e) => setSearch(e.target.value)}\r\n//         />\r\n//       </div>\r\n// {/* BULK BAR */}\r\n// {selectedItems.length > 0 && (\r\n//   <div className=\"bulk-bar\">\r\n//     <span>{selectedItems.length} selected</span>\r\n\r\n//     {!bulkMode ? (\r\n//       <div className=\"bulk-actions\">\r\n//         <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n//           üóë Bulk Delete\r\n//         </button>\r\n//         <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n//           ‚úè Bulk Edit\r\n//         </button>\r\n//       </div>\r\n//     ) : (\r\n//       <div style={{ width: \"100%\" }}>\r\n//         <h3 style={{ marginBottom: \"10px\" }}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//         {items\r\n//           .filter((i) => selectedItems.includes(i._id))\r\n//           .map((item) => (\r\n//             <div key={item._id} className=\"bulk-edit-item-box\">\r\n//               <h4>{item.name}</h4>\r\n\r\n//               <div className=\"form-grid\">\r\n//                 {/* NAME */}\r\n//                 <div className=\"form-group\">\r\n//                   <label>Name</label>\r\n//                   <input\r\n//                     type=\"text\"\r\n//                     value={item.name}\r\n//                     onChange={(e) =>\r\n//                       updateLocalItemField(item._id, \"name\", e.target.value)\r\n//                     }\r\n//                   />\r\n//                 </div>\r\n\r\n//                 {/* BASE PRICE */}\r\n//                 <div className=\"form-group\">\r\n//                   <label>Base Price</label>\r\n//                   <input\r\n//                     type=\"number\"\r\n//                     value={item.basePrice}\r\n//                     onChange={(e) =>\r\n//                       updateLocalItemField(\r\n//                         item._id,\r\n//                         \"basePrice\",\r\n//                         Number(e.target.value)\r\n//                       )\r\n//                     }\r\n//                   />\r\n//                 </div>\r\n\r\n//                 {/* DIFFERENCE */}\r\n//                 <div className=\"form-group\">\r\n//                   <label>Difference</label>\r\n//                   <input\r\n//                     type=\"number\"\r\n//                     value={item.difference || 0}\r\n//                     onChange={(e) =>\r\n//                       updateLocalItemField(\r\n//                         item._id,\r\n//                         \"difference\",\r\n//                         Number(e.target.value)\r\n//                       )\r\n//                     }\r\n//                   />\r\n//                 </div>\r\n\r\n//                 {/* VALID TILL */}\r\n//                 <div className=\"form-group\">\r\n//                   <label>Valid Till</label>\r\n//                   <input\r\n//                     type=\"date\"\r\n//                     value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\r\n//                     onChange={(e) =>\r\n//                       updateLocalItemField(\r\n//                         item._id,\r\n//                         \"validTill\",\r\n//                         e.target.value\r\n//                       )\r\n//                     }\r\n//                   />\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           ))}\r\n\r\n//         <div style={{ marginTop: \"10px\", display: \"flex\", gap: \"10px\" }}>\r\n//           <button className=\"btn primary\" onClick={handleBulkSave}>\r\n//             ‚úî Save All\r\n//           </button>\r\n//           <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n//             ‚úñ Cancel\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     )}\r\n//   </div>\r\n// )}\r\n\r\n//       {/* ADD / EDIT PRICE FORM */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{editId ? \"‚úè Edit Price\" : \"‚ûï Add Price\"}</h2>\r\n\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input\r\n//                 required\r\n//                 name=\"name\"\r\n//                 value={form.name}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select\r\n//                   required\r\n//                   name=\"category\"\r\n//                   value={form.category}\r\n//                   onChange={handleChange}\r\n//                 >\r\n//                   <option value=\"\">Select</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   className=\"btn small\"\r\n//                   onClick={() => setAddingCategory(!addingCategory)}\r\n//                 >\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>New Category</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Category name\"\r\n//                   />\r\n\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewCategoryImage(e.target.files[0]);\r\n//                       setNewCategoryPreview(\r\n//                         e.target.files[0]\r\n//                           ? URL.createObjectURL(e.target.files[0])\r\n//                           : null\r\n//                       );\r\n//                     }}\r\n//                   />\r\n\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     className=\"btn primary\"\r\n//                     onClick={handleAddCategory}\r\n//                   >\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n\r\n//                 {newCategoryPreview && (\r\n//                   <img\r\n//                     src={newCategoryPreview}\r\n//                     className=\"categoryPreview\"\r\n//                     alt=\"preview\"\r\n//                   />\r\n//                 )}\r\n//               </div>\r\n//             )}\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price *</label>\r\n//               <input\r\n//                 required\r\n//                 type=\"number\"\r\n//                 name=\"basePrice\"\r\n//                 value={form.basePrice}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Difference</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"difference\"\r\n//                 value={form.difference}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input\r\n//                 type=\"date\"\r\n//                 name=\"validTill\"\r\n//                 value={form.validTill}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea\r\n//               name=\"description\"\r\n//               value={form.description}\r\n//               onChange={handleChange}\r\n//             ></textarea>\r\n//           </div>\r\n\r\n//           <div className=\"form-actions\">\r\n//             <button className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : editId ? \"Update\" : \"Add\"}\r\n//             </button>\r\n\r\n//             {editId && (\r\n//               <button\r\n//                 type=\"button\"\r\n//                 className=\"btn cancel\"\r\n//                 onClick={() => setEditId(null)}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV IMPORT / EXPORT */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//           Export CSV\r\n//         </button>\r\n//       </div>\r\n\r\n//       {/* MAIN TABLE */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Items</h2>\r\n//           <span>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={\r\n//                       selectedItems.length === filteredItems.length &&\r\n//                       filteredItems.length > 0\r\n//                     }\r\n//                     onChange={toggleSelectAll}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Sr. No</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Status</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, index) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() => toggleSelectOne(item._id)}\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (index + 1)}</td>\r\n\r\n//                   <td>\r\n//                     {item.image ? (\r\n//                       <img src={item.image} alt={item.name} />\r\n//                     ) : (\r\n//                       <span className=\"no-img\">No Img</span>\r\n//                     )}\r\n//                   </td>\r\n\r\n//                   <td>{item.name}</td>\r\n\r\n//                   <td>{item.category?.name}</td>\r\n\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n\r\n//                   <td>{item.difference || 0}</td>\r\n\r\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n//                   <td>\r\n//                     <button\r\n//                       className={\r\n//                         item.status === \"active\" ? \"status-active\" : \"status-inactive\"\r\n//                       }\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString(\"en-IN\")\r\n//                       : \"-\"}\r\n//                   </td>\r\n\r\n//                   <td className=\"actions\">\r\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                       Edit\r\n//                     </button>\r\n\r\n//                     <button\r\n//                       className=\"btn delete\"\r\n//                       onClick={() => handleDelete(item._id)}\r\n//                     >\r\n//                       Delete\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {currentItems.map((item) => (\r\n//               <div className=\"mobile-card\" key={item._id}>\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() => toggleSelectOne(item._id)}\r\n//                 />\r\n\r\n//                 {item.image ? (\r\n//                   <img src={item.image} alt={item.name} />\r\n//                 ) : (\r\n//                   <div>No Image</div>\r\n//                 )}\r\n\r\n//                 <h3>{item.name}</h3>\r\n\r\n//                 <p><b>Category:</b> {item.category?.name}</p>\r\n\r\n//                 <p><b>Base:</b> ‚Çπ{item.basePrice}</p>\r\n\r\n//                 <p><b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</p>\r\n\r\n//                 <button\r\n//                   className={\r\n//                     item.status === \"active\" ? \"status-active\" : \"status-inactive\"\r\n//                   }\r\n//                   onClick={() => handleStatusToggle(item)}\r\n//                 >\r\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                 </button>\r\n\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                     Edit\r\n//                   </button>\r\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                     Delete\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* Pagination */}\r\n//         <div className=\"pagination\">\r\n//           <button\r\n//             disabled={currentPage === 1}\r\n//             onClick={() => setCurrentPage((p) => p - 1)}\r\n//           >\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }).map((_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button\r\n//             disabled={currentPage === totalPages}\r\n//             onClick={() => setCurrentPage((p) => p + 1)}\r\n//           >\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n//   const [search, setSearch] = useState(\"\");\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n\r\n//   // COPY MODE\r\n//   const [isCopyMode, setIsCopyMode] = useState(false);\r\n\r\n//   // CATEGORY ADD\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   // BULK\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const csvInputRef = useRef();\r\n\r\n//   // PAGINATION\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   // ----------------- FETCH ITEMS -----------------\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL); // Admin API returns ALL items\r\n//       if (res.data.success) setItems(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.log(\"Fetch error\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.log(\"Cat fetch err\", err);\r\n//     }\r\n//   };\r\n//   // ----------------- CREATE CATEGORY -----------------\r\n// const handleCreateCategory = async () => {\r\n//   if (!newCategoryName) return alert(\"Enter category name\");\r\n\r\n//   try {\r\n//     const fd = new FormData();\r\n//     fd.append(\"name\", newCategoryName);\r\n//     if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//     const res = await axios.post(CATEGORY_URL, fd);\r\n\r\n//     if (res.data.success) {\r\n//       alert(\"Category Created!\");\r\n\r\n//       // Reset form\r\n//       setNewCategoryName(\"\");\r\n//       setNewCategoryImage(null);\r\n//       setNewCategoryPreview(null);\r\n//       setAddingCategory(false);\r\n\r\n//       // Refresh list\r\n//       fetchCategories();\r\n//     }\r\n//   } catch (err) {\r\n//     console.log(\"Category create error\", err);\r\n//     alert(\"Category create failed\");\r\n//   }\r\n// };\r\n\r\n\r\n//   // ----------------- HANDLE INPUTS -----------------\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files) setForm({ ...form, file: files[0] });\r\n//     else setForm({ ...form, [name]: value });\r\n//   };\r\n\r\n//   // ----------------- SUBMIT FORM -----------------\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price required\");\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((k) => {\r\n//         if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\r\n//       });\r\n\r\n//       if (isCopyMode) {\r\n//         await axios.post(API_URL, fd);\r\n//         alert(\"Copied as new item!\");\r\n//       } else if (editId) {\r\n//         await axios.put(`${API_URL}/${editId}`, fd);\r\n//       } else {\r\n//         await axios.post(API_URL, fd);\r\n//       }\r\n\r\n//       // Reset\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n\r\n//       setEditId(null);\r\n//       setIsCopyMode(false);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.log(\"Save error\", err);\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- EDIT -----------------\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     setIsCopyMode(false);\r\n//     setEditId(item._id);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // ----------------- COPY ‚Üí NEW ENTRY -----------------\r\n//   const handleCopyToEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice,\r\n//       difference: item.difference,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     setEditId(null);\r\n//     setIsCopyMode(true);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // ----------------- DELETE -----------------\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       alert(\"Delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- STATUS TOGGLE -----------------\r\n//   const handleStatusToggle = async (item) => {\r\n//     const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n\r\n//     try {\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) =>\r\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n//       );\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       alert(\"Status update failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- BULK DELETE -----------------\r\n//   const handleBulkDelete = async () => {\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n//       );\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- BULK HELPERS -----------------\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) =>\r\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\r\n//     );\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         name: x.name,\r\n//         basePrice: x.basePrice,\r\n//         difference: x.difference,\r\n//         validTill: x.validTill,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       alert(\"Bulk save failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- CSV IMPORT -----------------\r\n//   const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Select CSV\");\r\n\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", csvFile);\r\n\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data.success) {\r\n//         fetchItems();\r\n//         alert(\"CSV Imported!\");\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//       } else {\r\n//         alert(\"CSV import failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"CSV import error\", err);\r\n//       alert(\"CSV import failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- CSV EXPORT -----------------\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"prices.csv\";\r\n//       a.click();\r\n//     } catch (err) {\r\n//       console.error(\"CSV export error\", err);\r\n//       alert(\"CSV export failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ----------------- SEARCH FILTER -----------------\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     return (\r\n//       item.name.toLowerCase().includes(t) ||\r\n//       item.category?.name?.toLowerCase().includes(t)\r\n//     );\r\n//   });\r\n\r\n//   // ----------------- PAGINATION -----------------\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(\r\n//     indexOfLast - itemsPerPage,\r\n//     indexOfLast\r\n//   );\r\n//   const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n\r\n//       {/* HEADER */}\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Product Management</h1>\r\n//         <p>Manage prices, categories, images, CSV & bulk actions.</p>\r\n//       </div>\r\n\r\n//       {/* SEARCH */}\r\n//       <div className=\"search-bar\">\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product or category...\"\r\n//           value={search}\r\n//           onChange={(e) => setSearch(e.target.value)}\r\n//         />\r\n//       </div>\r\n\r\n//       {/* BULK BAR */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-bar\">\r\n//           <span>{selectedItems.length} selected</span>\r\n\r\n//           {!bulkMode ? (\r\n//             <div className=\"bulk-actions\">\r\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n\r\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div className=\"bulk-panel\">\r\n\r\n//               <h3>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} className=\"bulk-edit-item-box\">\r\n//                     <h4>{item.name}</h4>\r\n\r\n//                     <div className=\"form-grid\">\r\n\r\n//                       <div className=\"form-group\">\r\n//                         <label>Name</label>\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           value={item.name}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(\r\n//                               item._id,\r\n//                               \"name\",\r\n//                               e.target.value\r\n//                             )\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div className=\"form-group\">\r\n//                         <label>Base Price</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.basePrice}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(\r\n//                               item._id,\r\n//                               \"basePrice\",\r\n//                               Number(e.target.value)\r\n//                             )\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div className=\"form-group\">\r\n//                         <label>Difference</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.difference || 0}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(\r\n//                               item._id,\r\n//                               \"difference\",\r\n//                               Number(e.target.value)\r\n//                             )\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div className=\"form-group\">\r\n//                         <label>Valid Till</label>\r\n//                         <input\r\n//                           type=\"date\"\r\n//                           value={\r\n//                             item.validTill\r\n//                               ? item.validTill.split(\"T\")[0]\r\n//                               : \"\"\r\n//                           }\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(\r\n//                               item._id,\r\n//                               \"validTill\",\r\n//                               e.target.value\r\n//                             )\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               <button className=\"btn primary\" onClick={handleBulkSave}>\r\n//                 ‚úî Save All\r\n//               </button>\r\n\r\n//               <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n//                 ‚úñ Cancel\r\n//               </button>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* ADD / EDIT FORM */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>\r\n//           {isCopyMode\r\n//             ? \"üìÑ Save Duplicate Product\"\r\n//             : editId\r\n//             ? \"‚úè Upgrade Product\"\r\n//             : \"‚ûï Add Product\"}\r\n//         </h2>\r\n\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input\r\n//                 required\r\n//                 name=\"name\"\r\n//                 value={form.name}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select\r\n//                   required\r\n//                   name=\"category\"\r\n//                   value={form.category}\r\n//                   onChange={handleChange}\r\n//                 >\r\n//                   <option value=\"\">Select</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   className=\"btn small\"\r\n//                   onClick={() => setAddingCategory(!addingCategory)}\r\n//                 >\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>New Category</label>\r\n\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Category name\"\r\n//                   />\r\n\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewCategoryImage(e.target.files[0]);\r\n//                       setNewCategoryPreview(\r\n//                         e.target.files[0]\r\n//                           ? URL.createObjectURL(e.target.files[0])\r\n//                           : null\r\n//                       );\r\n//                     }}\r\n//                   />\r\n\r\n//                   <button\r\n//   className=\"btn primary\"\r\n//   type=\"button\"\r\n//   onClick={handleCreateCategory}\r\n// >\r\n//   Create\r\n// </button>\r\n\r\n//                 </div>\r\n\r\n//                 {newCategoryPreview && (\r\n//                   <img src={newCategoryPreview} className=\"categoryPreview\" />\r\n//                 )}\r\n//               </div>\r\n//             )}\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price *</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 required\r\n//                 name=\"basePrice\"\r\n//                 value={form.basePrice}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Difference</label>\r\n//               <input\r\n//                 type=\"number\"\r\n//                 name=\"difference\"\r\n//                 value={form.difference}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input\r\n//                 type=\"date\"\r\n//                 name=\"validTill\"\r\n//                 value={form.validTill}\r\n//                 onChange={handleChange}\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea\r\n//               name=\"description\"\r\n//               value={form.description}\r\n//               onChange={handleChange}\r\n//             ></textarea>\r\n//           </div>\r\n\r\n//           <div className=\"form-actions\">\r\n//             <button className=\"btn primary\" disabled={loading}>\r\n//               {loading\r\n//                 ? \"Saving...\"\r\n//                 : isCopyMode\r\n//                 ? \"Save Copy\"\r\n//                 : editId\r\n//                 ? \"Upgrade\"\r\n//                 : \"Add\"}\r\n//             </button>\r\n\r\n//             {(editId || isCopyMode) && (\r\n//               <button\r\n//                 type=\"button\"\r\n//                 className=\"btn cancel\"\r\n//                 onClick={() => {\r\n//                   setEditId(null);\r\n//                   setIsCopyMode(false);\r\n//                 }}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV IMPORT EXPORT */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\".csv\"\r\n//             ref={csvInputRef}\r\n//             onChange={handleCsvSelect}\r\n//           />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//           Export CSV\r\n//         </button>\r\n//       </div>\r\n\r\n//       {/* TABLE */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Items</h2>\r\n//           <span>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={\r\n//                       selectedItems.length === filteredItems.length &&\r\n//                       filteredItems.length > 0\r\n//                     }\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length)\r\n//                         setSelectedItems([]);\r\n//                       else\r\n//                         setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Sr</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Status</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         selectedItems.includes(item._id)\r\n//                           ? setSelectedItems(\r\n//                               selectedItems.filter((x) => x !== item._id)\r\n//                             )\r\n//                           : setSelectedItems([...selectedItems, item._id])\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td>\r\n//                     {item.image ? (\r\n//                       <img src={item.image} alt=\"img\" />\r\n//                     ) : (\r\n//                       \"No Img\"\r\n//                     )}\r\n//                   </td>\r\n\r\n//                   <td>{item.name}</td>\r\n\r\n//                   <td>{item.category?.name}</td>\r\n\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n\r\n//                   <td>{item.difference || 0}</td>\r\n\r\n//                   {/* FINAL PRICE (Admin: always show) */}\r\n//                   <td>\r\n//                     ‚Çπ\r\n//                     {Number(item.basePrice) + Number(item.difference || 0)}\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     <button\r\n//                       className={\r\n//                         item.status === \"active\"\r\n//                           ? \"status-active\"\r\n//                           : \"status-inactive\"\r\n//                       }\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString()\r\n//                       : \"-\"}\r\n//                   </td>\r\n\r\n//                   <td className=\"actions\">\r\n\r\n//                     <button\r\n//                       className=\"btn edit\"\r\n//                       onClick={() => handleEdit(item)}\r\n//                     >\r\n//                       Edit\r\n//                     </button>\r\n\r\n//                     <button\r\n//                       className=\"btn delete\"\r\n//                       onClick={() => handleDelete(item._id)}\r\n//                     >\r\n//                       Delete\r\n//                     </button>\r\n\r\n//                     <button\r\n//                       className=\"btn small\"\r\n//                       style={{ background: \"#6f42c1\", color: \"#fff\" }}\r\n//                       onClick={() => handleCopyToEdit(item)}\r\n//                     >\r\n//                       Copy\r\n//                     </button>\r\n\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {currentItems.map((item) => (\r\n//               <div key={item._id} className=\"mobile-card\">\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() =>\r\n//                     selectedItems.includes(item._id)\r\n//                       ? setSelectedItems(\r\n//                           selectedItems.filter((x) => x !== item._id)\r\n//                         )\r\n//                       : setSelectedItems([...selectedItems, item._id])\r\n//                   }\r\n//                 />\r\n\r\n//                 {item.image ? (\r\n//                   <img src={item.image} alt=\"img\" />\r\n//                 ) : (\r\n//                   <div>No Image</div>\r\n//                 )}\r\n\r\n//                 <h3>{item.name}</h3>\r\n\r\n//                 <p>\r\n//                   <b>Category:</b> {item.category?.name}\r\n//                 </p>\r\n//                 <p>\r\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\r\n//                 </p>\r\n//                 <p>\r\n//                   <b>Final:</b> ‚Çπ\r\n//                   {Number(item.basePrice) + Number(item.difference || 0)}\r\n//                 </p>\r\n\r\n//                 <button\r\n//                   className={\r\n//                     item.status === \"active\"\r\n//                       ? \"status-active\"\r\n//                       : \"status-inactive\"\r\n//                   }\r\n//                   onClick={() => handleStatusToggle(item)}\r\n//                 >\r\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                 </button>\r\n\r\n//                 <div className=\"actions\">\r\n//                   <button\r\n//                     className=\"btn edit\"\r\n//                     onClick={() => handleEdit(item)}\r\n//                   >\r\n//                     Edit\r\n//                   </button>\r\n\r\n//                   <button\r\n//                     className=\"btn delete\"\r\n//                     onClick={() => handleDelete(item._id)}\r\n//                   >\r\n//                     Delete\r\n//                   </button>\r\n\r\n//                   <button\r\n//                     className=\"btn small\"\r\n//                     style={{ background: \"#6f42c1\", color: \"#fff\" }}\r\n//                     onClick={() => handleCopyToEdit(item)}\r\n//                   >\r\n//                     Copy\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* PAGINATION */}\r\n//         <div className=\"pagination\">\r\n//           <button\r\n//             disabled={currentPage === 1}\r\n//             onClick={() => setCurrentPage((p) => p - 1)}\r\n//           >\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }).map((_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               className={i + 1 === currentPage ? \"active-page\" : \"\"}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button\r\n//             disabled={currentPage === totalPages}\r\n//             onClick={() => setCurrentPage((p) => p + 1)}\r\n//           >\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\";\r\n\r\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    difference: \"\",\r\n    validTill: \"\",\r\n    file: null,\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [csvFile, setCsvFile] = useState(null);\r\n\r\n  // COPY MODE\r\n  const [isCopyMode, setIsCopyMode] = useState(false);\r\n\r\n  // CATEGORY ADD\r\n  const [addingCategory, setAddingCategory] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n  // SUB CATEGORY ADD\r\n  const [addingSub, setAddingSub] = useState(false);\r\n  const [newSubName, setNewSubName] = useState(\"\");\r\n  const [newSubImage, setNewSubImage] = useState(null);\r\n  const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n  // BULK\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  const csvInputRef = useRef();\r\n\r\n  // PAGINATION\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  // ----------------- FETCH ITEMS -----------------\r\n  useEffect(() => {\r\n    fetchItems();\r\n    fetchCategories();\r\n\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n      if (res.data.success) setItems(res.data.data || []);\r\n    } catch (err) {\r\n      console.log(\"Fetch error\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data.success) {\r\n        setCategories(res.data.categories || []);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"Cat fetch err\", err);\r\n    }\r\n  };\r\n  // ----------------- WHEN CATEGORY SELECT ‚Üí LOAD SUBCATEGORIES -----------------\r\n  useEffect(() => {\r\n    if (!form.category) {\r\n      setSubcategories([]);\r\n      setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n      return;\r\n    }\r\n\r\n    const categoryObj = categories.find((c) => c._id === form.category);\r\n    if (categoryObj && categoryObj.subcategories) {\r\n      setSubcategories(categoryObj.subcategories);\r\n    } else {\r\n      setSubcategories([]);\r\n    }\r\n\r\n    setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n  }, [form.category, categories]);\r\n\r\n  // ----------------- CREATE CATEGORY -----------------\r\n  const handleCreateCategory = async () => {\r\n    if (!newCategoryName) return alert(\"Enter category name\");\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"name\", newCategoryName);\r\n      if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n      const res = await axios.post(CATEGORY_URL, fd);\r\n\r\n      if (res.data.success) {\r\n        alert(\"Category Created!\");\r\n\r\n        setNewCategoryName(\"\");\r\n        setNewCategoryImage(null);\r\n        setNewCategoryPreview(null);\r\n        setAddingCategory(false);\r\n\r\n        fetchCategories();\r\n      }\r\n    } catch (err) {\r\n      console.log(\"Category create error\", err);\r\n      alert(\"Category create failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- CREATE SUB CATEGORY -----------------\r\n  const handleCreateSub = async () => {\r\n    if (!newSubName) return alert(\"Enter subcategory name\");\r\n    if (!form.category) return alert(\"Select category first\");\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"name\", newSubName);\r\n      if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n      const res = await axios.post(\r\n        `${CATEGORY_URL}/${form.category}/sub`,\r\n        fd\r\n      );\r\n\r\n      if (res.data.success) {\r\n        alert(\"Subcategory Created!\");\r\n\r\n        setNewSubName(\"\");\r\n        setNewSubImage(null);\r\n        setNewSubPreview(null);\r\n        setAddingSub(false);\r\n\r\n        fetchCategories();\r\n      }\r\n    } catch (err) {\r\n      console.log(\"Subcategory create error\", err);\r\n      alert(\"Subcategory create failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- HANDLE INPUTS -----------------\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files) setForm({ ...form, file: files[0] });\r\n    else setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  // ----------------- SUBMIT FORM -----------------\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!form.name || !form.category || !form.basePrice) {\r\n        alert(\"Name, category & base price required\");\r\n        return;\r\n      }\r\n\r\n      const fd = new FormData();\r\n      Object.keys(form).forEach((k) => {\r\n        if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\r\n      });\r\n\r\n      if (isCopyMode) {\r\n        await axios.post(API_URL, fd);\r\n        alert(\"Copied as new item!\");\r\n      } else if (editId) {\r\n        await axios.put(`${API_URL}/${editId}`, fd);\r\n      } else {\r\n        await axios.post(API_URL, fd);\r\n      }\r\n\r\n      setForm({\r\n        name: \"\",\r\n        category: \"\",\r\n        subcategory: \"\",\r\n        description: \"\",\r\n        basePrice: \"\",\r\n        difference: \"\",\r\n        validTill: \"\",\r\n        file: null,\r\n      });\r\n\r\n      setEditId(null);\r\n      setIsCopyMode(false);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.log(\"Save error\", err);\r\n      alert(\"Save failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ----------------- EDIT -----------------\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name,\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id?.toString() || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice,\r\n      difference: item.difference,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n    });\r\n\r\n    setIsCopyMode(false);\r\n    setEditId(item._id);\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n\r\n  // ----------------- COPY ‚Üí NEW ENTRY -----------------\r\n  const handleCopyToEdit = (item) => {\r\n    setForm({\r\n      name: item.name,\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id?.toString() || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice,\r\n      difference: item.difference,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n    });\r\n\r\n    setEditId(null);\r\n    setIsCopyMode(true);\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n  // ----------------- DELETE -----------------\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete?\")) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"Delete error\", err);\r\n      alert(\"Delete failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- STATUS TOGGLE -----------------\r\n  const handleStatusToggle = async (item) => {\r\n    const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n\r\n    try {\r\n      await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n      setItems((prev) =>\r\n        prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n      );\r\n    } catch (err) {\r\n      console.error(\"Status toggle error\", err);\r\n      alert(\"Status update failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- BULK DELETE -----------------\r\n  const handleBulkDelete = async () => {\r\n    if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n    try {\r\n      await Promise.all(\r\n        selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n      );\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"Bulk delete error\", err);\r\n      alert(\"Bulk delete failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- BULK HELPERS -----------------\r\n  const updateLocalItemField = (id, key, value) => {\r\n    setItems((prev) =>\r\n      prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\r\n    );\r\n  };\r\n\r\n  const handleBulkSave = async () => {\r\n    const updates = items\r\n      .filter((x) => selectedItems.includes(x._id))\r\n      .map((x) => ({\r\n        id: x._id,\r\n        name: x.name,\r\n        basePrice: x.basePrice,\r\n        difference: x.difference,\r\n        validTill: x.validTill,\r\n      }));\r\n\r\n    try {\r\n      await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n      setBulkMode(false);\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"Bulk save error\", err);\r\n      alert(\"Bulk save failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- CSV IMPORT -----------------\r\n  const handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\n  const handleImportCsv = async () => {\r\n    if (!csvFile) return alert(\"Select CSV\");\r\n\r\n    const fd = new FormData();\r\n    fd.append(\"file\", csvFile);\r\n\r\n    try {\r\n      const res = await axios.post(`${API_URL}/import`, fd);\r\n      if (res.data.success) {\r\n        fetchItems();\r\n        alert(\"CSV Imported!\");\r\n        setCsvFile(null);\r\n        if (csvInputRef.current) csvInputRef.current.value = null;\r\n      } else {\r\n        alert(\"CSV import failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"CSV import error\", err);\r\n      alert(\"CSV import failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- CSV EXPORT -----------------\r\n  const handleExportCsv = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n\r\n      const url = window.URL.createObjectURL(new Blob([res.data]));\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = \"prices.csv\";\r\n      a.click();\r\n    } catch (err) {\r\n      console.error(\"CSV export error\", err);\r\n      alert(\"CSV export failed\");\r\n    }\r\n  };\r\n\r\n  // ----------------- SEARCH FILTER -----------------\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n    return (\r\n      item.name.toLowerCase().includes(t) ||\r\n      item.category?.name?.toLowerCase().includes(t) ||\r\n      item.subcategory?.name?.toLowerCase().includes(t)\r\n    );\r\n  });\r\n\r\n  // ----------------- PAGINATION -----------------\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = filteredItems.slice(\r\n    indexOfLast - itemsPerPage,\r\n    indexOfLast\r\n  );\r\n  const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\r\n\r\n  return (\r\n    <div className=\"price-container\">\r\n\r\n      {/* HEADER */}\r\n      <div className=\"header-section\">\r\n        <h1>üí∞ Product Management</h1>\r\n        <p>Manage prices, categories, images, CSV & bulk actions.</p>\r\n      </div>\r\n\r\n      {/* SEARCH */}\r\n      <div className=\"search-bar\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search product, category or subcategory...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {/* BULK BAR */}\r\n      {selectedItems.length > 0 && (\r\n        <div className=\"bulk-bar\">\r\n          <span>{selectedItems.length} selected</span>\r\n\r\n          {!bulkMode ? (\r\n            <div className=\"bulk-actions\">\r\n              <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n                üóë Bulk Delete\r\n              </button>\r\n\r\n              <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n                ‚úè Bulk Edit\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bulk-panel\">\r\n              <h3>‚úè Bulk Edit Selected Items</h3>\r\n\r\n              {items\r\n                .filter((item) => selectedItems.includes(item._id))\r\n                .map((item) => (\r\n                  <div key={item._id} className=\"bulk-edit-item-box\">\r\n                    <h4>{item.name}</h4>\r\n\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={item.name}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(item._id, \"name\", e.target.value)\r\n                          }\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"form-group\">\r\n                        <label>Base Price</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.basePrice}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(\r\n                              item._id,\r\n                              \"basePrice\",\r\n                              Number(e.target.value)\r\n                            )\r\n                          }\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"form-group\">\r\n                        <label>Difference</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.difference || 0}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(\r\n                              item._id,\r\n                              \"difference\",\r\n                              Number(e.target.value)\r\n                            )\r\n                          }\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"form-group\">\r\n                        <label>Valid Till</label>\r\n                        <input\r\n                          type=\"date\"\r\n                          value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(\r\n                              item._id,\r\n                              \"validTill\",\r\n                              e.target.value\r\n                            )\r\n                          }\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n              <button className=\"btn primary\" onClick={handleBulkSave}>\r\n                ‚úî Save All\r\n              </button>\r\n\r\n              <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n                ‚úñ Cancel\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* ADD / EDIT FORM */}\r\n      <div className=\"price-form-card\">\r\n        <h2>\r\n          {isCopyMode\r\n            ? \"üìÑ Save Duplicate Product\"\r\n            : editId\r\n            ? \"‚úè Update Product\"\r\n            : \"‚ûï Add Product\"}\r\n        </h2>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-grid\">\r\n\r\n            {/* NAME */}\r\n            <div className=\"form-group\">\r\n              <label>Product Name *</label>\r\n              <input\r\n                required\r\n                name=\"name\"\r\n                value={form.name}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            {/* CATEGORY SELECT */}\r\n            <div className=\"form-group\">\r\n              <label>Category *</label>\r\n              <div className=\"category-row\">\r\n                <select\r\n                  required\r\n                  name=\"category\"\r\n                  value={form.category}\r\n                  onChange={handleChange}\r\n                >\r\n                  <option value=\"\">Select Category</option>\r\n                  {categories.map((c) => (\r\n                    <option value={c._id} key={c._id}>\r\n                      {c.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn small\"\r\n                  onClick={() => setAddingCategory(!addingCategory)}\r\n                >\r\n                  {addingCategory ? \"Close\" : \"Add\"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ADD CATEGORY */}\r\n            {addingCategory && (\r\n              <div className=\"form-group full-width addCategoryBox\">\r\n                <label>Add New Category</label>\r\n\r\n                <div className=\"category-row\">\r\n                  <input\r\n                    value={newCategoryName}\r\n                    onChange={(e) => setNewCategoryName(e.target.value)}\r\n                    placeholder=\"Category name\"\r\n                  />\r\n\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => {\r\n                      setNewCategoryImage(e.target.files[0]);\r\n                      setNewCategoryPreview(\r\n                        e.target.files[0]\r\n                          ? URL.createObjectURL(e.target.files[0])\r\n                          : null\r\n                      );\r\n                    }}\r\n                  />\r\n\r\n                  <button className=\"btn primary\" type=\"button\" onClick={handleCreateCategory}>\r\n                    Create\r\n                  </button>\r\n                </div>\r\n\r\n                {newCategoryPreview && (\r\n                  <img src={newCategoryPreview} className=\"categoryPreview\" />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* SUBCATEGORY SELECT */}\r\n            <div className=\"form-group\">\r\n              <label>Subcategory</label>\r\n              <div className=\"category-row\">\r\n                <select\r\n                  name=\"subcategory\"\r\n                  value={form.subcategory}\r\n                  onChange={handleChange}\r\n                  disabled={!subcategories.length}\r\n                >\r\n                  <option value=\"\">Select Subcategory</option>\r\n                  {subcategories.map((s) => (\r\n                    <option value={s._id} key={s._id}>\r\n                      {s.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n\r\n                {form.category && (\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn small\"\r\n                    onClick={() => setAddingSub(!addingSub)}\r\n                  >\r\n                    {addingSub ? \"Close\" : \"Add\"}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* ADD SUBCATEGORY */}\r\n            {addingSub && (\r\n              <div className=\"form-group full-width addCategoryBox\">\r\n                <label>Add New Subcategory</label>\r\n\r\n                <div className=\"category-row\">\r\n                  <input\r\n                    value={newSubName}\r\n                    onChange={(e) => setNewSubName(e.target.value)}\r\n                    placeholder=\"Subcategory name\"\r\n                  />\r\n\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => {\r\n                      setNewSubImage(e.target.files[0]);\r\n                      setNewSubPreview(\r\n                        e.target.files[0]\r\n                          ? URL.createObjectURL(e.target.files[0])\r\n                          : null\r\n                      );\r\n                    }}\r\n                  />\r\n\r\n                  <button className=\"btn primary\" type=\"button\" onClick={handleCreateSub}>\r\n                    Create\r\n                  </button>\r\n                </div>\r\n\r\n                {newSubPreview && (\r\n                  <img src={newSubPreview} className=\"categoryPreview\" />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* BASE PRICE */}\r\n            <div className=\"form-group\">\r\n              <label>Base Price *</label>\r\n              <input\r\n                type=\"number\"\r\n                required\r\n                name=\"basePrice\"\r\n                value={form.basePrice}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            {/* DIFFERENCE */}\r\n            <div className=\"form-group\">\r\n              <label>Difference</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"difference\"\r\n                value={form.difference}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            {/* VALID TILL */}\r\n            <div className=\"form-group\">\r\n              <label>Valid Till</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"validTill\"\r\n                value={form.validTill}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            {/* IMAGE */}\r\n            <div className=\"form-group\">\r\n              <label>Image</label>\r\n              <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* DESCRIPTION */}\r\n          <div className=\"form-group full-width\">\r\n            <label>Description</label>\r\n            <textarea\r\n              name=\"description\"\r\n              value={form.description}\r\n              onChange={handleChange}\r\n            ></textarea>\r\n          </div>\r\n\r\n          {/* SUBMIT BUTTON */}\r\n          <div className=\"form-actions\">\r\n            <button className=\"btn primary\" disabled={loading}>\r\n              {loading\r\n                ? \"Saving...\"\r\n                : isCopyMode\r\n                ? \"Save Copy\"\r\n                : editId\r\n                ? \"Update\"\r\n                : \"Add\"}\r\n            </button>\r\n\r\n            {(editId || isCopyMode) && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn cancel\"\r\n                onClick={() => {\r\n                  setEditId(null);\r\n                  setIsCopyMode(false);\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {/* CSV IMPORT EXPORT */}\r\n      <div className=\"csv-controls\">\r\n        <div>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".csv\"\r\n            ref={csvInputRef}\r\n            onChange={handleCsvSelect}\r\n          />\r\n          <button className=\"btn small\" onClick={handleImportCsv}>\r\n            Import CSV\r\n          </button>\r\n        </div>\r\n\r\n        <button className=\"btn primary\" onClick={handleExportCsv}>\r\n          Export CSV\r\n        </button>\r\n      </div>\r\n\r\n      {/* TABLE */}\r\n      <div className=\"table-card\">\r\n        <div className=\"table-header\">\r\n          <h2>üìã Items</h2>\r\n          <span>Total: {filteredItems.length}</span>\r\n        </div>\r\n\r\n        {!isMobile ? (\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={\r\n                      selectedItems.length === filteredItems.length &&\r\n                      filteredItems.length > 0\r\n                    }\r\n                    onChange={() => {\r\n                      if (selectedItems.length === filteredItems.length)\r\n                        setSelectedItems([]);\r\n                      else\r\n                        setSelectedItems(filteredItems.map((x) => x._id));\r\n                    }}\r\n                  />\r\n                </th>\r\n                <th>Sr</th>\r\n                <th>Image</th>\r\n                <th>Name</th>\r\n                <th>Category</th>\r\n                <th>Subcategory</th>\r\n                <th>Base</th>\r\n                <th>Diff</th>\r\n                <th>Final</th>\r\n                <th>Status</th>\r\n                <th>Valid Till</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {currentItems.map((item, i) => (\r\n                <tr key={item._id}>\r\n                  <td>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item._id)}\r\n                      onChange={() =>\r\n                        selectedItems.includes(item._id)\r\n                          ? setSelectedItems(selectedItems.filter((x) => x !== item._id))\r\n                          : setSelectedItems([...selectedItems, item._id])\r\n                      }\r\n                    />\r\n                  </td>\r\n\r\n                  <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n                  <td>{item.image ? <img src={item.image} alt=\"img\" /> : \"No Img\"}</td>\r\n\r\n                  <td>{item.name}</td>\r\n\r\n                  <td>{item.category?.name}</td>\r\n\r\n                  <td>{item.subcategory?.name || \"-\"}</td>\r\n\r\n                  <td>‚Çπ{item.basePrice}</td>\r\n\r\n                  <td>{item.difference || 0}</td>\r\n\r\n                  <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n                  <td>\r\n                    <button\r\n                      className={\r\n                        item.status === \"active\" ? \"status-active\" : \"status-inactive\"\r\n                      }\r\n                      onClick={() => handleStatusToggle(item)}\r\n                    >\r\n                      {item.status === \"active\" ? \"üü¢ Active\" : \"üî¥ Inactive\"}\r\n                    </button>\r\n                  </td>\r\n\r\n                  <td>\r\n                    {item.validTill\r\n                      ? new Date(item.validTill).toLocaleDateString()\r\n                      : \"-\"}\r\n                  </td>\r\n\r\n                  <td className=\"actions\">\r\n                    <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n                      Edit\r\n                    </button>\r\n\r\n                    <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n                      Delete\r\n                    </button>\r\n\r\n                    <button\r\n                      className=\"btn small\"\r\n                      style={{ background: \"#6f42c1\", color: \"#fff\" }}\r\n                      onClick={() => handleCopyToEdit(item)}\r\n                    >\r\n                      Copy\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <div className=\"mobile-list\">\r\n            {currentItems.map((item) => (\r\n              <div key={item._id} className=\"mobile-card\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedItems.includes(item._id)}\r\n                  onChange={() =>\r\n                    selectedItems.includes(item._id)\r\n                      ? setSelectedItems(selectedItems.filter((x) => x !== item._id))\r\n                      : setSelectedItems([...selectedItems, item._id])\r\n                  }\r\n                />\r\n\r\n                {item.image ? (\r\n                  <img src={item.image} alt=\"img\" />\r\n                ) : (\r\n                  <div>No Image</div>\r\n                )}\r\n\r\n                <h3>{item.name}</h3>\r\n\r\n                <p>\r\n                  <b>Category:</b> {item.category?.name}\r\n                </p>\r\n\r\n                <p>\r\n                  <b>Subcategory:</b> {item.subcategory?.name || \"-\"}\r\n                </p>\r\n\r\n                <p>\r\n                  <b>Base:</b> ‚Çπ{item.basePrice}\r\n                </p>\r\n\r\n                <p>\r\n                  <b>Final:</b> ‚Çπ\r\n                  {Number(item.basePrice) + Number(item.difference || 0)}\r\n                </p>\r\n\r\n                <button\r\n                  className={\r\n                    item.status === \"active\" ? \"status-active\" : \"status-inactive\"\r\n                  }\r\n                  onClick={() => handleStatusToggle(item)}\r\n                >\r\n                  {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                </button>\r\n\r\n                <div className=\"actions\">\r\n                  <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n                    Edit\r\n                  </button>\r\n\r\n                  <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n                    Delete\r\n                  </button>\r\n\r\n                  <button\r\n                    className=\"btn small\"\r\n                    style={{ background: \"#6f42c1\", color: \"#fff\" }}\r\n                    onClick={() => handleCopyToEdit(item)}\r\n                  >\r\n                    Copy\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* PAGINATION */}\r\n        <div className=\"pagination\">\r\n          <button\r\n            disabled={currentPage === 1}\r\n            onClick={() => setCurrentPage((p) => p - 1)}\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          {Array.from({ length: totalPages }).map((_, i) => (\r\n            <button\r\n              key={i}\r\n              className={i + 1 === currentPage ? \"active-page\" : \"\"}\r\n              onClick={() => setCurrentPage(i + 1)}\r\n            >\r\n              {i + 1}\r\n            </button>\r\n          ))}\r\n\r\n          <button\r\n            disabled={currentPage === totalPages}\r\n            onClick={() => setCurrentPage((p) => p + 1)}\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,MAAMC,OAAO,GAAG,+CAA+C;AAC/D,MAAMC,YAAY,GAAG,mDAAmD;AAExE,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,C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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}