{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\n// // import React, { useEffect, useState, useRef } from \"react\";\n// // import axios from \"axios\";\n// // import \"./PriceList.css\"\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// // export default function PriceList() {\n// //   const [items, setItems] = useState([]);\n// //   const [categories, setCategories] = useState([]);\n// //   const [subcategories, setSubcategories] = useState([]);\n// //   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n// //   const [search, setSearch] = useState(\"\");\n// //   const [loading, setLoading] = useState(false);\n\n// //   // FORM state\n// //   const [form, setForm] = useState({\n// //     name: \"\",\n// //     category: \"\",\n// //     subcategory: \"\",\n// //     description: \"\",\n// //     basePrice: \"\",\n// //     difference: \"\",\n// //     validTill: \"\",\n// //     file: null,\n// //   });\n\n// //   const [editId, setEditId] = useState(null);\n// //   const [isCopyMode, setIsCopyMode] = useState(false);\n// //   const [showForm, setShowForm] = useState(false);\n// //   const [showModal, setShowModal] = useState(false);\n// //   const [activeMenu, setActiveMenu] = useState(null);\n\n// //   const [addingCategory, setAddingCategory] = useState(false);\n// //   const [newCategoryName, setNewCategoryName] = useState(\"\");\n// //   const [newCategoryImage, setNewCategoryImage] = useState(null);\n// //   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n// //   const [addingSub, setAddingSub] = useState(false);\n// //   const [newSubName, setNewSubName] = useState(\"\");\n// //   const [newSubImage, setNewSubImage] = useState(null);\n// //   const [newSubPreview, setNewSubPreview] = useState(null);\n\n// //   const [selectedItems, setSelectedItems] = useState([]);\n// //   const [bulkMode, setBulkMode] = useState(false);\n\n// //   const [csvFile, setCsvFile] = useState(null);\n// //   const csvInputRef = useRef();\n\n// //   const [currentPage, setCurrentPage] = useState(1);\n// //   const itemsPerPage = 30;\n\n// //   const [filterCategory, setFilterCategory] = useState(\"\");\n// // const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n// // const [filterSubs, setFilterSubs] = useState([]);\n\n// // useEffect(() => {\n// //   if (!filterCategory) {\n// //     setFilterSubs([]);\n// //     setFilterSubcategory(\"\");\n// //     return;\n// //   }\n\n// //   const cat = categories.find(c => c._id === filterCategory);\n// //   setFilterSubs(cat?.subcategories || []);\n// //   setFilterSubcategory(\"\");\n// // }, [filterCategory, categories]);\n\n// //   // useEffect(() => {\n// //   //   fetchItems();\n// //   //   fetchCategories();\n\n// //   //   const handleResize = () => setIsMobile(window.innerWidth < 768);\n// //   //   window.addEventListener(\"resize\", handleResize);\n// //   //   return () => window.removeEventListener(\"resize\", handleResize);\n// //   // }, []);\n// //   // 1. Pehle categories load karo\n// // useEffect(() => {\n// //   fetchCategories();\n// // }, []);\n\n// // // 2. Categories load hone ke baad items load karo\n// // useEffect(() => {\n// //   if (categories.length > 0) {\n// //     fetchItems();\n// //   }\n// // }, [categories]);\n\n// // // 3. Resize listener\n// // useEffect(() => {\n// //   const handleResize = () => setIsMobile(window.innerWidth < 768);\n// //   window.addEventListener(\"resize\", handleResize);\n// //   return () => window.removeEventListener(\"resize\", handleResize);\n// // }, []);\n\n// //   const fetchItems = async () => {\n// //     try {\n// //       setLoading(true);\n// //       const res = await axios.get(API_URL);\n// //       // if (res.data && res.data.success) setItems(res.data.data || []);\n// //       if (res.data && res.data.success) {\n// //   const raw = res.data.data;\n\n// //   // Agar categories abhi load nahi hui = raw items set\n// //   if (!categories.length) {\n// //     setItems(raw);\n// //     return;\n// //   }\n\n// //   // Mapping to category + subcategory object\n// //   const enriched = raw.map((item) => {\n// //     const cat = categories.find(\n// //       (c) =>\n// //         c._id === item.category ||\n// //         c._id === item.category?._id\n// //     );\n\n// //     const sub = cat?.subcategories?.find(\n// //       (s) =>\n// //         s._id === item.subcategory ||\n// //         s._id === item.subcategory?._id\n// //     );\n\n// //     return {\n// //       ...item,\n// //       category: cat\n// //         ? { _id: cat._id, name: cat.name }\n// //         : item.category,\n\n// //       subcategory: sub\n// //         ? { _id: sub._id, name: sub.name }\n// //         : item.subcategory,\n// //     };\n// //   });\n\n// //   setItems(enriched);\n// // }\n\n// //     } catch (err) {\n// //       console.error(\"Fetch items error\", err);\n// //       alert(\"Could not fetch items\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   const fetchCategories = async () => {\n// //     try {\n// //       const res = await axios.get(CATEGORY_URL);\n// //       if (res.data && res.data.success) setCategories(res.data.categories || []);\n// //     } catch (err) {\n// //       console.error(\"Fetch categories error\", err);\n// //       alert(\"Could not fetch categories\");\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     if (!form.category) {\n// //       setSubcategories([]);\n// //       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n// //       return;\n// //     }\n\n// //     const cat = categories.find((c) => c._id === form.category);\n// //     const subs = (cat && cat.subcategories) || [];\n// //     setSubcategories(subs);\n\n// //     const exists = subs.some((s) => s._id === form.subcategory);\n// //     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\n// //   }, [form.category, categories]);\n\n// //   const handleCreateCategory = async () => {\n// //     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n// //     try {\n// //       const fd = new FormData();\n// //       fd.append(\"name\", newCategoryName.trim());\n// //       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n// //       const res = await axios.post(CATEGORY_URL, fd);\n// //       if (res.data && res.data.success) {\n// //         alert(\"Category created\");\n// //         setNewCategoryName(\"\");\n// //         setNewCategoryImage(null);\n// //         setNewCategoryPreview(null);\n// //         setAddingCategory(false);\n// //         fetchCategories();\n// //       } else {\n// //         alert(\"Category creation failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Create category error\", err);\n// //       alert(\"Category creation failed\");\n// //     }\n// //   };\n\n// //   const handleCreateSub = async () => {\n// //     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n// //     if (!form.category) return alert(\"Select category first\");\n\n// //     try {\n// //       const fd = new FormData();\n// //       fd.append(\"name\", newSubName.trim());\n// //       if (newSubImage) fd.append(\"image\", newSubImage);\n\n// //       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n// //       if (res.data && res.data.success) {\n// //         alert(\"Subcategory created\");\n// //         setNewSubName(\"\");\n// //         setNewSubImage(null);\n// //         setNewSubPreview(null);\n// //         setAddingSub(false);\n// //         fetchCategories();\n// //       } else {\n// //         alert(\"Subcategory creation failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Create sub error\", err);\n// //       alert(\"Subcategory creation failed\");\n// //     }\n// //   };\n\n// //   const handleChange = (e) => {\n// //     const { name, value, files } = e.target;\n// //     if (files && files.length) {\n// //       setForm((p) => ({ ...p, file: files[0] }));\n// //     } else {\n// //       setForm((p) => ({ ...p, [name]: value }));\n// //     }\n// //   };\n\n// //   const handleSubmit = async (e) => {\n// //     e.preventDefault();\n// //     setLoading(true);\n\n// //     try {\n// //       if (!form.name || !form.category || !form.basePrice) {\n// //         alert(\"Name, category & base price are required\");\n// //         setLoading(false);\n// //         return;\n// //       }\n\n// //       const fd = new FormData();\n// //       Object.keys(form).forEach((k) => {\n// //         const val = form[k];\n// //         if (val !== undefined && val !== null) {\n// //           fd.append(k, val);\n// //         }\n// //       });\n\n// //       let res;\n// //       if (isCopyMode) {\n// //         res = await axios.post(API_URL, fd);\n// //         alert(\"Copied as new item\");\n// //       } else if (editId) {\n// //         res = await axios.put(`${API_URL}/${editId}`, fd);\n// //         alert(\"Updated\");\n// //       } else {\n// //         res = await axios.post(API_URL, fd);\n// //         alert(\"Added\");\n// //       }\n\n// //       await fetchItems();\n// //       await fetchCategories();\n\n// //       setForm({\n// //         name: \"\",\n// //         category: \"\",\n// //         subcategory: \"\",\n// //         description: \"\",\n// //         basePrice: \"\",\n// //         difference: \"\",\n// //         validTill: \"\",\n// //         file: null,\n// //       });\n// //       setEditId(null);\n// //       setIsCopyMode(false);\n// //       setShowModal(false);\n// //       setShowForm(false);\n// //     } catch (err) {\n// //       console.error(\"Save error\", err);\n// //       alert(\"Save failed\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   const handleEdit = (item) => {\n// //     setForm({\n// //       name: item.name || \"\",\n// //       category: item.category?._id?.toString() || \"\",\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\n// //       description: item.description || \"\",\n// //       basePrice: item.basePrice ?? \"\",\n// //       difference: item.difference ?? \"\",\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n// //       file: null,\n// //     });\n\n// //     const cat = categories.find((c) => c._id === item.category?._id);\n// //     setSubcategories(cat?.subcategories || []);\n\n// //     setEditId(item._id);\n// //     setIsCopyMode(false);\n// //     setShowModal(true);\n// //     setActiveMenu(null);\n// //   };\n\n// //   const handleCopyToEdit = (item) => {\n// //     setForm({\n// //       name: item.name || \"\",\n// //       category: item.category?._id?.toString() || \"\",\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\n// //       description: item.description || \"\",\n// //       basePrice: item.basePrice ?? \"\",\n// //       difference: item.difference ?? \"\",\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n// //       file: null,\n// //     });\n\n// //     const cat = categories.find((c) => c._id === item.category?._id);\n// //     setSubcategories(cat?.subcategories || []);\n\n// //     setEditId(null);\n// //     setIsCopyMode(true);\n// //     setShowModal(true);\n// //     setActiveMenu(null);\n// //   };\n\n// //   const handleDelete = async (id) => {\n// //     if (!window.confirm(\"Delete item?\")) return;\n// //     try {\n// //       await axios.delete(`${API_URL}/${id}`);\n// //       setItems((prev) => prev.filter((x) => x._id !== id));\n// //       setSelectedItems((prev) => prev.filter((x) => x !== id));\n// //       setActiveMenu(null);\n// //     } catch (err) {\n// //       console.error(\"Delete error\", err);\n// //       alert(\"Delete failed\");\n// //     }\n// //   };\n\n// //   const handleStatusToggle = async (item) => {\n// //     try {\n// //       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n// //       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n// //       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n// //     } catch (err) {\n// //       console.error(\"Status toggle error\", err);\n// //       alert(\"Status update failed\");\n// //     }\n// //   };\n\n// //   const handleBulkDelete = async () => {\n// //     if (!selectedItems.length) return alert(\"No items selected\");\n// //     if (!window.confirm(\"Delete selected items?\")) return;\n\n// //     try {\n// //       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n// //       setSelectedItems([]);\n// //       fetchItems();\n// //       setBulkMode(false);\n// //     } catch (err) {\n// //       console.error(\"Bulk delete error\", err);\n// //       alert(\"Bulk delete failed\");\n// //     }\n// //   };\n\n// //   const updateLocalItemField = (id, key, value) => {\n// //     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n// //   };\n\n// //   const handleBulkSave = async () => {\n// //     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n\n// //     const updates = items\n// //       .filter((x) => selectedItems.includes(x._id))\n// //       .map((x) => ({\n// //         id: x._id,\n// //         name: x.name,\n// //         basePrice: x.basePrice,\n// //         difference: x.difference,\n// //         validTill: x.validTill,\n// //       }));\n\n// //     try {\n// //       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n// //       setBulkMode(false);\n// //       setSelectedItems([]);\n// //       fetchItems();\n// //     } catch (err) {\n// //       console.error(\"Bulk save error\", err);\n// //       alert(\"Bulk save failed\");\n// //     }\n// //   };\n\n// //   const handleCsvSelect = (e) => {\n// //     setCsvFile(e.target.files[0]);\n// //   };\n\n// //   const handleImportCsv = async () => {\n// //     if (!csvFile) return alert(\"Select CSV file\");\n// //     try {\n// //       const fd = new FormData();\n// //       fd.append(\"file\", csvFile);\n// //       const res = await axios.post(`${API_URL}/import`, fd);\n// //       if (res.data && res.data.success) {\n// //         alert(`Imported ${res.data.inserted || 0} items`);\n// //         setCsvFile(null);\n// //         if (csvInputRef.current) csvInputRef.current.value = null;\n// //         fetchItems();\n// //       } else {\n// //         alert(\"CSV import failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"CSV import error\", err);\n// //       alert(\"CSV import failed\");\n// //     }\n// //   };\n\n// //   // const handleExportCsv = async () => {\n// //   //   try {\n// //   //     const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n// //   //     const url = window.URL.createObjectURL(new Blob([res.data]));\n// //   //     const a = document.createElement(\"a\");\n// //   //     a.href = url;\n// //   //     a.download = \"prices.csv\";\n// //   //     a.click();\n// //   //     URL.revokeObjectURL(url);\n// //   //   } catch (err) {\n// //   //     console.error(\"CSV export error\", err);\n// //   //     alert(\"CSV export failed\");\n// //   //   }\n// //   // };\n// // const handleExportCsv = () => {\n// //   if (!items.length) return alert(\"No items to export\");\n\n// //   const header = [\n// //     \"id\",\n// //     \"name\",\n// //     \"categoryName\",\n// //     \"subcategoryName\",\n// //     \"basePrice\",\n// //     \"difference\",\n// //     \"finalPrice\",\n// //     \"status\",\n// //     \"validTill\",\n// //     \"description\",\n// //     \"imageUrl\",\n// //   ];\n\n// //   const rows = items.map((p) => [\n// //     p._id,\n// //     p.name || \"\",\n// //     p.category?.name || \"\",\n// //     p.subcategory?.name || \"\",\n// //     p.basePrice ?? \"\",\n// //     p.difference ?? \"\",\n// //     (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\n// //     p.status || \"\",\n// //     p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n// //     p.description || \"\",\n// //     p.image || \"\",\n// //   ]);\n\n// //   const csvArray = [header, ...rows];\n// //   const csvContent =\n// //     \"data:text/csv;charset=utf-8,\" +\n// //     csvArray\n// //       .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\n// //       .join(\"\\n\");\n\n// //   const encodedUri = encodeURI(csvContent);\n// //   const link = document.createElement(\"a\");\n// //   link.href = encodedUri;\n// //   link.download = `all_prices_${Date.now()}.csv`;\n// //   link.click();\n// // };\n\n// //   const handleExportSelectedCsv = () => {\n// //     if (!selectedItems.length) return alert(\"Select items to export\");\n\n// //     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n// //     const header = [\n// //       \"id\",\n// //       \"name\",\n// //       \"categoryName\",\n// //       \"subcategoryName\",\n// //       \"basePrice\",\n// //       \"difference\",\n// //       \"finalPrice\",\n// //       \"status\",\n// //       \"validTill\",\n// //       \"description\",\n// //       \"imageUrl\",\n// //     ];\n\n// //     const rows = selectedData.map((p) => [\n// //       p._id,\n// //       p.name || \"\",\n// //       p.category?.name || \"\",\n// //       p.subcategory?.name || \"\",\n// //       p.basePrice ?? \"\",\n// //       p.difference ?? \"\",\n// //       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\n// //       p.status || \"\",\n// //       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n// //       p.description || \"\",\n// //       p.image || \"\",\n// //     ]);\n\n// //     const csvArray = [header, ...rows];\n// //     const csvContent =\n// //       \"data:text/csv;charset=utf-8,\" +\n// //       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n// //     const encodedUri = encodeURI(csvContent);\n// //     const link = document.createElement(\"a\");\n// //     link.href = encodedUri;\n// //     link.download = `selected_prices_${Date.now()}.csv`;\n// //     link.click();\n// //   };\n\n// //   // const filteredItems = items.filter((item) => {\n// //   //   const t = search.toLowerCase();\n// //   //   return (\n// //   //     (item.name || \"\").toString().toLowerCase().includes(t) ||\n// //   //     (item.category?.name || \"\").toLowerCase().includes(t) ||\n// //   //     (item.subcategory?.name || \"\").toLowerCase().includes(t)\n// //   //   );\n// //   // });\n// //   const filteredItems = items.filter((item) => {\n// //   const t = search.toLowerCase();\n\n// //   const matchText =\n// //     (item.name || \"\").toLowerCase().includes(t) ||\n// //     (item.category?.name || \"\").toLowerCase().includes(t) ||\n// //     (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n// //   const matchCategory =\n// //     !filterCategory || item.category?._id === filterCategory;\n\n// //   const matchSub =\n// //     !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n// //   return matchText && matchCategory && matchSub;\n// // });\n\n// //   const indexOfLast = currentPage * itemsPerPage;\n// //   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n// //   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n// //   return (\n// //     <div style={styles.container}>\n// //       {/* HEADER */}\n// //       <div style={styles.header}>\n// //         <h1 style={styles.title}>Product Management</h1>\n// //         {/* <p style={styles.subtitle}>Manage prices, categories, images, CSV & bulk actions.</p> */}\n// //       </div>\n\n// //       {/* SEARCH */}\n\n// //      <div className=\"mobile-topbar\">\n// //   <input\n// //     type=\"text\"\n// //     placeholder=\"Search product, category or subcategory...\"\n// //     value={search}\n// //     onChange={(e) => {\n// //       setSearch(e.target.value);\n// //       setCurrentPage(1);\n// //     }}\n// //     style={styles.searchInput}\n// //   />\n\n// //   <button\n// //     style={styles.addButton}\n// //     onClick={() => {\n// //       setShowForm(!showForm);\n// //       setEditId(null);\n// //       setIsCopyMode(false);\n// //     }}\n// //   >\n// //     {showForm ? \"‚úñ\" : \"Add Product\"}\n// //   </button>\n// // </div>\n// // <div className=\"filter-bar\">\n// //   <select\n// //     value={filterCategory}\n// //     onChange={(e) => setFilterCategory(e.target.value)}\n// //     className=\"filter-select\"\n// //   >\n// //     <option value=\"\">Filter by Category</option>\n// //     {categories.map((c) => (\n// //       <option key={c._id} value={c._id}>{c.name}</option>\n// //     ))}\n// //   </select>\n\n// //   <select\n// //     value={filterSubcategory}\n// //     onChange={(e) => setFilterSubcategory(e.target.value)}\n// //     className=\"filter-select\"\n// //     disabled={!filterSubs.length}\n// //   >\n// //     <option value=\"\">Filter by Subcategory</option>\n// //     {filterSubs.map((s) => (\n// //       <option key={s._id} value={s._id}>{s.name}</option>\n// //     ))}\n// //   </select>\n\n// // </div>\n\n// //       {/* BULK BAR */}\n// //       {selectedItems.length > 0 && (\n// //         // <div style={styles.bulkBar}>\n// //         <div className=\"bulk-bar\">\n\n// //           {/* <span style={styles.bulkText}>{selectedItems.length} selected</span> */}\n\n// //           {!bulkMode ? (\n// //             // <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\n// //             <div className=\"bulk-actions\">\n\n// //               <button style={styles.btnDelete} onClick={handleBulkDelete}>\n// //                 üóë Bulk Delete\n// //               </button>\n\n// //               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\n// //                 ‚úè Bulk Edit\n// //               </button>\n\n// //               {/* <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n// //                 ‚§ì Export Selected\n// //               </button> */}\n// //             </div>\n// //           ) : (\n// //             <div style={styles.bulkPanel}>\n// //               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\n\n// //               {items\n// //                 .filter((item) => selectedItems.includes(item._id))\n// //                 .map((item) => (\n// //                   <div key={item._id} style={styles.bulkItemBox}>\n// //                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\n\n// //                     <div style={styles.formGrid}>\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Name</label>\n// //                         <input\n// //                           type=\"text\"\n// //                           value={item.name}\n// //                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\n// //                           style={styles.input}\n// //                         />\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Base Price</label>\n// //                         <input\n// //                           type=\"number\"\n// //                           value={item.basePrice}\n// //                           onChange={(e) =>\n// //                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\n// //                           }\n// //                           style={styles.input}\n// //                         />\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Category</label>\n// //                         <select\n// //                           value={item.category?._id || \"\"}\n// //                           onChange={(e) => {\n// //                             const newCat = e.target.value;\n// //                             updateLocalItemField(item._id, \"category\", { _id: newCat });\n// //                             const catObj = categories.find((c) => c._id === newCat);\n// //                             const firstSub = catObj?.subcategories?.[0]?._id || \"\";\n// //                             updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\n// //                           }}\n// //                           style={styles.select}\n// //                         >\n// //                           <option value=\"\">Select Category</option>\n// //                           {categories.map((c) => (\n// //                             <option key={c._id} value={c._id}>\n// //                               {c.name}\n// //                             </option>\n// //                           ))}\n// //                         </select>\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Subcategory</label>\n// //                         <select\n// //                           value={item.subcategory?._id || \"\"}\n// //                           onChange={(e) =>\n// //                             updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\n// //                           }\n// //                           style={styles.select}\n// //                         >\n// //                           <option value=\"\">Select Subcategory</option>\n// //                           {categories\n// //                             .find((c) => c._id === item.category?._id)\n// //                             ?.subcategories?.map((s) => (\n// //                               <option key={s._id} value={s._id}>\n// //                                 {s.name}\n// //                               </option>\n// //                             ))}\n// //                         </select>\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Difference</label>\n// //                         <input\n// //                           type=\"number\"\n// //                           value={item.difference || 0}\n// //                           onChange={(e) =>\n// //                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\n// //                           }\n// //                           style={styles.input}\n// //                         />\n// //                       </div>\n// //                     </div>\n// //                   </div>\n// //                 ))}\n\n// //               <div style={{ display: \"flex\", gap: 0, marginTop: 12 }}>\n// //                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\n// //                   ‚úî Save All\n// //                 </button>\n// //                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\n// //                   ‚úñ Cancel\n// //                 </button>\n// //               </div>\n// //             </div>\n// //           )}\n// //         </div>\n// //       )}\n\n// //       {/* FORM */}\n// //       {showForm && (\n// //         <div style={styles.formCard}>\n// //           <h2 style={styles.formTitle}>‚ûï Add \n\n// //           </h2>\n\n// //           <form onSubmit={handleSubmit}>\n// //             <div style={styles.formGrid}>\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Product Name *</label>\n// //                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Category *</label>\n// //                 <div style={styles.categoryRow}>\n// //                   <select\n// //                     required\n// //                     name=\"category\"\n// //                     value={form.category}\n// //                     onChange={(e) => {\n// //                       handleChange(e);\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\n// //                     }}\n// //                     style={styles.select}\n// //                   >\n// //                     <option value=\"\">Select Category</option>\n// //                     {categories.map((c) => (\n// //                       <option value={c._id} key={c._id}>\n// //                         {c.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n\n// //                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\n// //                     {addingCategory ? \"Close\" : \"Add\"}\n// //                   </button>\n// //                 </div>\n// //               </div>\n\n// //               {addingCategory && (\n// //                 <div style={styles.addCategoryBox}>\n// //                   <label style={styles.label}>Add New Category</label>\n// //                   <div style={styles.categoryRow}>\n// //                     <input\n// //                       value={newCategoryName}\n// //                       onChange={(e) => setNewCategoryName(e.target.value)}\n// //                       placeholder=\"Category name\"\n// //                       style={styles.input}\n// //                     />\n// //                     <input\n// //                       type=\"file\"\n// //                       accept=\"image/*\"\n// //                       onChange={(e) => {\n// //                         setNewCategoryImage(e.target.files[0]);\n// //                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n// //                       }}\n// //                       style={styles.fileInput}\n// //                     />\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\n// //                       Create\n// //                     </button>\n// //                   </div>\n// //                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\n// //                 </div>\n// //               )}\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Subcategory</label>\n// //                 <div style={styles.categoryRow}>\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n// //                     <option value=\"\">Select Subcategory</option>\n// //                     {subcategories.map((s) => (\n// //                       <option value={s._id} key={s._id}>\n// //                         {s.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n\n// //                   {form.category && (\n// //                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\n// //                       {addingSub ? \"Close\" : \"Add\"}\n// //                     </button>\n// //                   )}\n// //                 </div>\n// //               </div>\n\n// //               {addingSub && (\n// //                 <div style={styles.addCategoryBox}>\n// //                   <label style={styles.label}>Add New Subcategory</label>\n// //                   <div style={styles.categoryRow}>\n// //                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\n// //                     <input\n// //                       type=\"file\"\n// //                       accept=\"image/*\"\n// //                       onChange={(e) => {\n// //                         setNewSubImage(e.target.files[0]);\n// //                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n// //                       }}\n// //                       style={styles.fileInput}\n// //                     />\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\n// //                       Create\n// //                     </button>\n// //                   </div>\n// //                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\n// //                 </div>\n// //               )}\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Base Price *</label>\n// //                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Difference</label>\n// //                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Valid Till</label>\n// //                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Image</label>\n// //                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n// //               </div>\n// //             </div>\n\n// //             <div style={styles.formGroup}>\n// //               <label style={styles.label}>Description</label>\n// //               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n// //             </div>\n\n// //             <div style={styles.formActions}>\n// //               <button style={styles.btnPrimary} disabled={loading}>\n// //                 {loading ? \"Saving...\" : \"Add Product\"}\n// //               </button>\n// //             </div>\n// //           </form>\n// //         </div>\n// //       )}\n\n// //       {/* CSV CONTROLS */}\n// //       {/* <div style={styles.csvControls}>\n// //         <div>\n// //           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\n// //           <button style={styles.btnSmall} onClick={handleImportCsv}>\n// //             Import CSV\n// //           </button>\n// //         </div>\n\n// //         <div style={{ display: \"flex\", gap: 8 }}>\n// //           <button style={styles.btnPrimary} onClick={handleExportCsv}>\n// //             Export All CSV\n// //           </button>\n\n// //           <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n// //             Export Selected CSV\n// //           </button>\n// //         </div>\n// //       </div> */}\n// // <div className=\"csv-topbar\">\n// //   <div className=\"csv-row\">\n// //     <input\n// //       type=\"file\"\n// //       accept=\".csv\"\n// //       ref={csvInputRef}\n// //       onChange={handleCsvSelect}\n// //       style={styles.fileInput}\n// //     />\n\n// //     <button style={styles.btnSmall} onClick={handleImportCsv}>\n// //       Import\n// //     </button>\n\n// //     <button style={styles.btnPrimary} onClick={handleExportCsv}>\n// //       Export All\n// //     </button>\n\n// //     <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n// //        Selected \n// //     </button>\n// //   </div>\n// // </div>\n\n// //       {/* TABLE */}\n// //       <div style={styles.tableCard}>\n// //         <div style={styles.tableHeader}>\n// //           <h2 style={styles.tableTitle}> Items</h2>\n// //           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\n// //         </div>\n\n// //         <div style={styles.tableWrapper}>\n// //           <table style={styles.table}>\n// //             <thead>\n// //               <tr>\n// //                 <th style={styles.th}>\n// //                   <input\n// //                     type=\"checkbox\"\n// //                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n// //                     onChange={() => {\n// //                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n// //                       else setSelectedItems(filteredItems.map((x) => x._id));\n// //                     }}\n// //                   />\n// //                 </th>\n// //                 <th style={styles.th}>Sr</th>\n// //                 <th style={styles.th}>Image</th>\n// //                 <th style={styles.th}>Name</th>\n// //                 <th style={styles.th}>Category</th>\n// //                 <th style={styles.th}>Subcategory</th>\n// //                 <th style={styles.th}>Base</th>\n// //                 <th style={styles.th}>Diff</th>\n// //                 <th style={styles.th}>Final</th>\n// //                 <th style={styles.th}>Status</th>\n// //                 <th style={styles.th}>Valid Till</th>\n// //                 <th style={styles.th}>Actions</th>\n// //               </tr>\n// //             </thead>\n\n// //             <tbody>\n// //               {currentItems.map((item, i) => (\n// //                 <tr key={item._id} style={styles.tr}>\n// //                   <td style={styles.td}>\n// //                     <input\n// //                       type=\"checkbox\"\n// //                       checked={selectedItems.includes(item._id)}\n// //                       onChange={() =>\n// //                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n// //                       }\n// //                     />\n// //                   </td>\n\n// //                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n// //                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\n\n// //                   <td style={styles.td}>{item.name}</td>\n// //                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\n// //                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\n\n// //                   <td style={styles.td}>‚Çπ{item.basePrice}</td>\n// //                   <td style={styles.td}>{item.difference || 0}</td>\n// //                   <td style={styles.td}>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n// //                   <td style={styles.td}>\n// //                     <button\n// //                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\n// //                       onClick={() => handleStatusToggle(item)}\n// //                     >\n// //                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n// //                     </button>\n// //                   </td>\n\n// //                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\n\n// //                   <td style={styles.td}>\n// //                     <div style={{ position: \"relative\" }}>\n// //                       <button\n// //                         style={styles.menuButton}\n// //                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\n// //                       >\n// //                         ‚ãÆ\n// //                       </button>\n\n// //                       {activeMenu === item._id && (\n// //                         <div style={styles.dropdown}>\n// //                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\n// //                             ‚úè Edit\n// //                           </button>\n// //                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\n// //                             üìÑ Copy\n// //                           </button>\n// //                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\n// //                             üóë Delete\n// //                           </button>\n// //                         </div>\n// //                       )}\n// //                     </div>\n// //                   </td>\n// //                 </tr>\n// //               ))}\n// //             </tbody>\n// //           </table>\n// //         </div>\n\n// //         {/* PAGINATION */}\n// //         <div style={styles.pagination}>\n// //           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n// //             Previous\n// //           </button>\n\n// //           {Array.from({ length: totalPages }, (_, i) => (\n// //             <button\n// //               key={i}\n// //               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\n// //               onClick={() => setCurrentPage(i + 1)}\n// //             >\n// //               {i + 1}\n// //             </button>\n// //           ))}\n\n// //           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n// //             Next\n// //           </button>\n// //         </div>\n// //       </div>\n\n// //       {/* MODAL FOR EDIT/COPY */}\n// //       {showModal && (\n// //         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\n// //           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\n// //             <h2 style={styles.modalTitle}>{isCopyMode ? \" Copy Product\" : \" Edit Product\"}</h2>\n\n// //             <form onSubmit={handleSubmit}>\n// //               <div style={styles.formGrid}>\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Product Name *</label>\n// //                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Category *</label>\n// //                   <select\n// //                     required\n// //                     name=\"category\"\n// //                     value={form.category}\n// //                     onChange={(e) => {\n// //                       handleChange(e);\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\n// //                     }}\n// //                     style={styles.select}\n// //                   >\n// //                     <option value=\"\">Select Category</option>\n// //                     {categories.map((c) => (\n// //                       <option value={c._id} key={c._id}>\n// //                         {c.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Subcategory</label>\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n// //                     <option value=\"\">Select Subcategory</option>\n// //                     {subcategories.map((s) => (\n// //                       <option value={s._id} key={s._id}>\n// //                         {s.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Base Price *</label>\n// //                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Difference</label>\n// //                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Valid Till</label>\n// //                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Image</label>\n// //                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n// //                 </div>\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Description</label>\n// //                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n// //               </div>\n\n// //               <div style={styles.formActions}>\n// //                 <button style={styles.btnPrimary} disabled={loading}>\n// //                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\n// //                 </button>\n\n// //                 <button\n// //                   type=\"button\"\n// //                   style={styles.btnCancel}\n// //                   onClick={() => {\n// //                     setShowModal(false);\n// //                     setEditId(null);\n// //                     setIsCopyMode(false);\n// //                     setForm({\n// //                       name: \"\",\n// //                       category: \"\",\n// //                       subcategory: \"\",\n// //                       description: \"\",\n// //                       basePrice: \"\",\n// //                       difference: \"\",\n// //                       validTill: \"\",\n// //                       file: null,\n// //                     });\n// //                   }}\n// //                 >\n// //                   Cancel\n// //                 </button>\n// //               </div>\n// //             </form>\n// //           </div>\n// //         </div>\n// //       )}\n// //     </div>\n// //   );\n// // }\n\n// // const styles = {\n// //   container: {\n\n// //   },\n// //   header: {\n\n// //   },\n// //   title: {\n// //     fontSize: \"21px\",\n// //     fontWeight: \"700\",\n// //     color: \"#0d3b66\",\n// //     marginBottom: \"6px\",\n// //   },\n// //   subtitle: {\n// //    fontSize: \"16px\",\n// //   },\n// //   searchBar: {\n// //     maxWidth: \"320px\",\n// //     margin: \"0 auto 25px auto\",\n// //   },\n// //   searchInput: {\n// //     width: \"100%\",\n// //     padding: \"12px 15px\",\n// //     borderRadius: \"12px\",\n// //     border: \"1px solid #ced4da\",\n// //     background: \"#f9fbfc\",\n// //     fontSize: \"15px\",\n// //     outline: \"none\",\n// //     boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\n// //   },\n// //   addButtonWrapper: {\n// //     textAlign: \"left\",\n// //     marginBottom: \"25px\",\n// //   },\n// //   addButton: {\n// //     background: \"#007bff\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"12px\",\n// //     padding: \"12px 24px\",\n// //     fontSize: \"16px\",\n// //     fontWeight: \"600\",\n// //     cursor: \"pointer\",\n// //     transition: \"0.25s ease\",\n// //   },\n// //   bulkBar: {\n// //     background: \"#e9f2ff\",\n// //     border: \"1px solid #c4d9ff\",\n// //     borderRadius: \"14px\",\n// //     padding: \"15px 18px\",\n// //     marginBottom: \"25px\",\n// //     display: \"flex\",\n// //     justifyContent: \"space-between\",\n// //     alignItems: \"center\",\n// //     flexWrap: \"wrap\",\n// //     gap: \"14px\",\n// //     boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\n// //   },\n// //   bulkText: {\n// //     fontSize: \"15px\",\n// //     fontWeight: \"600\",\n// //     color: \"#0d3b66\",\n// //   },\n// //   bulkPanel: {\n// //     width: \"100%\",\n// //     background: \"#f7faff\",\n// //     border: \"1px solid #cfe2ff\",\n// //     padding: \"20px\",\n// //     borderRadius: \"14px\",\n// //     marginTop: \"10px\",\n// //     boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\n// //   },\n// //   bulkPanelTitle: {\n// //     textAlign: \"center\",\n// //     fontSize: \"18px\",\n// //     fontWeight: \"700\",\n// //     marginBottom: \"15px\",\n// //   },\n// //   bulkItemBox: {\n// //     background: \"#ffffff\",\n// //     border: \"1px solid #dbe5f5\",\n// //     padding: \"18px\",\n// //     borderRadius: \"12px\",\n// //     marginBottom: \"16px\",\n// //     boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\n// //   },\n// //   bulkItemTitle: {\n// //     fontSize: \"16px\",\n// //     fontWeight: \"600\",\n// //     marginBottom: \"12px\",\n// //     color: \"#0d3b66\",\n// //     borderLeft: \"4px solid #007bff\",\n// //     paddingLeft: \"10px\",\n// //   },\n// //   formCard: {\n// //     borderRadius: \"16px\",\n// //     padding: \"25px\",\n// //     marginBottom: \"28px\",\n// //     background: \"#ffffff\",\n// //     boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\n// //     border: \"1px solid #eef2f7\",\n// //   },\n// //   formTitle: {\n// //     fontSize: \"21px\",\n// //     fontWeight: \"700\",\n// //     color: \"#0d3b66\",\n// //     marginBottom: \"15px\",\n// //   },\n// //   formGrid: {\n// //     display: \"grid\",\n// //     gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\n// //     gap: \"18px\",\n// //   },\n// //   formGroup: {\n// //     display: \"flex\",\n// //     flexDirection: \"column\",\n// //     gap: \"6px\",\n// //   },\n// //   label: {\n// //     fontWeight: \"600\",\n// //     fontSize: \"14px\",\n// //     color: \"#233142\",\n// //   },\n// //   input: {\n// //     padding: \"10px\",\n// //     borderRadius: \"10px\",\n// //     border: \"1px solid #cfd6e0\",\n// //     background: \"#f8fafc\",\n// //     transition: \"0.2s ease\",\n// //     fontSize: \"14px\",\n// //   },\n// //   select: {\n// //     padding: \"10px\",\n// //     borderRadius: \"10px\",\n// //     border: \"1px solid #cfd6e0\",\n// //     background: \"#f8fafc\",\n// //     transition: \"0.2s ease\",\n// //     fontSize: \"14px\",\n// //   },\n// //   textarea: {\n// //     padding: \"10px\",\n// //     borderRadius: \"10px\",\n// //     border: \"1px solid #cfd6e0\",\n// //     background: \"#f8fafc\",\n// //     transition: \"0.2s ease\",\n// //     resize: \"none\",\n// //     minHeight: \"80px\",\n// //     fontSize: \"14px\",\n// //   },\n// //   fileInput: {\n// //     padding: \"8px\",\n// //     fontSize: \"13px\",\n// //   },\n// //   categoryRow: {\n// //     display: \"flex\",\n// //     gap: \"10px\",\n// //     alignItems: \"center\",\n// //   },\n// //   addCategoryBox: {\n// //     gridColumn: \"1 / -1\",\n// //     background: \"#f1f7ff\",\n// //     border: \"1px solid #cfe1ff\",\n// //     padding: \"16px\",\n// //     borderRadius: \"12px\",\n// //   },\n// //   preview: {\n// //     width: \"110px\",\n// //     height: \"110px\",\n// //     borderRadius: \"12px\",\n// //     marginTop: \"10px\",\n// //     objectFit: \"cover\",\n// //     border: \"1px solid #b7c9e2\",\n// //   },\n// //   formActions: {\n// //     marginTop: \"15px\",\n// //     display: \"flex\",\n// //     gap: \"12px\",\n// //     flexWrap: \"wrap\",\n// //   },\n// //   btnPrimary: {\n// //     background: \"#007bff\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"10px\",\n// //     padding: \"9px 16px\",\n\n// //     cursor: \"pointer\",\n// //     transition: \"0.25s ease\",\n// //   },\n// //   btnSmall: {\n// //     background: \"#43a047\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"10px\",\n// //     padding: \"9px 16px\",\n// //     fontWeight: \"600\",\n// //     cursor: \"pointer\",\n// //     transition: \"0.25s ease\",\n// //   },\n// //   btnDelete: {\n// //     background: \"#e63946\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"10px\",\n// //     padding: \"9px 16px\",\n// //     fontWeight: \"600\",\n// //     cursor: \"pointer\",\n// //     transition: \"0.25s ease\",\n// //   },\n// //   btnCancel: {\n// //     background: \"#adb5bd\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"10px\",\n// //     padding: \"9px 16px\",\n// //     fontWeight: \"600\",\n// //     cursor: \"pointer\",\n// //     transition: \"0.25s ease\",\n// //   },\n// //   csvControls: {\n// //     borderRadius: \"12px\",\n// //     padding: \"16px\",\n// //     background: \"#f7faff\",\n// //     border: \"1px solid #d8e6ff\",\n// //     display: \"flex\",\n// //     alignItems: \"center\",\n// //     justifyContent: \"space-between\",\n// //     marginBottom: \"28px\",\n// //     flexWrap: \"wrap\",\n// //     gap: \"12px\",\n// //   },\n// //   tableCard: {\n\n// //   },\n// //   tableHeader: {\n// //     display: \"flex\",\n// //     justifyContent: \"space-between\",\n// //     marginBottom: \"15px\",\n// //   },\n// //   tableTitle: {\n// //     fontSize: \"21px\",\n// //     fontWeight: \"700\",\n// //     color: \"#0d3b66\",\n// //   },\n// //   totalCount: {\n// //     fontSize: \"15px\",\n// //     color: \"#6c757d\",\n// //     fontWeight: \"600\",\n// //   },\n// //   tableWrapper: {\n// //     overflowX: \"auto\",\n// //   },\n// //   table: {\n// //     width: \"100%\",\n// //     borderCollapse: \"collapse\",\n// //     fontSize: \"14px\",\n// //   },\n// //   th: {\n// //     background: \"#e9f2ff\",\n// //     padding: \"12px\",\n// //     fontWeight: \"700\",\n// //     color: \"#0d3b66\",\n// //     textAlign: \"left\",\n// //     whiteSpace: \"nowrap\",\n// //   },\n// //   tr: {\n// //     borderBottom: \"1px solid #edf2f7\",\n// //   },\n// //   td: {\n// //     padding: \"12px 10px\",\n// //     whiteSpace: \"nowrap\",\n// //   },\n// //   tableImg: {\n// //     width: \"55px\",\n// //     height: \"55px\",\n// //     borderRadius: \"8px\",\n// //     objectFit: \"cover\",\n// //     border: \"1px solid #cfd9e5\",\n// //   },\n// //   statusActive: {\n// //     background: \"#93d8ba\",\n// //     padding: \"7px 12px\",\n// //     borderRadius: \"8px\",\n// //     color: \"black\",\n// //     fontWeight: \"600\",\n// //     border: \"none\",\n// //     cursor: \"pointer\",\n// //   },\n// //   statusInactive: {\n// //     background: \"#d9b1b1\",\n// //     padding: \"7px 12px\",\n// //     borderRadius: \"8px\",\n// //     color: \"black\",\n// //     fontWeight: \"600\",\n// //     border: \"none\",\n// //     cursor: \"pointer\",\n// //   },\n// //   menuButton: {\n// //     background: \"#f0f0f0\",\n// //     border: \"none\",\n// //     borderRadius: \"6px\",\n// //     padding: \"6px 12px\",\n// //     fontSize: \"20px\",\n// //     fontWeight: \"bold\",\n// //     cursor: \"pointer\",\n// //     transition: \"0.2s ease\",\n// //   },\n// //   dropdown: {\n// //     position: \"absolute\",\n// //     right: \"0\",\n// //     top: \"35px\",\n// //     background: \"#fff\",\n// //     border: \"1px solid #ddd\",\n// //     borderRadius: \"8px\",\n// //     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\n// //     zIndex: \"100\",\n// //     minWidth: \"140px\",\n// //   },\n// //   dropdownItem: {\n// //     display: \"block\",\n// //     width: \"100%\",\n// //     padding: \"10px 15px\",\n// //     background: \"transparent\",\n// //     border: \"none\",\n// //     textAlign: \"left\",\n// //     cursor: \"pointer\",\n// //     fontSize: \"14px\",\n// //     fontWeight: \"500\",\n// //     transition: \"0.2s ease\",\n// //     borderBottom: \"1px solid #f0f0f0\",\n// //   },\n// //   dropdownItemDelete: {\n// //     display: \"block\",\n// //     width: \"100%\",\n// //     padding: \"10px 15px\",\n// //     background: \"transparent\",\n// //     border: \"none\",\n// //     textAlign: \"left\",\n// //     cursor: \"pointer\",\n// //     fontSize: \"14px\",\n// //     fontWeight: \"500\",\n// //     color: \"#e63946\",\n// //     transition: \"0.2s ease\",\n// //   },\n// //   pagination: {\n// //     marginTop: \"18px\",\n// //     display: \"flex\",\n// //     justifyContent: \"center\",\n// //     gap: \"10px\",\n// //     flexWrap: \"wrap\",\n// //   },\n// //   paginationBtn: {\n// //     padding: \"9px 13px\",\n// //     borderRadius: \"8px\",\n// //     background: \"#fff\",\n// //     border: \"1px solid #ddd\",\n// //     cursor: \"pointer\",\n// //     fontSize: \"14px\",\n// //   },\n// //   paginationBtnActive: {\n// //     padding: \"9px 13px\",\n// //     borderRadius: \"8px\",\n// //     background: \"#007bff\",\n// //     color: \"white\",\n// //     border: \"1px solid #0062cc\",\n// //     cursor: \"pointer\",\n// //     fontSize: \"14px\",\n// //   },\n// //   modalOverlay: {\n// //     position: \"fixed\",\n// //     top: 0,\n// //     left: 0,\n// //     right: 0,\n// //     bottom: 0,\n// //     background: \"rgba(0, 0, 0, 0.5)\",\n// //     display: \"flex\",\n// //     justifyContent: \"center\",\n// //     alignItems: \"center\",\n// //     zIndex: \"1000\",\n// //     padding: \"20px\",\n// //   },\n// //   modal: {\n// //     background: \"#fff\",\n// //     borderRadius: \"16px\",\n// //     padding: \"30px\",\n// //     maxWidth: \"700px\",\n// //     width: \"100%\",\n// //     maxHeight: \"90vh\",\n// //     overflowY: \"auto\",\n// //     boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\n// //   },\n// //   modalTitle: {\n// //     fontSize: \"22px\",\n// //     fontWeight: \"700\",\n// //     color: \"#0d3b66\",\n// //     marginBottom: \"20px\",\n// //     textAlign: \"center\",\n// //   },\n\n// // }\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\"\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   // FORM state\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\", // This will be sent as todayDiff to backend\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [isCopyMode, setIsCopyMode] = useState(false);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n//   const [activeMenu, setActiveMenu] = useState(null);\n\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   const [addingSub, setAddingSub] = useState(false);\n//   const [newSubName, setNewSubName] = useState(\"\");\n//   const [newSubImage, setNewSubImage] = useState(null);\n//   const [newSubPreview, setNewSubPreview] = useState(null);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const [csvFile, setCsvFile] = useState(null);\n//   const csvInputRef = useRef();\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n//   const [filterSubs, setFilterSubs] = useState([]);\n\n//   useEffect(() => {\n//     if (!filterCategory) {\n//       setFilterSubs([]);\n//       setFilterSubcategory(\"\");\n//       return;\n//     }\n\n//     const cat = categories.find(c => c._id === filterCategory);\n//     setFilterSubs(cat?.subcategories || []);\n//     setFilterSubcategory(\"\");\n//   }, [filterCategory, categories]);\n\n//   useEffect(() => {\n//     fetchCategories();\n//   }, []);\n\n//   useEffect(() => {\n//     if (categories.length > 0) {\n//       fetchItems();\n//     }\n//   }, [categories]);\n\n//   useEffect(() => {\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data && res.data.success) {\n//         const raw = res.data.data;\n\n//         if (!categories.length) {\n//           setItems(raw);\n//           return;\n//         }\n\n//         // const enriched = raw.map((item) => {\n//         //   const cat = categories.find(\n//         //     (c) => c._id === item.category || c._id === item.category?._id\n//         //   );\n\n//         //   const sub = cat?.subcategories?.find(\n//         //     (s) => s._id === item.subcategory || s._id === item.subcategory?._id\n//         //   );\n\n//         //   return {\n//         //     ...item,\n//         //     category: cat ? { _id: cat._id, name: cat.name } : item.category,\n//         //     subcategory: sub ? { _id: sub._id, name: sub.name } : item.subcategory,\n//         //   };\n//         // });\n// const enriched = raw.map((item) => {\n//   const cat = categories.find(\n//     (c) => c._id === item.category || c._id === item.category?._id\n//   );\n\n//   const sub = cat?.subcategories?.find(\n//     (s) => s._id === item.subcategory || s._id === item.subcategory?._id\n//   );\n\n//   return {\n//     ...item,\n//     todayDiff: item.todayDiff ?? item.difference ?? 0,\n//     category: cat ? { _id: cat._id, name: cat.name } : item.category,\n//     subcategory: sub ? { _id: sub._id, name: sub.name } : item.subcategory,\n//   };\n// });\n\n//         setItems(enriched);\n//       }\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       alert(\"Could not fetch items\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       alert(\"Could not fetch categories\");\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n\n//     const cat = categories.find((c) => c._id === form.category);\n//     const subs = (cat && cat.subcategories) || [];\n//     setSubcategories(subs);\n\n//     const exists = subs.some((s) => s._id === form.subcategory);\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//   }, [form.category, categories]);\n\n//   const handleCreateCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newCategoryName.trim());\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//       const res = await axios.post(CATEGORY_URL, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Category created\");\n//         setNewCategoryName(\"\");\n//         setNewCategoryImage(null);\n//         setNewCategoryPreview(null);\n//         setAddingCategory(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Category creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create category error\", err);\n//       alert(\"Category creation failed\");\n//     }\n//   };\n\n//   const handleCreateSub = async () => {\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n//     if (!form.category) return alert(\"Select category first\");\n\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newSubName.trim());\n//       if (newSubImage) fd.append(\"image\", newSubImage);\n\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Subcategory created\");\n//         setNewSubName(\"\");\n//         setNewSubImage(null);\n//         setNewSubPreview(null);\n//         setAddingSub(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Subcategory creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create sub error\", err);\n//       alert(\"Subcategory creation failed\");\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files && files.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((k) => {\n//         const val = form[k];\n//         if (val !== undefined && val !== null) {\n//           fd.append(k, val);\n//         }\n//       });\n\n//       let res;\n//       if (isCopyMode) {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Copied as new item\");\n//       } else if (editId) {\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\n//         alert(\"Updated\");\n//       } else {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Added\");\n//       }\n\n//       await fetchItems();\n//       await fetchCategories();\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         subcategory: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n//       setEditId(null);\n//       setIsCopyMode(false);\n//       setShowModal(false);\n//       setShowForm(false);\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     // Backend se currentFinalPrice, lastFinalPrice, todayDiff milta hai\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       // difference: item.todayDiff ?? \"\", // todayDiff ko difference field mein load karo\n//       difference: item.todayDiff ?? 0,\n\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null, \n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(item._id);\n//     setIsCopyMode(false);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleCopyToEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       // difference: item.todayDiff ?? \"\", // todayDiff ko copy karo\n//       todayDiff: item.todayDiff ?? 0,\n\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(null);\n//     setIsCopyMode(true);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//       setActiveMenu(null);\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       alert(\"Delete failed\");\n//     }\n//   };\n\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       alert(\"Status update failed\");\n//     }\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         name: x.name,\n//         basePrice: x.basePrice,\n//         difference: x.todayDiff || 0, // todayDiff ko send karo\n//         validTill: x.validTill,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       alert(\"Bulk save failed\");\n//     }\n//   };\n\n//   const handleCsvSelect = (e) => {\n//     setCsvFile(e.target.files[0]);\n//   };\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Select CSV file\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"file\", csvFile);\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data && res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//         fetchItems();\n//       } else {\n//         alert(\"CSV import failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"CSV import error\", err);\n//       alert(\"CSV import failed\");\n//     }\n//   };\n\n//   const handleExportCsv = () => {\n//     if (!items.length) return alert(\"No items to export\");\n\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"todayDiff\",\n//       \"lastFinalPrice\",\n//       \"currentFinalPrice\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = items.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.todayDiff ?? \"\",\n//       p.lastFinalPrice ?? \"\",\n//       p.currentFinalPrice ?? \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray\n//         .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\n//         .join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `all_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   const handleExportSelectedCsv = () => {\n//     if (!selectedItems.length) return alert(\"Select items to export\");\n\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"todayDiff\",\n//       \"lastFinalPrice\",\n//       \"currentFinalPrice\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = selectedData.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.todayDiff ?? \"\",\n//       p.lastFinalPrice ?? \"\",\n//       p.currentFinalPrice ?? \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `selected_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n\n//     const matchText =\n//       (item.name || \"\").toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n//     const matchCategory =\n//       !filterCategory || item.category?._id === filterCategory;\n\n//     const matchSub =\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n//     return matchText && matchCategory && matchSub;\n//   });\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n//   // Helper function to get final price\n//   const getFinalPrice = (item) => {\n//     // Backend se currentFinalPrice already calculated aata hai\n//     return item.currentFinalPrice ?? item.finalPrice ?? (Number(item.basePrice) + Number(item.todayDiff || 0));\n//   };\n\n//   return (\n//     <div style={styles.container}>\n//       <div style={styles.header}>\n//         <h1 style={styles.title}>Product Management</h1>\n//       </div>\n\n//       <div className=\"mobile-topbar\">\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product, category or subcategory...\"\n//           value={search}\n//           onChange={(e) => {\n//             setSearch(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//           style={styles.searchInput}\n//         />\n\n//         <button\n//           style={styles.addButton}\n//           onClick={() => {\n//             setShowForm(!showForm);\n//             setEditId(null);\n//             setIsCopyMode(false);\n//           }}\n//         >\n//           {showForm ? \"‚úñ\" : \"Add Product\"}\n//         </button>\n//       </div>\n\n//       <div className=\"filter-bar\">\n//         <select\n//           value={filterCategory}\n//           onChange={(e) => setFilterCategory(e.target.value)}\n//           className=\"filter-select\"\n//         >\n//           <option value=\"\">Filter by Category</option>\n//           {categories.map((c) => (\n//             <option key={c._id} value={c._id}>{c.name}</option>\n//           ))}\n//         </select>\n\n//         <select\n//           value={filterSubcategory}\n//           onChange={(e) => setFilterSubcategory(e.target.value)}\n//           className=\"filter-select\"\n//           disabled={!filterSubs.length}\n//         >\n//           <option value=\"\">Filter by Subcategory</option>\n//           {filterSubs.map((s) => (\n//             <option key={s._id} value={s._id}>{s.name}</option>\n//           ))}\n//         </select>\n//       </div>\n\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-bar\">\n//           {!bulkMode ? (\n//             <div className=\"bulk-actions\">\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n//             </div>\n//           ) : (\n//             <div style={styles.bulkPanel}>\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\n\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} style={styles.bulkItemBox}>\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\n\n//                     <div style={styles.formGrid}>\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Name</label>\n//                         <input\n//                           type=\"text\"\n//                           value={item.name}\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\n//                           style={styles.input}\n//                         />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Base Price</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.basePrice}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\n//                           }\n//                           style={styles.input}\n//                         />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Category</label>\n//                         <select\n//                           value={item.category?._id || \"\"}\n//                           onChange={(e) => {\n//                             const newCat = e.target.value;\n//                             updateLocalItemField(item._id, \"category\", { _id: newCat });\n//                             const catObj = categories.find((c) => c._id === newCat);\n//                             const firstSub = catObj?.subcategories?.[0]?._id || \"\";\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\n//                           }}\n//                           style={styles.select}\n//                         >\n//                           <option value=\"\">Select Category</option>\n//                           {categories.map((c) => (\n//                             <option key={c._id} value={c._id}>\n//                               {c.name}\n//                             </option>\n//                           ))}\n//                         </select>\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Subcategory</label>\n//                         <select\n//                           value={item.subcategory?._id || \"\"}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\n//                           }\n//                           style={styles.select}\n//                         >\n//                           <option value=\"\">Select Subcategory</option>\n//                           {categories\n//                             .find((c) => c._id === item.category?._id)\n//                             ?.subcategories?.map((s) => (\n//                               <option key={s._id} value={s._id}>\n//                                 {s.name}\n//                               </option>\n//                             ))}\n//                         </select>\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Today's Difference</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.todayDiff || 0}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"todayDiff\", Number(e.target.value))\n//                           }\n//                           style={styles.input}\n//                         />\n//                       </div>\n//                     </div>\n//                   </div>\n//                 ))}\n\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\n//                   ‚úî Save All\n//                 </button>\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\n//                   ‚úñ Cancel\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {showForm && (\n//         <div style={styles.formCard}>\n//           <h2 style={styles.formTitle}>‚ûï Add Product</h2>\n\n//           <form onSubmit={handleSubmit}>\n//             <div style={styles.formGrid}>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Product Name *</label>\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Category *</label>\n//                 <div style={styles.categoryRow}>\n//                   <select\n//                     required\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={(e) => {\n//                       handleChange(e);\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\n//                     }}\n//                     style={styles.select}\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option value={c._id} key={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\n//                     {addingCategory ? \"Close\" : \"Add\"}\n//                   </button>\n//                 </div>\n//               </div>\n\n//               {addingCategory && (\n//                 <div style={styles.addCategoryBox}>\n//                   <label style={styles.label}>Add New Category</label>\n//                   <div style={styles.categoryRow}>\n//                     <input\n//                       value={newCategoryName}\n//                       onChange={(e) => setNewCategoryName(e.target.value)}\n//                       placeholder=\"Category name\"\n//                       style={styles.input}\n//                     />\n//                     <input\n//                       type=\"file\"\n//                       accept=\"image/*\"\n//                       onChange={(e) => {\n//                         setNewCategoryImage(e.target.files[0]);\n//                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                       }}\n//                       style={styles.fileInput}\n//                     />\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\n//                       Create\n//                     </button>\n//                   </div>\n//                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\n//                 </div>\n//               )}\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Subcategory</label>\n//                 <div style={styles.categoryRow}>\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n//                     <option value=\"\">Select Subcategory</option>\n//                     {subcategories.map((s) => (\n//                       <option value={s._id} key={s._id}>\n//                         {s.name}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   {form.category && (\n//                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\n//                       {addingSub ? \"Close\" : \"Add\"}\n//                     </button>\n//                   )}\n//                 </div>\n//               </div>\n\n//               {addingSub && (\n//                 <div style={styles.addCategoryBox}>\n//                   <label style={styles.label}>Add New Subcategory</label>\n//                   <div style={styles.categoryRow}>\n//                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\n//                     <input\n//                       type=\"file\"\n//                       accept=\"image/*\"\n//                       onChange={(e) => {\n//                         setNewSubImage(e.target.files[0]);\n//                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                       }}\n//                       style={styles.fileInput}\n//                     />\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\n//                       Create\n//                     </button>\n//                   </div>\n//                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\n//                 </div>\n//               )}\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Base Price *</label>\n//                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Today's Difference</label>\n//                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Valid Till</label>\n//                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Image</label>\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//               </div>\n//             </div>\n\n//             <div style={styles.formGroup}>\n//               <label style={styles.label}>Description</label>\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//             </div>\n\n//             <div style={styles.formActions}>\n//               <button style={styles.btnPrimary} disabled={loading}>\n//                 {loading ? \"Saving...\" : \"Add Product\"}\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n\n//       <div className=\"csv-topbar\">\n//         <div className=\"csv-row\">\n//           <input\n//             type=\"file\"\n//             accept=\".csv\"\n//             ref={csvInputRef}\n//             onChange={handleCsvSelect}\n//             style={styles.fileInput}\n//           />\n\n//           <button style={styles.btnSmall} onClick={handleImportCsv}>\n//             Import\n//           </button>\n\n//           <button style={styles.btnPrimary} onClick={handleExportCsv}>\n//             Export All\n//           </button>\n\n//           <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n//             Selected\n//           </button>\n//         </div>\n//       </div>\n\n//       <div style={styles.tableCard}>\n//         <div style={styles.tableHeader}>\n//           <h2 style={styles.tableTitle}>Items</h2>\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\n//         </div>\n\n//         <div style={styles.tableWrapper}>\n//           <table style={styles.table}>\n//             <thead>\n//               <tr>\n//                 <th style={styles.th}>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th style={styles.th}>Sr</th>\n//                 <th style={styles.th}>Image</th>\n//                 <th style={styles.th}>Name</th>\n//                 <th style={styles.th}>Category</th>\n//                 <th style={styles.th}>Subcategory</th>\n//                 <th style={styles.th}>Base</th>\n//                 <th style={styles.th}>Today Diff</th>\n//                 <th style={styles.th}>Final</th>\n//                 <th style={styles.th}>Status</th>\n//                 <th style={styles.th}>Valid Till</th>\n//                 <th style={styles.th}>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id} style={styles.tr}>\n//                   <td style={styles.td}>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                       }\n//                     />\n//                   </td>\n\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\n\n//                   <td style={styles.td}>{item.name}</td>\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\n//                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\n\n//                   <td style={styles.td}>‚Çπ{item.basePrice}</td>\n//                   <td style={styles.td}>{item.todayDiff || 0}</td>\n//                   <td style={styles.td}>‚Çπ{getFinalPrice(item)}</td>\n\n//                   <td style={styles.td}>\n//                     <button\n//                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\n\n//                   <td style={styles.td}>\n//                     <div style={{ position: \"relative\" }}>\n//                       <button\n//                         style={styles.menuButton}\n//                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\n//                       >\n//                         ‚ãÆ\n//                       </button>\n\n//                       {activeMenu === item._id && (\n//                         <div style={styles.dropdown}>\n//                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\n//                             ‚úè Edit\n//                           </button>\n//                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\n//                             üìÑ Copy\n//                           </button>\n//                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\n//                             üóë Delete\n//                           </button>\n//                         </div>\n//                       )}\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n\n//         <div style={styles.pagination}>\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }, (_, i) => (\n//             <button\n//               key={i}\n//               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n//             Next\n//           </button>\n//         </div>\n//       </div>\n\n//       {showModal && (\n//         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\n//           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\n//             <h2 style={styles.modalTitle}>{isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"}</h2>\n\n//             <form onSubmit={handleSubmit}>\n//               <div style={styles.formGrid}>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Product Name *</label>\n//                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Category *</label>\n//                   <select\n//                     required\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={(e) => {\n//                       handleChange(e);\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\n//                     }}\n//                     style={styles.select}\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option value={c._id} key={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Subcategory</label>\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n//                     <option value=\"\">Select Subcategory</option>\n//                     {subcategories.map((s) => (\n//                       <option value={s._id} key={s._id}>\n//                         {s.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Base Price *</label>\n//                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Today's Difference</label>\n//                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Valid Till</label>\n//                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Image</label>\n//                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//                 </div>\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Description</label>\n//                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//               </div>\n\n//               <div style={styles.formActions}>\n//                 <button style={styles.btnPrimary} disabled={loading}>\n//                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\n//                 </button>\n\n//                 <button\n//                   type=\"button\"\n//                   style={styles.btnCancel}\n//                   onClick={() => {\n//                     setShowModal(false);\n//                     setEditId(null);\n//                     setIsCopyMode(false);\n//                     setForm({\n//                       name: \"\",\n//                       category: \"\",\n//                       subcategory: \"\",\n//                       description: \"\",\n//                       basePrice: \"\",\n//                       difference: \"\",\n//                       validTill: \"\",\n//                       file: null,\n//                     });\n//                   }}\n//                 >\n//                   Cancel\n//                 </button>\n//               </div>\n//             </form>\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n// const styles = {\n//   container: {},\n//   header: {},\n//   title: {\n//     fontSize: \"21px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"6px\",\n//   },\n//   subtitle: {\n//     fontSize: \"16px\",\n//   },\n//   searchBar: {\n//     maxWidth: \"320px\",\n//     margin: \"0 auto 25px auto\",\n//   },\n//   searchInput: {\n//     width: \"100%\",\n//     padding: \"12px 15px\",\n//     borderRadius: \"12px\",\n//     border: \"1px solid #ced4da\",\n//     background: \"#f9fbfc\",\n//     fontSize: \"15px\",\n//     outline: \"none\",\n//     boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\n//   },\n//   addButtonWrapper: {\n//     textAlign: \"left\",\n//     marginBottom: \"25px\",\n//   },\n//   addButton: {\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"12px\",\n//     padding: \"12px 24px\",\n//     fontSize: \"16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   bulkBar: {\n//     background: \"#e9f2ff\",\n//     border: \"1px solid #c4d9ff\",\n//     borderRadius: \"14px\",\n//     padding: \"15px 18px\",\n//     marginBottom: \"25px\",\n//     display: \"flex\",\n//     justifyContent: \"space-between\",\n//     alignItems: \"center\",\n//     flexWrap: \"wrap\",\n//     gap: \"14px\",\n//     boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\n//   },\n//   bulkText: {\n//     fontSize: \"15px\",\n//     fontWeight: \"600\",\n//     color: \"#0d3b66\",\n//   },\n//   bulkPanel: {\n//     width: \"100%\",\n//     background: \"#f7faff\",\n//     border: \"1px solid #cfe2ff\",\n//     padding: \"20px\",\n//     borderRadius: \"14px\",\n//     marginTop: \"10px\",\n//     boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\n//   },\n//   bulkPanelTitle: {\n//     textAlign: \"center\",\n//     fontSize: \"18px\",\n//     fontWeight: \"700\",\n//     marginBottom: \"15px\",\n//   },\n//   bulkItemBox: {\n//     background: \"#ffffff\",\n//     border: \"1px solid #dbe5f5\",\n//     padding: \"18px\",\n//     borderRadius: \"12px\",\n//     marginBottom: \"16px\",\n//     boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\n//   },\n//   bulkItemTitle: {\n//     fontSize: \"16px\",\n//     fontWeight: \"600\",\n//     marginBottom: \"12px\",\n//     color: \"#0d3b66\",\n//     borderLeft: \"4px solid #007bff\",\n//     paddingLeft: \"10px\",\n//   },\n//   formCard: {\n//     borderRadius: \"16px\",\n//     padding: \"25px\",\n//     marginBottom: \"28px\",\n//     background: \"#ffffff\",\n//     boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\n//     border: \"1px solid #eef2f7\",\n//   },\n//   formTitle: {\n//     fontSize: \"21px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"15px\",\n//   },\n//   formGrid: {\n//     display: \"grid\",\n//     gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\n//     gap: \"18px\",\n//   },\n//   formGroup: {\n//     display: \"flex\",\n//     flexDirection: \"column\",\n//     gap: \"6px\",\n//   },\n//   label: {\n//     fontWeight: \"600\",\n//     fontSize: \"14px\",\n//     color: \"#233142\",\n//   },\n//   input: {\n//     padding: \"10px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     transition: \"0.2s ease\",\n//     fontSize: \"14px\",\n//   },\n//   select: {\n//     padding: \"10px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     transition: \"0.2s ease\",\n//     fontSize: \"14px\",\n//   },\n//   textarea: {\n//     padding: \"10px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     transition: \"0.2s ease\",\n//     resize: \"none\",\n//     minHeight: \"80px\",\n//     fontSize: \"14px\",\n//   },\n//   fileInput: {\n//     padding: \"8px\",\n//     fontSize: \"13px\",\n//   },\n//   categoryRow: {\n//     display: \"flex\",\n//     gap: \"10px\",\n//     alignItems: \"center\",\n//   },\n//   addCategoryBox: {\n//     gridColumn: \"1 / -1\",\n//     background: \"#f1f7ff\",\n//     border: \"1px solid #cfe1ff\",\n//     padding: \"16px\",\n//     borderRadius: \"12px\",\n//   },\n//   preview: {\n//     width: \"110px\",\n//     height: \"110px\",\n//     borderRadius: \"12px\",\n//     marginTop: \"10px\",\n//     objectFit: \"cover\",\n//     border: \"1px solid #b7c9e2\",\n//   },\n//   formActions: {\n//     marginTop: \"15px\",\n//     display: \"flex\",\n//     gap: \"12px\",\n//     flexWrap: \"wrap\",\n//   },\n//   btnPrimary: {\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   btnSmall: {\n//     background: \"#43a047\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   btnDelete: {\n//     background: \"#e63946\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   btnCancel: {\n//     background: \"#adb5bd\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   csvControls: {\n//     borderRadius: \"12px\",\n//     padding: \"16px\",\n//     background: \"#f7faff\",\n//     border: \"1px solid #d8e6ff\",\n//     display: \"flex\",\n//     alignItems: \"center\",\n//     justifyContent: \"space-between\",\n//     marginBottom: \"28px\",\n//     flexWrap: \"wrap\",\n//     gap: \"12px\",\n//   },\n//   tableCard: {},\n//   tableHeader: {\n//     display: \"flex\",\n//     justifyContent: \"space-between\",\n//     marginBottom: \"15px\",\n//   },\n//   tableTitle: {\n//     fontSize: \"21px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//   },\n//   totalCount: {\n//     fontSize: \"15px\",\n//     color: \"#6c757d\",\n//     fontWeight: \"600\",\n//   },\n//   tableWrapper: {\n//     overflowX: \"auto\",\n//   },\n//   table: {\n//     width: \"100%\",\n//     borderCollapse: \"collapse\",\n//     fontSize: \"14px\",\n//   },\n//   th: {\n//     background: \"#e9f2ff\",\n//     padding: \"12px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     textAlign: \"left\",\n//     whiteSpace: \"nowrap\",\n//   },\n//   tr: {\n//     borderBottom: \"1px solid #edf2f7\",\n//   },\n//   td: {\n//     padding: \"12px 10px\",\n//     whiteSpace: \"nowrap\",\n//   },\n//   tableImg: {\n//     width: \"55px\",\n//     height: \"55px\",\n//     borderRadius: \"8px\",\n//     objectFit: \"cover\",\n//     border: \"1px solid #cfd9e5\",\n//   },\n//   statusActive: {\n//     background: \"#93d8ba\",\n//     padding: \"7px 12px\",\n//     borderRadius: \"8px\",\n//     color: \"black\",\n//     fontWeight: \"600\",\n//     border: \"none\",\n//     cursor: \"pointer\",\n//   },\n//   statusInactive: {\n//     background: \"#d9b1b1\",\n//     padding: \"7px 12px\",\n//     borderRadius: \"8px\",\n//     color: \"black\",\n//     fontWeight: \"600\",\n//     border: \"none\",\n//     cursor: \"pointer\",\n//   },\n//   menuButton: {\n//     background: \"#f0f0f0\",\n//     border: \"none\",\n//     borderRadius: \"6px\",\n//     padding: \"6px 12px\",\n//     fontSize: \"20px\",\n//     fontWeight: \"bold\",\n//     cursor: \"pointer\",\n//     transition: \"0.2s ease\",\n//   },\n//   dropdown: {\n//     position: \"absolute\",\n//     right: \"0\",\n//     top: \"35px\",\n//     background: \"#fff\",\n//     border: \"1px solid #ddd\",\n//     borderRadius: \"8px\",\n//     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\n//     zIndex: \"100\",\n//     minWidth: \"140px\",\n//   },\n//   dropdownItem: {\n//     display: \"block\",\n//     width: \"100%\",\n//     padding: \"10px 15px\",\n//     background: \"transparent\",\n//     border: \"none\",\n//     textAlign: \"left\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//     fontWeight: \"500\",\n//     transition: \"0.2s ease\",\n//     borderBottom: \"1px solid #f0f0f0\",\n//   },\n//   dropdownItemDelete: {\n//     display: \"block\",\n//     width: \"100%\",\n//     padding: \"10px 15px\",\n//     background: \"transparent\",\n//     border: \"none\",\n//     textAlign: \"left\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//     fontWeight: \"500\",\n//     color: \"#e63946\",\n//     transition: \"0.2s ease\",\n//   },\n//   pagination: {\n//     marginTop: \"18px\",\n//     display: \"flex\",\n//     justifyContent: \"center\",\n//     gap: \"10px\",\n//     flexWrap: \"wrap\",\n//   },\n//   paginationBtn: {\n//     padding: \"9px 13px\",\n//     borderRadius: \"8px\",\n//     background: \"#fff\",\n//     border: \"1px solid #ddd\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//   },\n//   paginationBtnActive: {\n//     padding: \"9px 13px\",\n//     borderRadius: \"8px\",\n//     background: \"#007bff\",\n//     color: \"white\",\n//     border: \"1px solid #0062cc\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//   },\n//   modalOverlay: {\n//     position: \"fixed\",\n//     top: 0,\n//     left: 0,\n//     right: 0,\n//     bottom: 0,\n//     background: \"rgba(0, 0, 0, 0.5)\",\n//     display: \"flex\",\n//     justifyContent: \"center\",\n//     alignItems: \"center\",\n//     zIndex: \"1000\",\n//     padding: \"20px\",\n//   },\n//   modal: {\n//     background: \"#fff\",\n//     borderRadius: \"16px\",\n//     padding: \"30px\",\n//     maxWidth: \"700px\",\n//     width: \"100%\",\n//     maxHeight: \"90vh\",\n//     overflowY: \"auto\",\n//     boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\n//   },\n//   modalTitle: {\n//     fontSize: \"22px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"20px\",\n//     textAlign: \"center\",\n//   },\n// };\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // form state for add/update\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    difference: \"\",\n    // used as todayDiff when creating/updating (but backend update-diff is preferred)\n    validTill: \"\",\n    file: null,\n    status: \"inactive\"\n  });\n  const [editId, setEditId] = useState(null);\n  const [isCopyMode, setIsCopyMode] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [activeMenu, setActiveMenu] = useState(null);\n  const [quickBasePrices, setQuickBasePrices] = useState({});\n  const [addingCategory, setAddingCategory] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n  const [addingSub, setAddingSub] = useState(false);\n  const [newSubName, setNewSubName] = useState(\"\");\n  const [newSubImage, setNewSubImage] = useState(null);\n  const [newSubPreview, setNewSubPreview] = useState(null);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [bulkMode, setBulkMode] = useState(false);\n  const [csvFile, setCsvFile] = useState(null);\n  const csvInputRef = useRef();\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n  const [filterCategory, setFilterCategory] = useState(\"\");\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n  const [filterSubs, setFilterSubs] = useState([]);\n\n  // local per-row quick diff input map: { [id]: number }\n  const [quickDiffs, setQuickDiffs] = useState({});\n\n  // fetch categories on start\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  // whenever categories change, fetch items (so we can populate category/sub names)\n  useEffect(() => {\n    if (categories.length > 0) fetchItems();\n  }, [categories]);\n\n  // responsive\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  // when filterCategory changes update filterSubs\n  useEffect(() => {\n    if (!filterCategory) {\n      setFilterSubs([]);\n      setFilterSubcategory(\"\");\n      return;\n    }\n    const cat = categories.find(c => c._id === filterCategory);\n    setFilterSubs((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setFilterSubcategory(\"\");\n  }, [filterCategory, categories]);\n\n  // when form.category changes update subcategories for the form\n  useEffect(() => {\n    var _cat$subcategories;\n    if (!form.category) {\n      setSubcategories([]);\n      setForm(prev => ({\n        ...prev,\n        subcategory: \"\"\n      }));\n      return;\n    }\n    const cat = categories.find(c => c._id === form.category);\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    const exists = cat === null || cat === void 0 ? void 0 : (_cat$subcategories = cat.subcategories) === null || _cat$subcategories === void 0 ? void 0 : _cat$subcategories.some(s => s._id === form.subcategory);\n    if (!exists) setForm(prev => ({\n      ...prev,\n      subcategory: \"\"\n    }));\n  }, [form.category, categories]);\n\n  // ------------------ API calls ------------------\n  const fetchCategories = async () => {\n    try {\n      const res = await axios.get(CATEGORY_URL);\n      if (res.data && res.data.success) setCategories(res.data.categories || []);\n    } catch (err) {\n      console.error(\"Fetch categories error\", err);\n      alert(\"Could not fetch categories\");\n    }\n  };\n  const fetchItems = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      if (res.data && res.data.success) {\n        const raw = res.data.data || [];\n\n        // ensure fields exist\n        // const enriched = raw.map((item) => {\n        //   // category/subcategory may be populated objects or ids\n        //   const catObj = categories.find(\n        //     (c) => c._id === item.category || c._id === (item.category?._id || item.category)\n        //   );\n        //   const subObj = catObj?.subcategories?.find(\n        //     (s) =>\n        //       s._id === item.subcategory ||\n        //       s._id === (item.subcategory?._id || item.subcategory)\n        //   );\n        const enriched = raw.map(item => {\n          var _item$todayDiff, _ref, _item$lastFinalPrice, _item$currentFinalPri, _ref2, _item$todayDiff2, _item$lastFinalPrice2, _item$basePrice, _ref3, _item$currentFinalPri2, _ref4, _item$lastFinalPrice3, _item$todayDiff3;\n          return {\n            ...item,\n            todayDiff: Number((_item$todayDiff = item.todayDiff) !== null && _item$todayDiff !== void 0 ? _item$todayDiff : 0),\n            lastFinalPrice: Number((_ref = (_item$lastFinalPrice = item.lastFinalPrice) !== null && _item$lastFinalPrice !== void 0 ? _item$lastFinalPrice : item.basePrice) !== null && _ref !== void 0 ? _ref : 0),\n            currentFinalPrice: Number((_item$currentFinalPri = item.currentFinalPrice) !== null && _item$currentFinalPri !== void 0 ? _item$currentFinalPri : 0),\n            category: item.category ? {\n              _id: item.category._id,\n              name: item.category.name\n            } : null,\n            subcategory: item.subcategory ? {\n              name: item.subcategory.name\n            } : null\n          };\n          return {\n            ...item,\n            // maintain compatibility: backend provides todayDiff/lastFinalPrice/currentFinalPrice\n            todayDiff: (_ref2 = (_item$todayDiff2 = item.todayDiff) !== null && _item$todayDiff2 !== void 0 ? _item$todayDiff2 : item.difference) !== null && _ref2 !== void 0 ? _ref2 : 0,\n            lastFinalPrice: (_item$lastFinalPrice2 = item.lastFinalPrice) !== null && _item$lastFinalPrice2 !== void 0 ? _item$lastFinalPrice2 : (_item$basePrice = item.basePrice) !== null && _item$basePrice !== void 0 ? _item$basePrice : 0,\n            currentFinalPrice: (_ref3 = (_item$currentFinalPri2 = item.currentFinalPrice) !== null && _item$currentFinalPri2 !== void 0 ? _item$currentFinalPri2 : item.finalPrice) !== null && _ref3 !== void 0 ? _ref3 : Number((_ref4 = (_item$lastFinalPrice3 = item.lastFinalPrice) !== null && _item$lastFinalPrice3 !== void 0 ? _item$lastFinalPrice3 : item.basePrice) !== null && _ref4 !== void 0 ? _ref4 : 0) + Number((_item$todayDiff3 = item.todayDiff) !== null && _item$todayDiff3 !== void 0 ? _item$todayDiff3 : 0),\n            category: catObj ? {\n              _id: catObj._id,\n              name: catObj.name\n            } : item.category || null,\n            subcategory: subObj ? {\n              _id: subObj._id,\n              name: subObj.name\n            } : item.subcategory || null\n          };\n        });\n        setItems(enriched);\n      }\n    } catch (err) {\n      console.error(\"Fetch items error\", err);\n      alert(\"Could not fetch items\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ------------------ Category/Sub creation ------------------\n  const handleCreateCategory = async () => {\n    if (!newCategoryName.trim()) return alert(\"Enter category name\");\n    try {\n      const fd = new FormData();\n      fd.append(\"name\", newCategoryName.trim());\n      if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n      const res = await axios.post(CATEGORY_URL, fd);\n      if (res.data && res.data.success) {\n        setNewCategoryName(\"\");\n        setNewCategoryImage(null);\n        setNewCategoryPreview(null);\n        setAddingCategory(false);\n        fetchCategories();\n      } else {\n        alert(\"Category creation failed\");\n      }\n    } catch (err) {\n      console.error(\"Create category error\", err);\n      alert(\"Category creation failed\");\n    }\n  };\n  const handleCreateSub = async () => {\n    if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n    if (!form.category) return alert(\"Select category first\");\n    try {\n      const fd = new FormData();\n      fd.append(\"name\", newSubName.trim());\n      if (newSubImage) fd.append(\"image\", newSubImage);\n      const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n      if (res.data && res.data.success) {\n        setNewSubName(\"\");\n        setNewSubImage(null);\n        setNewSubPreview(null);\n        setAddingSub(false);\n        fetchCategories();\n      } else {\n        alert(\"Subcategory creation failed\");\n      }\n    } catch (err) {\n      console.error(\"Create sub error\", err);\n      alert(\"Subcategory creation failed\");\n    }\n  };\n\n  // ------------------ Handlers (create/update/delete) ------------------\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (files && files.length) {\n      setForm(p => ({\n        ...p,\n        file: files[0]\n      }));\n    } else {\n      setForm(p => ({\n        ...p,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (!form.name || !form.category || !form.basePrice) {\n        alert(\"Name, category & base price are required\");\n        setLoading(false);\n        return;\n      }\n      const fd = new FormData();\n      Object.keys(form).forEach(k => {\n        const val = form[k];\n        if (val !== undefined && val !== null) {\n          fd.append(k, val);\n        }\n      });\n      let res;\n      if (isCopyMode) {\n        // create new item from copy data\n        res = await axios.post(API_URL, fd);\n        alert(\"Copied as new item\");\n      } else if (editId) {\n        // update general fields (basePrice allowed but base is expected to be fixed by your requirements; be careful)\n        res = await axios.put(`${API_URL}/${editId}`, fd);\n        alert(\"Updated\");\n      } else {\n        // add new\n        res = await axios.post(API_URL, fd);\n        alert(\"Added\");\n      }\n      await fetchItems();\n      await fetchCategories();\n      setForm({\n        name: \"\",\n        category: \"\",\n        subcategory: \"\",\n        description: \"\",\n        basePrice: \"\",\n        difference: \"\",\n        validTill: \"\",\n        file: null,\n        status: \"inactive\"\n      });\n      setEditId(null);\n      setIsCopyMode(false);\n      setShowModal(false);\n      setShowForm(false);\n    } catch (err) {\n      console.error(\"Save error\", err);\n      alert(\"Save failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleEdit = item => {\n    var _item$category, _item$category$_id, _item$subcategory, _item$subcategory$_id, _item$basePrice2, _item$todayDiff4;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : (_item$category$_id = _item$category._id) === null || _item$category$_id === void 0 ? void 0 : _item$category$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : (_item$subcategory$_id = _item$subcategory._id) === null || _item$subcategory$_id === void 0 ? void 0 : _item$subcategory$_id.toString()) || \"\",\n      description: item.description || \"\",\n      basePrice: (_item$basePrice2 = item.basePrice) !== null && _item$basePrice2 !== void 0 ? _item$basePrice2 : \"\",\n      difference: (_item$todayDiff4 = item.todayDiff) !== null && _item$todayDiff4 !== void 0 ? _item$todayDiff4 : 0,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null,\n      status: item.status || \"inactive\"\n    });\n    const cat = categories.find(c => {\n      var _item$category2;\n      return c._id === ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2._id);\n    });\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setEditId(item._id);\n    setIsCopyMode(false);\n    setShowModal(true);\n    setActiveMenu(null);\n  };\n  const handleCopyToEdit = item => {\n    var _item$category3, _item$category3$_id, _item$subcategory2, _item$subcategory2$_i, _item$basePrice3, _item$todayDiff5;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : (_item$category3$_id = _item$category3._id) === null || _item$category3$_id === void 0 ? void 0 : _item$category3$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : (_item$subcategory2$_i = _item$subcategory2._id) === null || _item$subcategory2$_i === void 0 ? void 0 : _item$subcategory2$_i.toString()) || \"\",\n      description: item.description || \"\",\n      basePrice: (_item$basePrice3 = item.basePrice) !== null && _item$basePrice3 !== void 0 ? _item$basePrice3 : \"\",\n      difference: (_item$todayDiff5 = item.todayDiff) !== null && _item$todayDiff5 !== void 0 ? _item$todayDiff5 : 0,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null,\n      status: item.status || \"inactive\"\n    });\n    const cat = categories.find(c => {\n      var _item$category4;\n      return c._id === ((_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : _item$category4._id);\n    });\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setEditId(null);\n    setIsCopyMode(true);\n    setShowModal(true);\n    setActiveMenu(null);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete item?\")) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`);\n      setItems(prev => prev.filter(x => x._id !== id));\n      setSelectedItems(prev => prev.filter(x => x !== id));\n      setActiveMenu(null);\n    } catch (err) {\n      console.error(\"Delete error\", err);\n      alert(\"Delete failed\");\n    }\n  };\n  const handleStatusToggle = async item => {\n    try {\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n      const res = await axios.put(`${API_URL}/status/${item._id}`, {\n        status: newStatus\n      });\n      if (res.data && res.data.success) {\n        // update local\n        setItems(prev => prev.map(x => x._id === item._id ? {\n          ...x,\n          status: newStatus\n        } : x));\n      } else {\n        alert(\"Status update failed\");\n      }\n    } catch (err) {\n      console.error(\"Status toggle error\", err);\n      alert(\"Status update failed\");\n    }\n  };\n  const handleBulkDelete = async () => {\n    if (!selectedItems.length) return alert(\"No items selected\");\n    if (!window.confirm(\"Delete selected items?\")) return;\n    try {\n      await Promise.all(selectedItems.map(id => axios.delete(`${API_URL}/${id}`)));\n      setSelectedItems([]);\n      fetchItems();\n      setBulkMode(false);\n    } catch (err) {\n      console.error(\"Bulk delete error\", err);\n      alert(\"Bulk delete failed\");\n    }\n  };\n  const updateLocalItemField = (id, key, value) => {\n    setItems(prev => prev.map(x => x._id === id ? {\n      ...x,\n      [key]: value\n    } : x));\n  };\n  const handleBulkSave = async () => {\n    if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n    const updates = items.filter(x => selectedItems.includes(x._id)).map(x => ({\n      id: x._id,\n      name: x.name,\n      basePrice: Number(x.basePrice),\n      difference: Number(x.todayDiff || 0),\n      // backend bulk expects difference key\n      validTill: x.validTill,\n      status: x.status\n    }));\n    try {\n      const res = await axios.post(`${API_URL}/bulk-update`, {\n        products: updates\n      });\n      if (res.data && res.data.success) {\n        setBulkMode(false);\n        setSelectedItems([]);\n        fetchItems();\n      } else {\n        alert(\"Bulk save failed\");\n      }\n    } catch (err) {\n      console.error(\"Bulk save error\", err);\n      alert(\"Bulk save failed\");\n    }\n  };\n\n  // ------------------ CSV import/export ------------------\n  const handleCsvSelect = e => {\n    setCsvFile(e.target.files[0]);\n  };\n  const handleImportCsv = async () => {\n    if (!csvFile) return alert(\"Select CSV file\");\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", csvFile);\n      const res = await axios.post(`${API_URL}/import`, fd);\n      if (res.data && res.data.success) {\n        alert(`Imported ${res.data.inserted || 0} items`);\n        setCsvFile(null);\n        if (csvInputRef.current) csvInputRef.current.value = null;\n        fetchItems();\n      } else {\n        alert(\"CSV import failed\");\n      }\n    } catch (err) {\n      console.error(\"CSV import error\", err);\n      alert(\"CSV import failed\");\n    }\n  };\n  const handleExportCsv = () => {\n    if (!items.length) return alert(\"No items to export\");\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"todayDiff\", \"lastFinalPrice\", \"currentFinalPrice\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = items.map(p => {\n      var _p$category, _p$subcategory, _p$basePrice, _p$todayDiff, _p$lastFinalPrice, _p$currentFinalPrice;\n      return [p._id, p.name || \"\", ((_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category.name) || \"\", ((_p$subcategory = p.subcategory) === null || _p$subcategory === void 0 ? void 0 : _p$subcategory.name) || \"\", (_p$basePrice = p.basePrice) !== null && _p$basePrice !== void 0 ? _p$basePrice : \"\", (_p$todayDiff = p.todayDiff) !== null && _p$todayDiff !== void 0 ? _p$todayDiff : \"\", (_p$lastFinalPrice = p.lastFinalPrice) !== null && _p$lastFinalPrice !== void 0 ? _p$lastFinalPrice : \"\", (_p$currentFinalPrice = p.currentFinalPrice) !== null && _p$currentFinalPrice !== void 0 ? _p$currentFinalPrice : \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n    });\n    const csvArray = [header, ...rows];\n    const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.href = encodedUri;\n    link.download = `all_prices_${Date.now()}.csv`;\n    link.click();\n  };\n  const handleExportSelectedCsv = () => {\n    if (!selectedItems.length) return alert(\"Select items to export\");\n    const selectedData = items.filter(x => selectedItems.includes(x._id));\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"todayDiff\", \"lastFinalPrice\", \"currentFinalPrice\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = selectedData.map(p => {\n      var _p$category2, _p$subcategory2, _p$basePrice2, _p$todayDiff2, _p$lastFinalPrice2, _p$currentFinalPrice2;\n      return [p._id, p.name || \"\", ((_p$category2 = p.category) === null || _p$category2 === void 0 ? void 0 : _p$category2.name) || \"\", ((_p$subcategory2 = p.subcategory) === null || _p$subcategory2 === void 0 ? void 0 : _p$subcategory2.name) || \"\", (_p$basePrice2 = p.basePrice) !== null && _p$basePrice2 !== void 0 ? _p$basePrice2 : \"\", (_p$todayDiff2 = p.todayDiff) !== null && _p$todayDiff2 !== void 0 ? _p$todayDiff2 : \"\", (_p$lastFinalPrice2 = p.lastFinalPrice) !== null && _p$lastFinalPrice2 !== void 0 ? _p$lastFinalPrice2 : \"\", (_p$currentFinalPrice2 = p.currentFinalPrice) !== null && _p$currentFinalPrice2 !== void 0 ? _p$currentFinalPrice2 : \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n    });\n    const csvArray = [header, ...rows];\n    const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.href = encodedUri;\n    link.download = `selected_prices_${Date.now()}.csv`;\n    link.click();\n  };\n\n  // ------------------ Filtering/Pagination ------------------\n  const filteredItems = items.filter(item => {\n    var _item$category5, _item$subcategory3, _item$category6, _item$subcategory4;\n    const t = search.toLowerCase();\n    const matchText = (item.name || \"\").toLowerCase().includes(t) || (((_item$category5 = item.category) === null || _item$category5 === void 0 ? void 0 : _item$category5.name) || \"\").toLowerCase().includes(t) || (((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : _item$subcategory3.name) || \"\").toLowerCase().includes(t);\n    const matchCategory = !filterCategory || ((_item$category6 = item.category) === null || _item$category6 === void 0 ? void 0 : _item$category6._id) === filterCategory;\n    const matchSub = !filterSubcategory || ((_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4._id) === filterSubcategory;\n    return matchText && matchCategory && matchSub;\n  });\n  const indexOfLast = currentPage * itemsPerPage;\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n  const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n  // ------------------ Final price helper ------------------\n  // const getFinalPrice = (item) => {\n  //   // trust backend: currentFinalPrice computed server-side\n  //   return item.currentFinalPrice ?? (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0));\n  // };\n  const getFinalPrice = item => {\n    var _item$currentFinalPri3;\n    return Number((_item$currentFinalPri3 = item.currentFinalPrice) !== null && _item$currentFinalPri3 !== void 0 ? _item$currentFinalPri3 : 0);\n  };\n\n  // ------------------ QUICK DIFF (per-row) ------------------\n  const handleQuickDiffChange = (id, value) => {\n    setQuickDiffs(p => ({\n      ...p,\n      [id]: value\n    }));\n  };\n  const applyQuickDiff = async id => {\n    var _quickDiffs$id;\n    const diff = Number((_quickDiffs$id = quickDiffs[id]) !== null && _quickDiffs$id !== void 0 ? _quickDiffs$id : 0);\n    try {\n      setLoading(true);\n      // const res = await axios.put(`${API_URL}/updateDiff/${id}`, { diff });\n      // if (res.data && res.data.success) {\n      //   await fetchItems();\n      const res = await axios.put(`${API_URL}/updateDiff/${id}`, {\n        diff\n      });\n      if (res.data.success) {\n        const updated = res.data.data;\n        setItems(prev => prev.map(x => x._id === id ? updated : x));\n        setQuickDiffs(p => ({\n          ...p,\n          [id]: undefined\n        }));\n      } else {\n        alert(\"Diff update failed\");\n      }\n    } catch (err) {\n      console.error(\"update-diff error\", err);\n      alert(\"Diff update failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ------------------ ROUTINE UI ------------------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.header,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.title,\n        children: \"Product Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3658,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3657,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-topbar\",\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search product, category or subcategory...\",\n        value: search,\n        onChange: e => {\n          setSearch(e.target.value);\n          setCurrentPage(1);\n        },\n        style: styles.searchInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3662,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.addButton,\n        onClick: () => {\n          setShowForm(!showForm);\n          setEditId(null);\n          setIsCopyMode(false);\n        },\n        children: showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3673,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3661,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-bar\",\n      style: {\n        display: \"flex\",\n        gap: 10,\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: filterCategory,\n        onChange: e => setFilterCategory(e.target.value),\n        className: \"filter-select\",\n        style: styles.select,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Filter by Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3687,\n          columnNumber: 11\n        }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c._id,\n          children: c.name\n        }, c._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3689,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3686,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: filterSubcategory,\n        onChange: e => setFilterSubcategory(e.target.value),\n        className: \"filter-select\",\n        disabled: !filterSubs.length,\n        style: styles.select,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Filter by Subcategory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3702,\n          columnNumber: 11\n        }, this), filterSubs.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: s._id,\n          children: s.name\n        }, s._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3704,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3695,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: \"auto\",\n          display: \"flex\",\n          gap: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnPrimary,\n          onClick: handleExportCsv,\n          children: \"Export All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3712,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3710,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3685,\n      columnNumber: 7\n    }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bulk-bar\",\n      style: styles.bulkBar,\n      children: !bulkMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-actions\",\n        style: {\n          display: \"flex\",\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnDelete,\n          onClick: handleBulkDelete,\n          children: \"\\uD83D\\uDDD1 Bulk Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3722,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnPrimary,\n          onClick: () => setBulkMode(true),\n          children: \"\\u270F Bulk Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3726,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3721,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.bulkPanel,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: styles.bulkPanelTitle,\n          children: \"\\u270F Bulk Edit Selected Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3732,\n          columnNumber: 15\n        }, this), items.filter(item => selectedItems.includes(item._id)).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.bulkItemBox,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: styles.bulkItemTitle,\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3738,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGrid,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3742,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: item.name,\n                onChange: e => updateLocalItemField(item._id, \"name\", e.target.value),\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3743,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3741,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Base Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3752,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: item.basePrice,\n                onChange: e => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value)),\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3753,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3751,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Today's Difference\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3762,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: item.todayDiff || 0,\n                onChange: e => updateLocalItemField(item._id, \"todayDiff\", Number(e.target.value)),\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3763,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3761,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3772,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: item.status,\n                onChange: e => updateLocalItemField(item._id, \"status\", e.target.value),\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"active\",\n                  children: \"active\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3778,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"inactive\",\n                  children: \"inactive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3779,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3773,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3771,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3740,\n            columnNumber: 21\n          }, this)]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3737,\n          columnNumber: 19\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 10,\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnPrimary,\n            onClick: handleBulkSave,\n            children: \"\\u2714 Save All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3787,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnCancel,\n            onClick: () => setBulkMode(false),\n            children: \"\\u2716 Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3790,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3786,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3731,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3719,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.formCard,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.formTitle,\n        children: \"\\u2795 Add / Edit Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3801,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGrid,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3806,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              name: \"name\",\n              value: form.name,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3807,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3805,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3811,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                required: true,\n                name: \"category\",\n                value: form.category,\n                onChange: e => {\n                  handleChange(e);\n                  setForm(p => ({\n                    ...p,\n                    subcategory: \"\"\n                  }));\n                },\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3823,\n                  columnNumber: 21\n                }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c._id,\n                  children: c.name\n                }, c._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3825,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3813,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                style: styles.btnSmall,\n                onClick: () => setAddingCategory(v => !v),\n                children: addingCategory ? \"Close\" : \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3831,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3812,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3810,\n            columnNumber: 15\n          }, this), addingCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.addCategoryBox,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Add New Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3839,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: newCategoryName,\n                onChange: e => setNewCategoryName(e.target.value),\n                placeholder: \"Category name\",\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3841,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  setNewCategoryImage(e.target.files[0]);\n                  setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n                },\n                style: styles.fileInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3847,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: styles.btnPrimary,\n                type: \"button\",\n                onClick: handleCreateCategory,\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3856,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3840,\n              columnNumber: 19\n            }, this), newCategoryPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: newCategoryPreview,\n              style: styles.preview,\n              alt: \"preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3860,\n              columnNumber: 42\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3838,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3865,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"subcategory\",\n                value: form.subcategory,\n                onChange: handleChange,\n                disabled: !subcategories.length,\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3868,\n                  columnNumber: 21\n                }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: s._id,\n                  children: s.name\n                }, s._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3870,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3867,\n                columnNumber: 19\n              }, this), form.category && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                style: styles.btnSmall,\n                onClick: () => setAddingSub(v => !v),\n                children: addingSub ? \"Close\" : \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3877,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3866,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3864,\n            columnNumber: 15\n          }, this), addingSub && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.addCategoryBox,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Add New Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3886,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: newSubName,\n                onChange: e => setNewSubName(e.target.value),\n                placeholder: \"Subcategory name\",\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3888,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  setNewSubImage(e.target.files[0]);\n                  setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n                },\n                style: styles.fileInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3889,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: styles.btnPrimary,\n                type: \"button\",\n                onClick: handleCreateSub,\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3898,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3887,\n              columnNumber: 19\n            }, this), newSubPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: newSubPreview,\n              style: styles.preview,\n              alt: \"preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3902,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3885,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Base Price *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3907,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              required: true,\n              name: \"basePrice\",\n              value: form.basePrice,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3908,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              style: {\n                color: \"#666\"\n              },\n              children: \"Base is considered fixed logic-wise. Changing it here will update the stored basePrice.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3909,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3906,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Today's Difference (optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3915,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"difference\",\n              value: form.difference,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3916,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              style: {\n                color: \"#666\"\n              },\n              children: \"You can set initial diff on create/update. Prefer using quick-diff per-row to apply formula (lastFinal + diff).\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3917,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3914,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Valid Till\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3923,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"validTill\",\n              value: form.validTill,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3924,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3922,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3928,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleChange,\n              style: styles.fileInput\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3929,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3927,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3804,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: styles.label,\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3934,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange,\n            style: styles.textarea\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3935,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3933,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formActions,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnPrimary,\n            disabled: loading,\n            children: loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3939,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            style: styles.btnCancel,\n            onClick: () => {\n              setShowForm(false);\n              setEditId(null);\n              setIsCopyMode(false);\n              setForm({\n                name: \"\",\n                category: \"\",\n                subcategory: \"\",\n                description: \"\",\n                basePrice: \"\",\n                difference: \"\",\n                validTill: \"\",\n                file: null,\n                status: \"inactive\"\n              });\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3943,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3938,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3803,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3800,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.csvBar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.csvLeft,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".csv\",\n          ref: csvInputRef,\n          onChange: handleCsvSelect,\n          style: styles.csvInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3978,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3977,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.csvButtons,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.csvBtn,\n          onClick: handleImportCsv,\n          children: \"Import\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3988,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.csvBtn,\n          onClick: handleExportSelectedCsv,\n          children: \"Selected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3989,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.csvBtnPrimary,\n          onClick: handleExportCsv,\n          children: \"Export All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3990,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3987,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3976,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.tableCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.tableHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.tableTitle,\n          children: \"Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3997,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.totalCount,\n          children: [\"Total: \", filteredItems.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3998,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3996,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.tableWrapper,\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          style: styles.table,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedItems.length === filteredItems.length && filteredItems.length > 0,\n                  onChange: () => {\n                    if (selectedItems.length === filteredItems.length) setSelectedItems([]);else setSelectedItems(filteredItems.map(x => x._id));\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4006,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4005,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Sr\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4015,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4016,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4017,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4018,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4019,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4021,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"YTD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4022,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Today Diff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4023,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Current Final\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4024,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Quick Diff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4026,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4027,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Valid Till\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4028,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4029,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4004,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4003,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: currentItems.map((item, i) => {\n              var _item$category7, _item$subcategory5, _item$lastFinalPrice4, _item$todayDiff6, _quickDiffs$item$_id;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: styles.tr,\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedItems.includes(item._id),\n                    onChange: () => setSelectedItems(prev => prev.includes(item._id) ? prev.filter(x => x !== item._id) : [...prev, item._id])\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4037,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4036,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: (currentPage - 1) * itemsPerPage + (i + 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4046,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.image,\n                    style: styles.tableImg,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4049,\n                    columnNumber: 35\n                  }, this) : \"No Img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4048,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4052,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: ((_item$category7 = item.category) === null || _item$category7 === void 0 ? void 0 : _item$category7.name) || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4053,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: ((_item$subcategory5 = item.subcategory) === null || _item$subcategory5 === void 0 ? void 0 : _item$subcategory5.name) || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4054,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: \"flex\",\n                        gap: 8,\n                        alignItems: \"center\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        placeholder: \"base\",\n                        value: quickBasePrices[item._id] !== undefined ? quickBasePrices[item._id] : item.basePrice,\n                        onChange: e => setQuickBasePrices(p => ({\n                          ...p,\n                          [item._id]: e.target.value\n                        })),\n                        style: {\n                          ...styles.input,\n                          padding: \"6px 8px\",\n                          width: 80\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4061,\n                        columnNumber: 7\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.btnSmall,\n                        onClick: async () => {\n                          var _quickBasePrices$item;\n                          const newBase = Number((_quickBasePrices$item = quickBasePrices[item._id]) !== null && _quickBasePrices$item !== void 0 ? _quickBasePrices$item : item.basePrice);\n                          if (isNaN(newBase)) return alert(\"Invalid Base Price\");\n                          try {\n                            var _item$category8, _item$subcategory6;\n                            setLoading(true);\n                            const fd = new FormData();\n                            fd.append(\"name\", item.name);\n                            fd.append(\"category\", (_item$category8 = item.category) === null || _item$category8 === void 0 ? void 0 : _item$category8._id);\n                            fd.append(\"subcategory\", ((_item$subcategory6 = item.subcategory) === null || _item$subcategory6 === void 0 ? void 0 : _item$subcategory6._id) || \"\");\n                            fd.append(\"description\", item.description || \"\");\n                            fd.append(\"basePrice\", newBase);\n                            fd.append(\"validTill\", item.validTill || \"\");\n                            fd.append(\"status\", item.status);\n                            const res = await axios.put(`${API_URL}/${item._id}`, fd);\n                            if (res.data.success) {\n                              const newCurrent = newBase + Number(item.todayDiff || 0);\n\n                              // Update UI instantly without refresh\n                              // setItems((prev) =>\n                              //   prev.map((x) =>\n                              //     x._id === item._id\n                              //       ? {\n                              //           ...x,\n                              //           basePrice: newBase,\n                              //           currentFinalPrice: newCurrent,\n                              //           lastFinalPrice: newBase, // OPTIONAL (if you want it)\n                              //         }\n                              //       : x\n                              //   )\n                              // );\n                              const updated = res.data.data;\n                              setItems(prev => prev.map(x => x._id === item._id ? updated : x));\n                              setQuickBasePrices(p => ({\n                                ...p,\n                                [item._id]: newBase\n                              }));\n                            } else {\n                              alert(\"Base update failed\");\n                            }\n                          } catch (err) {\n                            console.error(err);\n                            alert(\"Base update error\");\n                          } finally {\n                            setLoading(false);\n                          }\n                        },\n                        children: \"\\u2714\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4078,\n                        columnNumber: 7\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4060,\n                      columnNumber: 5\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      style: {\n                        display: \"block\",\n                        color: \"#2b8d28ff\",\n                        marginTop: 4\n                      },\n                      children: [\"Saved: \\u20B9\", item.basePrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4142,\n                      columnNumber: 5\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4058,\n                  columnNumber: 20\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [\"\\u20B9\", (_item$lastFinalPrice4 = item.lastFinalPrice) !== null && _item$lastFinalPrice4 !== void 0 ? _item$lastFinalPrice4 : item.basePrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4148,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: (_item$todayDiff6 = item.todayDiff) !== null && _item$todayDiff6 !== void 0 ? _item$todayDiff6 : 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4149,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [\"\\u20B9\", getFinalPrice(item)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4150,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: \"flex\",\n                      gap: 8,\n                      alignItems: \"center\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      placeholder: \"diff\",\n                      value: (_quickDiffs$item$_id = quickDiffs[item._id]) !== null && _quickDiffs$item$_id !== void 0 ? _quickDiffs$item$_id : \"\",\n                      onChange: e => handleQuickDiffChange(item._id, e.target.value),\n                      style: {\n                        ...styles.input,\n                        padding: \"6px 8px\",\n                        width: 80\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4154,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.btnSmall,\n                      onClick: () => applyQuickDiff(item._id),\n                      children: \"\\u2714\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4161,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4153,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    style: {\n                      display: \"block\",\n                      color: \"#666\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4165,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4152,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: item.status === \"active\" ? styles.statusActive : styles.statusInactive,\n                    onClick: () => handleStatusToggle(item),\n                    children: item.status === \"active\" ? \"Active\" : \"Inactive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4171,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4170,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4179,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      position: \"relative\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.menuButton,\n                      onClick: () => setActiveMenu(activeMenu === item._id ? null : item._id),\n                      children: \"\\u22EE\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4183,\n                      columnNumber: 23\n                    }, this), activeMenu === item._id && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: styles.dropdown,\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.dropdownItem,\n                        onClick: () => handleEdit(item),\n                        children: \"\\u270F Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4192,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.dropdownItem,\n                        onClick: () => handleCopyToEdit(item),\n                        children: \"\\uD83D\\uDCC4 Copy\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4195,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.dropdownItemDelete,\n                        onClick: () => handleDelete(item._id),\n                        children: \"\\uD83D\\uDDD1 Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 4198,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 4191,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 4182,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4181,\n                  columnNumber: 19\n                }, this)]\n              }, item._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4035,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4033,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4002,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4001,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.pagination,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.paginationBtn,\n          disabled: currentPage === 1,\n          onClick: () => setCurrentPage(p => p - 1),\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4212,\n          columnNumber: 11\n        }, this), Array.from({\n          length: totalPages\n        }, (_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n          style: i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn,\n          onClick: () => setCurrentPage(i + 1),\n          children: i + 1\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4217,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.paginationBtn,\n          disabled: currentPage === totalPages,\n          onClick: () => setCurrentPage(p => p + 1),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3995,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.modalOverlay,\n      onClick: () => setShowModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.modal,\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.modalTitle,\n          children: isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGrid,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Product Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4240,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                required: true,\n                name: \"name\",\n                value: form.name,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4241,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Category *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4245,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                required: true,\n                name: \"category\",\n                value: form.category,\n                onChange: e => {\n                  handleChange(e);\n                  setForm(p => ({\n                    ...p,\n                    subcategory: \"\"\n                  }));\n                },\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4256,\n                  columnNumber: 21\n                }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c._id,\n                  children: c.name\n                }, c._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4258,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4246,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4266,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"subcategory\",\n                value: form.subcategory,\n                onChange: handleChange,\n                disabled: !subcategories.length,\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4268,\n                  columnNumber: 21\n                }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: s._id,\n                  children: s.name\n                }, s._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 4270,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 4267,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4265,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Base Price *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4278,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                required: true,\n                name: \"basePrice\",\n                value: form.basePrice,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4279,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Today's Difference\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4283,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"difference\",\n                value: form.difference,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4284,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4282,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Valid Till\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4288,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                name: \"validTill\",\n                value: form.validTill,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4289,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4293,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleChange,\n                style: styles.fileInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 4294,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 4292,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4299,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: form.description,\n              onChange: handleChange,\n              style: styles.textarea\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4300,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4298,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formActions,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              style: styles.btnPrimary,\n              disabled: loading,\n              children: loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              style: styles.btnCancel,\n              onClick: () => {\n                setShowModal(false);\n                setEditId(null);\n                setIsCopyMode(false);\n                setForm({\n                  name: \"\",\n                  category: \"\",\n                  subcategory: \"\",\n                  description: \"\",\n                  basePrice: \"\",\n                  difference: \"\",\n                  validTill: \"\",\n                  file: null,\n                  status: \"inactive\"\n                });\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 4308,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 4303,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4234,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 4233,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3656,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------------------- Styles ---------------------- */\n/* Reused and tweaked from your original file to match look & feel */\n_s(PriceList, \"T7ZqJ8NHk8pKGXl9P+aR9PsUTLg=\");\n_c = PriceList;\nconst styles = {\n  container: {\n    padding: 16\n  },\n  header: {\n    marginBottom: 8\n  },\n  title: {\n    fontSize: \"21px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    marginBottom: \"6px\"\n  },\n  csvBar: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    gap: 10,\n    padding: \"8px\",\n    background: \"#f1f5fb\",\n    borderRadius: 10,\n    border: \"1px solid #d0d7e2\",\n    flexWrap: \"wrap\"\n  },\n  csvLeft: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  csvInput: {\n    padding: \"6px\",\n    fontSize: \"12px\"\n  },\n  csvButtons: {\n    display: \"flex\",\n    gap: 6,\n    flexWrap: \"wrap\"\n  },\n  csvBtn: {\n    background: \"#6c8ffc\",\n    color: \"#fff\",\n    padding: \"6px 10px\",\n    borderRadius: 6,\n    border: \"none\",\n    fontSize: \"12px\",\n    cursor: \"pointer\"\n  },\n  csvBtnPrimary: {\n    background: \"#3b6ef6\",\n    color: \"#fff\",\n    padding: \"6px 10px\",\n    borderRadius: 6,\n    border: \"none\",\n    fontSize: \"12px\",\n    cursor: \"pointer\"\n  },\n  searchInput: {\n    width: \"320px\",\n    padding: \"10px 12px\",\n    borderRadius: \"10px\",\n    border: \"1px solid #ced4da\",\n    background: \"#f9fbfc\",\n    fontSize: \"14px\",\n    outline: \"none\"\n  },\n  addButton: {\n    marginLeft: 12,\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"10px\",\n    padding: \"10px 14px\",\n    fontSize: \"14px\",\n    cursor: \"pointer\"\n  },\n  bulkBar: {\n    background: \"#e9f2ff\",\n    border: \"1px solid #c4d9ff\",\n    borderRadius: \"10px\",\n    padding: \"12px\",\n    marginBottom: \"12px\"\n  },\n  bulkPanel: {\n    width: \"100%\",\n    background: \"#f7faff\",\n    border: \"1px solid #cfe2ff\",\n    padding: \"12px\",\n    borderRadius: \"10px\"\n  },\n  bulkPanelTitle: {\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    fontWeight: \"700\",\n    marginBottom: \"10px\"\n  },\n  bulkItemBox: {\n    background: \"#fff\",\n    border: \"1px solid #dbe5f5\",\n    padding: \"12px\",\n    borderRadius: \"8px\",\n    marginBottom: \"10px\"\n  },\n  bulkItemTitle: {\n    fontSize: \"14px\",\n    fontWeight: \"600\",\n    marginBottom: \"8px\"\n  },\n  formCard: {\n    borderRadius: \"12px\",\n    padding: \"16px\",\n    marginBottom: \"18px\",\n    background: \"#ffffff\",\n    border: \"1px solid #eef2f7\"\n  },\n  formTitle: {\n    fontSize: \"18px\",\n    fontWeight: \"700\",\n    marginBottom: 10\n  },\n  formGrid: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\n    gap: \"12px\"\n  },\n  formGroup: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"6px\"\n  },\n  label: {\n    fontWeight: \"600\",\n    fontSize: \"13px\",\n    color: \"#233142\"\n  },\n  input: {\n    padding: \"8px\",\n    borderRadius: \"8px\",\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    fontSize: \"13px\"\n  },\n  select: {\n    padding: \"8px\",\n    borderRadius: \"8px\",\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    fontSize: \"13px\"\n  },\n  textarea: {\n    padding: \"8px\",\n    borderRadius: \"8px\",\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    minHeight: 80\n  },\n  fileInput: {\n    padding: \"6px\"\n  },\n  categoryRow: {\n    display: \"flex\",\n    gap: \"8px\",\n    alignItems: \"center\"\n  },\n  addCategoryBox: {\n    gridColumn: \"1 / -1\",\n    padding: 10,\n    background: \"#f1f7ff\",\n    borderRadius: 8\n  },\n  preview: {\n    width: 90,\n    height: 90,\n    objectFit: \"cover\",\n    borderRadius: 8\n  },\n  formActions: {\n    marginTop: 10,\n    display: \"flex\",\n    gap: 8\n  },\n  btnPrimary: {\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"8px\",\n    padding: \"8px 12px\",\n    cursor: \"pointer\"\n  },\n  btnSmall: {\n    background: \"#43a047\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"8px\",\n    padding: \"6px 10px\",\n    cursor: \"pointer\"\n  },\n  btnDelete: {\n    background: \"#e63946\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"8px\",\n    padding: \"8px 12px\",\n    cursor: \"pointer\"\n  },\n  btnCancel: {\n    background: \"#adb5bd\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"8px\",\n    padding: \"8px 12px\",\n    cursor: \"pointer\"\n  },\n  tableCard: {\n    marginTop: 12\n  },\n  tableHeader: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: 8\n  },\n  tableTitle: {\n    fontSize: \"18px\",\n    fontWeight: \"700\"\n  },\n  totalCount: {\n    fontSize: \"13px\",\n    color: \"#6c757d\",\n    fontWeight: \"600\"\n  },\n  tableWrapper: {\n    overflowX: \"auto\"\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    fontSize: \"14px\"\n  },\n  th: {\n    background: \"#e9f2ff\",\n    padding: \"10px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    textAlign: \"left\"\n  },\n  tr: {\n    borderBottom: \"1px solid #edf2f7\"\n  },\n  td: {\n    padding: \"10px\",\n    whiteSpace: \"nowrap\",\n    verticalAlign: \"middle\"\n  },\n  tableImg: {\n    width: \"55px\",\n    height: \"55px\",\n    borderRadius: \"6px\",\n    objectFit: \"cover\"\n  },\n  statusActive: {\n    background: \"#93d8ba\",\n    padding: \"6px 10px\",\n    borderRadius: \"8px\",\n    color: \"black\",\n    fontWeight: \"600\",\n    border: \"none\",\n    cursor: \"pointer\"\n  },\n  statusInactive: {\n    background: \"#d9b1b1\",\n    padding: \"6px 10px\",\n    borderRadius: \"8px\",\n    color: \"black\",\n    fontWeight: \"600\",\n    border: \"none\",\n    cursor: \"pointer\"\n  },\n  menuButton: {\n    background: \"#f0f0f0\",\n    border: \"none\",\n    borderRadius: \"6px\",\n    padding: \"6px 10px\",\n    fontSize: \"16px\",\n    cursor: \"pointer\"\n  },\n  dropdown: {\n    position: \"absolute\",\n    right: 0,\n    top: 32,\n    background: \"#fff\",\n    border: \"1px solid #ddd\",\n    borderRadius: 8,\n    zIndex: 100,\n    minWidth: 140\n  },\n  dropdownItem: {\n    display: \"block\",\n    width: \"100%\",\n    padding: \"8px 12px\",\n    background: \"transparent\",\n    border: \"none\",\n    textAlign: \"left\",\n    cursor: \"pointer\",\n    fontSize: 13,\n    fontWeight: 500\n  },\n  dropdownItemDelete: {\n    display: \"block\",\n    width: \"100%\",\n    padding: \"8px 12px\",\n    background: \"transparent\",\n    border: \"none\",\n    textAlign: \"left\",\n    cursor: \"pointer\",\n    fontSize: 13,\n    fontWeight: 500,\n    color: \"#e63946\"\n  },\n  pagination: {\n    marginTop: 12,\n    display: \"flex\",\n    justifyContent: \"center\",\n    gap: 8\n  },\n  paginationBtn: {\n    padding: \"8px 10px\",\n    borderRadius: 8,\n    background: \"#fff\",\n    border: \"1px solid #ddd\",\n    cursor: \"pointer\"\n  },\n  paginationBtnActive: {\n    padding: \"8px 10px\",\n    borderRadius: 8,\n    background: \"#007bff\",\n    color: \"white\",\n    border: \"1px solid #0062cc\",\n    cursor: \"pointer\"\n  },\n  modalOverlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    background: \"rgba(0,0,0,0.5)\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    zIndex: 1000,\n    padding: 20\n  },\n  modal: {\n    background: \"#fff\",\n    borderRadius: 12,\n    padding: 20,\n    maxWidth: 700,\n    width: \"100%\",\n    maxHeight: \"90vh\",\n    overflowY: \"auto\"\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    marginBottom: 12,\n    textAlign: \"center\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","isMobile","setIsMobile","window","innerWidth","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","difference","validTill","file","status","editId","setEditId","isCopyMode","setIsCopyMode","showForm","setShowForm","showModal","setShowModal","activeMenu","setActiveMenu","quickBasePrices","setQuickBasePrices","addingCategory","setAddingCategory","newCategoryName","setNewCategoryName","newCategoryImage","setNewCategoryImage","newCategoryPreview","setNewCategoryPreview","addingSub","setAddingSub","newSubName","setNewSubName","newSubImage","setNewSubImage","newSubPreview","setNewSubPreview","selectedItems","setSelectedItems","bulkMode","setBulkMode","csvFile","setCsvFile","csvInputRef","currentPage","setCurrentPage","itemsPerPage","filterCategory","setFilterCategory","filterSubcategory","setFilterSubcategory","filterSubs","setFilterSubs","quickDiffs","setQuickDiffs","fetchCategories","length","fetchItems","handleResize","addEventListener","removeEventListener","cat","find","c","_id","_cat$subcategories","prev","exists","some","s","res","get","data","success","err","console","error","alert","raw","enriched","map","item","_item$todayDiff","_ref","_item$lastFinalPrice","_item$currentFinalPri","_ref2","_item$todayDiff2","_item$lastFinalPrice2","_item$basePrice","_ref3","_item$currentFinalPri2","_ref4","_item$lastFinalPrice3","_item$todayDiff3","todayDiff","Number","lastFinalPrice","currentFinalPrice","finalPrice","catObj","subObj","handleCreateCategory","trim","fd","FormData","append","post","handleCreateSub","handleChange","e","value","files","target","p","handleSubmit","preventDefault","Object","keys","forEach","k","val","undefined","put","handleEdit","_item$category","_item$category$_id","_item$subcategory","_item$subcategory$_id","_item$basePrice2","_item$todayDiff4","toString","split","_item$category2","handleCopyToEdit","_item$category3","_item$category3$_id","_item$subcategory2","_item$subcategory2$_i","_item$basePrice3","_item$todayDiff5","_item$category4","handleDelete","id","confirm","delete","filter","x","handleStatusToggle","newStatus","handleBulkDelete","Promise","all","updateLocalItemField","key","handleBulkSave","updates","includes","products","handleCsvSelect","handleImportCsv","inserted","current","handleExportCsv","header","rows","_p$category","_p$subcategory","_p$basePrice","_p$todayDiff","_p$lastFinalPrice","_p$currentFinalPrice","Date","toISOString","image","csvArray","csvContent","r","String","replace","join","encodedUri","encodeURI","link","document","createElement","href","download","now","click","handleExportSelectedCsv","selectedData","_p$category2","_p$subcategory2","_p$basePrice2","_p$todayDiff2","_p$lastFinalPrice2","_p$currentFinalPrice2","filteredItems","_item$category5","_item$subcategory3","_item$category6","_item$subcategory4","t","toLowerCase","matchText","matchCategory","matchSub","indexOfLast","currentItems","slice","totalPages","Math","max","ceil","getFinalPrice","_item$currentFinalPri3","handleQuickDiffChange","applyQuickDiff","_quickDiffs$id","diff","updated","style","styles","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","className","marginBottom","type","placeholder","onChange","searchInput","addButton","onClick","display","gap","select","disabled","marginLeft","btnPrimary","bulkBar","btnDelete","bulkPanel","bulkPanelTitle","bulkItemBox","bulkItemTitle","formGrid","formGroup","label","input","marginTop","btnCancel","formCard","formTitle","onSubmit","required","categoryRow","btnSmall","v","addCategoryBox","accept","URL","createObjectURL","fileInput","src","preview","alt","color","textarea","formActions","csvBar","csvLeft","ref","csvInput","csvButtons","csvBtn","csvBtnPrimary","tableCard","tableHeader","tableTitle","totalCount","tableWrapper","table","th","checked","i","_item$category7","_item$subcategory5","_item$lastFinalPrice4","_item$todayDiff6","_quickDiffs$item$_id","tr","td","tableImg","alignItems","padding","width","_quickBasePrices$item","newBase","isNaN","_item$category8","_item$subcategory6","newCurrent","statusActive","statusInactive","toLocaleDateString","position","menuButton","dropdown","dropdownItem","dropdownItemDelete","pagination","paginationBtn","Array","from","_","paginationBtnActive","modalOverlay","modal","stopPropagation","modalTitle","_c","fontSize","fontWeight","justifyContent","background","borderRadius","border","flexWrap","cursor","outline","textAlign","gridTemplateColumns","flexDirection","minHeight","gridColumn","height","objectFit","overflowX","borderCollapse","borderBottom","whiteSpace","verticalAlign","right","top","zIndex","minWidth","left","bottom","maxWidth","maxHeight","overflowY","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\n// // import React, { useEffect, useState, useRef } from \"react\";\r\n// // import axios from \"axios\";\r\n// // import \"./PriceList.css\"\r\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// // export default function PriceList() {\r\n// //   const [items, setItems] = useState([]);\r\n// //   const [categories, setCategories] = useState([]);\r\n// //   const [subcategories, setSubcategories] = useState([]);\r\n// //   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n// //   const [search, setSearch] = useState(\"\");\r\n// //   const [loading, setLoading] = useState(false);\r\n\r\n// //   // FORM state\r\n// //   const [form, setForm] = useState({\r\n// //     name: \"\",\r\n// //     category: \"\",\r\n// //     subcategory: \"\",\r\n// //     description: \"\",\r\n// //     basePrice: \"\",\r\n// //     difference: \"\",\r\n// //     validTill: \"\",\r\n// //     file: null,\r\n// //   });\r\n\r\n// //   const [editId, setEditId] = useState(null);\r\n// //   const [isCopyMode, setIsCopyMode] = useState(false);\r\n// //   const [showForm, setShowForm] = useState(false);\r\n// //   const [showModal, setShowModal] = useState(false);\r\n// //   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n// //   const [addingCategory, setAddingCategory] = useState(false);\r\n// //   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n// //   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n// //   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n// //   const [addingSub, setAddingSub] = useState(false);\r\n// //   const [newSubName, setNewSubName] = useState(\"\");\r\n// //   const [newSubImage, setNewSubImage] = useState(null);\r\n// //   const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n// //   const [selectedItems, setSelectedItems] = useState([]);\r\n// //   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n// //   const [csvFile, setCsvFile] = useState(null);\r\n// //   const csvInputRef = useRef();\r\n\r\n// //   const [currentPage, setCurrentPage] = useState(1);\r\n// //   const itemsPerPage = 30;\r\n\r\n// //   const [filterCategory, setFilterCategory] = useState(\"\");\r\n// // const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n// // const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n// // useEffect(() => {\r\n// //   if (!filterCategory) {\r\n// //     setFilterSubs([]);\r\n// //     setFilterSubcategory(\"\");\r\n// //     return;\r\n// //   }\r\n\r\n// //   const cat = categories.find(c => c._id === filterCategory);\r\n// //   setFilterSubs(cat?.subcategories || []);\r\n// //   setFilterSubcategory(\"\");\r\n// // }, [filterCategory, categories]);\r\n\r\n\r\n// //   // useEffect(() => {\r\n// //   //   fetchItems();\r\n// //   //   fetchCategories();\r\n\r\n// //   //   const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n// //   //   window.addEventListener(\"resize\", handleResize);\r\n// //   //   return () => window.removeEventListener(\"resize\", handleResize);\r\n// //   // }, []);\r\n// //   // 1. Pehle categories load karo\r\n// // useEffect(() => {\r\n// //   fetchCategories();\r\n// // }, []);\r\n\r\n// // // 2. Categories load hone ke baad items load karo\r\n// // useEffect(() => {\r\n// //   if (categories.length > 0) {\r\n// //     fetchItems();\r\n// //   }\r\n// // }, [categories]);\r\n\r\n// // // 3. Resize listener\r\n// // useEffect(() => {\r\n// //   const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n// //   window.addEventListener(\"resize\", handleResize);\r\n// //   return () => window.removeEventListener(\"resize\", handleResize);\r\n// // }, []);\r\n\r\n\r\n// //   const fetchItems = async () => {\r\n// //     try {\r\n// //       setLoading(true);\r\n// //       const res = await axios.get(API_URL);\r\n// //       // if (res.data && res.data.success) setItems(res.data.data || []);\r\n// //       if (res.data && res.data.success) {\r\n// //   const raw = res.data.data;\r\n\r\n// //   // Agar categories abhi load nahi hui = raw items set\r\n// //   if (!categories.length) {\r\n// //     setItems(raw);\r\n// //     return;\r\n// //   }\r\n\r\n// //   // Mapping to category + subcategory object\r\n// //   const enriched = raw.map((item) => {\r\n// //     const cat = categories.find(\r\n// //       (c) =>\r\n// //         c._id === item.category ||\r\n// //         c._id === item.category?._id\r\n// //     );\r\n\r\n// //     const sub = cat?.subcategories?.find(\r\n// //       (s) =>\r\n// //         s._id === item.subcategory ||\r\n// //         s._id === item.subcategory?._id\r\n// //     );\r\n\r\n// //     return {\r\n// //       ...item,\r\n// //       category: cat\r\n// //         ? { _id: cat._id, name: cat.name }\r\n// //         : item.category,\r\n\r\n// //       subcategory: sub\r\n// //         ? { _id: sub._id, name: sub.name }\r\n// //         : item.subcategory,\r\n// //     };\r\n// //   });\r\n\r\n// //   setItems(enriched);\r\n// // }\r\n\r\n// //     } catch (err) {\r\n// //       console.error(\"Fetch items error\", err);\r\n// //       alert(\"Could not fetch items\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   const fetchCategories = async () => {\r\n// //     try {\r\n// //       const res = await axios.get(CATEGORY_URL);\r\n// //       if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n// //     } catch (err) {\r\n// //       console.error(\"Fetch categories error\", err);\r\n// //       alert(\"Could not fetch categories\");\r\n// //     }\r\n// //   };\r\n\r\n// //   useEffect(() => {\r\n// //     if (!form.category) {\r\n// //       setSubcategories([]);\r\n// //       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n// //       return;\r\n// //     }\r\n\r\n// //     const cat = categories.find((c) => c._id === form.category);\r\n// //     const subs = (cat && cat.subcategories) || [];\r\n// //     setSubcategories(subs);\r\n\r\n// //     const exists = subs.some((s) => s._id === form.subcategory);\r\n// //     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n// //   }, [form.category, categories]);\r\n\r\n// //   const handleCreateCategory = async () => {\r\n// //     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n// //     try {\r\n// //       const fd = new FormData();\r\n// //       fd.append(\"name\", newCategoryName.trim());\r\n// //       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n// //       const res = await axios.post(CATEGORY_URL, fd);\r\n// //       if (res.data && res.data.success) {\r\n// //         alert(\"Category created\");\r\n// //         setNewCategoryName(\"\");\r\n// //         setNewCategoryImage(null);\r\n// //         setNewCategoryPreview(null);\r\n// //         setAddingCategory(false);\r\n// //         fetchCategories();\r\n// //       } else {\r\n// //         alert(\"Category creation failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Create category error\", err);\r\n// //       alert(\"Category creation failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleCreateSub = async () => {\r\n// //     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n// //     if (!form.category) return alert(\"Select category first\");\r\n\r\n// //     try {\r\n// //       const fd = new FormData();\r\n// //       fd.append(\"name\", newSubName.trim());\r\n// //       if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n// //       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n// //       if (res.data && res.data.success) {\r\n// //         alert(\"Subcategory created\");\r\n// //         setNewSubName(\"\");\r\n// //         setNewSubImage(null);\r\n// //         setNewSubPreview(null);\r\n// //         setAddingSub(false);\r\n// //         fetchCategories();\r\n// //       } else {\r\n// //         alert(\"Subcategory creation failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Create sub error\", err);\r\n// //       alert(\"Subcategory creation failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleChange = (e) => {\r\n// //     const { name, value, files } = e.target;\r\n// //     if (files && files.length) {\r\n// //       setForm((p) => ({ ...p, file: files[0] }));\r\n// //     } else {\r\n// //       setForm((p) => ({ ...p, [name]: value }));\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleSubmit = async (e) => {\r\n// //     e.preventDefault();\r\n// //     setLoading(true);\r\n\r\n// //     try {\r\n// //       if (!form.name || !form.category || !form.basePrice) {\r\n// //         alert(\"Name, category & base price are required\");\r\n// //         setLoading(false);\r\n// //         return;\r\n// //       }\r\n\r\n// //       const fd = new FormData();\r\n// //       Object.keys(form).forEach((k) => {\r\n// //         const val = form[k];\r\n// //         if (val !== undefined && val !== null) {\r\n// //           fd.append(k, val);\r\n// //         }\r\n// //       });\r\n\r\n// //       let res;\r\n// //       if (isCopyMode) {\r\n// //         res = await axios.post(API_URL, fd);\r\n// //         alert(\"Copied as new item\");\r\n// //       } else if (editId) {\r\n// //         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n// //         alert(\"Updated\");\r\n// //       } else {\r\n// //         res = await axios.post(API_URL, fd);\r\n// //         alert(\"Added\");\r\n// //       }\r\n\r\n// //       await fetchItems();\r\n// //       await fetchCategories();\r\n\r\n// //       setForm({\r\n// //         name: \"\",\r\n// //         category: \"\",\r\n// //         subcategory: \"\",\r\n// //         description: \"\",\r\n// //         basePrice: \"\",\r\n// //         difference: \"\",\r\n// //         validTill: \"\",\r\n// //         file: null,\r\n// //       });\r\n// //       setEditId(null);\r\n// //       setIsCopyMode(false);\r\n// //       setShowModal(false);\r\n// //       setShowForm(false);\r\n// //     } catch (err) {\r\n// //       console.error(\"Save error\", err);\r\n// //       alert(\"Save failed\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleEdit = (item) => {\r\n// //     setForm({\r\n// //       name: item.name || \"\",\r\n// //       category: item.category?._id?.toString() || \"\",\r\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\r\n// //       description: item.description || \"\",\r\n// //       basePrice: item.basePrice ?? \"\",\r\n// //       difference: item.difference ?? \"\",\r\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n// //       file: null,\r\n// //     });\r\n\r\n// //     const cat = categories.find((c) => c._id === item.category?._id);\r\n// //     setSubcategories(cat?.subcategories || []);\r\n\r\n// //     setEditId(item._id);\r\n// //     setIsCopyMode(false);\r\n// //     setShowModal(true);\r\n// //     setActiveMenu(null);\r\n// //   };\r\n\r\n// //   const handleCopyToEdit = (item) => {\r\n// //     setForm({\r\n// //       name: item.name || \"\",\r\n// //       category: item.category?._id?.toString() || \"\",\r\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\r\n// //       description: item.description || \"\",\r\n// //       basePrice: item.basePrice ?? \"\",\r\n// //       difference: item.difference ?? \"\",\r\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n// //       file: null,\r\n// //     });\r\n\r\n// //     const cat = categories.find((c) => c._id === item.category?._id);\r\n// //     setSubcategories(cat?.subcategories || []);\r\n\r\n// //     setEditId(null);\r\n// //     setIsCopyMode(true);\r\n// //     setShowModal(true);\r\n// //     setActiveMenu(null);\r\n// //   };\r\n\r\n// //   const handleDelete = async (id) => {\r\n// //     if (!window.confirm(\"Delete item?\")) return;\r\n// //     try {\r\n// //       await axios.delete(`${API_URL}/${id}`);\r\n// //       setItems((prev) => prev.filter((x) => x._id !== id));\r\n// //       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n// //       setActiveMenu(null);\r\n// //     } catch (err) {\r\n// //       console.error(\"Delete error\", err);\r\n// //       alert(\"Delete failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleStatusToggle = async (item) => {\r\n// //     try {\r\n// //       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n// //       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n// //       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n// //     } catch (err) {\r\n// //       console.error(\"Status toggle error\", err);\r\n// //       alert(\"Status update failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleBulkDelete = async () => {\r\n// //     if (!selectedItems.length) return alert(\"No items selected\");\r\n// //     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n// //     try {\r\n// //       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n// //       setSelectedItems([]);\r\n// //       fetchItems();\r\n// //       setBulkMode(false);\r\n// //     } catch (err) {\r\n// //       console.error(\"Bulk delete error\", err);\r\n// //       alert(\"Bulk delete failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const updateLocalItemField = (id, key, value) => {\r\n// //     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n// //   };\r\n\r\n// //   const handleBulkSave = async () => {\r\n// //     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n// //     const updates = items\r\n// //       .filter((x) => selectedItems.includes(x._id))\r\n// //       .map((x) => ({\r\n// //         id: x._id,\r\n// //         name: x.name,\r\n// //         basePrice: x.basePrice,\r\n// //         difference: x.difference,\r\n// //         validTill: x.validTill,\r\n// //       }));\r\n\r\n// //     try {\r\n// //       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n// //       setBulkMode(false);\r\n// //       setSelectedItems([]);\r\n// //       fetchItems();\r\n// //     } catch (err) {\r\n// //       console.error(\"Bulk save error\", err);\r\n// //       alert(\"Bulk save failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleCsvSelect = (e) => {\r\n// //     setCsvFile(e.target.files[0]);\r\n// //   };\r\n\r\n// //   const handleImportCsv = async () => {\r\n// //     if (!csvFile) return alert(\"Select CSV file\");\r\n// //     try {\r\n// //       const fd = new FormData();\r\n// //       fd.append(\"file\", csvFile);\r\n// //       const res = await axios.post(`${API_URL}/import`, fd);\r\n// //       if (res.data && res.data.success) {\r\n// //         alert(`Imported ${res.data.inserted || 0} items`);\r\n// //         setCsvFile(null);\r\n// //         if (csvInputRef.current) csvInputRef.current.value = null;\r\n// //         fetchItems();\r\n// //       } else {\r\n// //         alert(\"CSV import failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"CSV import error\", err);\r\n// //       alert(\"CSV import failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   // const handleExportCsv = async () => {\r\n// //   //   try {\r\n// //   //     const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n// //   //     const url = window.URL.createObjectURL(new Blob([res.data]));\r\n// //   //     const a = document.createElement(\"a\");\r\n// //   //     a.href = url;\r\n// //   //     a.download = \"prices.csv\";\r\n// //   //     a.click();\r\n// //   //     URL.revokeObjectURL(url);\r\n// //   //   } catch (err) {\r\n// //   //     console.error(\"CSV export error\", err);\r\n// //   //     alert(\"CSV export failed\");\r\n// //   //   }\r\n// //   // };\r\n// // const handleExportCsv = () => {\r\n// //   if (!items.length) return alert(\"No items to export\");\r\n\r\n// //   const header = [\r\n// //     \"id\",\r\n// //     \"name\",\r\n// //     \"categoryName\",\r\n// //     \"subcategoryName\",\r\n// //     \"basePrice\",\r\n// //     \"difference\",\r\n// //     \"finalPrice\",\r\n// //     \"status\",\r\n// //     \"validTill\",\r\n// //     \"description\",\r\n// //     \"imageUrl\",\r\n// //   ];\r\n\r\n// //   const rows = items.map((p) => [\r\n// //     p._id,\r\n// //     p.name || \"\",\r\n// //     p.category?.name || \"\",\r\n// //     p.subcategory?.name || \"\",\r\n// //     p.basePrice ?? \"\",\r\n// //     p.difference ?? \"\",\r\n// //     (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n// //     p.status || \"\",\r\n// //     p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n// //     p.description || \"\",\r\n// //     p.image || \"\",\r\n// //   ]);\r\n\r\n// //   const csvArray = [header, ...rows];\r\n// //   const csvContent =\r\n// //     \"data:text/csv;charset=utf-8,\" +\r\n// //     csvArray\r\n// //       .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n// //       .join(\"\\n\");\r\n\r\n// //   const encodedUri = encodeURI(csvContent);\r\n// //   const link = document.createElement(\"a\");\r\n// //   link.href = encodedUri;\r\n// //   link.download = `all_prices_${Date.now()}.csv`;\r\n// //   link.click();\r\n// // };\r\n\r\n// //   const handleExportSelectedCsv = () => {\r\n// //     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n// //     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n// //     const header = [\r\n// //       \"id\",\r\n// //       \"name\",\r\n// //       \"categoryName\",\r\n// //       \"subcategoryName\",\r\n// //       \"basePrice\",\r\n// //       \"difference\",\r\n// //       \"finalPrice\",\r\n// //       \"status\",\r\n// //       \"validTill\",\r\n// //       \"description\",\r\n// //       \"imageUrl\",\r\n// //     ];\r\n\r\n// //     const rows = selectedData.map((p) => [\r\n// //       p._id,\r\n// //       p.name || \"\",\r\n// //       p.category?.name || \"\",\r\n// //       p.subcategory?.name || \"\",\r\n// //       p.basePrice ?? \"\",\r\n// //       p.difference ?? \"\",\r\n// //       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n// //       p.status || \"\",\r\n// //       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n// //       p.description || \"\",\r\n// //       p.image || \"\",\r\n// //     ]);\r\n\r\n// //     const csvArray = [header, ...rows];\r\n// //     const csvContent =\r\n// //       \"data:text/csv;charset=utf-8,\" +\r\n// //       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n// //     const encodedUri = encodeURI(csvContent);\r\n// //     const link = document.createElement(\"a\");\r\n// //     link.href = encodedUri;\r\n// //     link.download = `selected_prices_${Date.now()}.csv`;\r\n// //     link.click();\r\n// //   };\r\n\r\n// //   // const filteredItems = items.filter((item) => {\r\n// //   //   const t = search.toLowerCase();\r\n// //   //   return (\r\n// //   //     (item.name || \"\").toString().toLowerCase().includes(t) ||\r\n// //   //     (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n// //   //     (item.subcategory?.name || \"\").toLowerCase().includes(t)\r\n// //   //   );\r\n// //   // });\r\n// //   const filteredItems = items.filter((item) => {\r\n// //   const t = search.toLowerCase();\r\n\r\n// //   const matchText =\r\n// //     (item.name || \"\").toLowerCase().includes(t) ||\r\n// //     (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n// //     (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n// //   const matchCategory =\r\n// //     !filterCategory || item.category?._id === filterCategory;\r\n\r\n// //   const matchSub =\r\n// //     !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n// //   return matchText && matchCategory && matchSub;\r\n// // });\r\n\r\n\r\n// //   const indexOfLast = currentPage * itemsPerPage;\r\n// //   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n// //   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n// //   return (\r\n// //     <div style={styles.container}>\r\n// //       {/* HEADER */}\r\n// //       <div style={styles.header}>\r\n// //         <h1 style={styles.title}>Product Management</h1>\r\n// //         {/* <p style={styles.subtitle}>Manage prices, categories, images, CSV & bulk actions.</p> */}\r\n// //       </div>\r\n\r\n// //       {/* SEARCH */}\r\n      \r\n// //      <div className=\"mobile-topbar\">\r\n// //   <input\r\n// //     type=\"text\"\r\n// //     placeholder=\"Search product, category or subcategory...\"\r\n// //     value={search}\r\n// //     onChange={(e) => {\r\n// //       setSearch(e.target.value);\r\n// //       setCurrentPage(1);\r\n// //     }}\r\n// //     style={styles.searchInput}\r\n// //   />\r\n\r\n// //   <button\r\n// //     style={styles.addButton}\r\n// //     onClick={() => {\r\n// //       setShowForm(!showForm);\r\n// //       setEditId(null);\r\n// //       setIsCopyMode(false);\r\n// //     }}\r\n// //   >\r\n// //     {showForm ? \"‚úñ\" : \"Add Product\"}\r\n// //   </button>\r\n// // </div>\r\n// // <div className=\"filter-bar\">\r\n// //   <select\r\n// //     value={filterCategory}\r\n// //     onChange={(e) => setFilterCategory(e.target.value)}\r\n// //     className=\"filter-select\"\r\n// //   >\r\n// //     <option value=\"\">Filter by Category</option>\r\n// //     {categories.map((c) => (\r\n// //       <option key={c._id} value={c._id}>{c.name}</option>\r\n// //     ))}\r\n// //   </select>\r\n\r\n// //   <select\r\n// //     value={filterSubcategory}\r\n// //     onChange={(e) => setFilterSubcategory(e.target.value)}\r\n// //     className=\"filter-select\"\r\n// //     disabled={!filterSubs.length}\r\n// //   >\r\n// //     <option value=\"\">Filter by Subcategory</option>\r\n// //     {filterSubs.map((s) => (\r\n// //       <option key={s._id} value={s._id}>{s.name}</option>\r\n// //     ))}\r\n// //   </select>\r\n\r\n  \r\n// // </div>\r\n\r\n\r\n// //       {/* BULK BAR */}\r\n// //       {selectedItems.length > 0 && (\r\n// //         // <div style={styles.bulkBar}>\r\n// //         <div className=\"bulk-bar\">\r\n\r\n// //           {/* <span style={styles.bulkText}>{selectedItems.length} selected</span> */}\r\n\r\n// //           {!bulkMode ? (\r\n// //             // <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\r\n// //             <div className=\"bulk-actions\">\r\n\r\n// //               <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n// //                 üóë Bulk Delete\r\n// //               </button>\r\n\r\n// //               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n// //                 ‚úè Bulk Edit\r\n// //               </button>\r\n\r\n// //               {/* <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n// //                 ‚§ì Export Selected\r\n// //               </button> */}\r\n// //             </div>\r\n// //           ) : (\r\n// //             <div style={styles.bulkPanel}>\r\n// //               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n// //               {items\r\n// //                 .filter((item) => selectedItems.includes(item._id))\r\n// //                 .map((item) => (\r\n// //                   <div key={item._id} style={styles.bulkItemBox}>\r\n// //                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n// //                     <div style={styles.formGrid}>\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Name</label>\r\n// //                         <input\r\n// //                           type=\"text\"\r\n// //                           value={item.name}\r\n// //                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n// //                           style={styles.input}\r\n// //                         />\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Base Price</label>\r\n// //                         <input\r\n// //                           type=\"number\"\r\n// //                           value={item.basePrice}\r\n// //                           onChange={(e) =>\r\n// //                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\r\n// //                           }\r\n// //                           style={styles.input}\r\n// //                         />\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Category</label>\r\n// //                         <select\r\n// //                           value={item.category?._id || \"\"}\r\n// //                           onChange={(e) => {\r\n// //                             const newCat = e.target.value;\r\n// //                             updateLocalItemField(item._id, \"category\", { _id: newCat });\r\n// //                             const catObj = categories.find((c) => c._id === newCat);\r\n// //                             const firstSub = catObj?.subcategories?.[0]?._id || \"\";\r\n// //                             updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\r\n// //                           }}\r\n// //                           style={styles.select}\r\n// //                         >\r\n// //                           <option value=\"\">Select Category</option>\r\n// //                           {categories.map((c) => (\r\n// //                             <option key={c._id} value={c._id}>\r\n// //                               {c.name}\r\n// //                             </option>\r\n// //                           ))}\r\n// //                         </select>\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Subcategory</label>\r\n// //                         <select\r\n// //                           value={item.subcategory?._id || \"\"}\r\n// //                           onChange={(e) =>\r\n// //                             updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\r\n// //                           }\r\n// //                           style={styles.select}\r\n// //                         >\r\n// //                           <option value=\"\">Select Subcategory</option>\r\n// //                           {categories\r\n// //                             .find((c) => c._id === item.category?._id)\r\n// //                             ?.subcategories?.map((s) => (\r\n// //                               <option key={s._id} value={s._id}>\r\n// //                                 {s.name}\r\n// //                               </option>\r\n// //                             ))}\r\n// //                         </select>\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Difference</label>\r\n// //                         <input\r\n// //                           type=\"number\"\r\n// //                           value={item.difference || 0}\r\n// //                           onChange={(e) =>\r\n// //                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\r\n// //                           }\r\n// //                           style={styles.input}\r\n// //                         />\r\n// //                       </div>\r\n// //                     </div>\r\n// //                   </div>\r\n// //                 ))}\r\n\r\n// //               <div style={{ display: \"flex\", gap: 0, marginTop: 12 }}>\r\n// //                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n// //                   ‚úî Save All\r\n// //                 </button>\r\n// //                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n// //                   ‚úñ Cancel\r\n// //                 </button>\r\n// //               </div>\r\n// //             </div>\r\n// //           )}\r\n// //         </div>\r\n// //       )}\r\n\r\n// //       {/* FORM */}\r\n// //       {showForm && (\r\n// //         <div style={styles.formCard}>\r\n// //           <h2 style={styles.formTitle}>‚ûï Add \r\n            \r\n// //           </h2>\r\n\r\n// //           <form onSubmit={handleSubmit}>\r\n// //             <div style={styles.formGrid}>\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Product Name *</label>\r\n// //                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Category *</label>\r\n// //                 <div style={styles.categoryRow}>\r\n// //                   <select\r\n// //                     required\r\n// //                     name=\"category\"\r\n// //                     value={form.category}\r\n// //                     onChange={(e) => {\r\n// //                       handleChange(e);\r\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n// //                     }}\r\n// //                     style={styles.select}\r\n// //                   >\r\n// //                     <option value=\"\">Select Category</option>\r\n// //                     {categories.map((c) => (\r\n// //                       <option value={c._id} key={c._id}>\r\n// //                         {c.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n\r\n// //                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\r\n// //                     {addingCategory ? \"Close\" : \"Add\"}\r\n// //                   </button>\r\n// //                 </div>\r\n// //               </div>\r\n\r\n// //               {addingCategory && (\r\n// //                 <div style={styles.addCategoryBox}>\r\n// //                   <label style={styles.label}>Add New Category</label>\r\n// //                   <div style={styles.categoryRow}>\r\n// //                     <input\r\n// //                       value={newCategoryName}\r\n// //                       onChange={(e) => setNewCategoryName(e.target.value)}\r\n// //                       placeholder=\"Category name\"\r\n// //                       style={styles.input}\r\n// //                     />\r\n// //                     <input\r\n// //                       type=\"file\"\r\n// //                       accept=\"image/*\"\r\n// //                       onChange={(e) => {\r\n// //                         setNewCategoryImage(e.target.files[0]);\r\n// //                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n// //                       }}\r\n// //                       style={styles.fileInput}\r\n// //                     />\r\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\r\n// //                       Create\r\n// //                     </button>\r\n// //                   </div>\r\n// //                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\r\n// //                 </div>\r\n// //               )}\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Subcategory</label>\r\n// //                 <div style={styles.categoryRow}>\r\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n// //                     <option value=\"\">Select Subcategory</option>\r\n// //                     {subcategories.map((s) => (\r\n// //                       <option value={s._id} key={s._id}>\r\n// //                         {s.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n\r\n// //                   {form.category && (\r\n// //                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\r\n// //                       {addingSub ? \"Close\" : \"Add\"}\r\n// //                     </button>\r\n// //                   )}\r\n// //                 </div>\r\n// //               </div>\r\n\r\n// //               {addingSub && (\r\n// //                 <div style={styles.addCategoryBox}>\r\n// //                   <label style={styles.label}>Add New Subcategory</label>\r\n// //                   <div style={styles.categoryRow}>\r\n// //                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\r\n// //                     <input\r\n// //                       type=\"file\"\r\n// //                       accept=\"image/*\"\r\n// //                       onChange={(e) => {\r\n// //                         setNewSubImage(e.target.files[0]);\r\n// //                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n// //                       }}\r\n// //                       style={styles.fileInput}\r\n// //                     />\r\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\r\n// //                       Create\r\n// //                     </button>\r\n// //                   </div>\r\n// //                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\r\n// //                 </div>\r\n// //               )}\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Base Price *</label>\r\n// //                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Difference</label>\r\n// //                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Valid Till</label>\r\n// //                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Image</label>\r\n// //                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n// //               </div>\r\n// //             </div>\r\n\r\n// //             <div style={styles.formGroup}>\r\n// //               <label style={styles.label}>Description</label>\r\n// //               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n// //             </div>\r\n\r\n// //             <div style={styles.formActions}>\r\n// //               <button style={styles.btnPrimary} disabled={loading}>\r\n// //                 {loading ? \"Saving...\" : \"Add Product\"}\r\n// //               </button>\r\n// //             </div>\r\n// //           </form>\r\n// //         </div>\r\n// //       )}\r\n\r\n// //       {/* CSV CONTROLS */}\r\n// //       {/* <div style={styles.csvControls}>\r\n// //         <div>\r\n// //           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\r\n// //           <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n// //             Import CSV\r\n// //           </button>\r\n// //         </div>\r\n\r\n// //         <div style={{ display: \"flex\", gap: 8 }}>\r\n// //           <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n// //             Export All CSV\r\n// //           </button>\r\n\r\n// //           <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n// //             Export Selected CSV\r\n// //           </button>\r\n// //         </div>\r\n// //       </div> */}\r\n// // <div className=\"csv-topbar\">\r\n// //   <div className=\"csv-row\">\r\n// //     <input\r\n// //       type=\"file\"\r\n// //       accept=\".csv\"\r\n// //       ref={csvInputRef}\r\n// //       onChange={handleCsvSelect}\r\n// //       style={styles.fileInput}\r\n// //     />\r\n\r\n// //     <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n// //       Import\r\n// //     </button>\r\n\r\n// //     <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n// //       Export All\r\n// //     </button>\r\n\r\n// //     <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n// //        Selected \r\n// //     </button>\r\n// //   </div>\r\n// // </div>\r\n\r\n// //       {/* TABLE */}\r\n// //       <div style={styles.tableCard}>\r\n// //         <div style={styles.tableHeader}>\r\n// //           <h2 style={styles.tableTitle}> Items</h2>\r\n// //           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n// //         </div>\r\n\r\n// //         <div style={styles.tableWrapper}>\r\n// //           <table style={styles.table}>\r\n// //             <thead>\r\n// //               <tr>\r\n// //                 <th style={styles.th}>\r\n// //                   <input\r\n// //                     type=\"checkbox\"\r\n// //                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n// //                     onChange={() => {\r\n// //                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n// //                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n// //                     }}\r\n// //                   />\r\n// //                 </th>\r\n// //                 <th style={styles.th}>Sr</th>\r\n// //                 <th style={styles.th}>Image</th>\r\n// //                 <th style={styles.th}>Name</th>\r\n// //                 <th style={styles.th}>Category</th>\r\n// //                 <th style={styles.th}>Subcategory</th>\r\n// //                 <th style={styles.th}>Base</th>\r\n// //                 <th style={styles.th}>Diff</th>\r\n// //                 <th style={styles.th}>Final</th>\r\n// //                 <th style={styles.th}>Status</th>\r\n// //                 <th style={styles.th}>Valid Till</th>\r\n// //                 <th style={styles.th}>Actions</th>\r\n// //               </tr>\r\n// //             </thead>\r\n\r\n// //             <tbody>\r\n// //               {currentItems.map((item, i) => (\r\n// //                 <tr key={item._id} style={styles.tr}>\r\n// //                   <td style={styles.td}>\r\n// //                     <input\r\n// //                       type=\"checkbox\"\r\n// //                       checked={selectedItems.includes(item._id)}\r\n// //                       onChange={() =>\r\n// //                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n// //                       }\r\n// //                     />\r\n// //                   </td>\r\n\r\n// //                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n// //                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n// //                   <td style={styles.td}>{item.name}</td>\r\n// //                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n// //                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n// //                   <td style={styles.td}>‚Çπ{item.basePrice}</td>\r\n// //                   <td style={styles.td}>{item.difference || 0}</td>\r\n// //                   <td style={styles.td}>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n                  \r\n\r\n                  \r\n\r\n// //                   <td style={styles.td}>\r\n// //                     <button\r\n// //                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n// //                       onClick={() => handleStatusToggle(item)}\r\n// //                     >\r\n// //                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n// //                     </button>\r\n// //                   </td>\r\n\r\n// //                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n// //                   <td style={styles.td}>\r\n// //                     <div style={{ position: \"relative\" }}>\r\n// //                       <button\r\n// //                         style={styles.menuButton}\r\n// //                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n// //                       >\r\n// //                         ‚ãÆ\r\n// //                       </button>\r\n\r\n// //                       {activeMenu === item._id && (\r\n// //                         <div style={styles.dropdown}>\r\n// //                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n// //                             ‚úè Edit\r\n// //                           </button>\r\n// //                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\r\n// //                             üìÑ Copy\r\n// //                           </button>\r\n// //                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n// //                             üóë Delete\r\n// //                           </button>\r\n// //                         </div>\r\n// //                       )}\r\n// //                     </div>\r\n// //                   </td>\r\n// //                 </tr>\r\n// //               ))}\r\n// //             </tbody>\r\n// //           </table>\r\n// //         </div>\r\n\r\n// //         {/* PAGINATION */}\r\n// //         <div style={styles.pagination}>\r\n// //           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n// //             Previous\r\n// //           </button>\r\n\r\n// //           {Array.from({ length: totalPages }, (_, i) => (\r\n// //             <button\r\n// //               key={i}\r\n// //               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n// //               onClick={() => setCurrentPage(i + 1)}\r\n// //             >\r\n// //               {i + 1}\r\n// //             </button>\r\n// //           ))}\r\n\r\n// //           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n// //             Next\r\n// //           </button>\r\n// //         </div>\r\n// //       </div>\r\n\r\n// //       {/* MODAL FOR EDIT/COPY */}\r\n// //       {showModal && (\r\n// //         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n// //           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n// //             <h2 style={styles.modalTitle}>{isCopyMode ? \" Copy Product\" : \" Edit Product\"}</h2>\r\n\r\n// //             <form onSubmit={handleSubmit}>\r\n// //               <div style={styles.formGrid}>\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Product Name *</label>\r\n// //                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Category *</label>\r\n// //                   <select\r\n// //                     required\r\n// //                     name=\"category\"\r\n// //                     value={form.category}\r\n// //                     onChange={(e) => {\r\n// //                       handleChange(e);\r\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n// //                     }}\r\n// //                     style={styles.select}\r\n// //                   >\r\n// //                     <option value=\"\">Select Category</option>\r\n// //                     {categories.map((c) => (\r\n// //                       <option value={c._id} key={c._id}>\r\n// //                         {c.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Subcategory</label>\r\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n// //                     <option value=\"\">Select Subcategory</option>\r\n// //                     {subcategories.map((s) => (\r\n// //                       <option value={s._id} key={s._id}>\r\n// //                         {s.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Base Price *</label>\r\n// //                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Difference</label>\r\n// //                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Valid Till</label>\r\n// //                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Image</label>\r\n// //                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n// //                 </div>\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Description</label>\r\n// //                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n// //               </div>\r\n\r\n// //               <div style={styles.formActions}>\r\n// //                 <button style={styles.btnPrimary} disabled={loading}>\r\n// //                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\r\n// //                 </button>\r\n\r\n// //                 <button\r\n// //                   type=\"button\"\r\n// //                   style={styles.btnCancel}\r\n// //                   onClick={() => {\r\n// //                     setShowModal(false);\r\n// //                     setEditId(null);\r\n// //                     setIsCopyMode(false);\r\n// //                     setForm({\r\n// //                       name: \"\",\r\n// //                       category: \"\",\r\n// //                       subcategory: \"\",\r\n// //                       description: \"\",\r\n// //                       basePrice: \"\",\r\n// //                       difference: \"\",\r\n// //                       validTill: \"\",\r\n// //                       file: null,\r\n// //                     });\r\n// //                   }}\r\n// //                 >\r\n// //                   Cancel\r\n// //                 </button>\r\n// //               </div>\r\n// //             </form>\r\n// //           </div>\r\n// //         </div>\r\n// //       )}\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // const styles = {\r\n// //   container: {\r\n\r\n// //   },\r\n// //   header: {\r\n  \r\n// //   },\r\n// //   title: {\r\n// //     fontSize: \"21px\",\r\n// //     fontWeight: \"700\",\r\n// //     color: \"#0d3b66\",\r\n// //     marginBottom: \"6px\",\r\n// //   },\r\n// //   subtitle: {\r\n// //    fontSize: \"16px\",\r\n// //   },\r\n// //   searchBar: {\r\n// //     maxWidth: \"320px\",\r\n// //     margin: \"0 auto 25px auto\",\r\n// //   },\r\n// //   searchInput: {\r\n// //     width: \"100%\",\r\n// //     padding: \"12px 15px\",\r\n// //     borderRadius: \"12px\",\r\n// //     border: \"1px solid #ced4da\",\r\n// //     background: \"#f9fbfc\",\r\n// //     fontSize: \"15px\",\r\n// //     outline: \"none\",\r\n// //     boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\r\n// //   },\r\n// //   addButtonWrapper: {\r\n// //     textAlign: \"left\",\r\n// //     marginBottom: \"25px\",\r\n// //   },\r\n// //   addButton: {\r\n// //     background: \"#007bff\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"12px\",\r\n// //     padding: \"12px 24px\",\r\n// //     fontSize: \"16px\",\r\n// //     fontWeight: \"600\",\r\n// //     cursor: \"pointer\",\r\n// //     transition: \"0.25s ease\",\r\n// //   },\r\n// //   bulkBar: {\r\n// //     background: \"#e9f2ff\",\r\n// //     border: \"1px solid #c4d9ff\",\r\n// //     borderRadius: \"14px\",\r\n// //     padding: \"15px 18px\",\r\n// //     marginBottom: \"25px\",\r\n// //     display: \"flex\",\r\n// //     justifyContent: \"space-between\",\r\n// //     alignItems: \"center\",\r\n// //     flexWrap: \"wrap\",\r\n// //     gap: \"14px\",\r\n// //     boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\r\n// //   },\r\n// //   bulkText: {\r\n// //     fontSize: \"15px\",\r\n// //     fontWeight: \"600\",\r\n// //     color: \"#0d3b66\",\r\n// //   },\r\n// //   bulkPanel: {\r\n// //     width: \"100%\",\r\n// //     background: \"#f7faff\",\r\n// //     border: \"1px solid #cfe2ff\",\r\n// //     padding: \"20px\",\r\n// //     borderRadius: \"14px\",\r\n// //     marginTop: \"10px\",\r\n// //     boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\r\n// //   },\r\n// //   bulkPanelTitle: {\r\n// //     textAlign: \"center\",\r\n// //     fontSize: \"18px\",\r\n// //     fontWeight: \"700\",\r\n// //     marginBottom: \"15px\",\r\n// //   },\r\n// //   bulkItemBox: {\r\n// //     background: \"#ffffff\",\r\n// //     border: \"1px solid #dbe5f5\",\r\n// //     padding: \"18px\",\r\n// //     borderRadius: \"12px\",\r\n// //     marginBottom: \"16px\",\r\n// //     boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\r\n// //   },\r\n// //   bulkItemTitle: {\r\n// //     fontSize: \"16px\",\r\n// //     fontWeight: \"600\",\r\n// //     marginBottom: \"12px\",\r\n// //     color: \"#0d3b66\",\r\n// //     borderLeft: \"4px solid #007bff\",\r\n// //     paddingLeft: \"10px\",\r\n// //   },\r\n// //   formCard: {\r\n// //     borderRadius: \"16px\",\r\n// //     padding: \"25px\",\r\n// //     marginBottom: \"28px\",\r\n// //     background: \"#ffffff\",\r\n// //     boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\r\n// //     border: \"1px solid #eef2f7\",\r\n// //   },\r\n// //   formTitle: {\r\n// //     fontSize: \"21px\",\r\n// //     fontWeight: \"700\",\r\n// //     color: \"#0d3b66\",\r\n// //     marginBottom: \"15px\",\r\n// //   },\r\n// //   formGrid: {\r\n// //     display: \"grid\",\r\n// //     gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\r\n// //     gap: \"18px\",\r\n// //   },\r\n// //   formGroup: {\r\n// //     display: \"flex\",\r\n// //     flexDirection: \"column\",\r\n// //     gap: \"6px\",\r\n// //   },\r\n// //   label: {\r\n// //     fontWeight: \"600\",\r\n// //     fontSize: \"14px\",\r\n// //     color: \"#233142\",\r\n// //   },\r\n// //   input: {\r\n// //     padding: \"10px\",\r\n// //     borderRadius: \"10px\",\r\n// //     border: \"1px solid #cfd6e0\",\r\n// //     background: \"#f8fafc\",\r\n// //     transition: \"0.2s ease\",\r\n// //     fontSize: \"14px\",\r\n// //   },\r\n// //   select: {\r\n// //     padding: \"10px\",\r\n// //     borderRadius: \"10px\",\r\n// //     border: \"1px solid #cfd6e0\",\r\n// //     background: \"#f8fafc\",\r\n// //     transition: \"0.2s ease\",\r\n// //     fontSize: \"14px\",\r\n// //   },\r\n// //   textarea: {\r\n// //     padding: \"10px\",\r\n// //     borderRadius: \"10px\",\r\n// //     border: \"1px solid #cfd6e0\",\r\n// //     background: \"#f8fafc\",\r\n// //     transition: \"0.2s ease\",\r\n// //     resize: \"none\",\r\n// //     minHeight: \"80px\",\r\n// //     fontSize: \"14px\",\r\n// //   },\r\n// //   fileInput: {\r\n// //     padding: \"8px\",\r\n// //     fontSize: \"13px\",\r\n// //   },\r\n// //   categoryRow: {\r\n// //     display: \"flex\",\r\n// //     gap: \"10px\",\r\n// //     alignItems: \"center\",\r\n// //   },\r\n// //   addCategoryBox: {\r\n// //     gridColumn: \"1 / -1\",\r\n// //     background: \"#f1f7ff\",\r\n// //     border: \"1px solid #cfe1ff\",\r\n// //     padding: \"16px\",\r\n// //     borderRadius: \"12px\",\r\n// //   },\r\n// //   preview: {\r\n// //     width: \"110px\",\r\n// //     height: \"110px\",\r\n// //     borderRadius: \"12px\",\r\n// //     marginTop: \"10px\",\r\n// //     objectFit: \"cover\",\r\n// //     border: \"1px solid #b7c9e2\",\r\n// //   },\r\n// //   formActions: {\r\n// //     marginTop: \"15px\",\r\n// //     display: \"flex\",\r\n// //     gap: \"12px\",\r\n// //     flexWrap: \"wrap\",\r\n// //   },\r\n// //   btnPrimary: {\r\n// //     background: \"#007bff\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"10px\",\r\n// //     padding: \"9px 16px\",\r\n\r\n// //     cursor: \"pointer\",\r\n// //     transition: \"0.25s ease\",\r\n// //   },\r\n// //   btnSmall: {\r\n// //     background: \"#43a047\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"10px\",\r\n// //     padding: \"9px 16px\",\r\n// //     fontWeight: \"600\",\r\n// //     cursor: \"pointer\",\r\n// //     transition: \"0.25s ease\",\r\n// //   },\r\n// //   btnDelete: {\r\n// //     background: \"#e63946\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"10px\",\r\n// //     padding: \"9px 16px\",\r\n// //     fontWeight: \"600\",\r\n// //     cursor: \"pointer\",\r\n// //     transition: \"0.25s ease\",\r\n// //   },\r\n// //   btnCancel: {\r\n// //     background: \"#adb5bd\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"10px\",\r\n// //     padding: \"9px 16px\",\r\n// //     fontWeight: \"600\",\r\n// //     cursor: \"pointer\",\r\n// //     transition: \"0.25s ease\",\r\n// //   },\r\n// //   csvControls: {\r\n// //     borderRadius: \"12px\",\r\n// //     padding: \"16px\",\r\n// //     background: \"#f7faff\",\r\n// //     border: \"1px solid #d8e6ff\",\r\n// //     display: \"flex\",\r\n// //     alignItems: \"center\",\r\n// //     justifyContent: \"space-between\",\r\n// //     marginBottom: \"28px\",\r\n// //     flexWrap: \"wrap\",\r\n// //     gap: \"12px\",\r\n// //   },\r\n// //   tableCard: {\r\n\r\n\r\n\r\n\r\n// //   },\r\n// //   tableHeader: {\r\n// //     display: \"flex\",\r\n// //     justifyContent: \"space-between\",\r\n// //     marginBottom: \"15px\",\r\n// //   },\r\n// //   tableTitle: {\r\n// //     fontSize: \"21px\",\r\n// //     fontWeight: \"700\",\r\n// //     color: \"#0d3b66\",\r\n// //   },\r\n// //   totalCount: {\r\n// //     fontSize: \"15px\",\r\n// //     color: \"#6c757d\",\r\n// //     fontWeight: \"600\",\r\n// //   },\r\n// //   tableWrapper: {\r\n// //     overflowX: \"auto\",\r\n// //   },\r\n// //   table: {\r\n// //     width: \"100%\",\r\n// //     borderCollapse: \"collapse\",\r\n// //     fontSize: \"14px\",\r\n// //   },\r\n// //   th: {\r\n// //     background: \"#e9f2ff\",\r\n// //     padding: \"12px\",\r\n// //     fontWeight: \"700\",\r\n// //     color: \"#0d3b66\",\r\n// //     textAlign: \"left\",\r\n// //     whiteSpace: \"nowrap\",\r\n// //   },\r\n// //   tr: {\r\n// //     borderBottom: \"1px solid #edf2f7\",\r\n// //   },\r\n// //   td: {\r\n// //     padding: \"12px 10px\",\r\n// //     whiteSpace: \"nowrap\",\r\n// //   },\r\n// //   tableImg: {\r\n// //     width: \"55px\",\r\n// //     height: \"55px\",\r\n// //     borderRadius: \"8px\",\r\n// //     objectFit: \"cover\",\r\n// //     border: \"1px solid #cfd9e5\",\r\n// //   },\r\n// //   statusActive: {\r\n// //     background: \"#93d8ba\",\r\n// //     padding: \"7px 12px\",\r\n// //     borderRadius: \"8px\",\r\n// //     color: \"black\",\r\n// //     fontWeight: \"600\",\r\n// //     border: \"none\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   statusInactive: {\r\n// //     background: \"#d9b1b1\",\r\n// //     padding: \"7px 12px\",\r\n// //     borderRadius: \"8px\",\r\n// //     color: \"black\",\r\n// //     fontWeight: \"600\",\r\n// //     border: \"none\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   menuButton: {\r\n// //     background: \"#f0f0f0\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"6px\",\r\n// //     padding: \"6px 12px\",\r\n// //     fontSize: \"20px\",\r\n// //     fontWeight: \"bold\",\r\n// //     cursor: \"pointer\",\r\n// //     transition: \"0.2s ease\",\r\n// //   },\r\n// //   dropdown: {\r\n// //     position: \"absolute\",\r\n// //     right: \"0\",\r\n// //     top: \"35px\",\r\n// //     background: \"#fff\",\r\n// //     border: \"1px solid #ddd\",\r\n// //     borderRadius: \"8px\",\r\n// //     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\r\n// //     zIndex: \"100\",\r\n// //     minWidth: \"140px\",\r\n// //   },\r\n// //   dropdownItem: {\r\n// //     display: \"block\",\r\n// //     width: \"100%\",\r\n// //     padding: \"10px 15px\",\r\n// //     background: \"transparent\",\r\n// //     border: \"none\",\r\n// //     textAlign: \"left\",\r\n// //     cursor: \"pointer\",\r\n// //     fontSize: \"14px\",\r\n// //     fontWeight: \"500\",\r\n// //     transition: \"0.2s ease\",\r\n// //     borderBottom: \"1px solid #f0f0f0\",\r\n// //   },\r\n// //   dropdownItemDelete: {\r\n// //     display: \"block\",\r\n// //     width: \"100%\",\r\n// //     padding: \"10px 15px\",\r\n// //     background: \"transparent\",\r\n// //     border: \"none\",\r\n// //     textAlign: \"left\",\r\n// //     cursor: \"pointer\",\r\n// //     fontSize: \"14px\",\r\n// //     fontWeight: \"500\",\r\n// //     color: \"#e63946\",\r\n// //     transition: \"0.2s ease\",\r\n// //   },\r\n// //   pagination: {\r\n// //     marginTop: \"18px\",\r\n// //     display: \"flex\",\r\n// //     justifyContent: \"center\",\r\n// //     gap: \"10px\",\r\n// //     flexWrap: \"wrap\",\r\n// //   },\r\n// //   paginationBtn: {\r\n// //     padding: \"9px 13px\",\r\n// //     borderRadius: \"8px\",\r\n// //     background: \"#fff\",\r\n// //     border: \"1px solid #ddd\",\r\n// //     cursor: \"pointer\",\r\n// //     fontSize: \"14px\",\r\n// //   },\r\n// //   paginationBtnActive: {\r\n// //     padding: \"9px 13px\",\r\n// //     borderRadius: \"8px\",\r\n// //     background: \"#007bff\",\r\n// //     color: \"white\",\r\n// //     border: \"1px solid #0062cc\",\r\n// //     cursor: \"pointer\",\r\n// //     fontSize: \"14px\",\r\n// //   },\r\n// //   modalOverlay: {\r\n// //     position: \"fixed\",\r\n// //     top: 0,\r\n// //     left: 0,\r\n// //     right: 0,\r\n// //     bottom: 0,\r\n// //     background: \"rgba(0, 0, 0, 0.5)\",\r\n// //     display: \"flex\",\r\n// //     justifyContent: \"center\",\r\n// //     alignItems: \"center\",\r\n// //     zIndex: \"1000\",\r\n// //     padding: \"20px\",\r\n// //   },\r\n// //   modal: {\r\n// //     background: \"#fff\",\r\n// //     borderRadius: \"16px\",\r\n// //     padding: \"30px\",\r\n// //     maxWidth: \"700px\",\r\n// //     width: \"100%\",\r\n// //     maxHeight: \"90vh\",\r\n// //     overflowY: \"auto\",\r\n// //     boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n// //   },\r\n// //   modalTitle: {\r\n// //     fontSize: \"22px\",\r\n// //     fontWeight: \"700\",\r\n// //     color: \"#0d3b66\",\r\n// //     marginBottom: \"20px\",\r\n// //     textAlign: \"center\",\r\n// //   },\r\n  \r\n  \r\n// // }\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\"\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // FORM state\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\", // This will be sent as todayDiff to backend\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [isCopyMode, setIsCopyMode] = useState(false);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   const [addingSub, setAddingSub] = useState(false);\r\n//   const [newSubName, setNewSubName] = useState(\"\");\r\n//   const [newSubImage, setNewSubImage] = useState(null);\r\n//   const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const csvInputRef = useRef();\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n//   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n//   useEffect(() => {\r\n//     if (!filterCategory) {\r\n//       setFilterSubs([]);\r\n//       setFilterSubcategory(\"\");\r\n//       return;\r\n//     }\r\n\r\n//     const cat = categories.find(c => c._id === filterCategory);\r\n//     setFilterSubs(cat?.subcategories || []);\r\n//     setFilterSubcategory(\"\");\r\n//   }, [filterCategory, categories]);\r\n\r\n//   useEffect(() => {\r\n//     fetchCategories();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (categories.length > 0) {\r\n//       fetchItems();\r\n//     }\r\n//   }, [categories]);\r\n\r\n//   useEffect(() => {\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data && res.data.success) {\r\n//         const raw = res.data.data;\r\n\r\n//         if (!categories.length) {\r\n//           setItems(raw);\r\n//           return;\r\n//         }\r\n\r\n//         // const enriched = raw.map((item) => {\r\n//         //   const cat = categories.find(\r\n//         //     (c) => c._id === item.category || c._id === item.category?._id\r\n//         //   );\r\n\r\n//         //   const sub = cat?.subcategories?.find(\r\n//         //     (s) => s._id === item.subcategory || s._id === item.subcategory?._id\r\n//         //   );\r\n\r\n//         //   return {\r\n//         //     ...item,\r\n//         //     category: cat ? { _id: cat._id, name: cat.name } : item.category,\r\n//         //     subcategory: sub ? { _id: sub._id, name: sub.name } : item.subcategory,\r\n//         //   };\r\n//         // });\r\n// const enriched = raw.map((item) => {\r\n//   const cat = categories.find(\r\n//     (c) => c._id === item.category || c._id === item.category?._id\r\n//   );\r\n\r\n//   const sub = cat?.subcategories?.find(\r\n//     (s) => s._id === item.subcategory || s._id === item.subcategory?._id\r\n//   );\r\n\r\n//   return {\r\n//     ...item,\r\n//     todayDiff: item.todayDiff ?? item.difference ?? 0,\r\n//     category: cat ? { _id: cat._id, name: cat.name } : item.category,\r\n//     subcategory: sub ? { _id: sub._id, name: sub.name } : item.subcategory,\r\n//   };\r\n// });\r\n\r\n//         setItems(enriched);\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       alert(\"Could not fetch items\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       alert(\"Could not fetch categories\");\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     const subs = (cat && cat.subcategories) || [];\r\n//     setSubcategories(subs);\r\n\r\n//     const exists = subs.some((s) => s._id === form.subcategory);\r\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//   }, [form.category, categories]);\r\n\r\n//   const handleCreateCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newCategoryName.trim());\r\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//       const res = await axios.post(CATEGORY_URL, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Category created\");\r\n//         setNewCategoryName(\"\");\r\n//         setNewCategoryImage(null);\r\n//         setNewCategoryPreview(null);\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Category creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create category error\", err);\r\n//       alert(\"Category creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleCreateSub = async () => {\r\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n//     if (!form.category) return alert(\"Select category first\");\r\n\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newSubName.trim());\r\n//       if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Subcategory created\");\r\n//         setNewSubName(\"\");\r\n//         setNewSubImage(null);\r\n//         setNewSubPreview(null);\r\n//         setAddingSub(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Subcategory creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create sub error\", err);\r\n//       alert(\"Subcategory creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files && files.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((k) => {\r\n//         const val = form[k];\r\n//         if (val !== undefined && val !== null) {\r\n//           fd.append(k, val);\r\n//         }\r\n//       });\r\n\r\n//       let res;\r\n//       if (isCopyMode) {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Copied as new item\");\r\n//       } else if (editId) {\r\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n//         alert(\"Updated\");\r\n//       } else {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Added\");\r\n//       }\r\n\r\n//       await fetchItems();\r\n//       await fetchCategories();\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         subcategory: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n//       setEditId(null);\r\n//       setIsCopyMode(false);\r\n//       setShowModal(false);\r\n//       setShowForm(false);\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     // Backend se currentFinalPrice, lastFinalPrice, todayDiff milta hai\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       // difference: item.todayDiff ?? \"\", // todayDiff ko difference field mein load karo\r\n//       difference: item.todayDiff ?? 0,\r\n\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null, \r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(item._id);\r\n//     setIsCopyMode(false);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleCopyToEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       // difference: item.todayDiff ?? \"\", // todayDiff ko copy karo\r\n//       todayDiff: item.todayDiff ?? 0,\r\n\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(null);\r\n//     setIsCopyMode(true);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//       setActiveMenu(null);\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       alert(\"Delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       alert(\"Status update failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         name: x.name,\r\n//         basePrice: x.basePrice,\r\n//         difference: x.todayDiff || 0, // todayDiff ko send karo\r\n//         validTill: x.validTill,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       alert(\"Bulk save failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleCsvSelect = (e) => {\r\n//     setCsvFile(e.target.files[0]);\r\n//   };\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Select CSV file\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"file\", csvFile);\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//         fetchItems();\r\n//       } else {\r\n//         alert(\"CSV import failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"CSV import error\", err);\r\n//       alert(\"CSV import failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleExportCsv = () => {\r\n//     if (!items.length) return alert(\"No items to export\");\r\n\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"todayDiff\",\r\n//       \"lastFinalPrice\",\r\n//       \"currentFinalPrice\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = items.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.todayDiff ?? \"\",\r\n//       p.lastFinalPrice ?? \"\",\r\n//       p.currentFinalPrice ?? \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray\r\n//         .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n//         .join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `all_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   const handleExportSelectedCsv = () => {\r\n//     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"todayDiff\",\r\n//       \"lastFinalPrice\",\r\n//       \"currentFinalPrice\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = selectedData.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.todayDiff ?? \"\",\r\n//       p.lastFinalPrice ?? \"\",\r\n//       p.currentFinalPrice ?? \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `selected_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n\r\n//     const matchText =\r\n//       (item.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//     const matchCategory =\r\n//       !filterCategory || item.category?._id === filterCategory;\r\n\r\n//     const matchSub =\r\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//     return matchText && matchCategory && matchSub;\r\n//   });\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n//   // Helper function to get final price\r\n//   const getFinalPrice = (item) => {\r\n//     // Backend se currentFinalPrice already calculated aata hai\r\n//     return item.currentFinalPrice ?? item.finalPrice ?? (Number(item.basePrice) + Number(item.todayDiff || 0));\r\n//   };\r\n\r\n//   return (\r\n//     <div style={styles.container}>\r\n//       <div style={styles.header}>\r\n//         <h1 style={styles.title}>Product Management</h1>\r\n//       </div>\r\n\r\n//       <div className=\"mobile-topbar\">\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product, category or subcategory...\"\r\n//           value={search}\r\n//           onChange={(e) => {\r\n//             setSearch(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//           style={styles.searchInput}\r\n//         />\r\n\r\n//         <button\r\n//           style={styles.addButton}\r\n//           onClick={() => {\r\n//             setShowForm(!showForm);\r\n//             setEditId(null);\r\n//             setIsCopyMode(false);\r\n//           }}\r\n//         >\r\n//           {showForm ? \"‚úñ\" : \"Add Product\"}\r\n//         </button>\r\n//       </div>\r\n\r\n//       <div className=\"filter-bar\">\r\n//         <select\r\n//           value={filterCategory}\r\n//           onChange={(e) => setFilterCategory(e.target.value)}\r\n//           className=\"filter-select\"\r\n//         >\r\n//           <option value=\"\">Filter by Category</option>\r\n//           {categories.map((c) => (\r\n//             <option key={c._id} value={c._id}>{c.name}</option>\r\n//           ))}\r\n//         </select>\r\n\r\n//         <select\r\n//           value={filterSubcategory}\r\n//           onChange={(e) => setFilterSubcategory(e.target.value)}\r\n//           className=\"filter-select\"\r\n//           disabled={!filterSubs.length}\r\n//         >\r\n//           <option value=\"\">Filter by Subcategory</option>\r\n//           {filterSubs.map((s) => (\r\n//             <option key={s._id} value={s._id}>{s.name}</option>\r\n//           ))}\r\n//         </select>\r\n//       </div>\r\n\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-bar\">\r\n//           {!bulkMode ? (\r\n//             <div className=\"bulk-actions\">\r\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n\r\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div style={styles.bulkPanel}>\r\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} style={styles.bulkItemBox}>\r\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n//                     <div style={styles.formGrid}>\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Name</label>\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           value={item.name}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Base Price</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.basePrice}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\r\n//                           }\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Category</label>\r\n//                         <select\r\n//                           value={item.category?._id || \"\"}\r\n//                           onChange={(e) => {\r\n//                             const newCat = e.target.value;\r\n//                             updateLocalItemField(item._id, \"category\", { _id: newCat });\r\n//                             const catObj = categories.find((c) => c._id === newCat);\r\n//                             const firstSub = catObj?.subcategories?.[0]?._id || \"\";\r\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\r\n//                           }}\r\n//                           style={styles.select}\r\n//                         >\r\n//                           <option value=\"\">Select Category</option>\r\n//                           {categories.map((c) => (\r\n//                             <option key={c._id} value={c._id}>\r\n//                               {c.name}\r\n//                             </option>\r\n//                           ))}\r\n//                         </select>\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Subcategory</label>\r\n//                         <select\r\n//                           value={item.subcategory?._id || \"\"}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\r\n//                           }\r\n//                           style={styles.select}\r\n//                         >\r\n//                           <option value=\"\">Select Subcategory</option>\r\n//                           {categories\r\n//                             .find((c) => c._id === item.category?._id)\r\n//                             ?.subcategories?.map((s) => (\r\n//                               <option key={s._id} value={s._id}>\r\n//                                 {s.name}\r\n//                               </option>\r\n//                             ))}\r\n//                         </select>\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Today's Difference</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.todayDiff || 0}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"todayDiff\", Number(e.target.value))\r\n//                           }\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n//                   ‚úî Save All\r\n//                 </button>\r\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n//                   ‚úñ Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {showForm && (\r\n//         <div style={styles.formCard}>\r\n//           <h2 style={styles.formTitle}>‚ûï Add Product</h2>\r\n\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div style={styles.formGrid}>\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Product Name *</label>\r\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Category *</label>\r\n//                 <div style={styles.categoryRow}>\r\n//                   <select\r\n//                     required\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={(e) => {\r\n//                       handleChange(e);\r\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                     }}\r\n//                     style={styles.select}\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option value={c._id} key={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n\r\n//                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\r\n//                     {addingCategory ? \"Close\" : \"Add\"}\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {addingCategory && (\r\n//                 <div style={styles.addCategoryBox}>\r\n//                   <label style={styles.label}>Add New Category</label>\r\n//                   <div style={styles.categoryRow}>\r\n//                     <input\r\n//                       value={newCategoryName}\r\n//                       onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                       placeholder=\"Category name\"\r\n//                       style={styles.input}\r\n//                     />\r\n//                     <input\r\n//                       type=\"file\"\r\n//                       accept=\"image/*\"\r\n//                       onChange={(e) => {\r\n//                         setNewCategoryImage(e.target.files[0]);\r\n//                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                       }}\r\n//                       style={styles.fileInput}\r\n//                     />\r\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\r\n//                       Create\r\n//                     </button>\r\n//                   </div>\r\n//                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\r\n//                 </div>\r\n//               )}\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Subcategory</label>\r\n//                 <div style={styles.categoryRow}>\r\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n//                     <option value=\"\">Select Subcategory</option>\r\n//                     {subcategories.map((s) => (\r\n//                       <option value={s._id} key={s._id}>\r\n//                         {s.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n\r\n//                   {form.category && (\r\n//                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\r\n//                       {addingSub ? \"Close\" : \"Add\"}\r\n//                     </button>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {addingSub && (\r\n//                 <div style={styles.addCategoryBox}>\r\n//                   <label style={styles.label}>Add New Subcategory</label>\r\n//                   <div style={styles.categoryRow}>\r\n//                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\r\n//                     <input\r\n//                       type=\"file\"\r\n//                       accept=\"image/*\"\r\n//                       onChange={(e) => {\r\n//                         setNewSubImage(e.target.files[0]);\r\n//                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                       }}\r\n//                       style={styles.fileInput}\r\n//                     />\r\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\r\n//                       Create\r\n//                     </button>\r\n//                   </div>\r\n//                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\r\n//                 </div>\r\n//               )}\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Base Price *</label>\r\n//                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Today's Difference</label>\r\n//                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Valid Till</label>\r\n//                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Image</label>\r\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//               </div>\r\n//             </div>\r\n\r\n//             <div style={styles.formGroup}>\r\n//               <label style={styles.label}>Description</label>\r\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//             </div>\r\n\r\n//             <div style={styles.formActions}>\r\n//               <button style={styles.btnPrimary} disabled={loading}>\r\n//                 {loading ? \"Saving...\" : \"Add Product\"}\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n\r\n//       <div className=\"csv-topbar\">\r\n//         <div className=\"csv-row\">\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\".csv\"\r\n//             ref={csvInputRef}\r\n//             onChange={handleCsvSelect}\r\n//             style={styles.fileInput}\r\n//           />\r\n\r\n//           <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n//             Import\r\n//           </button>\r\n\r\n//           <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n//             Export All\r\n//           </button>\r\n\r\n//           <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n//             Selected\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div style={styles.tableCard}>\r\n//         <div style={styles.tableHeader}>\r\n//           <h2 style={styles.tableTitle}>Items</h2>\r\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         <div style={styles.tableWrapper}>\r\n//           <table style={styles.table}>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th style={styles.th}>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th style={styles.th}>Sr</th>\r\n//                 <th style={styles.th}>Image</th>\r\n//                 <th style={styles.th}>Name</th>\r\n//                 <th style={styles.th}>Category</th>\r\n//                 <th style={styles.th}>Subcategory</th>\r\n//                 <th style={styles.th}>Base</th>\r\n//                 <th style={styles.th}>Today Diff</th>\r\n//                 <th style={styles.th}>Final</th>\r\n//                 <th style={styles.th}>Status</th>\r\n//                 <th style={styles.th}>Valid Till</th>\r\n//                 <th style={styles.th}>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id} style={styles.tr}>\r\n//                   <td style={styles.td}>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n//                   <td style={styles.td}>{item.name}</td>\r\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n//                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n//                   <td style={styles.td}>‚Çπ{item.basePrice}</td>\r\n//                   <td style={styles.td}>{item.todayDiff || 0}</td>\r\n//                   <td style={styles.td}>‚Çπ{getFinalPrice(item)}</td>\r\n\r\n//                   <td style={styles.td}>\r\n//                     <button\r\n//                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ position: \"relative\" }}>\r\n//                       <button\r\n//                         style={styles.menuButton}\r\n//                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n//                       >\r\n//                         ‚ãÆ\r\n//                       </button>\r\n\r\n//                       {activeMenu === item._id && (\r\n//                         <div style={styles.dropdown}>\r\n//                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n//                             ‚úè Edit\r\n//                           </button>\r\n//                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\r\n//                             üìÑ Copy\r\n//                           </button>\r\n//                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n//                             üóë Delete\r\n//                           </button>\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         <div style={styles.pagination}>\r\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }, (_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {showModal && (\r\n//         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n//           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n//             <h2 style={styles.modalTitle}>{isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"}</h2>\r\n\r\n//             <form onSubmit={handleSubmit}>\r\n//               <div style={styles.formGrid}>\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Product Name *</label>\r\n//                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Category *</label>\r\n//                   <select\r\n//                     required\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={(e) => {\r\n//                       handleChange(e);\r\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                     }}\r\n//                     style={styles.select}\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option value={c._id} key={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Subcategory</label>\r\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n//                     <option value=\"\">Select Subcategory</option>\r\n//                     {subcategories.map((s) => (\r\n//                       <option value={s._id} key={s._id}>\r\n//                         {s.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Base Price *</label>\r\n//                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Today's Difference</label>\r\n//                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Valid Till</label>\r\n//                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Image</label>\r\n//                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//                 </div>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Description</label>\r\n//                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//               </div>\r\n\r\n//               <div style={styles.formActions}>\r\n//                 <button style={styles.btnPrimary} disabled={loading}>\r\n//                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\r\n//                 </button>\r\n\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   style={styles.btnCancel}\r\n//                   onClick={() => {\r\n//                     setShowModal(false);\r\n//                     setEditId(null);\r\n//                     setIsCopyMode(false);\r\n//                     setForm({\r\n//                       name: \"\",\r\n//                       category: \"\",\r\n//                       subcategory: \"\",\r\n//                       description: \"\",\r\n//                       basePrice: \"\",\r\n//                       difference: \"\",\r\n//                       validTill: \"\",\r\n//                       file: null,\r\n//                     });\r\n//                   }}\r\n//                 >\r\n//                   Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </form>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// const styles = {\r\n//   container: {},\r\n//   header: {},\r\n//   title: {\r\n//     fontSize: \"21px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"6px\",\r\n//   },\r\n//   subtitle: {\r\n//     fontSize: \"16px\",\r\n//   },\r\n//   searchBar: {\r\n//     maxWidth: \"320px\",\r\n//     margin: \"0 auto 25px auto\",\r\n//   },\r\n//   searchInput: {\r\n//     width: \"100%\",\r\n//     padding: \"12px 15px\",\r\n//     borderRadius: \"12px\",\r\n//     border: \"1px solid #ced4da\",\r\n//     background: \"#f9fbfc\",\r\n//     fontSize: \"15px\",\r\n//     outline: \"none\",\r\n//     boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\r\n//   },\r\n//   addButtonWrapper: {\r\n//     textAlign: \"left\",\r\n//     marginBottom: \"25px\",\r\n//   },\r\n//   addButton: {\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"12px\",\r\n//     padding: \"12px 24px\",\r\n//     fontSize: \"16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   bulkBar: {\r\n//     background: \"#e9f2ff\",\r\n//     border: \"1px solid #c4d9ff\",\r\n//     borderRadius: \"14px\",\r\n//     padding: \"15px 18px\",\r\n//     marginBottom: \"25px\",\r\n//     display: \"flex\",\r\n//     justifyContent: \"space-between\",\r\n//     alignItems: \"center\",\r\n//     flexWrap: \"wrap\",\r\n//     gap: \"14px\",\r\n//     boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\r\n//   },\r\n//   bulkText: {\r\n//     fontSize: \"15px\",\r\n//     fontWeight: \"600\",\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   bulkPanel: {\r\n//     width: \"100%\",\r\n//     background: \"#f7faff\",\r\n//     border: \"1px solid #cfe2ff\",\r\n//     padding: \"20px\",\r\n//     borderRadius: \"14px\",\r\n//     marginTop: \"10px\",\r\n//     boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\r\n//   },\r\n//   bulkPanelTitle: {\r\n//     textAlign: \"center\",\r\n//     fontSize: \"18px\",\r\n//     fontWeight: \"700\",\r\n//     marginBottom: \"15px\",\r\n//   },\r\n//   bulkItemBox: {\r\n//     background: \"#ffffff\",\r\n//     border: \"1px solid #dbe5f5\",\r\n//     padding: \"18px\",\r\n//     borderRadius: \"12px\",\r\n//     marginBottom: \"16px\",\r\n//     boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\r\n//   },\r\n//   bulkItemTitle: {\r\n//     fontSize: \"16px\",\r\n//     fontWeight: \"600\",\r\n//     marginBottom: \"12px\",\r\n//     color: \"#0d3b66\",\r\n//     borderLeft: \"4px solid #007bff\",\r\n//     paddingLeft: \"10px\",\r\n//   },\r\n//   formCard: {\r\n//     borderRadius: \"16px\",\r\n//     padding: \"25px\",\r\n//     marginBottom: \"28px\",\r\n//     background: \"#ffffff\",\r\n//     boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\r\n//     border: \"1px solid #eef2f7\",\r\n//   },\r\n//   formTitle: {\r\n//     fontSize: \"21px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"15px\",\r\n//   },\r\n//   formGrid: {\r\n//     display: \"grid\",\r\n//     gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\r\n//     gap: \"18px\",\r\n//   },\r\n//   formGroup: {\r\n//     display: \"flex\",\r\n//     flexDirection: \"column\",\r\n//     gap: \"6px\",\r\n//   },\r\n//   label: {\r\n//     fontWeight: \"600\",\r\n//     fontSize: \"14px\",\r\n//     color: \"#233142\",\r\n//   },\r\n//   input: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     transition: \"0.2s ease\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   select: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     transition: \"0.2s ease\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   textarea: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     transition: \"0.2s ease\",\r\n//     resize: \"none\",\r\n//     minHeight: \"80px\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   fileInput: {\r\n//     padding: \"8px\",\r\n//     fontSize: \"13px\",\r\n//   },\r\n//   categoryRow: {\r\n//     display: \"flex\",\r\n//     gap: \"10px\",\r\n//     alignItems: \"center\",\r\n//   },\r\n//   addCategoryBox: {\r\n//     gridColumn: \"1 / -1\",\r\n//     background: \"#f1f7ff\",\r\n//     border: \"1px solid #cfe1ff\",\r\n//     padding: \"16px\",\r\n//     borderRadius: \"12px\",\r\n//   },\r\n//   preview: {\r\n//     width: \"110px\",\r\n//     height: \"110px\",\r\n//     borderRadius: \"12px\",\r\n//     marginTop: \"10px\",\r\n//     objectFit: \"cover\",\r\n//     border: \"1px solid #b7c9e2\",\r\n//   },\r\n//   formActions: {\r\n//     marginTop: \"15px\",\r\n//     display: \"flex\",\r\n//     gap: \"12px\",\r\n//     flexWrap: \"wrap\",\r\n//   },\r\n//   btnPrimary: {\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   btnSmall: {\r\n//     background: \"#43a047\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   btnDelete: {\r\n//     background: \"#e63946\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   btnCancel: {\r\n//     background: \"#adb5bd\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   csvControls: {\r\n//     borderRadius: \"12px\",\r\n//     padding: \"16px\",\r\n//     background: \"#f7faff\",\r\n//     border: \"1px solid #d8e6ff\",\r\n//     display: \"flex\",\r\n//     alignItems: \"center\",\r\n//     justifyContent: \"space-between\",\r\n//     marginBottom: \"28px\",\r\n//     flexWrap: \"wrap\",\r\n//     gap: \"12px\",\r\n//   },\r\n//   tableCard: {},\r\n//   tableHeader: {\r\n//     display: \"flex\",\r\n//     justifyContent: \"space-between\",\r\n//     marginBottom: \"15px\",\r\n//   },\r\n//   tableTitle: {\r\n//     fontSize: \"21px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   totalCount: {\r\n//     fontSize: \"15px\",\r\n//     color: \"#6c757d\",\r\n//     fontWeight: \"600\",\r\n//   },\r\n//   tableWrapper: {\r\n//     overflowX: \"auto\",\r\n//   },\r\n//   table: {\r\n//     width: \"100%\",\r\n//     borderCollapse: \"collapse\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   th: {\r\n//     background: \"#e9f2ff\",\r\n//     padding: \"12px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     textAlign: \"left\",\r\n//     whiteSpace: \"nowrap\",\r\n//   },\r\n//   tr: {\r\n//     borderBottom: \"1px solid #edf2f7\",\r\n//   },\r\n//   td: {\r\n//     padding: \"12px 10px\",\r\n//     whiteSpace: \"nowrap\",\r\n//   },\r\n//   tableImg: {\r\n//     width: \"55px\",\r\n//     height: \"55px\",\r\n//     borderRadius: \"8px\",\r\n//     objectFit: \"cover\",\r\n//     border: \"1px solid #cfd9e5\",\r\n//   },\r\n//   statusActive: {\r\n//     background: \"#93d8ba\",\r\n//     padding: \"7px 12px\",\r\n//     borderRadius: \"8px\",\r\n//     color: \"black\",\r\n//     fontWeight: \"600\",\r\n//     border: \"none\",\r\n//     cursor: \"pointer\",\r\n//   },\r\n//   statusInactive: {\r\n//     background: \"#d9b1b1\",\r\n//     padding: \"7px 12px\",\r\n//     borderRadius: \"8px\",\r\n//     color: \"black\",\r\n//     fontWeight: \"600\",\r\n//     border: \"none\",\r\n//     cursor: \"pointer\",\r\n//   },\r\n//   menuButton: {\r\n//     background: \"#f0f0f0\",\r\n//     border: \"none\",\r\n//     borderRadius: \"6px\",\r\n//     padding: \"6px 12px\",\r\n//     fontSize: \"20px\",\r\n//     fontWeight: \"bold\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.2s ease\",\r\n//   },\r\n//   dropdown: {\r\n//     position: \"absolute\",\r\n//     right: \"0\",\r\n//     top: \"35px\",\r\n//     background: \"#fff\",\r\n//     border: \"1px solid #ddd\",\r\n//     borderRadius: \"8px\",\r\n//     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\r\n//     zIndex: \"100\",\r\n//     minWidth: \"140px\",\r\n//   },\r\n//   dropdownItem: {\r\n//     display: \"block\",\r\n//     width: \"100%\",\r\n//     padding: \"10px 15px\",\r\n//     background: \"transparent\",\r\n//     border: \"none\",\r\n//     textAlign: \"left\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//     fontWeight: \"500\",\r\n//     transition: \"0.2s ease\",\r\n//     borderBottom: \"1px solid #f0f0f0\",\r\n//   },\r\n//   dropdownItemDelete: {\r\n//     display: \"block\",\r\n//     width: \"100%\",\r\n//     padding: \"10px 15px\",\r\n//     background: \"transparent\",\r\n//     border: \"none\",\r\n//     textAlign: \"left\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//     fontWeight: \"500\",\r\n//     color: \"#e63946\",\r\n//     transition: \"0.2s ease\",\r\n//   },\r\n//   pagination: {\r\n//     marginTop: \"18px\",\r\n//     display: \"flex\",\r\n//     justifyContent: \"center\",\r\n//     gap: \"10px\",\r\n//     flexWrap: \"wrap\",\r\n//   },\r\n//   paginationBtn: {\r\n//     padding: \"9px 13px\",\r\n//     borderRadius: \"8px\",\r\n//     background: \"#fff\",\r\n//     border: \"1px solid #ddd\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   paginationBtnActive: {\r\n//     padding: \"9px 13px\",\r\n//     borderRadius: \"8px\",\r\n//     background: \"#007bff\",\r\n//     color: \"white\",\r\n//     border: \"1px solid #0062cc\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   modalOverlay: {\r\n//     position: \"fixed\",\r\n//     top: 0,\r\n//     left: 0,\r\n//     right: 0,\r\n//     bottom: 0,\r\n//     background: \"rgba(0, 0, 0, 0.5)\",\r\n//     display: \"flex\",\r\n//     justifyContent: \"center\",\r\n//     alignItems: \"center\",\r\n//     zIndex: \"1000\",\r\n//     padding: \"20px\",\r\n//   },\r\n//   modal: {\r\n//     background: \"#fff\",\r\n//     borderRadius: \"16px\",\r\n//     padding: \"30px\",\r\n//     maxWidth: \"700px\",\r\n//     width: \"100%\",\r\n//     maxHeight: \"90vh\",\r\n//     overflowY: \"auto\",\r\n//     boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n//   },\r\n//   modalTitle: {\r\n//     fontSize: \"22px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"20px\",\r\n//     textAlign: \"center\",\r\n//   },\r\n// };\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\";\r\n\r\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // form state for add/update\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    difference: \"\", // used as todayDiff when creating/updating (but backend update-diff is preferred)\r\n    validTill: \"\",\r\n    file: null,\r\n    status: \"inactive\",\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [isCopyMode, setIsCopyMode] = useState(false);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [activeMenu, setActiveMenu] = useState(null);\r\nconst [quickBasePrices, setQuickBasePrices] = useState({});\r\n\r\n  const [addingCategory, setAddingCategory] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n  const [addingSub, setAddingSub] = useState(false);\r\n  const [newSubName, setNewSubName] = useState(\"\");\r\n  const [newSubImage, setNewSubImage] = useState(null);\r\n  const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const csvInputRef = useRef();\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  const [filterCategory, setFilterCategory] = useState(\"\");\r\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n  const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n  // local per-row quick diff input map: { [id]: number }\r\n  const [quickDiffs, setQuickDiffs] = useState({});\r\n\r\n  // fetch categories on start\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  // whenever categories change, fetch items (so we can populate category/sub names)\r\n  useEffect(() => {\r\n    if (categories.length > 0) fetchItems();\r\n  }, [categories]);\r\n\r\n  // responsive\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  // when filterCategory changes update filterSubs\r\n  useEffect(() => {\r\n    if (!filterCategory) {\r\n      setFilterSubs([]);\r\n      setFilterSubcategory(\"\");\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === filterCategory);\r\n    setFilterSubs(cat?.subcategories || []);\r\n    setFilterSubcategory(\"\");\r\n  }, [filterCategory, categories]);\r\n\r\n  // when form.category changes update subcategories for the form\r\n  useEffect(() => {\r\n    if (!form.category) {\r\n      setSubcategories([]);\r\n      setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === form.category);\r\n    setSubcategories(cat?.subcategories || []);\r\n    const exists = cat?.subcategories?.some((s) => s._id === form.subcategory);\r\n    if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n  }, [form.category, categories]);\r\n\r\n  // ------------------ API calls ------------------\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n    } catch (err) {\r\n      console.error(\"Fetch categories error\", err);\r\n      alert(\"Could not fetch categories\");\r\n    }\r\n  };\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n      if (res.data && res.data.success) {\r\n        const raw = res.data.data || [];\r\n\r\n        // ensure fields exist\r\n        // const enriched = raw.map((item) => {\r\n        //   // category/subcategory may be populated objects or ids\r\n        //   const catObj = categories.find(\r\n        //     (c) => c._id === item.category || c._id === (item.category?._id || item.category)\r\n        //   );\r\n        //   const subObj = catObj?.subcategories?.find(\r\n        //     (s) =>\r\n        //       s._id === item.subcategory ||\r\n        //       s._id === (item.subcategory?._id || item.subcategory)\r\n        //   );\r\nconst enriched = raw.map((item) => {\r\n  return {\r\n    ...item,\r\n    todayDiff: Number(item.todayDiff ?? 0),\r\n    lastFinalPrice: Number(item.lastFinalPrice ?? item.basePrice ?? 0),\r\n    currentFinalPrice: Number(item.currentFinalPrice ?? 0),\r\n\r\n    category: item.category\r\n      ? { _id: item.category._id, name: item.category.name }\r\n      : null,\r\n\r\n    subcategory: item.subcategory\r\n      ? { name: item.subcategory.name }\r\n      : null,\r\n  };\r\n\r\n\r\n          return {\r\n            ...item,\r\n            // maintain compatibility: backend provides todayDiff/lastFinalPrice/currentFinalPrice\r\n            todayDiff: item.todayDiff ?? item.difference ?? 0,\r\n            lastFinalPrice: item.lastFinalPrice ?? (item.basePrice ?? 0),\r\n            currentFinalPrice:\r\n              item.currentFinalPrice ??\r\n              item.finalPrice ??\r\n              (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0)),\r\n            category: catObj ? { _id: catObj._id, name: catObj.name } : (item.category || null),\r\n            subcategory: subObj ? { _id: subObj._id, name: subObj.name } : (item.subcategory || null),\r\n          };\r\n        });\r\n\r\n        setItems(enriched);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Fetch items error\", err);\r\n      alert(\"Could not fetch items\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ------------------ Category/Sub creation ------------------\r\n  const handleCreateCategory = async () => {\r\n    if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"name\", newCategoryName.trim());\r\n      if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n      const res = await axios.post(CATEGORY_URL, fd);\r\n      if (res.data && res.data.success) {\r\n        setNewCategoryName(\"\");\r\n        setNewCategoryImage(null);\r\n        setNewCategoryPreview(null);\r\n        setAddingCategory(false);\r\n        fetchCategories();\r\n      } else {\r\n        alert(\"Category creation failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Create category error\", err);\r\n      alert(\"Category creation failed\");\r\n    }\r\n  };\r\n\r\n  const handleCreateSub = async () => {\r\n    if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n    if (!form.category) return alert(\"Select category first\");\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"name\", newSubName.trim());\r\n      if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n      const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n      if (res.data && res.data.success) {\r\n        setNewSubName(\"\");\r\n        setNewSubImage(null);\r\n        setNewSubPreview(null);\r\n        setAddingSub(false);\r\n        fetchCategories();\r\n      } else {\r\n        alert(\"Subcategory creation failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Create sub error\", err);\r\n      alert(\"Subcategory creation failed\");\r\n    }\r\n  };\r\n\r\n  // ------------------ Handlers (create/update/delete) ------------------\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files && files.length) {\r\n      setForm((p) => ({ ...p, file: files[0] }));\r\n    } else {\r\n      setForm((p) => ({ ...p, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!form.name || !form.category || !form.basePrice) {\r\n        alert(\"Name, category & base price are required\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const fd = new FormData();\r\n      Object.keys(form).forEach((k) => {\r\n        const val = form[k];\r\n        if (val !== undefined && val !== null) {\r\n          fd.append(k, val);\r\n        }\r\n      });\r\n\r\n      let res;\r\n      if (isCopyMode) {\r\n        // create new item from copy data\r\n        res = await axios.post(API_URL, fd);\r\n        alert(\"Copied as new item\");\r\n      } else if (editId) {\r\n        // update general fields (basePrice allowed but base is expected to be fixed by your requirements; be careful)\r\n        res = await axios.put(`${API_URL}/${editId}`, fd);\r\n        alert(\"Updated\");\r\n      } else {\r\n        // add new\r\n        res = await axios.post(API_URL, fd);\r\n        alert(\"Added\");\r\n      }\r\n\r\n      await fetchItems();\r\n      await fetchCategories();\r\n\r\n      setForm({\r\n        name: \"\",\r\n        category: \"\",\r\n        subcategory: \"\",\r\n        description: \"\",\r\n        basePrice: \"\",\r\n        difference: \"\",\r\n        validTill: \"\",\r\n        file: null,\r\n        status: \"inactive\",\r\n      });\r\n      setEditId(null);\r\n      setIsCopyMode(false);\r\n      setShowModal(false);\r\n      setShowForm(false);\r\n    } catch (err) {\r\n      console.error(\"Save error\", err);\r\n      alert(\"Save failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id?.toString() || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice ?? \"\",\r\n      difference: item.todayDiff ?? 0,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n      status: item.status || \"inactive\",\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n\r\n    setEditId(item._id);\r\n    setIsCopyMode(false);\r\n    setShowModal(true);\r\n    setActiveMenu(null);\r\n  };\r\n\r\n  const handleCopyToEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id?.toString() || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice ?? \"\",\r\n      difference: item.todayDiff ?? 0,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n      status: item.status || \"inactive\",\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n\r\n    setEditId(null);\r\n    setIsCopyMode(true);\r\n    setShowModal(true);\r\n    setActiveMenu(null);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete item?\")) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      setItems((prev) => prev.filter((x) => x._id !== id));\r\n      setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n      setActiveMenu(null);\r\n    } catch (err) {\r\n      console.error(\"Delete error\", err);\r\n      alert(\"Delete failed\");\r\n    }\r\n  };\r\n\r\n  const handleStatusToggle = async (item) => {\r\n    try {\r\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n      const res = await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n      if (res.data && res.data.success) {\r\n        // update local\r\n        setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n      } else {\r\n        alert(\"Status update failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Status toggle error\", err);\r\n      alert(\"Status update failed\");\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected\");\r\n    if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n    try {\r\n      await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n      setBulkMode(false);\r\n    } catch (err) {\r\n      console.error(\"Bulk delete error\", err);\r\n      alert(\"Bulk delete failed\");\r\n    }\r\n  };\r\n\r\n  const updateLocalItemField = (id, key, value) => {\r\n    setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n  };\r\n\r\n  const handleBulkSave = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n    const updates = items\r\n      .filter((x) => selectedItems.includes(x._id))\r\n      .map((x) => ({\r\n        id: x._id,\r\n        name: x.name,\r\n        basePrice: Number(x.basePrice),\r\n        difference: Number(x.todayDiff || 0), // backend bulk expects difference key\r\n        validTill: x.validTill,\r\n        status: x.status,\r\n      }));\r\n\r\n    try {\r\n      const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n      if (res.data && res.data.success) {\r\n        setBulkMode(false);\r\n        setSelectedItems([]);\r\n        fetchItems();\r\n      } else {\r\n        alert(\"Bulk save failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Bulk save error\", err);\r\n      alert(\"Bulk save failed\");\r\n    }\r\n  };\r\n\r\n  // ------------------ CSV import/export ------------------\r\n  const handleCsvSelect = (e) => {\r\n    setCsvFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleImportCsv = async () => {\r\n    if (!csvFile) return alert(\"Select CSV file\");\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", csvFile);\r\n      const res = await axios.post(`${API_URL}/import`, fd);\r\n      if (res.data && res.data.success) {\r\n        alert(`Imported ${res.data.inserted || 0} items`);\r\n        setCsvFile(null);\r\n        if (csvInputRef.current) csvInputRef.current.value = null;\r\n        fetchItems();\r\n      } else {\r\n        alert(\"CSV import failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"CSV import error\", err);\r\n      alert(\"CSV import failed\");\r\n    }\r\n  };\r\n\r\n  const handleExportCsv = () => {\r\n    if (!items.length) return alert(\"No items to export\");\r\n\r\n    const header = [\r\n      \"id\",\r\n      \"name\",\r\n      \"categoryName\",\r\n      \"subcategoryName\",\r\n      \"basePrice\",\r\n      \"todayDiff\",\r\n      \"lastFinalPrice\",\r\n      \"currentFinalPrice\",\r\n      \"status\",\r\n      \"validTill\",\r\n      \"description\",\r\n      \"imageUrl\",\r\n    ];\r\n\r\n    const rows = items.map((p) => [\r\n      p._id,\r\n      p.name || \"\",\r\n      p.category?.name || \"\",\r\n      p.subcategory?.name || \"\",\r\n      p.basePrice ?? \"\",\r\n      p.todayDiff ?? \"\",\r\n      p.lastFinalPrice ?? \"\",\r\n      p.currentFinalPrice ?? \"\",\r\n      p.status || \"\",\r\n      p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n      p.description || \"\",\r\n      p.image || \"\",\r\n    ]);\r\n\r\n    const csvArray = [header, ...rows];\r\n    const csvContent =\r\n      \"data:text/csv;charset=utf-8,\" +\r\n      csvArray\r\n        .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n        .join(\"\\n\");\r\n\r\n    const encodedUri = encodeURI(csvContent);\r\n    const link = document.createElement(\"a\");\r\n    link.href = encodedUri;\r\n    link.download = `all_prices_${Date.now()}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  const handleExportSelectedCsv = () => {\r\n    if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n    const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n    const header = [\r\n      \"id\",\r\n      \"name\",\r\n      \"categoryName\",\r\n      \"subcategoryName\",\r\n      \"basePrice\",\r\n      \"todayDiff\",\r\n      \"lastFinalPrice\",\r\n      \"currentFinalPrice\",\r\n      \"status\",\r\n      \"validTill\",\r\n      \"description\",\r\n      \"imageUrl\",\r\n    ];\r\n\r\n    const rows = selectedData.map((p) => [\r\n      p._id,\r\n      p.name || \"\",\r\n      p.category?.name || \"\",\r\n      p.subcategory?.name || \"\",\r\n      p.basePrice ?? \"\",\r\n      p.todayDiff ?? \"\",\r\n      p.lastFinalPrice ?? \"\",\r\n      p.currentFinalPrice ?? \"\",\r\n      p.status || \"\",\r\n      p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n      p.description || \"\",\r\n      p.image || \"\",\r\n    ]);\r\n\r\n    const csvArray = [header, ...rows];\r\n    const csvContent =\r\n      \"data:text/csv;charset=utf-8,\" +\r\n      csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n    const encodedUri = encodeURI(csvContent);\r\n    const link = document.createElement(\"a\");\r\n    link.href = encodedUri;\r\n    link.download = `selected_prices_${Date.now()}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  // ------------------ Filtering/Pagination ------------------\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n\r\n    const matchText =\r\n      (item.name || \"\").toLowerCase().includes(t) ||\r\n      (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n      (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n    const matchCategory = !filterCategory || item.category?._id === filterCategory;\r\n    const matchSub = !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n    return matchText && matchCategory && matchSub;\r\n  });\r\n\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n  const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n  // ------------------ Final price helper ------------------\r\n  // const getFinalPrice = (item) => {\r\n  //   // trust backend: currentFinalPrice computed server-side\r\n  //   return item.currentFinalPrice ?? (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0));\r\n  // };\r\n  const getFinalPrice = (item) => {\r\n  return Number(item.currentFinalPrice ?? 0);\r\n};\r\n\r\n\r\n  // ------------------ QUICK DIFF (per-row) ------------------\r\n  const handleQuickDiffChange = (id, value) => {\r\n    setQuickDiffs((p) => ({ ...p, [id]: value }));\r\n  };\r\n\r\n  const applyQuickDiff = async (id) => {\r\n    const diff = Number(quickDiffs[id] ?? 0);\r\n    try {\r\n      setLoading(true);\r\n      // const res = await axios.put(`${API_URL}/updateDiff/${id}`, { diff });\r\n      // if (res.data && res.data.success) {\r\n      //   await fetchItems();\r\n      const res = await axios.put(`${API_URL}/updateDiff/${id}`, { diff });\r\n\r\nif (res.data.success) {\r\n  const updated = res.data.data;\r\n\r\n  setItems((prev) =>\r\n    prev.map((x) => (x._id === id ? updated : x))\r\n  );\r\n\r\n\r\n        setQuickDiffs((p) => ({ ...p, [id]: undefined }));\r\n      } else {\r\n        alert(\"Diff update failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"update-diff error\", err);\r\n      alert(\"Diff update failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ------------------ ROUTINE UI ------------------\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.header}>\r\n        <h1 style={styles.title}>Product Management</h1>\r\n      </div>\r\n\r\n      <div className=\"mobile-topbar\" style={{ marginBottom: 12 }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search product, category or subcategory...\"\r\n          value={search}\r\n          onChange={(e) => {\r\n            setSearch(e.target.value);\r\n            setCurrentPage(1);\r\n          }}\r\n          style={styles.searchInput}\r\n        />\r\n\r\n        <button\r\n          style={styles.addButton}\r\n          onClick={() => {\r\n            setShowForm(!showForm);\r\n            setEditId(null);\r\n            setIsCopyMode(false);\r\n          }}\r\n        >\r\n          {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"filter-bar\" style={{ display: \"flex\", gap: 10, marginBottom: 12 }}>\r\n        <select value={filterCategory} onChange={(e) => setFilterCategory(e.target.value)} className=\"filter-select\" style={styles.select}>\r\n          <option value=\"\">Filter by Category</option>\r\n          {categories.map((c) => (\r\n            <option key={c._id} value={c._id}>\r\n              {c.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <select\r\n          value={filterSubcategory}\r\n          onChange={(e) => setFilterSubcategory(e.target.value)}\r\n          className=\"filter-select\"\r\n          disabled={!filterSubs.length}\r\n          style={styles.select}\r\n        >\r\n          <option value=\"\">Filter by Subcategory</option>\r\n          {filterSubs.map((s) => (\r\n            <option key={s._id} value={s._id}>\r\n              {s.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n         \r\n          <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n            Export All\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedItems.length > 0 && (\r\n        <div className=\"bulk-bar\" style={styles.bulkBar}>\r\n          {!bulkMode ? (\r\n            <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 8 }}>\r\n              <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n                üóë Bulk Delete\r\n              </button>\r\n\r\n              <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n                ‚úè Bulk Edit\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div style={styles.bulkPanel}>\r\n              <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n              {items\r\n                .filter((item) => selectedItems.includes(item._id))\r\n                .map((item) => (\r\n                  <div key={item._id} style={styles.bulkItemBox}>\r\n                    <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n                    <div style={styles.formGrid}>\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={item.name}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Base Price</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.basePrice}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))}\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Today's Difference</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.todayDiff || 0}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"todayDiff\", Number(e.target.value))}\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Status</label>\r\n                        <select\r\n                          value={item.status}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)}\r\n                          style={styles.select}\r\n                        >\r\n                          <option value=\"active\">active</option>\r\n                          <option value=\"inactive\">inactive</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n              <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n                <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n                  ‚úî Save All\r\n                </button>\r\n                <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n                  ‚úñ Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {showForm && (\r\n        <div style={styles.formCard}>\r\n          <h2 style={styles.formTitle}>‚ûï Add / Edit Product</h2>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={styles.formGrid}>\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Product Name *</label>\r\n                <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Category *</label>\r\n                <div style={styles.categoryRow}>\r\n                  <select\r\n                    required\r\n                    name=\"category\"\r\n                    value={form.category}\r\n                    onChange={(e) => {\r\n                      handleChange(e);\r\n                      setForm((p) => ({ ...p, subcategory: \"\" }));\r\n                    }}\r\n                    style={styles.select}\r\n                  >\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((c) => (\r\n                      <option value={c._id} key={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\r\n                    {addingCategory ? \"Close\" : \"Add\"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {addingCategory && (\r\n                <div style={styles.addCategoryBox}>\r\n                  <label style={styles.label}>Add New Category</label>\r\n                  <div style={styles.categoryRow}>\r\n                    <input\r\n                      value={newCategoryName}\r\n                      onChange={(e) => setNewCategoryName(e.target.value)}\r\n                      placeholder=\"Category name\"\r\n                      style={styles.input}\r\n                    />\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={(e) => {\r\n                        setNewCategoryImage(e.target.files[0]);\r\n                        setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n                      }}\r\n                      style={styles.fileInput}\r\n                    />\r\n                    <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\r\n                      Create\r\n                    </button>\r\n                  </div>\r\n                  {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\r\n                </div>\r\n              )}\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Subcategory</label>\r\n                <div style={styles.categoryRow}>\r\n                  <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n                    <option value=\"\">Select Subcategory</option>\r\n                    {subcategories.map((s) => (\r\n                      <option value={s._id} key={s._id}>\r\n                        {s.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  {form.category && (\r\n                    <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\r\n                      {addingSub ? \"Close\" : \"Add\"}\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {addingSub && (\r\n                <div style={styles.addCategoryBox}>\r\n                  <label style={styles.label}>Add New Subcategory</label>\r\n                  <div style={styles.categoryRow}>\r\n                    <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={(e) => {\r\n                        setNewSubImage(e.target.files[0]);\r\n                        setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n                      }}\r\n                      style={styles.fileInput}\r\n                    />\r\n                    <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\r\n                      Create\r\n                    </button>\r\n                  </div>\r\n                  {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\r\n                </div>\r\n              )}\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Base Price *</label>\r\n                <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n                <small style={{ color: \"#666\" }}>\r\n                  Base is considered fixed logic-wise. Changing it here will update the stored basePrice.\r\n                </small>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Today's Difference (optional)</label>\r\n                <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n                <small style={{ color: \"#666\" }}>\r\n                  You can set initial diff on create/update. Prefer using quick-diff per-row to apply formula (lastFinal + diff).\r\n                </small>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Valid Till</label>\r\n                <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Image</label>\r\n                <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n              </div>\r\n            </div>\r\n\r\n            <div style={styles.formGroup}>\r\n              <label style={styles.label}>Description</label>\r\n              <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n            </div>\r\n\r\n            <div style={styles.formActions}>\r\n              <button style={styles.btnPrimary} disabled={loading}>\r\n                {loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"}\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                style={styles.btnCancel}\r\n                onClick={() => {\r\n                  setShowForm(false);\r\n                  setEditId(null);\r\n                  setIsCopyMode(false);\r\n                  setForm({\r\n                    name: \"\",\r\n                    category: \"\",\r\n                    subcategory: \"\",\r\n                    description: \"\",\r\n                    basePrice: \"\",\r\n                    difference: \"\",\r\n                    validTill: \"\",\r\n                    file: null,\r\n                    status: \"inactive\",\r\n                  });\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* <div className=\"csv-topbar\" style={{ display: \"flex\", gap: 8, marginTop: 12, marginBottom: 12 }}>\r\n     \r\n    <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\r\n        <button style={styles.btnSmall} onClick={handleImportCsv}>Import</button>\r\n        <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>Export Selected</button>\r\n      </div> */}\r\n      <div style={styles.csvBar}>\r\n  <div style={styles.csvLeft}>\r\n    <input\r\n      type=\"file\"\r\n      accept=\".csv\"\r\n      ref={csvInputRef}\r\n      onChange={handleCsvSelect}\r\n      style={styles.csvInput}\r\n    />\r\n  </div>\r\n\r\n  <div style={styles.csvButtons}>\r\n    <button style={styles.csvBtn} onClick={handleImportCsv}>Import</button>\r\n    <button style={styles.csvBtn} onClick={handleExportSelectedCsv}>Selected</button>\r\n    <button style={styles.csvBtnPrimary} onClick={handleExportCsv}>Export All</button>\r\n  </div>\r\n</div>\r\n\r\n\r\n      <div style={styles.tableCard}>\r\n        <div style={styles.tableHeader}>\r\n          <h2 style={styles.tableTitle}>Items</h2>\r\n          <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n        </div>\r\n\r\n        <div style={styles.tableWrapper}>\r\n          <table style={styles.table}>\r\n            <thead>\r\n              <tr>\r\n                <th style={styles.th}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n                    onChange={() => {\r\n                      if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n                      else setSelectedItems(filteredItems.map((x) => x._id));\r\n                    }}\r\n                  />\r\n                </th>\r\n                <th style={styles.th}>Sr</th>\r\n                <th style={styles.th}>Image</th>\r\n                <th style={styles.th}>Name</th>\r\n                <th style={styles.th}>Category</th>\r\n                <th style={styles.th}>Subcategory</th>\r\n\r\n                <th style={styles.th}>Base</th>\r\n                <th style={styles.th}>YTD</th>\r\n                <th style={styles.th}>Today Diff</th>\r\n                <th style={styles.th}>Current Final</th>\r\n\r\n                <th style={styles.th}>Quick Diff</th>\r\n                <th style={styles.th}>Status</th>\r\n                <th style={styles.th}>Valid Till</th>\r\n                <th style={styles.th}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {currentItems.map((item, i) => (\r\n                <tr key={item._id} style={styles.tr}>\r\n                  <td style={styles.td}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item._id)}\r\n                      onChange={() =>\r\n                        setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n                      }\r\n                    />\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n                  <td style={styles.td}>\r\n                    {item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{item.name}</td>\r\n                  <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n                  <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n                  {/* <td style={styles.td}>‚Çπ{item.basePrice}</td>\r\n                   */}\r\n                   <td style={styles.td}>\r\n  <>\r\n    <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n      <input\r\n        type=\"number\"\r\n        placeholder=\"base\"\r\n        value={\r\n          quickBasePrices[item._id] !== undefined\r\n            ? quickBasePrices[item._id]\r\n            : item.basePrice\r\n        }\r\n        onChange={(e) =>\r\n          setQuickBasePrices((p) => ({\r\n            ...p,\r\n            [item._id]: e.target.value,\r\n          }))\r\n        }\r\n        style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n      />\r\n\r\n      <button\r\n        style={styles.btnSmall}\r\n        onClick={async () => {\r\n          const newBase = Number(\r\n            quickBasePrices[item._id] ?? item.basePrice\r\n          );\r\n\r\n          if (isNaN(newBase)) return alert(\"Invalid Base Price\");\r\n\r\n          try {\r\n            setLoading(true);\r\n            const fd = new FormData();\r\n            fd.append(\"name\", item.name);\r\n            fd.append(\"category\", item.category?._id);\r\n            fd.append(\"subcategory\", item.subcategory?._id || \"\");\r\n            fd.append(\"description\", item.description || \"\");\r\n            fd.append(\"basePrice\", newBase);\r\n            fd.append(\"validTill\", item.validTill || \"\");\r\n            fd.append(\"status\", item.status);\r\n\r\n            const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n\r\n            if (res.data.success) {\r\n  const newCurrent = newBase + Number(item.todayDiff || 0);\r\n\r\n  // Update UI instantly without refresh\r\n  // setItems((prev) =>\r\n  //   prev.map((x) =>\r\n  //     x._id === item._id\r\n  //       ? {\r\n  //           ...x,\r\n  //           basePrice: newBase,\r\n  //           currentFinalPrice: newCurrent,\r\n  //           lastFinalPrice: newBase, // OPTIONAL (if you want it)\r\n  //         }\r\n  //       : x\r\n  //   )\r\n  // );\r\nconst updated = res.data.data;\r\n\r\nsetItems((prev) =>\r\n  prev.map((x) => (x._id === item._id ? updated : x))\r\n);\r\n\r\n  setQuickBasePrices((p) => ({\r\n    ...p,\r\n    [item._id]: newBase,\r\n  }));\r\n}\r\n else {\r\n              alert(\"Base update failed\");\r\n            }\r\n          } catch (err) {\r\n            console.error(err);\r\n            alert(\"Base update error\");\r\n          } finally {\r\n            setLoading(false);\r\n          }\r\n        }}\r\n      >\r\n        ‚úî\r\n      </button>\r\n    </div>\r\n\r\n    <small style={{ display: \"block\", color: \"#2b8d28ff\", marginTop: 4 }}>\r\n      Saved: ‚Çπ{item.basePrice}\r\n    </small>\r\n  </>\r\n</td>\r\n\r\n                  <td style={styles.td}>‚Çπ{item.lastFinalPrice ?? item.basePrice}</td>\r\n                  <td style={styles.td}>{item.todayDiff ?? 0}</td>\r\n                  <td style={styles.td}>‚Çπ{getFinalPrice(item)}</td>\r\n\r\n                  <td style={styles.td}>\r\n                    <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        placeholder=\"diff\"\r\n                        value={quickDiffs[item._id] ?? \"\"}\r\n                        onChange={(e) => handleQuickDiffChange(item._id, e.target.value)}\r\n                        style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n                      />\r\n                      <button style={styles.btnSmall} onClick={() => applyQuickDiff(item._id)}>\r\n                        ‚úî\r\n                      </button>\r\n                    </div>\r\n                    <small style={{ display: \"block\", color: \"#666\" }}>\r\n                      \r\n                    </small>\r\n                  </td>\r\n\r\n                  <td style={styles.td}>\r\n                    <button\r\n                      style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n                      onClick={() => handleStatusToggle(item)}\r\n                    >\r\n                      {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n                  <td style={styles.td}>\r\n                    <div style={{ position: \"relative\" }}>\r\n                      <button\r\n                        style={styles.menuButton}\r\n                        onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n                      >\r\n                        ‚ãÆ\r\n                      </button>\r\n\r\n                      {activeMenu === item._id && (\r\n                        <div style={styles.dropdown}>\r\n                          <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n                            ‚úè Edit\r\n                          </button>\r\n                          <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\r\n                            üìÑ Copy\r\n                          </button>\r\n                          <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n                            üóë Delete\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div style={styles.pagination}>\r\n          <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n            Previous\r\n          </button>\r\n\r\n          {Array.from({ length: totalPages }, (_, i) => (\r\n            <button\r\n              key={i}\r\n              style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n              onClick={() => setCurrentPage(i + 1)}\r\n            >\r\n              {i + 1}\r\n            </button>\r\n          ))}\r\n\r\n          <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n          <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n            <h2 style={styles.modalTitle}>{isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"}</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formGrid}>\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Product Name *</label>\r\n                  <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Category *</label>\r\n                  <select\r\n                    required\r\n                    name=\"category\"\r\n                    value={form.category}\r\n                    onChange={(e) => {\r\n                      handleChange(e);\r\n                      setForm((p) => ({ ...p, subcategory: \"\" }));\r\n                    }}\r\n                    style={styles.select}\r\n                  >\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((c) => (\r\n                      <option value={c._id} key={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Subcategory</label>\r\n                  <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n                    <option value=\"\">Select Subcategory</option>\r\n                    {subcategories.map((s) => (\r\n                      <option value={s._id} key={s._id}>\r\n                        {s.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Base Price *</label>\r\n                  <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Today's Difference</label>\r\n                  <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Valid Till</label>\r\n                  <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Image</label>\r\n                  <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n                </div>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Description</label>\r\n                <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n              </div>\r\n\r\n              <div style={styles.formActions}>\r\n                <button style={styles.btnPrimary} disabled={loading}>\r\n                  {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\r\n                </button>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  style={styles.btnCancel}\r\n                  onClick={() => {\r\n                    setShowModal(false);\r\n                    setEditId(null);\r\n                    setIsCopyMode(false);\r\n                    setForm({\r\n                      name: \"\",\r\n                      category: \"\",\r\n                      subcategory: \"\",\r\n                      description: \"\",\r\n                      basePrice: \"\",\r\n                      difference: \"\",\r\n                      validTill: \"\",\r\n                      file: null,\r\n                      status: \"inactive\",\r\n                    });\r\n                  }}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------------------- Styles ---------------------- */\r\n/* Reused and tweaked from your original file to match look & feel */\r\nconst styles = {\r\n  container: { padding: 16 },\r\n  header: { marginBottom: 8 },\r\n  title: {\r\n    fontSize: \"21px\",\r\n    fontWeight: \"700\",\r\n    color: \"#0d3b66\",\r\n    marginBottom: \"6px\",\r\n  },\r\n\r\ncsvBar: {\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"space-between\",\r\n  gap: 10,\r\n  padding: \"8px\",\r\n  background: \"#f1f5fb\",\r\n  borderRadius: 10,\r\n  border: \"1px solid #d0d7e2\",\r\n  flexWrap: \"wrap\",\r\n},\r\n\r\ncsvLeft: {\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n},\r\n\r\ncsvInput: {\r\n  padding: \"6px\",\r\n  fontSize: \"12px\",\r\n},\r\n\r\ncsvButtons: {\r\n  display: \"flex\",\r\n  gap: 6,\r\n  flexWrap: \"wrap\",\r\n},\r\n\r\ncsvBtn: {\r\n  background: \"#6c8ffc\",\r\n  color: \"#fff\",\r\n  padding: \"6px 10px\",\r\n  borderRadius: 6,\r\n  border: \"none\",\r\n  fontSize: \"12px\",\r\n  cursor: \"pointer\",\r\n},\r\n\r\ncsvBtnPrimary: {\r\n  background: \"#3b6ef6\",\r\n  color: \"#fff\",\r\n  padding: \"6px 10px\",\r\n  borderRadius: 6,\r\n  border: \"none\",\r\n  fontSize: \"12px\",\r\n  cursor: \"pointer\",\r\n},\r\n\r\n\r\n\r\n  searchInput: {\r\n    width: \"320px\",\r\n    padding: \"10px 12px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #ced4da\",\r\n    background: \"#f9fbfc\",\r\n    fontSize: \"14px\",\r\n    outline: \"none\",\r\n  },\r\n  addButton: {\r\n    marginLeft: 12,\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"10px\",\r\n    padding: \"10px 14px\",\r\n    fontSize: \"14px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  bulkBar: {\r\n    background: \"#e9f2ff\",\r\n    border: \"1px solid #c4d9ff\",\r\n    borderRadius: \"10px\",\r\n    padding: \"12px\",\r\n    marginBottom: \"12px\",\r\n  },\r\n  bulkPanel: {\r\n    width: \"100%\",\r\n    background: \"#f7faff\",\r\n    border: \"1px solid #cfe2ff\",\r\n    padding: \"12px\",\r\n    borderRadius: \"10px\",\r\n  },\r\n  bulkPanelTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"700\",\r\n    marginBottom: \"10px\",\r\n  },\r\n  bulkItemBox: {\r\n    background: \"#fff\",\r\n    border: \"1px solid #dbe5f5\",\r\n    padding: \"12px\",\r\n    borderRadius: \"8px\",\r\n    marginBottom: \"10px\",\r\n  },\r\n  bulkItemTitle: {\r\n    fontSize: \"14px\",\r\n    fontWeight: \"600\",\r\n    marginBottom: \"8px\",\r\n  },\r\n  formCard: {\r\n    borderRadius: \"12px\",\r\n    padding: \"16px\",\r\n    marginBottom: \"18px\",\r\n    background: \"#ffffff\",\r\n    border: \"1px solid #eef2f7\",\r\n  },\r\n  formTitle: { fontSize: \"18px\", fontWeight: \"700\", marginBottom: 10 },\r\n  formGrid: {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n    gap: \"12px\",\r\n  },\r\n  formGroup: { display: \"flex\", flexDirection: \"column\", gap: \"6px\" },\r\n  label: { fontWeight: \"600\", fontSize: \"13px\", color: \"#233142\" },\r\n  input: {\r\n    padding: \"8px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid #cfd6e0\",\r\n    background: \"#f8fafc\",\r\n    fontSize: \"13px\",\r\n  },\r\n  select: {\r\n    padding: \"8px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid #cfd6e0\",\r\n    background: \"#f8fafc\",\r\n    fontSize: \"13px\",\r\n  },\r\n  textarea: {\r\n    padding: \"8px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid #cfd6e0\",\r\n    background: \"#f8fafc\",\r\n    minHeight: 80,\r\n  },\r\n  fileInput: { padding: \"6px\" },\r\n  categoryRow: { display: \"flex\", gap: \"8px\", alignItems: \"center\" },\r\n  addCategoryBox: { gridColumn: \"1 / -1\", padding: 10, background: \"#f1f7ff\", borderRadius: 8 },\r\n  preview: { width: 90, height: 90, objectFit: \"cover\", borderRadius: 8 },\r\n  formActions: { marginTop: 10, display: \"flex\", gap: 8 },\r\n  btnPrimary: {\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"8px 12px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  btnSmall: {\r\n    background: \"#43a047\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"6px 10px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  btnDelete: {\r\n    background: \"#e63946\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"8px 12px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  btnCancel: {\r\n    background: \"#adb5bd\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"8px 12px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  tableCard: { marginTop: 12 },\r\n  tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 8 },\r\n  tableTitle: { fontSize: \"18px\", fontWeight: \"700\" },\r\n  totalCount: { fontSize: \"13px\", color: \"#6c757d\", fontWeight: \"600\" },\r\n  tableWrapper: { overflowX: \"auto\" },\r\n  table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: \"14px\" },\r\n  th: { background: \"#e9f2ff\", padding: \"10px\", fontWeight: \"700\", color: \"#0d3b66\", textAlign: \"left\" },\r\n  tr: { borderBottom: \"1px solid #edf2f7\" },\r\n  td: { padding: \"10px\", whiteSpace: \"nowrap\", verticalAlign: \"middle\" },\r\n  tableImg: { width: \"55px\", height: \"55px\", borderRadius: \"6px\", objectFit: \"cover\" },\r\n  statusActive: { background: \"#93d8ba\", padding: \"6px 10px\", borderRadius: \"8px\", color: \"black\", fontWeight: \"600\", border: \"none\", cursor: \"pointer\" },\r\n  statusInactive: { background: \"#d9b1b1\", padding: \"6px 10px\", borderRadius: \"8px\", color: \"black\", fontWeight: \"600\", border: \"none\", cursor: \"pointer\" },\r\n  menuButton: { background: \"#f0f0f0\", border: \"none\", borderRadius: \"6px\", padding: \"6px 10px\", fontSize: \"16px\", cursor: \"pointer\" },\r\n  dropdown: { position: \"absolute\", right: 0, top: 32, background: \"#fff\", border: \"1px solid #ddd\", borderRadius: 8, zIndex: 100, minWidth: 140 },\r\n  dropdownItem: { display: \"block\", width: \"100%\", padding: \"8px 12px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 500 },\r\n  dropdownItemDelete: { display: \"block\", width: \"100%\", padding: \"8px 12px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 500, color: \"#e63946\" },\r\n  pagination: { marginTop: 12, display: \"flex\", justifyContent: \"center\", gap: 8 },\r\n  paginationBtn: { padding: \"8px 10px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #ddd\", cursor: \"pointer\" },\r\n  paginationBtnActive: { padding: \"8px 10px\", borderRadius: 8, background: \"#007bff\", color: \"white\", border: \"1px solid #0062cc\", cursor: \"pointer\" },\r\n  modalOverlay: { position: \"fixed\", top: 0, left: 0, right: 0, bottom: 0, background: \"rgba(0,0,0,0.5)\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 1000, padding: 20 },\r\n  modal: { background: \"#fff\", borderRadius: 12, padding: 20, maxWidth: 700, width: \"100%\", maxHeight: \"90vh\", overflowY: \"auto\" },\r\n  modalTitle: { fontSize: 18, fontWeight: \"700\", color: \"#0d3b66\", marginBottom: 12, textAlign: \"center\" },\r\n};\r\n"],"mappings":";;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEzB,MAAMC,OAAO,GAAG,+CAA+C;AAC/D,MAAMC,YAAY,GAAG,mDAAmD;AAExE,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM,CAACC,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}