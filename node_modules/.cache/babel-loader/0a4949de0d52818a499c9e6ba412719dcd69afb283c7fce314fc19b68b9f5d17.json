{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// // import \"./PriceList.css\"; // same CSS use kar sakte ho\n// import \"./ProductList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// function ProductList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n\n//   const [searchText, setSearchText] = useState(\"\");\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 20;\n\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n\n//   // ---------------------- FETCH DATA ---------------------\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//   }, []);\n\n//   const fetchItems = async () => {\n//     try {\n//       const res = await axios.get(API_URL);\n//       if (res.data.success) setItems(res.data.data);\n//     } catch (err) {\n//       console.log(\"Items fetch failed\", err);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) {\n//         setCategories(res.data.categories);\n//       }\n//     } catch (err) {\n//       console.log(\"Category fetch failed\", err);\n//     }\n//   };\n\n//   // ---------------------- HANDLE CATEGORY FILTER â†’ LOAD SUBS ---------------------\n//   useEffect(() => {\n//     if (!filterCategory) {\n//       setSubcategories([]);\n//       setFilterSubcategory(\"\");\n//       return;\n//     }\n\n//     const cat = categories.find((c) => c._id === filterCategory);\n//     setSubcategories(cat?.subcategories || []);\n//     setFilterSubcategory(\"\");\n//   }, [filterCategory, categories]);\n\n//   // ---------------------- FILTERED LIST ---------------------\n//   const filteredItems = items.filter((item) => {\n//     const t = searchText.toLowerCase();\n\n//     const matchSearch =\n//       item.name.toLowerCase().includes(t) ||\n//       item.category?.name?.toLowerCase().includes(t) ||\n//       item.subcategory?.name?.toLowerCase().includes(t);\n\n//     const matchCategory =\n//       !filterCategory || item.category?._id === filterCategory;\n\n//     const matchSubcategory =\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n//     return matchSearch && matchCategory && matchSubcategory;\n//   });\n\n//   // ---------------------- PAGINATION ---------------------\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const renderedItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\n\n//   return (\n//     <div className=\"price-container\">\n\n//       {/* ---------------- HEADER ---------------- */}\n//       <div className=\"header-section\">\n//         <h1>ðŸ“¦ Product List</h1>\n//         <p>View all products with sorting, search & category filters.</p>\n//       </div>\n\n//       {/* ---------------- FILTER BAR ---------------- */}\n//       <div className=\"filter-bar\">\n\n//         {/* SEARCH */}\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product, category or subcategory...\"\n//           value={searchText}\n//           onChange={(e) => {\n//             setCurrentPage(1);\n//             setSearchText(e.target.value);\n//           }}\n//         />\n\n//         {/* CATEGORY FILTER */}\n//         <select\n//           value={filterCategory}\n//           onChange={(e) => {\n//             setFilterCategory(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//         >\n//           <option value=\"\">All Categories</option>\n//           {categories.map((c) => (\n//             <option key={c._id} value={c._id}>\n//               {c.name}\n//             </option>\n//           ))}\n//         </select>\n\n//         {/* SUBCATEGORY FILTER */}\n//         <select\n//           value={filterSubcategory}\n//           disabled={!subcategories.length}\n//           onChange={(e) => {\n//             setFilterSubcategory(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//         >\n//           <option value=\"\">All Subcategories</option>\n//           {subcategories.map((s) => (\n//             <option key={s._id} value={s._id}>\n//               {s.name}\n//             </option>\n//           ))}\n//         </select>\n\n//       </div>\n\n//       {/* ---------------- LIST TABLE ---------------- */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>ðŸ“‹ Items</h2>\n//           <span>Total: {filteredItems.length}</span>\n//         </div>\n\n//         {/* DESKTOP TABLE */}\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>Sr</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 {/* <th>Category</th>\n//                 <th>Subcategory</th> */}\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 {/* <th>Valid Till</th> */}\n\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {renderedItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td>\n//                     {item.image ? (\n//                       <img src={item.image} alt=\"img\" />\n//                     ) : (\n//                       \"No Img\"\n//                     )}\n//                   </td>\n\n//                   <td>{item.name}</td>\n// {/* \n//                   <td>{item.category?.name}</td>\n\n//                   <td>{item.subcategory?.name || \"-\"}</td> */}\n\n//                   <td>â‚¹{item.basePrice}</td>\n\n//                   <td>{item.difference || 0}</td>\n\n//                   <td>â‚¹{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n//                   {/* <td>\n//                     {item.validTill\n//                       ? new Date(item.validTill).toLocaleDateString()\n//                       : \"-\"}\n//                   </td> */}\n\n//                   {/* <td>\n//                     {item.status === \"active\" ? (\n//                       <span className=\"status-active\">ðŸŸ¢ Active</span>\n//                     ) : (\n//                       <span className=\"status-inactive\">ðŸ”´ Inactive</span>\n//                     )}\n//                   </td> */}\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           /* ---------------- MOBILE CARD VIEW ---------------- */\n//           <div className=\"mobile-list\">\n//             {renderedItems.map((item) => (\n//               <div key={item._id} className=\"mobile-card\">\n//                 {item.image ? (\n//                   <img src={item.image} alt=\"img\" />\n//                 ) : (\n//                   <div>No Image</div>\n//                 )}\n\n//                 <h3>{item.name}</h3>\n\n//                 {/* <p><b>Category:</b> {item.category?.name}</p>\n//                 <p><b>Subcategory:</b> {item.subcategory?.name || \"-\"}</p> */}\n//                 <p><b>Base:</b> â‚¹{item.basePrice}</p>\n//                 <p><b>Difference:</b> â‚¹{item.difference || 0}</p>\n//                 <p><b>Final:</b> â‚¹{Number(item.basePrice) + Number(item.difference || 0)}</p>\n\n//                 {/* <p className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}>\n//                   {item.status === \"active\" ? \"ðŸŸ¢ Active\" : \"ðŸ”´ Inactive\"}\n//                 </p> */}\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* ---------------- PAGINATION ---------------- */}\n//         <div className=\"pagination\">\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }).map((_, i) => (\n//             <button\n//               key={i}\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button\n//             disabled={currentPage === totalPages}\n//             onClick={() => setCurrentPage((p) => p + 1)}\n//           >\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default ProductList;","map":{"version":3,"names":[],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/admin/ProductList.jsx"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// // import \"./PriceList.css\"; // same CSS use kar sakte ho\r\n// import \"./ProductList.css\";\r\n\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// function ProductList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n\r\n//   const [searchText, setSearchText] = useState(\"\");\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 20;\r\n\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n//   // ---------------------- FETCH DATA ---------------------\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data.success) setItems(res.data.data);\r\n//     } catch (err) {\r\n//       console.log(\"Items fetch failed\", err);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) {\r\n//         setCategories(res.data.categories);\r\n//       }\r\n//     } catch (err) {\r\n//       console.log(\"Category fetch failed\", err);\r\n//     }\r\n//   };\r\n\r\n//   // ---------------------- HANDLE CATEGORY FILTER â†’ LOAD SUBS ---------------------\r\n//   useEffect(() => {\r\n//     if (!filterCategory) {\r\n//       setSubcategories([]);\r\n//       setFilterSubcategory(\"\");\r\n//       return;\r\n//     }\r\n\r\n//     const cat = categories.find((c) => c._id === filterCategory);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//     setFilterSubcategory(\"\");\r\n//   }, [filterCategory, categories]);\r\n\r\n//   // ---------------------- FILTERED LIST ---------------------\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = searchText.toLowerCase();\r\n\r\n//     const matchSearch =\r\n//       item.name.toLowerCase().includes(t) ||\r\n//       item.category?.name?.toLowerCase().includes(t) ||\r\n//       item.subcategory?.name?.toLowerCase().includes(t);\r\n\r\n//     const matchCategory =\r\n//       !filterCategory || item.category?._id === filterCategory;\r\n\r\n//     const matchSubcategory =\r\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//     return matchSearch && matchCategory && matchSubcategory;\r\n//   });\r\n\r\n//   // ---------------------- PAGINATION ---------------------\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const renderedItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\r\n\r\n//   return (\r\n//     <div className=\"price-container\">\r\n\r\n//       {/* ---------------- HEADER ---------------- */}\r\n//       <div className=\"header-section\">\r\n//         <h1>ðŸ“¦ Product List</h1>\r\n//         <p>View all products with sorting, search & category filters.</p>\r\n//       </div>\r\n\r\n//       {/* ---------------- FILTER BAR ---------------- */}\r\n//       <div className=\"filter-bar\">\r\n\r\n//         {/* SEARCH */}\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product, category or subcategory...\"\r\n//           value={searchText}\r\n//           onChange={(e) => {\r\n//             setCurrentPage(1);\r\n//             setSearchText(e.target.value);\r\n//           }}\r\n//         />\r\n\r\n//         {/* CATEGORY FILTER */}\r\n//         <select\r\n//           value={filterCategory}\r\n//           onChange={(e) => {\r\n//             setFilterCategory(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//         >\r\n//           <option value=\"\">All Categories</option>\r\n//           {categories.map((c) => (\r\n//             <option key={c._id} value={c._id}>\r\n//               {c.name}\r\n//             </option>\r\n//           ))}\r\n//         </select>\r\n\r\n//         {/* SUBCATEGORY FILTER */}\r\n//         <select\r\n//           value={filterSubcategory}\r\n//           disabled={!subcategories.length}\r\n//           onChange={(e) => {\r\n//             setFilterSubcategory(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//         >\r\n//           <option value=\"\">All Subcategories</option>\r\n//           {subcategories.map((s) => (\r\n//             <option key={s._id} value={s._id}>\r\n//               {s.name}\r\n//             </option>\r\n//           ))}\r\n//         </select>\r\n\r\n//       </div>\r\n\r\n//       {/* ---------------- LIST TABLE ---------------- */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>ðŸ“‹ Items</h2>\r\n//           <span>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         {/* DESKTOP TABLE */}\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>Sr</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 {/* <th>Category</th>\r\n//                 <th>Subcategory</th> */}\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 {/* <th>Valid Till</th> */}\r\n                \r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {renderedItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td>\r\n//                     {item.image ? (\r\n//                       <img src={item.image} alt=\"img\" />\r\n//                     ) : (\r\n//                       \"No Img\"\r\n//                     )}\r\n//                   </td>\r\n\r\n//                   <td>{item.name}</td>\r\n// {/* \r\n//                   <td>{item.category?.name}</td>\r\n\r\n//                   <td>{item.subcategory?.name || \"-\"}</td> */}\r\n\r\n//                   <td>â‚¹{item.basePrice}</td>\r\n\r\n//                   <td>{item.difference || 0}</td>\r\n\r\n//                   <td>â‚¹{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n//                   {/* <td>\r\n//                     {item.validTill\r\n//                       ? new Date(item.validTill).toLocaleDateString()\r\n//                       : \"-\"}\r\n//                   </td> */}\r\n\r\n//                   {/* <td>\r\n//                     {item.status === \"active\" ? (\r\n//                       <span className=\"status-active\">ðŸŸ¢ Active</span>\r\n//                     ) : (\r\n//                       <span className=\"status-inactive\">ðŸ”´ Inactive</span>\r\n//                     )}\r\n//                   </td> */}\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           /* ---------------- MOBILE CARD VIEW ---------------- */\r\n//           <div className=\"mobile-list\">\r\n//             {renderedItems.map((item) => (\r\n//               <div key={item._id} className=\"mobile-card\">\r\n//                 {item.image ? (\r\n//                   <img src={item.image} alt=\"img\" />\r\n//                 ) : (\r\n//                   <div>No Image</div>\r\n//                 )}\r\n\r\n//                 <h3>{item.name}</h3>\r\n\r\n//                 {/* <p><b>Category:</b> {item.category?.name}</p>\r\n//                 <p><b>Subcategory:</b> {item.subcategory?.name || \"-\"}</p> */}\r\n//                 <p><b>Base:</b> â‚¹{item.basePrice}</p>\r\n//                 <p><b>Difference:</b> â‚¹{item.difference || 0}</p>\r\n//                 <p><b>Final:</b> â‚¹{Number(item.basePrice) + Number(item.difference || 0)}</p>\r\n\r\n//                 {/* <p className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}>\r\n//                   {item.status === \"active\" ? \"ðŸŸ¢ Active\" : \"ðŸ”´ Inactive\"}\r\n//                 </p> */}\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* ---------------- PAGINATION ---------------- */}\r\n//         <div className=\"pagination\">\r\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }).map((_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               className={currentPage === i + 1 ? \"active-page\" : \"\"}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button\r\n//             disabled={currentPage === totalPages}\r\n//             onClick={() => setCurrentPage((p) => p + 1)}\r\n//           >\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default ProductList;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}