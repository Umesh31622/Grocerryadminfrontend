{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\n\n// NEW BACKEND URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // FORM for Add/Edit\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    profitLoss: \"\",\n    // UPDATED FIELD (instead of difference)\n    validTill: \"\",\n    file: null,\n    status: \"inactive\"\n  });\n  const [editId, setEditId] = useState(null);\n  const [isCopyMode, setIsCopyMode] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [bulkMode, setBulkMode] = useState(false);\n  const [csvFile, setCsvFile] = useState(null);\n  const csvInputRef = useRef();\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n  const [filterCategory, setFilterCategory] = useState(\"\");\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n  const [filterSubs, setFilterSubs] = useState([]);\n\n  // NEW — Quick Edit Base & ProfitLoss\n  const [quickEdit, setQuickEdit] = useState({});\n\n  // NORMALIZE ITEM ACCORDING TO NEW BACKEND FIELDS\n  const normalizeItem = item => {\n    var _item$basePrice, _item$profitLoss, _item$salePrice, _item$lockedPrice, _item$yesterdayLock, _item$brokerDisplay;\n    return {\n      ...item,\n      basePrice: Number((_item$basePrice = item.basePrice) !== null && _item$basePrice !== void 0 ? _item$basePrice : 0),\n      profitLoss: Number((_item$profitLoss = item.profitLoss) !== null && _item$profitLoss !== void 0 ? _item$profitLoss : 0),\n      salePrice: Number((_item$salePrice = item.salePrice) !== null && _item$salePrice !== void 0 ? _item$salePrice : 0),\n      lockedPrice: Number((_item$lockedPrice = item.lockedPrice) !== null && _item$lockedPrice !== void 0 ? _item$lockedPrice : 0),\n      yesterdayLock: Number((_item$yesterdayLock = item.yesterdayLock) !== null && _item$yesterdayLock !== void 0 ? _item$yesterdayLock : 0),\n      brokerDisplay: Number((_item$brokerDisplay = item.brokerDisplay) !== null && _item$brokerDisplay !== void 0 ? _item$brokerDisplay : 0)\n    };\n  };\n\n  // FETCH CATEGORIES\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n  const fetchCategories = async () => {\n    try {\n      const res = await axios.get(CATEGORY_URL);\n      if (res.data.success) setCategories(res.data.categories || []);\n    } catch (err) {\n      alert(\"Categories load error\");\n    }\n  };\n\n  // FETCH ITEMS\n  useEffect(() => {\n    if (categories.length > 0) fetchItems();\n  }, [categories]);\n  const fetchItems = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      if (res.data.success) {\n        const data = res.data.data.map(x => normalizeItem(x));\n        setItems(data);\n      }\n    } catch (err) {\n      alert(\"Error loading items\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // FORM INPUT CHANGE\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (files !== null && files !== void 0 && files.length) {\n      setForm(p => ({\n        ...p,\n        file: files[0]\n      }));\n    } else {\n      setForm(p => ({\n        ...p,\n        [name]: value\n      }));\n    }\n  };\n\n  // SUBMIT (ADD/EDIT)\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!form.name || !form.category || !form.basePrice) {\n      alert(\"Name, category, base price required\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const fd = new FormData();\n      Object.keys(form).forEach(k => {\n        if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\n      });\n      let res;\n      if (isCopyMode) {\n        res = await axios.post(API_URL, fd);\n      } else if (editId) {\n        res = await axios.put(`${API_URL}/${editId}`, fd);\n      } else {\n        res = await axios.post(API_URL, fd);\n      }\n      if (res.data.success) {\n        fetchItems();\n        resetForm();\n        setShowForm(false);\n        setShowModal(false);\n      }\n    } catch (err) {\n      alert(\"Save failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetForm = () => {\n    setForm({\n      name: \"\",\n      category: \"\",\n      subcategory: \"\",\n      description: \"\",\n      basePrice: \"\",\n      profitLoss: \"\",\n      validTill: \"\",\n      file: null,\n      status: \"inactive\"\n    });\n    setEditId(null);\n    setIsCopyMode(false);\n  };\n\n  // EDIT ITEM\n  const handleEdit = item => {\n    var _item$category, _item$subcategory;\n    setForm({\n      name: item.name,\n      category: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category._id) || \"\",\n      subcategory: ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : _item$subcategory._id) || \"\",\n      description: item.description,\n      basePrice: item.basePrice,\n      profitLoss: item.profitLoss,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null,\n      status: item.status\n    });\n    setEditId(item._id);\n    setIsCopyMode(false);\n    setShowModal(true);\n  };\n\n  // COPY ITEM\n  const handleCopyToEdit = item => {\n    var _item$category2, _item$subcategory2;\n    setForm({\n      name: item.name,\n      category: ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2._id) || \"\",\n      subcategory: ((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : _item$subcategory2._id) || \"\",\n      description: item.description,\n      basePrice: item.basePrice,\n      profitLoss: item.profitLoss,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null,\n      status: item.status\n    });\n    setEditId(null);\n    setIsCopyMode(true);\n    setShowModal(true);\n  };\n\n  // DELETE ONE\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete item?\")) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`);\n      fetchItems();\n    } catch (err) {\n      alert(\"Delete error\");\n    }\n  };\n\n  // STATUS TOGGLE\n  const handleStatusToggle = async item => {\n    try {\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n      await axios.put(`${API_URL}/status/${item._id}`, {\n        status: newStatus\n      });\n      fetchItems();\n    } catch (err) {\n      alert(\"Status error\");\n    }\n  };\n\n  // QUICK DIFF → update profitLoss\n\n  // ------------------ CSV import/export ------------------\n  const handleCsvSelect = e => {\n    setCsvFile(e.target.files[0]);\n  };\n  const handleImportCsv = async () => {\n    if (!csvFile) return alert(\"Select CSV file\");\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", csvFile);\n      const res = await axios.post(`${API_URL}/import`, fd);\n      if (res.data && res.data.success) {\n        alert(`Imported ${res.data.inserted || 0} items`);\n        setCsvFile(null);\n        if (csvInputRef.current) csvInputRef.current.value = null;\n        fetchItems();\n      } else {\n        alert(\"CSV import failed\");\n      }\n    } catch (err) {\n      console.error(\"CSV import error\", err);\n      alert(\"CSV import failed\");\n    }\n  };\n  const handleExportCsv = () => {\n    if (!items.length) return alert(\"No items to export\");\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"profitLoss\", \"salePrice\", \"lockedPrice\", \"yesterdayLock\", \"brokerDisplay\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = items.map(p => {\n      var _p$category, _p$subcategory, _p$basePrice, _p$profitLoss, _p$salePrice, _p$lockedPrice, _p$yesterdayLock, _p$brokerDisplay;\n      return [p._id, p.name || \"\", ((_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category.name) || \"\", ((_p$subcategory = p.subcategory) === null || _p$subcategory === void 0 ? void 0 : _p$subcategory.name) || \"\", (_p$basePrice = p.basePrice) !== null && _p$basePrice !== void 0 ? _p$basePrice : \"\", (_p$profitLoss = p.profitLoss) !== null && _p$profitLoss !== void 0 ? _p$profitLoss : \"\", (_p$salePrice = p.salePrice) !== null && _p$salePrice !== void 0 ? _p$salePrice : \"\", (_p$lockedPrice = p.lockedPrice) !== null && _p$lockedPrice !== void 0 ? _p$lockedPrice : \"\", (_p$yesterdayLock = p.yesterdayLock) !== null && _p$yesterdayLock !== void 0 ? _p$yesterdayLock : \"\", (_p$brokerDisplay = p.brokerDisplay) !== null && _p$brokerDisplay !== void 0 ? _p$brokerDisplay : \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n    });\n    const csvArray = [header, ...rows];\n    const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.href = encodedUri;\n    link.download = `all_prices_${Date.now()}.csv`;\n    link.click();\n  };\n  const handleExportSelectedCsv = () => {\n    if (!selectedItems.length) return alert(\"Select items to export\");\n    const selectedData = items.filter(x => selectedItems.includes(x._id));\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"profitLoss\", \"salePrice\", \"lockedPrice\", \"yesterdayLock\", \"brokerDisplay\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = selectedData.map(p => {\n      var _p$category2, _p$subcategory2, _p$basePrice2, _p$profitLoss2, _p$salePrice2, _p$lockedPrice2, _p$yesterdayLock2, _p$brokerDisplay2;\n      return [p._id, p.name || \"\", ((_p$category2 = p.category) === null || _p$category2 === void 0 ? void 0 : _p$category2.name) || \"\", ((_p$subcategory2 = p.subcategory) === null || _p$subcategory2 === void 0 ? void 0 : _p$subcategory2.name) || \"\", (_p$basePrice2 = p.basePrice) !== null && _p$basePrice2 !== void 0 ? _p$basePrice2 : \"\", (_p$profitLoss2 = p.profitLoss) !== null && _p$profitLoss2 !== void 0 ? _p$profitLoss2 : \"\", (_p$salePrice2 = p.salePrice) !== null && _p$salePrice2 !== void 0 ? _p$salePrice2 : \"\", (_p$lockedPrice2 = p.lockedPrice) !== null && _p$lockedPrice2 !== void 0 ? _p$lockedPrice2 : \"\", (_p$yesterdayLock2 = p.yesterdayLock) !== null && _p$yesterdayLock2 !== void 0 ? _p$yesterdayLock2 : \"\", (_p$brokerDisplay2 = p.brokerDisplay) !== null && _p$brokerDisplay2 !== void 0 ? _p$brokerDisplay2 : \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n    });\n    const csvArray = [header, ...rows];\n    const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.href = encodedUri;\n    link.download = `selected_prices_${Date.now()}.csv`;\n    link.click();\n  };\n\n  // ------------------ Bulk delete / save ------------------\n  const handleBulkDelete = async () => {\n    if (!selectedItems.length) return alert(\"No items selected\");\n    if (!window.confirm(\"Delete selected items?\")) return;\n    try {\n      await axios.post(`${API_URL}/delete-selected`, {\n        ids: selectedItems\n      });\n      setSelectedItems([]);\n      fetchItems();\n      setBulkMode(false);\n    } catch (err) {\n      console.error(\"Bulk delete error\", err);\n      alert(\"Bulk delete failed\");\n    }\n  };\n  const handleBulkSave = async () => {\n    if (!selectedItems.length) return alert(\"No items selected\");\n\n    // Prepare updates from local items state\n    const updates = items.filter(x => selectedItems.includes(x._id)).map(x => {\n      var _x$category, _x$subcategory;\n      return {\n        id: x._id,\n        basePrice: Number(x.basePrice),\n        profitLoss: Number(x.profitLoss),\n        status: x.status,\n        validTill: x.validTill || null,\n        name: x.name,\n        category: ((_x$category = x.category) === null || _x$category === void 0 ? void 0 : _x$category._id) || \"\",\n        subcategory: ((_x$subcategory = x.subcategory) === null || _x$subcategory === void 0 ? void 0 : _x$subcategory._id) || \"\"\n      };\n    });\n    try {\n      const res = await axios.post(`${API_URL}/bulk-update`, {\n        products: updates\n      });\n      if (res.data.success) {\n        alert(\"Bulk Updated\");\n        setBulkMode(false);\n        setSelectedItems([]);\n        fetchItems();\n      } else {\n        alert(\"Bulk update failed\");\n      }\n    } catch (err) {\n      console.error(\"Bulk update error\", err);\n      alert(\"Bulk update failed\");\n    }\n  };\n\n  // ------------------ Filtering / Pagination ------------------\n  const filteredItems = items.filter(item => {\n    var _item$category3, _item$subcategory3, _item$category4, _item$subcategory4, _item$subcategory5, _filterSubs$find;\n    const t = search.toLowerCase();\n    const matchText = (item.name || \"\").toLowerCase().includes(t) || (((_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : _item$category3.name) || \"\").toLowerCase().includes(t) || (((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : _item$subcategory3.name) || \"\").toLowerCase().includes(t);\n    const matchCategory = !filterCategory || String((_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : _item$category4._id) === String(filterCategory);\n    const matchSub = !filterSubcategory || String(((_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4._id) || \"\") === String(filterSubcategory) || String(((_item$subcategory5 = item.subcategory) === null || _item$subcategory5 === void 0 ? void 0 : _item$subcategory5.name) || \"\").toLowerCase() === String(((_filterSubs$find = filterSubs.find(s => s._id === filterSubcategory)) === null || _filterSubs$find === void 0 ? void 0 : _filterSubs$find.name) || \"\").toLowerCase();\n    return matchText && matchCategory && matchSub;\n  });\n  const indexOfLast = currentPage * itemsPerPage;\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n  const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n  const getFinalPrice = item => {\n    var _ref, _item$salePrice2;\n    // salePrice is authoritative\n    return Number((_ref = (_item$salePrice2 = item.salePrice) !== null && _item$salePrice2 !== void 0 ? _item$salePrice2 : item.basePrice) !== null && _ref !== void 0 ? _ref : 0);\n  };\n\n  // ------------------ Render ------------------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.header,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.title,\n        children: \"Product Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 10,\n        alignItems: \"center\",\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search product, category or subcategory...\",\n        value: search,\n        onChange: e => {\n          setSearch(e.target.value);\n          setCurrentPage(1);\n        },\n        style: styles.searchInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.addButton,\n        onClick: () => {\n          setShowForm(v => !v);\n          resetForm();\n          setShowModal(false);\n        },\n        children: showForm ? \"✖ Close\" : \"➕ Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: \"auto\",\n          display: \"flex\",\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: csvInputRef,\n          type: \"file\",\n          accept: \".csv\",\n          onChange: handleCsvSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.csvBtn,\n          onClick: handleImportCsv,\n          children: \"Import CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.csvBtn,\n          onClick: handleExportSelectedCsv,\n          children: \"Export Selected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.csvBtnPrimary,\n          onClick: handleExportCsv,\n          children: \"Export All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.bulkBar,\n      children: !bulkMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnDelete,\n          onClick: handleBulkDelete,\n          children: \"\\uD83D\\uDDD1 Bulk Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnPrimary,\n          onClick: () => setBulkMode(true),\n          children: \"\\u270F Bulk Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.bulkPanel,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: styles.bulkPanelTitle,\n          children: \"\\u270F Bulk Edit Selected Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 15\n        }, this), items.filter(item => selectedItems.includes(item._id)).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.bulkItemBox,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: styles.bulkItemTitle,\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGrid,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: item.name,\n                onChange: e => updateLocalItemField(item._id, \"name\", e.target.value),\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Base Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: item.basePrice,\n                onChange: e => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value)),\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Profit/Loss\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: item.profitLoss,\n                onChange: e => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value)),\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: item.status,\n                onChange: e => updateLocalItemField(item._id, \"status\", e.target.value),\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"active\",\n                  children: \"active\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 503,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"inactive\",\n                  children: \"inactive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 21\n          }, this)]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 19\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 10,\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnPrimary,\n            onClick: handleBulkSave,\n            children: \"\\u2714 Save All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnCancel,\n            onClick: () => setBulkMode(false),\n            children: \"\\u2716 Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.formCard,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.formTitle,\n        children: \" Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGrid,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              name: \"name\",\n              value: form.name,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              required: true,\n              name: \"category\",\n              value: form.category,\n              onChange: e => {\n                handleChange(e);\n                setForm(p => ({\n                  ...p,\n                  subcategory: \"\"\n                }));\n              },\n              style: styles.select,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 19\n              }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c._id,\n                children: c.name\n              }, c._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 43\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"subcategory\",\n              value: form.subcategory,\n              onChange: handleChange,\n              disabled: !subcategories.length,\n              style: styles.select,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 19\n              }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: s._id,\n                children: s.name\n              }, s._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 46\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Base Price *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              required: true,\n              name: \"basePrice\",\n              value: form.basePrice,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Profit / Loss\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"profitLoss\",\n              value: form.profitLoss,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleChange,\n              style: styles.fileInput\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: styles.label,\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange,\n            style: styles.textarea\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formActions,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnPrimary,\n            disabled: loading,\n            children: loading ? \"Saving...\" : editId ? isCopyMode ? \"Save Copy\" : \"Update Product\" : \"Add Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            style: styles.btnCancel,\n            onClick: () => {\n              setShowForm(false);\n              resetForm();\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.tableCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.tableHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.tableTitle,\n          children: \"Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.totalCount,\n          children: [\"Total: \", filteredItems.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.tableWrapper,\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          style: styles.table,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedItems.length === filteredItems.length && filteredItems.length > 0,\n                  onChange: () => {\n                    if (selectedItems.length === filteredItems.length) setSelectedItems([]);else setSelectedItems(filteredItems.map(x => x._id));\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Sr\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Profit / Loss\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Sale Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Locked Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Tejji/Maddi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 615,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: currentItems.map((item, i) => {\n              var _item$category5, _item$subcategory6, _item$lockedPrice2;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: styles.tr,\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedItems.includes(item._id),\n                    onChange: () => setSelectedItems(prev => prev.includes(item._id) ? prev.filter(x => x !== item._id) : [...prev, item._id])\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 628,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: (currentPage - 1) * itemsPerPage + (i + 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 637,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.image,\n                    style: styles.tableImg,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 639,\n                    columnNumber: 55\n                  }, this) : \"No Img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: ((_item$category5 = item.category) === null || _item$category5 === void 0 ? void 0 : _item$category5.name) || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: ((_item$subcategory6 = item.subcategory) === null || _item$subcategory6 === void 0 ? void 0 : _item$subcategory6.name) || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: \"flex\",\n                      gap: 8,\n                      alignItems: \"center\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      value: quickEdit[item._id] !== undefined ? quickEdit[item._id] : item.basePrice,\n                      onChange: e => setQuickEdit(p => ({\n                        ...p,\n                        [item._id]: e.target.value\n                      })),\n                      style: {\n                        ...styles.input,\n                        padding: \"6px 8px\",\n                        width: 90\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 647,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.btnSmall,\n                      onClick: () => applyQuickBase(item),\n                      children: \"\\u2714\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 653,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 646,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    style: {\n                      display: \"block\",\n                      color: \"#2b8d28\",\n                      marginTop: 4\n                    },\n                    children: [\"Saved: \\u20B9\", item.basePrice]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 655,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    value: item.profitLoss,\n                    onChange: e => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value)),\n                    style: {\n                      ...styles.input,\n                      width: 90\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [\"\\u20B9\", getFinalPrice(item).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [\"\\u20B9\", (_item$lockedPrice2 = item.lockedPrice) === null || _item$lockedPrice2 === void 0 ? void 0 : _item$lockedPrice2.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.brokerDisplay !== undefined ? item.brokerDisplay.toFixed(2) : \"0.00\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: item.status === \"active\" ? styles.statusActive : styles.statusInactive,\n                    onClick: () => handleStatusToggle(item),\n                    children: item.status === \"active\" ? \"Active\" : \"Inactive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 675,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: \"flex\",\n                      gap: 6\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.btnSmall,\n                      onClick: () => handleEdit(item),\n                      children: \"\\u270F Edit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 684,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.btnSmall,\n                      onClick: () => handleCopyToEdit(item),\n                      children: \"\\uD83D\\uDCC4 Copy\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 685,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.btnDelete,\n                      onClick: () => handleDelete(item._id),\n                      children: \"\\uD83D\\uDDD1 Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 686,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 683,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 682,\n                  columnNumber: 19\n                }, this)]\n              }, item._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.pagination,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.paginationBtn,\n          disabled: currentPage === 1,\n          onClick: () => setCurrentPage(p => p - 1),\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 11\n        }, this), Array.from({\n          length: totalPages\n        }, (_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n          style: i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn,\n          onClick: () => setCurrentPage(i + 1),\n          children: i + 1\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.paginationBtn,\n          disabled: currentPage === totalPages,\n          onClick: () => setCurrentPage(p => p + 1),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 433,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------------------- Helper: updateLocalItemField ---------------------- */\n_s(PriceList, \"5gXKtAVvGnY+uivoeL7VFVeodng=\");\n_c = PriceList;\nfunction updateLocalItemField(id, key, value) {\n  // This function will be hoisted to window scope if defined outside; to keep inside component,\n  // we defined it by referencing state updater in part1. But since we are sending single-file component,\n  // ensure this helper exists in the top of the file. If you paste both parts in same file, replace this with\n  // the inline version used earlier:\n  // setItems(prev => prev.map(x => x._id === id ? { ...x, [key]: value } : x));\n  // For safety, we attach to window to fallback:\n  if (typeof window.__updateLocal === \"function\") {\n    window.__updateLocal(id, key, value);\n  } else {\n    console.warn(\"updateLocalItemField helper missing — please ensure you paste PART 1 then PART 2 in same file so the internal updater is available.\");\n  }\n}\n\n/* ---------------------- Styles ---------------------- */\nconst styles = {\n  container: {\n    padding: 16\n  },\n  header: {\n    marginBottom: 6\n  },\n  title: {\n    fontSize: \"21px\",\n    fontWeight: 700,\n    color: \"#161718\",\n    marginBottom: 6\n  },\n  searchInput: {\n    width: 320,\n    padding: \"10px 12px\",\n    borderRadius: 10,\n    border: \"1px solid #ced4da\",\n    background: \"#f9fbfc\",\n    fontSize: 14,\n    outline: \"none\"\n  },\n  addButton: {\n    marginLeft: 12,\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 10,\n    padding: \"10px 14px\",\n    fontSize: 14,\n    cursor: \"pointer\"\n  },\n  csvBtn: {\n    background: \"#6c8ffc\",\n    color: \"#fff\",\n    padding: \"6px 10px\",\n    borderRadius: 6,\n    border: \"none\",\n    fontSize: 12,\n    cursor: \"pointer\"\n  },\n  csvBtnPrimary: {\n    background: \"#3b6ef6\",\n    color: \"#fff\",\n    padding: \"6px 10px\",\n    borderRadius: 6,\n    border: \"none\",\n    fontSize: 12,\n    cursor: \"pointer\"\n  },\n  bulkBar: {\n    background: \"#e9f2ff\",\n    border: \"1px solid #c4d9ff\",\n    borderRadius: 10,\n    padding: 12,\n    marginBottom: 12\n  },\n  bulkPanel: {\n    width: \"100%\",\n    background: \"#f7faff\",\n    border: \"1px solid #cfe2ff\",\n    padding: 12,\n    borderRadius: 10\n  },\n  bulkPanelTitle: {\n    textAlign: \"center\",\n    fontSize: 16,\n    fontWeight: 700,\n    marginBottom: 10\n  },\n  bulkItemBox: {\n    background: \"#fff\",\n    border: \"1px solid #dbe5f5\",\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 10\n  },\n  bulkItemTitle: {\n    fontSize: 14,\n    fontWeight: 600,\n    marginBottom: 8\n  },\n  formCard: {\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 18,\n    background: \"#fff\",\n    border: \"1px solid #eef2f7\"\n  },\n  formTitle: {\n    fontSize: 18,\n    fontWeight: 700,\n    marginBottom: 10\n  },\n  formGrid: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\n    gap: 12\n  },\n  formGroup: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: 6\n  },\n  label: {\n    fontWeight: 600,\n    fontSize: 13,\n    color: \"#233142\"\n  },\n  input: {\n    padding: 8,\n    borderRadius: 8,\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    fontSize: 13\n  },\n  select: {\n    padding: 8,\n    borderRadius: 8,\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    fontSize: 13\n  },\n  textarea: {\n    padding: 8,\n    borderRadius: 8,\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    minHeight: 80\n  },\n  fileInput: {\n    padding: 6\n  },\n  formActions: {\n    marginTop: 10,\n    display: \"flex\",\n    gap: 8\n  },\n  btnPrimary: {\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 8,\n    padding: \"8px 12px\",\n    cursor: \"pointer\"\n  },\n  btnSmall: {\n    background: \"#43a047\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 8,\n    padding: \"6px 10px\",\n    cursor: \"pointer\"\n  },\n  btnDelete: {\n    background: \"#e63946\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 8,\n    padding: \"6px 10px\",\n    cursor: \"pointer\"\n  },\n  btnCancel: {\n    background: \"#adb5bd\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: 8,\n    padding: \"8px 12px\",\n    cursor: \"pointer\"\n  },\n  tableCard: {\n    marginTop: 12\n  },\n  tableHeader: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: 8\n  },\n  tableTitle: {\n    fontSize: 18,\n    fontWeight: 700\n  },\n  totalCount: {\n    fontSize: 13,\n    color: \"#6c757d\",\n    fontWeight: 600\n  },\n  tableWrapper: {\n    overflowX: \"auto\"\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    fontSize: 14\n  },\n  th: {\n    background: \"#e9f2ff\",\n    padding: \"10px\",\n    fontWeight: 700,\n    color: \"#0d3b66\",\n    textAlign: \"left\"\n  },\n  tr: {\n    borderBottom: \"1px solid #edf2f7\"\n  },\n  td: {\n    padding: \"10px\",\n    whiteSpace: \"nowrap\",\n    verticalAlign: \"middle\"\n  },\n  tableImg: {\n    width: 55,\n    height: 55,\n    borderRadius: 6,\n    objectFit: \"cover\"\n  },\n  statusActive: {\n    background: \"#93d8ba\",\n    padding: \"6px 10px\",\n    borderRadius: 8,\n    color: \"black\",\n    fontWeight: 600,\n    border: \"none\",\n    cursor: \"pointer\"\n  },\n  statusInactive: {\n    background: \"#d9b1b1\",\n    padding: \"6px 10px\",\n    borderRadius: 8,\n    color: \"black\",\n    fontWeight: 600,\n    border: \"none\",\n    cursor: \"pointer\"\n  },\n  pagination: {\n    marginTop: 12,\n    display: \"flex\",\n    justifyContent: \"center\",\n    gap: 8\n  },\n  paginationBtn: {\n    padding: \"8px 10px\",\n    borderRadius: 8,\n    background: \"#fff\",\n    border: \"1px solid #ddd\",\n    cursor: \"pointer\"\n  },\n  paginationBtnActive: {\n    padding: \"8px 10px\",\n    borderRadius: 8,\n    background: \"#007bff\",\n    color: \"white\",\n    border: \"1px solid #0062cc\",\n    cursor: \"pointer\"\n  }\n};\n// PART 2 - PriceList.jsx (MIDDLE: TABLE + CARDS + menu UI)\n// CSV helpers\nconst handleCsvSelect = e => setCsvFile(e.target.files[0]);\nconst handleImportCsv = async () => {\n  if (!csvFile) return alert(\"Select CSV\");\n  try {\n    const fd = new FormData();\n    fd.append(\"file\", csvFile);\n    const res = await axios.post(`${API_URL}/import`, fd);\n    if (res.data && res.data.success) {\n      alert(`Imported ${res.data.inserted || 0}`);\n      setCsvFile(null);\n      if (csvInputRef.current) csvInputRef.current.value = null;\n      fetchItems();\n    } else alert(\"Import failed\");\n  } catch (err) {\n    console.error(\"importCSV\", err);\n    alert(\"Import failed\");\n  }\n};\nconst handleExportCsv = () => {\n  if (!items.length) return alert(\"No items\");\n  const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"profitLoss\", \"salePrice\", \"lockedPrice\", \"brokerDisplay\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n  const rows = items.map(p => {\n    var _p$category3, _p$subcategory3;\n    return [p._id, p.name || \"\", ((_p$category3 = p.category) === null || _p$category3 === void 0 ? void 0 : _p$category3.name) || \"\", ((_p$subcategory3 = p.subcategory) === null || _p$subcategory3 === void 0 ? void 0 : _p$subcategory3.name) || \"\", p.basePrice || \"\", p.profitLoss || \"\", p.salePrice || \"\", p.lockedPrice || \"\", p.brokerDisplay || \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n  });\n  const csvArray = [header, ...rows];\n  const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n  const encodedUri = encodeURI(csvContent);\n  const a = document.createElement(\"a\");\n  a.href = encodedUri;\n  a.download = `prices_${Date.now()}.csv`;\n  a.click();\n};\nconst handleExportSelectedCsv = () => {\n  if (!selectedItems.length) return alert(\"Select items\");\n  const selected = items.filter(x => selectedItems.includes(x._id));\n  const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"profitLoss\", \"salePrice\", \"lockedPrice\", \"brokerDisplay\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n  const rows = selected.map(p => {\n    var _p$category4, _p$subcategory4;\n    return [p._id, p.name || \"\", ((_p$category4 = p.category) === null || _p$category4 === void 0 ? void 0 : _p$category4.name) || \"\", ((_p$subcategory4 = p.subcategory) === null || _p$subcategory4 === void 0 ? void 0 : _p$subcategory4.name) || \"\", p.basePrice || \"\", p.profitLoss || \"\", p.salePrice || \"\", p.lockedPrice || \"\", p.brokerDisplay || \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n  });\n  const csvArray = [header, ...rows];\n  const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n  const encodedUri = encodeURI(csvContent);\n  const a = document.createElement(\"a\");\n  a.href = encodedUri;\n  a.download = `selected_prices_${Date.now()}.csv`;\n  a.click();\n};\n\n// Bulk operations\nconst handleBulkDelete = async () => {\n  if (!selectedItems.length) return alert(\"No items selected\");\n  if (!window.confirm(\"Delete selected?\")) return;\n  try {\n    await axios.post(`${API_URL}/delete-selected`, {\n      ids: selectedItems\n    });\n    setSelectedItems([]);\n    fetchItems();\n    setBulkMode(false);\n  } catch (err) {\n    console.error(\"bulk delete\", err);\n    alert(\"Bulk delete failed\");\n  }\n};\nconst handleBulkSave = async () => {\n  if (!selectedItems.length) return alert(\"No items selected\");\n  const updates = items.filter(x => selectedItems.includes(x._id)).map(x => {\n    var _x$category2, _x$subcategory2;\n    return {\n      id: x._id,\n      basePrice: Number(x.basePrice),\n      profitLoss: Number(x.profitLoss),\n      status: x.status,\n      validTill: x.validTill || null,\n      name: x.name,\n      category: ((_x$category2 = x.category) === null || _x$category2 === void 0 ? void 0 : _x$category2._id) || \"\",\n      subcategory: ((_x$subcategory2 = x.subcategory) === null || _x$subcategory2 === void 0 ? void 0 : _x$subcategory2._id) || \"\"\n    };\n  });\n  try {\n    const res = await axios.post(`${API_URL}/bulk-update`, {\n      products: updates\n    });\n    if (res.data && res.data.success) {\n      alert(\"Bulk updated\");\n      setSelectedItems([]);\n      setBulkMode(false);\n      fetchItems();\n    } else alert(\"Bulk update failed\");\n  } catch (err) {\n    console.error(\"bulk save\", err);\n    alert(\"Bulk update failed\");\n  }\n};\n\n// quick base update per-row (apply Quick Edit base)\nconst applyQuickBase = async item => {\n  const newBase = Number(quickEdit[item._id]);\n  if (isNaN(newBase)) return alert(\"Invalid base\");\n  try {\n    var _item$profitLoss2;\n    setLoading(true);\n    const fd = new FormData();\n    fd.append(\"basePrice\", newBase);\n    fd.append(\"profitLoss\", (_item$profitLoss2 = item.profitLoss) !== null && _item$profitLoss2 !== void 0 ? _item$profitLoss2 : 0);\n    const res = await axios.put(`${API_URL}/${item._id}`, fd);\n    if (res.data && res.data.success) {\n      fetchItems();\n      setQuickEdit(p => ({\n        ...p,\n        [item._id]: newBase\n      }));\n    } else alert(\"Base update failed\");\n  } catch (err) {\n    console.error(\"applyQuickBase\", err);\n    alert(\"Base update failed\");\n  } finally {\n    setLoading(false);\n  }\n};\n\n// Filtering / pagination derived values\nconst filteredItems = items.filter(item => {\n  var _item$category6, _item$subcategory7, _item$category7, _item$subcategory8;\n  const t = search.toLowerCase();\n  const matchText = (item.name || \"\").toLowerCase().includes(t) || (((_item$category6 = item.category) === null || _item$category6 === void 0 ? void 0 : _item$category6.name) || \"\").toLowerCase().includes(t) || (((_item$subcategory7 = item.subcategory) === null || _item$subcategory7 === void 0 ? void 0 : _item$subcategory7.name) || \"\").toLowerCase().includes(t);\n  const matchCategory = !filterCategory || String((_item$category7 = item.category) === null || _item$category7 === void 0 ? void 0 : _item$category7._id) === String(filterCategory);\n  const matchSub = !filterSubcategory || String(((_item$subcategory8 = item.subcategory) === null || _item$subcategory8 === void 0 ? void 0 : _item$subcategory8._id) || \"\") === String(filterSubcategory);\n  return matchText && matchCategory && matchSub;\n});\nconst indexOfLast = currentPage * itemsPerPage;\nconst currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\nconst totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n// render helpers: Tejji/Maddi value\nconst getBrokerDiff = item => {\n  var _item$yesterdayLock2, _ref2, _item$lockedPrice3;\n  const yesterday = (_item$yesterdayLock2 = item.yesterdayLock) !== null && _item$yesterdayLock2 !== void 0 ? _item$yesterdayLock2 : 0;\n  const today = (_ref2 = (_item$lockedPrice3 = item.lockedPrice) !== null && _item$lockedPrice3 !== void 0 ? _item$lockedPrice3 : item.salePrice) !== null && _ref2 !== void 0 ? _ref2 : 0;\n  // If yesterday is 0 and today is 0 -> show 0\n  return Number(today - yesterday);\n};\n\n// UI: 3-dots menu toggle\nconst toggleMenu = id => {\n  setActiveMenu(prev => prev === id ? null : id);\n};\n\n// Close dropdown when clicking outside\nuseEffect(() => {\n  const onDoc = e => {\n    // if click outside any menu, close\n    if (!e.target.closest) return;\n    const el = e.target.closest(\".price-row-menu\");\n    if (!el) setActiveMenu(null);\n  };\n  document.addEventListener(\"click\", onDoc);\n  return () => document.removeEventListener(\"click\", onDoc);\n}, []);\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsxDEV","_jsxDEV","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","profitLoss","validTill","file","status","editId","setEditId","isCopyMode","setIsCopyMode","showForm","setShowForm","showModal","setShowModal","selectedItems","setSelectedItems","bulkMode","setBulkMode","csvFile","setCsvFile","csvInputRef","currentPage","setCurrentPage","itemsPerPage","filterCategory","setFilterCategory","filterSubcategory","setFilterSubcategory","filterSubs","setFilterSubs","quickEdit","setQuickEdit","normalizeItem","item","_item$basePrice","_item$profitLoss","_item$salePrice","_item$lockedPrice","_item$yesterdayLock","_item$brokerDisplay","Number","salePrice","lockedPrice","yesterdayLock","brokerDisplay","fetchCategories","res","get","data","success","err","alert","length","fetchItems","map","x","handleChange","e","value","files","target","p","handleSubmit","preventDefault","fd","FormData","Object","keys","forEach","k","append","post","put","resetForm","handleEdit","_item$category","_item$subcategory","_id","split","handleCopyToEdit","_item$category2","_item$subcategory2","handleDelete","id","window","confirm","delete","handleStatusToggle","newStatus","handleCsvSelect","handleImportCsv","inserted","current","console","error","handleExportCsv","header","rows","_p$category","_p$subcategory","_p$basePrice","_p$profitLoss","_p$salePrice","_p$lockedPrice","_p$yesterdayLock","_p$brokerDisplay","Date","toISOString","image","csvArray","csvContent","r","c","String","replace","join","encodedUri","encodeURI","link","document","createElement","href","download","now","click","handleExportSelectedCsv","selectedData","filter","includes","_p$category2","_p$subcategory2","_p$basePrice2","_p$profitLoss2","_p$salePrice2","_p$lockedPrice2","_p$yesterdayLock2","_p$brokerDisplay2","handleBulkDelete","ids","handleBulkSave","updates","_x$category","_x$subcategory","products","filteredItems","_item$category3","_item$subcategory3","_item$category4","_item$subcategory4","_item$subcategory5","_filterSubs$find","t","toLowerCase","matchText","matchCategory","matchSub","find","s","indexOfLast","currentItems","slice","totalPages","Math","max","ceil","getFinalPrice","_ref","_item$salePrice2","style","styles","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","display","gap","alignItems","marginBottom","type","placeholder","onChange","searchInput","addButton","onClick","v","marginLeft","ref","accept","csvBtn","csvBtnPrimary","bulkBar","btnDelete","btnPrimary","bulkPanel","bulkPanelTitle","bulkItemBox","bulkItemTitle","formGrid","formGroup","label","updateLocalItemField","input","select","marginTop","btnCancel","formCard","formTitle","onSubmit","required","disabled","fileInput","textarea","formActions","tableCard","tableHeader","tableTitle","totalCount","tableWrapper","table","th","checked","i","_item$category5","_item$subcategory6","_item$lockedPrice2","tr","td","prev","src","tableImg","alt","undefined","padding","width","btnSmall","applyQuickBase","color","toFixed","statusActive","statusInactive","pagination","paginationBtn","Array","from","_","paginationBtnActive","_c","key","__updateLocal","warn","fontSize","fontWeight","borderRadius","border","background","outline","cursor","textAlign","gridTemplateColumns","flexDirection","minHeight","justifyContent","overflowX","borderCollapse","borderBottom","whiteSpace","verticalAlign","height","objectFit","_p$category3","_p$subcategory3","a","selected","_p$category4","_p$subcategory4","_x$category2","_x$subcategory2","newBase","isNaN","_item$profitLoss2","_item$category6","_item$subcategory7","_item$category7","_item$subcategory8","getBrokerDiff","_item$yesterdayLock2","_ref2","_item$lockedPrice3","yesterday","today","toggleMenu","setActiveMenu","onDoc","closest","el","addEventListener","removeEventListener","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\";\r\n\r\n// NEW BACKEND URL\r\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // FORM for Add/Edit\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    profitLoss: \"\",      // UPDATED FIELD (instead of difference)\r\n    validTill: \"\",\r\n    file: null,\r\n    status: \"inactive\",\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [isCopyMode, setIsCopyMode] = useState(false);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const csvInputRef = useRef();\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  const [filterCategory, setFilterCategory] = useState(\"\");\r\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n  const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n  // NEW — Quick Edit Base & ProfitLoss\r\n  const [quickEdit, setQuickEdit] = useState({});\r\n\r\n  // NORMALIZE ITEM ACCORDING TO NEW BACKEND FIELDS\r\n  const normalizeItem = (item) => {\r\n    return {\r\n      ...item,\r\n      basePrice: Number(item.basePrice ?? 0),\r\n      profitLoss: Number(item.profitLoss ?? 0),\r\n      salePrice: Number(item.salePrice ?? 0),\r\n      lockedPrice: Number(item.lockedPrice ?? 0),\r\n      yesterdayLock: Number(item.yesterdayLock ?? 0),\r\n      brokerDisplay: Number(item.brokerDisplay ?? 0),\r\n    };\r\n  };\r\n\r\n  // FETCH CATEGORIES\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data.success) setCategories(res.data.categories || []);\r\n    } catch (err) {\r\n      alert(\"Categories load error\");\r\n    }\r\n  };\r\n\r\n  // FETCH ITEMS\r\n  useEffect(() => {\r\n    if (categories.length > 0) fetchItems();\r\n  }, [categories]);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n\r\n      if (res.data.success) {\r\n        const data = res.data.data.map((x) => normalizeItem(x));\r\n        setItems(data);\r\n      }\r\n    } catch (err) {\r\n      alert(\"Error loading items\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // FORM INPUT CHANGE\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files?.length) {\r\n      setForm((p) => ({ ...p, file: files[0] }));\r\n    } else {\r\n      setForm((p) => ({ ...p, [name]: value }));\r\n    }\r\n  };\r\n\r\n  // SUBMIT (ADD/EDIT)\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!form.name || !form.category || !form.basePrice) {\r\n      alert(\"Name, category, base price required\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const fd = new FormData();\r\n\r\n      Object.keys(form).forEach((k) => {\r\n        if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\r\n      });\r\n\r\n      let res;\r\n\r\n      if (isCopyMode) {\r\n        res = await axios.post(API_URL, fd);\r\n      } else if (editId) {\r\n        res = await axios.put(`${API_URL}/${editId}`, fd);\r\n      } else {\r\n        res = await axios.post(API_URL, fd);\r\n      }\r\n\r\n      if (res.data.success) {\r\n        fetchItems();\r\n        resetForm();\r\n        setShowForm(false);\r\n        setShowModal(false);\r\n      }\r\n    } catch (err) {\r\n      alert(\"Save failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      category: \"\",\r\n      subcategory: \"\",\r\n      description: \"\",\r\n      basePrice: \"\",\r\n      profitLoss: \"\",\r\n      validTill: \"\",\r\n      file: null,\r\n      status: \"inactive\",\r\n    });\r\n    setEditId(null);\r\n    setIsCopyMode(false);\r\n  };\r\n\r\n  // EDIT ITEM\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name,\r\n      category: item.category?._id || \"\",\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description,\r\n      basePrice: item.basePrice,\r\n      profitLoss: item.profitLoss,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n      status: item.status,\r\n    });\r\n\r\n    setEditId(item._id);\r\n    setIsCopyMode(false);\r\n    setShowModal(true);\r\n  };\r\n\r\n  // COPY ITEM\r\n  const handleCopyToEdit = (item) => {\r\n    setForm({\r\n      name: item.name,\r\n      category: item.category?._id || \"\",\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description,\r\n      basePrice: item.basePrice,\r\n      profitLoss: item.profitLoss,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n      status: item.status,\r\n    });\r\n\r\n    setEditId(null);\r\n    setIsCopyMode(true);\r\n    setShowModal(true);\r\n  };\r\n\r\n  // DELETE ONE\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete item?\")) return;\r\n\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      fetchItems();\r\n    } catch (err) {\r\n      alert(\"Delete error\");\r\n    }\r\n  };\r\n\r\n  // STATUS TOGGLE\r\n  const handleStatusToggle = async (item) => {\r\n    try {\r\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n      await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n      fetchItems();\r\n    } catch (err) {\r\n      alert(\"Status error\");\r\n    }\r\n  };\r\n\r\n  // QUICK DIFF → update profitLoss\r\n  \r\n  // ------------------ CSV import/export ------------------\r\n  const handleCsvSelect = (e) => {\r\n    setCsvFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleImportCsv = async () => {\r\n    if (!csvFile) return alert(\"Select CSV file\");\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", csvFile);\r\n      const res = await axios.post(`${API_URL}/import`, fd);\r\n      if (res.data && res.data.success) {\r\n        alert(`Imported ${res.data.inserted || 0} items`);\r\n        setCsvFile(null);\r\n        if (csvInputRef.current) csvInputRef.current.value = null;\r\n        fetchItems();\r\n      } else {\r\n        alert(\"CSV import failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"CSV import error\", err);\r\n      alert(\"CSV import failed\");\r\n    }\r\n  };\r\n\r\n  const handleExportCsv = () => {\r\n    if (!items.length) return alert(\"No items to export\");\r\n\r\n    const header = [\r\n      \"id\",\r\n      \"name\",\r\n      \"categoryName\",\r\n      \"subcategoryName\",\r\n      \"basePrice\",\r\n      \"profitLoss\",\r\n      \"salePrice\",\r\n      \"lockedPrice\",\r\n      \"yesterdayLock\",\r\n      \"brokerDisplay\",\r\n      \"status\",\r\n      \"validTill\",\r\n      \"description\",\r\n      \"imageUrl\",\r\n    ];\r\n\r\n    const rows = items.map((p) => [\r\n      p._id,\r\n      p.name || \"\",\r\n      p.category?.name || \"\",\r\n      p.subcategory?.name || \"\",\r\n      p.basePrice ?? \"\",\r\n      p.profitLoss ?? \"\",\r\n      p.salePrice ?? \"\",\r\n      p.lockedPrice ?? \"\",\r\n      p.yesterdayLock ?? \"\",\r\n      p.brokerDisplay ?? \"\",\r\n      p.status || \"\",\r\n      p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n      p.description || \"\",\r\n      p.image || \"\",\r\n    ]);\r\n\r\n    const csvArray = [header, ...rows];\r\n    const csvContent =\r\n      \"data:text/csv;charset=utf-8,\" +\r\n      csvArray\r\n        .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n        .join(\"\\n\");\r\n\r\n    const encodedUri = encodeURI(csvContent);\r\n    const link = document.createElement(\"a\");\r\n    link.href = encodedUri;\r\n    link.download = `all_prices_${Date.now()}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  const handleExportSelectedCsv = () => {\r\n    if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n    const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n    const header = [\r\n      \"id\",\r\n      \"name\",\r\n      \"categoryName\",\r\n      \"subcategoryName\",\r\n      \"basePrice\",\r\n      \"profitLoss\",\r\n      \"salePrice\",\r\n      \"lockedPrice\",\r\n      \"yesterdayLock\",\r\n      \"brokerDisplay\",\r\n      \"status\",\r\n      \"validTill\",\r\n      \"description\",\r\n      \"imageUrl\",\r\n    ];\r\n\r\n    const rows = selectedData.map((p) => [\r\n      p._id,\r\n      p.name || \"\",\r\n      p.category?.name || \"\",\r\n      p.subcategory?.name || \"\",\r\n      p.basePrice ?? \"\",\r\n      p.profitLoss ?? \"\",\r\n      p.salePrice ?? \"\",\r\n      p.lockedPrice ?? \"\",\r\n      p.yesterdayLock ?? \"\",\r\n      p.brokerDisplay ?? \"\",\r\n      p.status || \"\",\r\n      p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n      p.description || \"\",\r\n      p.image || \"\",\r\n    ]);\r\n\r\n    const csvArray = [header, ...rows];\r\n    const csvContent =\r\n      \"data:text/csv;charset=utf-8,\" +\r\n      csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n    const encodedUri = encodeURI(csvContent);\r\n    const link = document.createElement(\"a\");\r\n    link.href = encodedUri;\r\n    link.download = `selected_prices_${Date.now()}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  // ------------------ Bulk delete / save ------------------\r\n  const handleBulkDelete = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected\");\r\n    if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n    try {\r\n      await axios.post(`${API_URL}/delete-selected`, { ids: selectedItems });\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n      setBulkMode(false);\r\n    } catch (err) {\r\n      console.error(\"Bulk delete error\", err);\r\n      alert(\"Bulk delete failed\");\r\n    }\r\n  };\r\n\r\n  const handleBulkSave = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n    // Prepare updates from local items state\r\n    const updates = items\r\n      .filter((x) => selectedItems.includes(x._id))\r\n      .map((x) => ({\r\n        id: x._id,\r\n        basePrice: Number(x.basePrice),\r\n        profitLoss: Number(x.profitLoss),\r\n        status: x.status,\r\n        validTill: x.validTill || null,\r\n        name: x.name,\r\n        category: x.category?._id || \"\",\r\n        subcategory: x.subcategory?._id || \"\",\r\n      }));\r\n\r\n    try {\r\n      const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n      if (res.data.success) {\r\n        alert(\"Bulk Updated\");\r\n        setBulkMode(false);\r\n        setSelectedItems([]);\r\n        fetchItems();\r\n      } else {\r\n        alert(\"Bulk update failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Bulk update error\", err);\r\n      alert(\"Bulk update failed\");\r\n    }\r\n  };\r\n\r\n  // ------------------ Filtering / Pagination ------------------\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n    const matchText =\r\n      (item.name || \"\").toLowerCase().includes(t) ||\r\n      (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n      (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n    const matchCategory = !filterCategory || String(item.category?._id) === String(filterCategory);\r\n    const matchSub =\r\n      !filterSubcategory ||\r\n      String(item.subcategory?._id || \"\") === String(filterSubcategory) ||\r\n      String(item.subcategory?.name || \"\").toLowerCase() ===\r\n        String(filterSubs.find((s) => s._id === filterSubcategory)?.name || \"\").toLowerCase();\r\n\r\n    return matchText && matchCategory && matchSub;\r\n  });\r\n\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n  const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n  const getFinalPrice = (item) => {\r\n    // salePrice is authoritative\r\n    return Number(item.salePrice ?? item.basePrice ?? 0);\r\n  };\r\n\r\n  // ------------------ Render ------------------\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.header}>\r\n        <h1 style={styles.title}>Product Management</h1>\r\n      </div>\r\n\r\n      <div style={{ display: \"flex\", gap: 10, alignItems: \"center\", marginBottom: 12 }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search product, category or subcategory...\"\r\n          value={search}\r\n          onChange={(e) => {\r\n            setSearch(e.target.value);\r\n            setCurrentPage(1);\r\n          }}\r\n          style={styles.searchInput}\r\n        />\r\n\r\n        <button\r\n          style={styles.addButton}\r\n          onClick={() => {\r\n            setShowForm((v) => !v);\r\n            resetForm();\r\n            setShowModal(false);\r\n          }}\r\n        >\r\n          {showForm ? \"✖ Close\" : \"➕ Add Product\"}\r\n        </button>\r\n\r\n        <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n          <input ref={csvInputRef} type=\"file\" accept=\".csv\" onChange={handleCsvSelect} />\r\n          <button style={styles.csvBtn} onClick={handleImportCsv}>Import CSV</button>\r\n          <button style={styles.csvBtn} onClick={handleExportSelectedCsv}>Export Selected</button>\r\n          <button style={styles.csvBtnPrimary} onClick={handleExportCsv}>Export All</button>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedItems.length > 0 && (\r\n        <div style={styles.bulkBar}>\r\n          {!bulkMode ? (\r\n            <div style={{ display: \"flex\", gap: 8 }}>\r\n              <button style={styles.btnDelete} onClick={handleBulkDelete}>🗑 Bulk Delete</button>\r\n              <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>✏ Bulk Edit</button>\r\n            </div>\r\n          ) : (\r\n            <div style={styles.bulkPanel}>\r\n              <h3 style={styles.bulkPanelTitle}>✏ Bulk Edit Selected Items</h3>\r\n              {items\r\n                .filter((item) => selectedItems.includes(item._id))\r\n                .map((item) => (\r\n                  <div key={item._id} style={styles.bulkItemBox}>\r\n                    <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n                    <div style={styles.formGrid}>\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Name</label>\r\n                        <input value={item.name} onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)} style={styles.input} />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Base Price</label>\r\n                        <input type=\"number\" value={item.basePrice} onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))} style={styles.input} />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Profit/Loss</label>\r\n                        <input type=\"number\" value={item.profitLoss} onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))} style={styles.input} />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Status</label>\r\n                        <select value={item.status} onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)} style={styles.select}>\r\n                          <option value=\"active\">active</option>\r\n                          <option value=\"inactive\">inactive</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n              <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n                <button style={styles.btnPrimary} onClick={handleBulkSave}>✔ Save All</button>\r\n                <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>✖ Cancel</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {showForm && (\r\n        <div style={styles.formCard}>\r\n          <h2 style={styles.formTitle}> Add Product</h2>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={styles.formGrid}>\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Product Name *</label>\r\n                <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Category *</label>\r\n                <select required name=\"category\" value={form.category} onChange={(e) => {\r\n                  handleChange(e);\r\n                  setForm((p) => ({ ...p, subcategory: \"\" }));\r\n                }} style={styles.select}>\r\n                  <option value=\"\">Select Category</option>\r\n                  {categories.map((c) => (<option value={c._id} key={c._id}>{c.name}</option>))}\r\n                </select>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Subcategory</label>\r\n                <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n                  <option value=\"\">Select Subcategory</option>\r\n                  {subcategories.map((s) => (<option value={s._id} key={s._id}>{s.name}</option>))}\r\n                </select>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Base Price *</label>\r\n                <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Profit / Loss</label>\r\n                <input type=\"number\" name=\"profitLoss\" value={form.profitLoss} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              \r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Image</label>\r\n                <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n              </div>\r\n            </div>\r\n\r\n            <div style={styles.formGroup}>\r\n              <label style={styles.label}>Description</label>\r\n              <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n            </div>\r\n\r\n            <div style={styles.formActions}>\r\n              <button style={styles.btnPrimary} disabled={loading}>{loading ? \"Saving...\" : editId ? (isCopyMode ? \"Save Copy\" : \"Update Product\") : \"Add Product\"}</button>\r\n\r\n              <button type=\"button\" style={styles.btnCancel} onClick={() => { setShowForm(false); resetForm(); }}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      <div style={styles.tableCard}>\r\n        <div style={styles.tableHeader}>\r\n          <h2 style={styles.tableTitle}>Items</h2>\r\n          <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n        </div>\r\n\r\n        <div style={styles.tableWrapper}>\r\n          <table style={styles.table}>\r\n            <thead>\r\n              <tr>\r\n                <th style={styles.th}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n                    onChange={() => {\r\n                      if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n                      else setSelectedItems(filteredItems.map((x) => x._id));\r\n                    }}\r\n                  />\r\n                </th>\r\n                <th style={styles.th}>Sr</th>\r\n                <th style={styles.th}>Image</th>\r\n                <th style={styles.th}>Name</th>\r\n                <th style={styles.th}>Category</th>\r\n                <th style={styles.th}>Subcategory</th>\r\n\r\n                <th style={styles.th}>Base</th>\r\n                <th style={styles.th}>Profit / Loss</th>\r\n                <th style={styles.th}>Sale Price</th>\r\n                <th style={styles.th}>Locked Price</th>\r\n                \r\n                <th style={styles.th}>Tejji/Maddi</th>\r\n\r\n                \r\n                <th style={styles.th}>Status</th>\r\n                \r\n                <th style={styles.th}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {currentItems.map((item, i) => (\r\n                <tr key={item._id} style={styles.tr}>\r\n                  <td style={styles.td}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item._id)}\r\n                      onChange={() =>\r\n                        setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n                      }\r\n                    />\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n                  <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n                  <td style={styles.td}>{item.name}</td>\r\n                  <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n                  <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n                  <td style={styles.td}>\r\n                    <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={quickEdit[item._id] !== undefined ? quickEdit[item._id] : item.basePrice}\r\n                        onChange={(e) => setQuickEdit((p) => ({ ...p, [item._id]: e.target.value }))}\r\n                        style={{ ...styles.input, padding: \"6px 8px\", width: 90 }}\r\n                      />\r\n                      <button style={styles.btnSmall} onClick={() => applyQuickBase(item)}>✔</button>\r\n                    </div>\r\n                    <small style={{ display: \"block\", color: \"#2b8d28\", marginTop: 4 }}>Saved: ₹{item.basePrice}</small>\r\n                  </td>\r\n\r\n                  <td style={styles.td}>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={item.profitLoss}\r\n                      onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))}\r\n                      style={{ ...styles.input, width: 90 }}\r\n                    />\r\n                    \r\n                  </td>\r\n\r\n                  <td style={styles.td}>₹{getFinalPrice(item).toFixed(2)}</td>\r\n                  <td style={styles.td}>₹{item.lockedPrice?.toFixed(2)}</td>\r\n                  <td style={styles.td}>{item.brokerDisplay !== undefined ? item.brokerDisplay.toFixed(2) : \"0.00\"}</td>\r\n\r\n                \r\n\r\n                  <td style={styles.td}>\r\n                    <button style={item.status === \"active\" ? styles.statusActive : styles.statusInactive} onClick={() => handleStatusToggle(item)}>\r\n                      {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </td>\r\n\r\n                \r\n\r\n                  <td style={styles.td}>\r\n                    <div style={{ display: \"flex\", gap: 6 }}>\r\n                      <button style={styles.btnSmall} onClick={() => handleEdit(item)}>✏ Edit</button>\r\n                      <button style={styles.btnSmall} onClick={() => handleCopyToEdit(item)}>📄 Copy</button>\r\n                      <button style={styles.btnDelete} onClick={() => handleDelete(item._id)}>🗑 Delete</button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div style={styles.pagination}>\r\n          <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>Previous</button>\r\n\r\n          {Array.from({ length: totalPages }, (_, i) => (\r\n            <button key={i} style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn} onClick={() => setCurrentPage(i + 1)}>{i + 1}</button>\r\n          ))}\r\n\r\n          <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>Next</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------------------- Helper: updateLocalItemField ---------------------- */\r\nfunction updateLocalItemField(id, key, value) {\r\n  // This function will be hoisted to window scope if defined outside; to keep inside component,\r\n  // we defined it by referencing state updater in part1. But since we are sending single-file component,\r\n  // ensure this helper exists in the top of the file. If you paste both parts in same file, replace this with\r\n  // the inline version used earlier:\r\n  // setItems(prev => prev.map(x => x._id === id ? { ...x, [key]: value } : x));\r\n  // For safety, we attach to window to fallback:\r\n  if (typeof window.__updateLocal === \"function\") {\r\n    window.__updateLocal(id, key, value);\r\n  } else {\r\n    console.warn(\"updateLocalItemField helper missing — please ensure you paste PART 1 then PART 2 in same file so the internal updater is available.\");\r\n  }\r\n}\r\n\r\n/* ---------------------- Styles ---------------------- */\r\nconst styles = {\r\n  container: { padding: 16 },\r\n  header: { marginBottom: 6 },\r\n  title: { fontSize: \"21px\", fontWeight: 700, color: \"#161718\", marginBottom: 6 },\r\n\r\n  searchInput: {\r\n    width: 320,\r\n    padding: \"10px 12px\",\r\n    borderRadius: 10,\r\n    border: \"1px solid #ced4da\",\r\n    background: \"#f9fbfc\",\r\n    fontSize: 14,\r\n    outline: \"none\",\r\n  },\r\n  addButton: {\r\n    marginLeft: 12,\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: 10,\r\n    padding: \"10px 14px\",\r\n    fontSize: 14,\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  csvBtn: {\r\n    background: \"#6c8ffc\",\r\n    color: \"#fff\",\r\n    padding: \"6px 10px\",\r\n    borderRadius: 6,\r\n    border: \"none\",\r\n    fontSize: 12,\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  csvBtnPrimary: {\r\n    background: \"#3b6ef6\",\r\n    color: \"#fff\",\r\n    padding: \"6px 10px\",\r\n    borderRadius: 6,\r\n    border: \"none\",\r\n    fontSize: 12,\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  bulkBar: {\r\n    background: \"#e9f2ff\",\r\n    border: \"1px solid #c4d9ff\",\r\n    borderRadius: 10,\r\n    padding: 12,\r\n    marginBottom: 12,\r\n  },\r\n  bulkPanel: {\r\n    width: \"100%\",\r\n    background: \"#f7faff\",\r\n    border: \"1px solid #cfe2ff\",\r\n    padding: 12,\r\n    borderRadius: 10,\r\n  },\r\n  bulkPanelTitle: { textAlign: \"center\", fontSize: 16, fontWeight: 700, marginBottom: 10 },\r\n  bulkItemBox: { background: \"#fff\", border: \"1px solid #dbe5f5\", padding: 12, borderRadius: 8, marginBottom: 10 },\r\n  bulkItemTitle: { fontSize: 14, fontWeight: 600, marginBottom: 8 },\r\n\r\n  formCard: { borderRadius: 12, padding: 16, marginBottom: 18, background: \"#fff\", border: \"1px solid #eef2f7\" },\r\n  formTitle: { fontSize: 18, fontWeight: 700, marginBottom: 10 },\r\n  formGrid: { display: \"grid\", gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\", gap: 12 },\r\n  formGroup: { display: \"flex\", flexDirection: \"column\", gap: 6 },\r\n  label: { fontWeight: 600, fontSize: 13, color: \"#233142\" },\r\n  input: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", fontSize: 13 },\r\n  select: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", fontSize: 13 },\r\n  textarea: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", minHeight: 80 },\r\n  fileInput: { padding: 6 },\r\n  formActions: { marginTop: 10, display: \"flex\", gap: 8 },\r\n\r\n  btnPrimary: { background: \"#007bff\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"8px 12px\", cursor: \"pointer\" },\r\n  btnSmall: { background: \"#43a047\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" },\r\n  btnDelete: { background: \"#e63946\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" },\r\n  btnCancel: { background: \"#adb5bd\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"8px 12px\", cursor: \"pointer\" },\r\n\r\n  tableCard: { marginTop: 12 },\r\n  tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 8 },\r\n  tableTitle: { fontSize: 18, fontWeight: 700 },\r\n  totalCount: { fontSize: 13, color: \"#6c757d\", fontWeight: 600 },\r\n  tableWrapper: { overflowX: \"auto\" },\r\n  table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: 14 },\r\n  th: { background: \"#e9f2ff\", padding: \"10px\", fontWeight: 700, color: \"#0d3b66\", textAlign: \"left\" },\r\n  tr: { borderBottom: \"1px solid #edf2f7\" },\r\n  td: { padding: \"10px\", whiteSpace: \"nowrap\", verticalAlign: \"middle\" },\r\n  tableImg: { width: 55, height: 55, borderRadius: 6, objectFit: \"cover\" },\r\n\r\n  statusActive: { background: \"#93d8ba\", padding: \"6px 10px\", borderRadius: 8, color: \"black\", fontWeight: 600, border: \"none\", cursor: \"pointer\" },\r\n  statusInactive: { background: \"#d9b1b1\", padding: \"6px 10px\", borderRadius: 8, color: \"black\", fontWeight: 600, border: \"none\", cursor: \"pointer\" },\r\n\r\n  pagination: { marginTop: 12, display: \"flex\", justifyContent: \"center\", gap: 8 },\r\n  paginationBtn: { padding: \"8px 10px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #ddd\", cursor: \"pointer\" },\r\n  paginationBtnActive: { padding: \"8px 10px\", borderRadius: 8, background: \"#007bff\", color: \"white\", border: \"1px solid #0062cc\", cursor: \"pointer\" },\r\n};\r\n// PART 2 - PriceList.jsx (MIDDLE: TABLE + CARDS + menu UI)\r\n// CSV helpers\r\nconst handleCsvSelect = (e) => setCsvFile(e.target.files[0]);\r\n\r\nconst handleImportCsv = async () => {\r\n  if (!csvFile) return alert(\"Select CSV\");\r\n  try {\r\n    const fd = new FormData();\r\n    fd.append(\"file\", csvFile);\r\n    const res = await axios.post(`${API_URL}/import`, fd);\r\n    if (res.data && res.data.success) {\r\n      alert(`Imported ${res.data.inserted || 0}`);\r\n      setCsvFile(null);\r\n      if (csvInputRef.current) csvInputRef.current.value = null;\r\n      fetchItems();\r\n    } else alert(\"Import failed\");\r\n  } catch (err) {\r\n    console.error(\"importCSV\", err);\r\n    alert(\"Import failed\");\r\n  }\r\n};\r\n\r\nconst handleExportCsv = () => {\r\n  if (!items.length) return alert(\"No items\");\r\n  const header = [\r\n    \"id\",\"name\",\"categoryName\",\"subcategoryName\",\"basePrice\",\"profitLoss\",\"salePrice\",\r\n    \"lockedPrice\",\"brokerDisplay\",\"status\",\"validTill\",\"description\",\"imageUrl\"\r\n  ];\r\n  const rows = items.map(p => [\r\n    p._id, p.name||\"\", p.category?.name||\"\", p.subcategory?.name||\"\", p.basePrice||\"\",\r\n    p.profitLoss||\"\", p.salePrice||\"\", p.lockedPrice||\"\", p.brokerDisplay||\"\",\r\n    p.status||\"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n    p.description||\"\", p.image||\"\"\r\n  ]);\r\n  const csvArray = [header, ...rows];\r\n  const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g,'\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n  const encodedUri = encodeURI(csvContent);\r\n  const a = document.createElement(\"a\");\r\n  a.href = encodedUri;\r\n  a.download = `prices_${Date.now()}.csv`;\r\n  a.click();\r\n};\r\n\r\nconst handleExportSelectedCsv = () => {\r\n  if (!selectedItems.length) return alert(\"Select items\");\r\n  const selected = items.filter(x => selectedItems.includes(x._id));\r\n  const header = [\r\n    \"id\",\"name\",\"categoryName\",\"subcategoryName\",\"basePrice\",\"profitLoss\",\"salePrice\",\r\n    \"lockedPrice\",\"brokerDisplay\",\"status\",\"validTill\",\"description\",\"imageUrl\"\r\n  ];\r\n  const rows = selected.map(p => [\r\n    p._id, p.name||\"\", p.category?.name||\"\", p.subcategory?.name||\"\", p.basePrice||\"\",\r\n    p.profitLoss||\"\", p.salePrice||\"\", p.lockedPrice||\"\", p.brokerDisplay||\"\",\r\n    p.status||\"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n    p.description||\"\", p.image||\"\"\r\n  ]);\r\n  const csvArray = [header, ...rows];\r\n  const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g,'\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n  const encodedUri = encodeURI(csvContent);\r\n  const a = document.createElement(\"a\");\r\n  a.href = encodedUri;\r\n  a.download = `selected_prices_${Date.now()}.csv`;\r\n  a.click();\r\n};\r\n\r\n// Bulk operations\r\nconst handleBulkDelete = async () => {\r\n  if (!selectedItems.length) return alert(\"No items selected\");\r\n  if (!window.confirm(\"Delete selected?\")) return;\r\n  try {\r\n    await axios.post(`${API_URL}/delete-selected`, { ids: selectedItems });\r\n    setSelectedItems([]);\r\n    fetchItems();\r\n    setBulkMode(false);\r\n  } catch (err) {\r\n    console.error(\"bulk delete\", err);\r\n    alert(\"Bulk delete failed\");\r\n  }\r\n};\r\n\r\nconst handleBulkSave = async () => {\r\n  if (!selectedItems.length) return alert(\"No items selected\");\r\n  const updates = items.filter(x => selectedItems.includes(x._id)).map(x => ({\r\n    id: x._id,\r\n    basePrice: Number(x.basePrice),\r\n    profitLoss: Number(x.profitLoss),\r\n    status: x.status,\r\n    validTill: x.validTill || null,\r\n    name: x.name,\r\n    category: x.category?._id || \"\",\r\n    subcategory: x.subcategory?._id || \"\"\r\n  }));\r\n  try {\r\n    const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n    if (res.data && res.data.success) {\r\n      alert(\"Bulk updated\");\r\n      setSelectedItems([]);\r\n      setBulkMode(false);\r\n      fetchItems();\r\n    } else alert(\"Bulk update failed\");\r\n  } catch (err) {\r\n    console.error(\"bulk save\", err);\r\n    alert(\"Bulk update failed\");\r\n  }\r\n};\r\n\r\n// quick base update per-row (apply Quick Edit base)\r\nconst applyQuickBase = async (item) => {\r\n  const newBase = Number(quickEdit[item._id]);\r\n  if (isNaN(newBase)) return alert(\"Invalid base\");\r\n  try {\r\n    setLoading(true);\r\n    const fd = new FormData();\r\n    fd.append(\"basePrice\", newBase);\r\n    fd.append(\"profitLoss\", item.profitLoss ?? 0);\r\n    const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n    if (res.data && res.data.success) {\r\n      fetchItems();\r\n      setQuickEdit((p) => ({ ...p, [item._id]: newBase }));\r\n    } else alert(\"Base update failed\");\r\n  } catch (err) {\r\n    console.error(\"applyQuickBase\", err);\r\n    alert(\"Base update failed\");\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n// Filtering / pagination derived values\r\nconst filteredItems = items.filter((item) => {\r\n  const t = search.toLowerCase();\r\n  const matchText = (item.name||\"\").toLowerCase().includes(t) ||\r\n                    (item.category?.name||\"\").toLowerCase().includes(t) ||\r\n                    (item.subcategory?.name||\"\").toLowerCase().includes(t);\r\n  const matchCategory = !filterCategory || String(item.category?._id) === String(filterCategory);\r\n  const matchSub = !filterSubcategory || String(item.subcategory?._id || \"\") === String(filterSubcategory);\r\n  return matchText && matchCategory && matchSub;\r\n});\r\nconst indexOfLast = currentPage * itemsPerPage;\r\nconst currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\nconst totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n// render helpers: Tejji/Maddi value\r\nconst getBrokerDiff = (item) => {\r\n  const yesterday = item.yesterdayLock ?? 0;\r\n  const today = item.lockedPrice ?? item.salePrice ?? 0;\r\n  // If yesterday is 0 and today is 0 -> show 0\r\n  return Number(today - yesterday);\r\n};\r\n\r\n// UI: 3-dots menu toggle\r\nconst toggleMenu = (id) => {\r\n  setActiveMenu((prev) => (prev === id ? null : id));\r\n};\r\n\r\n// Close dropdown when clicking outside\r\nuseEffect(() => {\r\n  const onDoc = (e) => {\r\n    // if click outside any menu, close\r\n    if (!e.target.closest) return;\r\n    const el = e.target.closest(\".price-row-menu\");\r\n    if (!el) setActiveMenu(null);\r\n  };\r\n  document.addEventListener(\"click\", onDoc);\r\n  return () => document.removeEventListener(\"click\", onDoc);\r\n}, []);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}