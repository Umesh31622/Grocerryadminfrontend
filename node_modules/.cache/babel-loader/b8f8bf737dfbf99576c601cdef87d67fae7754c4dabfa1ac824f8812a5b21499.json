{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\"\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   // FORM state\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [isCopyMode, setIsCopyMode] = useState(false);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n//   const [activeMenu, setActiveMenu] = useState(null);\n\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   const [addingSub, setAddingSub] = useState(false);\n//   const [newSubName, setNewSubName] = useState(\"\");\n//   const [newSubImage, setNewSubImage] = useState(null);\n//   const [newSubPreview, setNewSubPreview] = useState(null);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const [csvFile, setCsvFile] = useState(null);\n//   const csvInputRef = useRef();\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n// const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n// const [filterSubs, setFilterSubs] = useState([]);\n\n// useEffect(() => {\n//   if (!filterCategory) {\n//     setFilterSubs([]);\n//     setFilterSubcategory(\"\");\n//     return;\n//   }\n\n//   const cat = categories.find(c => c._id === filterCategory);\n//   setFilterSubs(cat?.subcategories || []);\n//   setFilterSubcategory(\"\");\n// }, [filterCategory, categories]);\n\n//   // useEffect(() => {\n//   //   fetchItems();\n//   //   fetchCategories();\n\n//   //   const handleResize = () => setIsMobile(window.innerWidth < 768);\n//   //   window.addEventListener(\"resize\", handleResize);\n//   //   return () => window.removeEventListener(\"resize\", handleResize);\n//   // }, []);\n//   // 1. Pehle categories load karo\n// useEffect(() => {\n//   fetchCategories();\n// }, []);\n\n// // 2. Categories load hone ke baad items load karo\n// useEffect(() => {\n//   if (categories.length > 0) {\n//     fetchItems();\n//   }\n// }, [categories]);\n\n// // 3. Resize listener\n// useEffect(() => {\n//   const handleResize = () => setIsMobile(window.innerWidth < 768);\n//   window.addEventListener(\"resize\", handleResize);\n//   return () => window.removeEventListener(\"resize\", handleResize);\n// }, []);\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       // if (res.data && res.data.success) setItems(res.data.data || []);\n//       if (res.data && res.data.success) {\n//   const raw = res.data.data;\n\n//   // Agar categories abhi load nahi hui = raw items set\n//   if (!categories.length) {\n//     setItems(raw);\n//     return;\n//   }\n\n//   // Mapping to category + subcategory object\n//   const enriched = raw.map((item) => {\n//     const cat = categories.find(\n//       (c) =>\n//         c._id === item.category ||\n//         c._id === item.category?._id\n//     );\n\n//     const sub = cat?.subcategories?.find(\n//       (s) =>\n//         s._id === item.subcategory ||\n//         s._id === item.subcategory?._id\n//     );\n\n//     return {\n//       ...item,\n//       category: cat\n//         ? { _id: cat._id, name: cat.name }\n//         : item.category,\n\n//       subcategory: sub\n//         ? { _id: sub._id, name: sub.name }\n//         : item.subcategory,\n//     };\n//   });\n\n//   setItems(enriched);\n// }\n\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       alert(\"Could not fetch items\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       alert(\"Could not fetch categories\");\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n\n//     const cat = categories.find((c) => c._id === form.category);\n//     const subs = (cat && cat.subcategories) || [];\n//     setSubcategories(subs);\n\n//     const exists = subs.some((s) => s._id === form.subcategory);\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//   }, [form.category, categories]);\n\n//   const handleCreateCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newCategoryName.trim());\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//       const res = await axios.post(CATEGORY_URL, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Category created\");\n//         setNewCategoryName(\"\");\n//         setNewCategoryImage(null);\n//         setNewCategoryPreview(null);\n//         setAddingCategory(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Category creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create category error\", err);\n//       alert(\"Category creation failed\");\n//     }\n//   };\n\n//   const handleCreateSub = async () => {\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n//     if (!form.category) return alert(\"Select category first\");\n\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newSubName.trim());\n//       if (newSubImage) fd.append(\"image\", newSubImage);\n\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Subcategory created\");\n//         setNewSubName(\"\");\n//         setNewSubImage(null);\n//         setNewSubPreview(null);\n//         setAddingSub(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Subcategory creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create sub error\", err);\n//       alert(\"Subcategory creation failed\");\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files && files.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       Object.keys(form).forEach((k) => {\n//         const val = form[k];\n//         if (val !== undefined && val !== null) {\n//           fd.append(k, val);\n//         }\n//       });\n\n//       let res;\n//       if (isCopyMode) {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Copied as new item\");\n//       } else if (editId) {\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\n//         alert(\"Updated\");\n//       } else {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Added\");\n//       }\n\n//       await fetchItems();\n//       await fetchCategories();\n\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         subcategory: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n//       setEditId(null);\n//       setIsCopyMode(false);\n//       setShowModal(false);\n//       setShowForm(false);\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       difference: item.difference ?? \"\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(item._id);\n//     setIsCopyMode(false);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleCopyToEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       difference: item.difference ?? \"\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(null);\n//     setIsCopyMode(true);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//       setActiveMenu(null);\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       alert(\"Delete failed\");\n//     }\n//   };\n\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       alert(\"Status update failed\");\n//     }\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         name: x.name,\n//         basePrice: x.basePrice,\n//         difference: x.difference,\n//         validTill: x.validTill,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       alert(\"Bulk save failed\");\n//     }\n//   };\n\n//   const handleCsvSelect = (e) => {\n//     setCsvFile(e.target.files[0]);\n//   };\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Select CSV file\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"file\", csvFile);\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data && res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//         fetchItems();\n//       } else {\n//         alert(\"CSV import failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"CSV import error\", err);\n//       alert(\"CSV import failed\");\n//     }\n//   };\n\n//   // const handleExportCsv = async () => {\n//   //   try {\n//   //     const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n//   //     const url = window.URL.createObjectURL(new Blob([res.data]));\n//   //     const a = document.createElement(\"a\");\n//   //     a.href = url;\n//   //     a.download = \"prices.csv\";\n//   //     a.click();\n//   //     URL.revokeObjectURL(url);\n//   //   } catch (err) {\n//   //     console.error(\"CSV export error\", err);\n//   //     alert(\"CSV export failed\");\n//   //   }\n//   // };\n// const handleExportCsv = () => {\n//   if (!items.length) return alert(\"No items to export\");\n\n//   const header = [\n//     \"id\",\n//     \"name\",\n//     \"categoryName\",\n//     \"subcategoryName\",\n//     \"basePrice\",\n//     \"difference\",\n//     \"finalPrice\",\n//     \"status\",\n//     \"validTill\",\n//     \"description\",\n//     \"imageUrl\",\n//   ];\n\n//   const rows = items.map((p) => [\n//     p._id,\n//     p.name || \"\",\n//     p.category?.name || \"\",\n//     p.subcategory?.name || \"\",\n//     p.basePrice ?? \"\",\n//     p.difference ?? \"\",\n//     (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\n//     p.status || \"\",\n//     p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//     p.description || \"\",\n//     p.image || \"\",\n//   ]);\n\n//   const csvArray = [header, ...rows];\n//   const csvContent =\n//     \"data:text/csv;charset=utf-8,\" +\n//     csvArray\n//       .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\n//       .join(\"\\n\");\n\n//   const encodedUri = encodeURI(csvContent);\n//   const link = document.createElement(\"a\");\n//   link.href = encodedUri;\n//   link.download = `all_prices_${Date.now()}.csv`;\n//   link.click();\n// };\n\n//   const handleExportSelectedCsv = () => {\n//     if (!selectedItems.length) return alert(\"Select items to export\");\n\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"difference\",\n//       \"finalPrice\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = selectedData.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.difference ?? \"\",\n//       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `selected_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   // const filteredItems = items.filter((item) => {\n//   //   const t = search.toLowerCase();\n//   //   return (\n//   //     (item.name || \"\").toString().toLowerCase().includes(t) ||\n//   //     (item.category?.name || \"\").toLowerCase().includes(t) ||\n//   //     (item.subcategory?.name || \"\").toLowerCase().includes(t)\n//   //   );\n//   // });\n//   const filteredItems = items.filter((item) => {\n//   const t = search.toLowerCase();\n\n//   const matchText =\n//     (item.name || \"\").toLowerCase().includes(t) ||\n//     (item.category?.name || \"\").toLowerCase().includes(t) ||\n//     (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n//   const matchCategory =\n//     !filterCategory || item.category?._id === filterCategory;\n\n//   const matchSub =\n//     !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n//   return matchText && matchCategory && matchSub;\n// });\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n//   return (\n//     <div style={styles.container}>\n//       {/* HEADER */}\n//       <div style={styles.header}>\n//         <h1 style={styles.title}>Product Management</h1>\n//         {/* <p style={styles.subtitle}>Manage prices, categories, images, CSV & bulk actions.</p> */}\n//       </div>\n\n//       {/* SEARCH */}\n\n//      <div className=\"mobile-topbar\">\n//   <input\n//     type=\"text\"\n//     placeholder=\"Search product, category or subcategory...\"\n//     value={search}\n//     onChange={(e) => {\n//       setSearch(e.target.value);\n//       setCurrentPage(1);\n//     }}\n//     style={styles.searchInput}\n//   />\n\n//   <button\n//     style={styles.addButton}\n//     onClick={() => {\n//       setShowForm(!showForm);\n//       setEditId(null);\n//       setIsCopyMode(false);\n//     }}\n//   >\n//     {showForm ? \"‚úñ\" : \"Add Product\"}\n//   </button>\n// </div>\n// <div className=\"filter-bar\">\n//   <select\n//     value={filterCategory}\n//     onChange={(e) => setFilterCategory(e.target.value)}\n//     className=\"filter-select\"\n//   >\n//     <option value=\"\">Filter by Category</option>\n//     {categories.map((c) => (\n//       <option key={c._id} value={c._id}>{c.name}</option>\n//     ))}\n//   </select>\n\n//   <select\n//     value={filterSubcategory}\n//     onChange={(e) => setFilterSubcategory(e.target.value)}\n//     className=\"filter-select\"\n//     disabled={!filterSubs.length}\n//   >\n//     <option value=\"\">Filter by Subcategory</option>\n//     {filterSubs.map((s) => (\n//       <option key={s._id} value={s._id}>{s.name}</option>\n//     ))}\n//   </select>\n\n// </div>\n\n//       {/* BULK BAR */}\n//       {selectedItems.length > 0 && (\n//         // <div style={styles.bulkBar}>\n//         <div className=\"bulk-bar\">\n\n//           {/* <span style={styles.bulkText}>{selectedItems.length} selected</span> */}\n\n//           {!bulkMode ? (\n//             // <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\n//             <div className=\"bulk-actions\">\n\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n\n//               {/* <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n//                 ‚§ì Export Selected\n//               </button> */}\n//             </div>\n//           ) : (\n//             <div style={styles.bulkPanel}>\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\n\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} style={styles.bulkItemBox}>\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\n\n//                     <div style={styles.formGrid}>\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Name</label>\n//                         <input\n//                           type=\"text\"\n//                           value={item.name}\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\n//                           style={styles.input}\n//                         />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Base Price</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.basePrice}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\n//                           }\n//                           style={styles.input}\n//                         />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Category</label>\n//                         <select\n//                           value={item.category?._id || \"\"}\n//                           onChange={(e) => {\n//                             const newCat = e.target.value;\n//                             updateLocalItemField(item._id, \"category\", { _id: newCat });\n//                             const catObj = categories.find((c) => c._id === newCat);\n//                             const firstSub = catObj?.subcategories?.[0]?._id || \"\";\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\n//                           }}\n//                           style={styles.select}\n//                         >\n//                           <option value=\"\">Select Category</option>\n//                           {categories.map((c) => (\n//                             <option key={c._id} value={c._id}>\n//                               {c.name}\n//                             </option>\n//                           ))}\n//                         </select>\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Subcategory</label>\n//                         <select\n//                           value={item.subcategory?._id || \"\"}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\n//                           }\n//                           style={styles.select}\n//                         >\n//                           <option value=\"\">Select Subcategory</option>\n//                           {categories\n//                             .find((c) => c._id === item.category?._id)\n//                             ?.subcategories?.map((s) => (\n//                               <option key={s._id} value={s._id}>\n//                                 {s.name}\n//                               </option>\n//                             ))}\n//                         </select>\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Difference</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.difference || 0}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\n//                           }\n//                           style={styles.input}\n//                         />\n//                       </div>\n//                     </div>\n//                   </div>\n//                 ))}\n\n//               <div style={{ display: \"flex\", gap: 0, marginTop: 12 }}>\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\n//                   ‚úî Save All\n//                 </button>\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\n//                   ‚úñ Cancel\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* FORM */}\n//       {showForm && (\n//         <div style={styles.formCard}>\n//           <h2 style={styles.formTitle}>‚ûï Add \n\n//           </h2>\n\n//           <form onSubmit={handleSubmit}>\n//             <div style={styles.formGrid}>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Product Name *</label>\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Category *</label>\n//                 <div style={styles.categoryRow}>\n//                   <select\n//                     required\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={(e) => {\n//                       handleChange(e);\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\n//                     }}\n//                     style={styles.select}\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option value={c._id} key={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\n//                     {addingCategory ? \"Close\" : \"Add\"}\n//                   </button>\n//                 </div>\n//               </div>\n\n//               {addingCategory && (\n//                 <div style={styles.addCategoryBox}>\n//                   <label style={styles.label}>Add New Category</label>\n//                   <div style={styles.categoryRow}>\n//                     <input\n//                       value={newCategoryName}\n//                       onChange={(e) => setNewCategoryName(e.target.value)}\n//                       placeholder=\"Category name\"\n//                       style={styles.input}\n//                     />\n//                     <input\n//                       type=\"file\"\n//                       accept=\"image/*\"\n//                       onChange={(e) => {\n//                         setNewCategoryImage(e.target.files[0]);\n//                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                       }}\n//                       style={styles.fileInput}\n//                     />\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\n//                       Create\n//                     </button>\n//                   </div>\n//                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\n//                 </div>\n//               )}\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Subcategory</label>\n//                 <div style={styles.categoryRow}>\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n//                     <option value=\"\">Select Subcategory</option>\n//                     {subcategories.map((s) => (\n//                       <option value={s._id} key={s._id}>\n//                         {s.name}\n//                       </option>\n//                     ))}\n//                   </select>\n\n//                   {form.category && (\n//                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\n//                       {addingSub ? \"Close\" : \"Add\"}\n//                     </button>\n//                   )}\n//                 </div>\n//               </div>\n\n//               {addingSub && (\n//                 <div style={styles.addCategoryBox}>\n//                   <label style={styles.label}>Add New Subcategory</label>\n//                   <div style={styles.categoryRow}>\n//                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\n//                     <input\n//                       type=\"file\"\n//                       accept=\"image/*\"\n//                       onChange={(e) => {\n//                         setNewSubImage(e.target.files[0]);\n//                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                       }}\n//                       style={styles.fileInput}\n//                     />\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\n//                       Create\n//                     </button>\n//                   </div>\n//                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\n//                 </div>\n//               )}\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Base Price *</label>\n//                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Difference</label>\n//                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Valid Till</label>\n//                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Image</label>\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//               </div>\n//             </div>\n\n//             <div style={styles.formGroup}>\n//               <label style={styles.label}>Description</label>\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//             </div>\n\n//             <div style={styles.formActions}>\n//               <button style={styles.btnPrimary} disabled={loading}>\n//                 {loading ? \"Saving...\" : \"Add Product\"}\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n\n//       {/* CSV CONTROLS */}\n//       {/* <div style={styles.csvControls}>\n//         <div>\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\n//           <button style={styles.btnSmall} onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <div style={{ display: \"flex\", gap: 8 }}>\n//           <button style={styles.btnPrimary} onClick={handleExportCsv}>\n//             Export All CSV\n//           </button>\n\n//           <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n//             Export Selected CSV\n//           </button>\n//         </div>\n//       </div> */}\n// <div className=\"csv-topbar\">\n//   <div className=\"csv-row\">\n//     <input\n//       type=\"file\"\n//       accept=\".csv\"\n//       ref={csvInputRef}\n//       onChange={handleCsvSelect}\n//       style={styles.fileInput}\n//     />\n\n//     <button style={styles.btnSmall} onClick={handleImportCsv}>\n//       Import\n//     </button>\n\n//     <button style={styles.btnPrimary} onClick={handleExportCsv}>\n//       Export All\n//     </button>\n\n//     <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\n//        Selected \n//     </button>\n//   </div>\n// </div>\n\n//       {/* TABLE */}\n//       <div style={styles.tableCard}>\n//         <div style={styles.tableHeader}>\n//           <h2 style={styles.tableTitle}> Items</h2>\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\n//         </div>\n\n//         <div style={styles.tableWrapper}>\n//           <table style={styles.table}>\n//             <thead>\n//               <tr>\n//                 <th style={styles.th}>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th style={styles.th}>Sr</th>\n//                 <th style={styles.th}>Image</th>\n//                 <th style={styles.th}>Name</th>\n//                 <th style={styles.th}>Category</th>\n//                 <th style={styles.th}>Subcategory</th>\n//                 <th style={styles.th}>Base</th>\n//                 <th style={styles.th}>Diff</th>\n//                 <th style={styles.th}>Final</th>\n//                 <th style={styles.th}>Status</th>\n//                 <th style={styles.th}>Valid Till</th>\n//                 <th style={styles.th}>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id} style={styles.tr}>\n//                   <td style={styles.td}>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                       }\n//                     />\n//                   </td>\n\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\n\n//                   <td style={styles.td}>{item.name}</td>\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\n//                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\n\n//                   <td style={styles.td}>‚Çπ{item.basePrice}</td>\n//                   <td style={styles.td}>{item.difference || 0}</td>\n//                   <td style={styles.td}>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n//                   <td style={styles.td}>\n//                     <button\n//                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\n\n//                   <td style={styles.td}>\n//                     <div style={{ position: \"relative\" }}>\n//                       <button\n//                         style={styles.menuButton}\n//                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\n//                       >\n//                         ‚ãÆ\n//                       </button>\n\n//                       {activeMenu === item._id && (\n//                         <div style={styles.dropdown}>\n//                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\n//                             ‚úè Edit\n//                           </button>\n//                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\n//                             üìÑ Copy\n//                           </button>\n//                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\n//                             üóë Delete\n//                           </button>\n//                         </div>\n//                       )}\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n\n//         {/* PAGINATION */}\n//         <div style={styles.pagination}>\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }, (_, i) => (\n//             <button\n//               key={i}\n//               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n//             Next\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* MODAL FOR EDIT/COPY */}\n//       {showModal && (\n//         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\n//           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\n//             <h2 style={styles.modalTitle}>{isCopyMode ? \" Copy Product\" : \" Edit Product\"}</h2>\n\n//             <form onSubmit={handleSubmit}>\n//               <div style={styles.formGrid}>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Product Name *</label>\n//                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Category *</label>\n//                   <select\n//                     required\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={(e) => {\n//                       handleChange(e);\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\n//                     }}\n//                     style={styles.select}\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option value={c._id} key={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Subcategory</label>\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n//                     <option value=\"\">Select Subcategory</option>\n//                     {subcategories.map((s) => (\n//                       <option value={s._id} key={s._id}>\n//                         {s.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Base Price *</label>\n//                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Difference</label>\n//                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Valid Till</label>\n//                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n//                 </div>\n\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Image</label>\n//                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//                 </div>\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Description</label>\n//                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//               </div>\n\n//               <div style={styles.formActions}>\n//                 <button style={styles.btnPrimary} disabled={loading}>\n//                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\n//                 </button>\n\n//                 <button\n//                   type=\"button\"\n//                   style={styles.btnCancel}\n//                   onClick={() => {\n//                     setShowModal(false);\n//                     setEditId(null);\n//                     setIsCopyMode(false);\n//                     setForm({\n//                       name: \"\",\n//                       category: \"\",\n//                       subcategory: \"\",\n//                       description: \"\",\n//                       basePrice: \"\",\n//                       difference: \"\",\n//                       validTill: \"\",\n//                       file: null,\n//                     });\n//                   }}\n//                 >\n//                   Cancel\n//                 </button>\n//               </div>\n//             </form>\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n// const styles = {\n//   container: {\n\n//   },\n//   header: {\n\n//   },\n//   title: {\n//     fontSize: \"21px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"6px\",\n//   },\n//   subtitle: {\n//    fontSize: \"16px\",\n//   },\n//   searchBar: {\n//     maxWidth: \"320px\",\n//     margin: \"0 auto 25px auto\",\n//   },\n//   searchInput: {\n//     width: \"100%\",\n//     padding: \"12px 15px\",\n//     borderRadius: \"12px\",\n//     border: \"1px solid #ced4da\",\n//     background: \"#f9fbfc\",\n//     fontSize: \"15px\",\n//     outline: \"none\",\n//     boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\n//   },\n//   addButtonWrapper: {\n//     textAlign: \"left\",\n//     marginBottom: \"25px\",\n//   },\n//   addButton: {\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"12px\",\n//     padding: \"12px 24px\",\n//     fontSize: \"16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   bulkBar: {\n//     background: \"#e9f2ff\",\n//     border: \"1px solid #c4d9ff\",\n//     borderRadius: \"14px\",\n//     padding: \"15px 18px\",\n//     marginBottom: \"25px\",\n//     display: \"flex\",\n//     justifyContent: \"space-between\",\n//     alignItems: \"center\",\n//     flexWrap: \"wrap\",\n//     gap: \"14px\",\n//     boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\n//   },\n//   bulkText: {\n//     fontSize: \"15px\",\n//     fontWeight: \"600\",\n//     color: \"#0d3b66\",\n//   },\n//   bulkPanel: {\n//     width: \"100%\",\n//     background: \"#f7faff\",\n//     border: \"1px solid #cfe2ff\",\n//     padding: \"20px\",\n//     borderRadius: \"14px\",\n//     marginTop: \"10px\",\n//     boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\n//   },\n//   bulkPanelTitle: {\n//     textAlign: \"center\",\n//     fontSize: \"18px\",\n//     fontWeight: \"700\",\n//     marginBottom: \"15px\",\n//   },\n//   bulkItemBox: {\n//     background: \"#ffffff\",\n//     border: \"1px solid #dbe5f5\",\n//     padding: \"18px\",\n//     borderRadius: \"12px\",\n//     marginBottom: \"16px\",\n//     boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\n//   },\n//   bulkItemTitle: {\n//     fontSize: \"16px\",\n//     fontWeight: \"600\",\n//     marginBottom: \"12px\",\n//     color: \"#0d3b66\",\n//     borderLeft: \"4px solid #007bff\",\n//     paddingLeft: \"10px\",\n//   },\n//   formCard: {\n//     borderRadius: \"16px\",\n//     padding: \"25px\",\n//     marginBottom: \"28px\",\n//     background: \"#ffffff\",\n//     boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\n//     border: \"1px solid #eef2f7\",\n//   },\n//   formTitle: {\n//     fontSize: \"21px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"15px\",\n//   },\n//   formGrid: {\n//     display: \"grid\",\n//     gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\n//     gap: \"18px\",\n//   },\n//   formGroup: {\n//     display: \"flex\",\n//     flexDirection: \"column\",\n//     gap: \"6px\",\n//   },\n//   label: {\n//     fontWeight: \"600\",\n//     fontSize: \"14px\",\n//     color: \"#233142\",\n//   },\n//   input: {\n//     padding: \"10px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     transition: \"0.2s ease\",\n//     fontSize: \"14px\",\n//   },\n//   select: {\n//     padding: \"10px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     transition: \"0.2s ease\",\n//     fontSize: \"14px\",\n//   },\n//   textarea: {\n//     padding: \"10px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     transition: \"0.2s ease\",\n//     resize: \"none\",\n//     minHeight: \"80px\",\n//     fontSize: \"14px\",\n//   },\n//   fileInput: {\n//     padding: \"8px\",\n//     fontSize: \"13px\",\n//   },\n//   categoryRow: {\n//     display: \"flex\",\n//     gap: \"10px\",\n//     alignItems: \"center\",\n//   },\n//   addCategoryBox: {\n//     gridColumn: \"1 / -1\",\n//     background: \"#f1f7ff\",\n//     border: \"1px solid #cfe1ff\",\n//     padding: \"16px\",\n//     borderRadius: \"12px\",\n//   },\n//   preview: {\n//     width: \"110px\",\n//     height: \"110px\",\n//     borderRadius: \"12px\",\n//     marginTop: \"10px\",\n//     objectFit: \"cover\",\n//     border: \"1px solid #b7c9e2\",\n//   },\n//   formActions: {\n//     marginTop: \"15px\",\n//     display: \"flex\",\n//     gap: \"12px\",\n//     flexWrap: \"wrap\",\n//   },\n//   btnPrimary: {\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   btnSmall: {\n//     background: \"#43a047\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   btnDelete: {\n//     background: \"#e63946\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   btnCancel: {\n//     background: \"#adb5bd\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"9px 16px\",\n//     fontWeight: \"600\",\n//     cursor: \"pointer\",\n//     transition: \"0.25s ease\",\n//   },\n//   csvControls: {\n//     borderRadius: \"12px\",\n//     padding: \"16px\",\n//     background: \"#f7faff\",\n//     border: \"1px solid #d8e6ff\",\n//     display: \"flex\",\n//     alignItems: \"center\",\n//     justifyContent: \"space-between\",\n//     marginBottom: \"28px\",\n//     flexWrap: \"wrap\",\n//     gap: \"12px\",\n//   },\n//   tableCard: {\n\n//   },\n//   tableHeader: {\n//     display: \"flex\",\n//     justifyContent: \"space-between\",\n//     marginBottom: \"15px\",\n//   },\n//   tableTitle: {\n//     fontSize: \"21px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//   },\n//   totalCount: {\n//     fontSize: \"15px\",\n//     color: \"#6c757d\",\n//     fontWeight: \"600\",\n//   },\n//   tableWrapper: {\n//     overflowX: \"auto\",\n//   },\n//   table: {\n//     width: \"100%\",\n//     borderCollapse: \"collapse\",\n//     fontSize: \"14px\",\n//   },\n//   th: {\n//     background: \"#e9f2ff\",\n//     padding: \"12px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     textAlign: \"left\",\n//     whiteSpace: \"nowrap\",\n//   },\n//   tr: {\n//     borderBottom: \"1px solid #edf2f7\",\n//   },\n//   td: {\n//     padding: \"12px 10px\",\n//     whiteSpace: \"nowrap\",\n//   },\n//   tableImg: {\n//     width: \"55px\",\n//     height: \"55px\",\n//     borderRadius: \"8px\",\n//     objectFit: \"cover\",\n//     border: \"1px solid #cfd9e5\",\n//   },\n//   statusActive: {\n//     background: \"#93d8ba\",\n//     padding: \"7px 12px\",\n//     borderRadius: \"8px\",\n//     color: \"black\",\n//     fontWeight: \"600\",\n//     border: \"none\",\n//     cursor: \"pointer\",\n//   },\n//   statusInactive: {\n//     background: \"#d9b1b1\",\n//     padding: \"7px 12px\",\n//     borderRadius: \"8px\",\n//     color: \"black\",\n//     fontWeight: \"600\",\n//     border: \"none\",\n//     cursor: \"pointer\",\n//   },\n//   menuButton: {\n//     background: \"#f0f0f0\",\n//     border: \"none\",\n//     borderRadius: \"6px\",\n//     padding: \"6px 12px\",\n//     fontSize: \"20px\",\n//     fontWeight: \"bold\",\n//     cursor: \"pointer\",\n//     transition: \"0.2s ease\",\n//   },\n//   dropdown: {\n//     position: \"absolute\",\n//     right: \"0\",\n//     top: \"35px\",\n//     background: \"#fff\",\n//     border: \"1px solid #ddd\",\n//     borderRadius: \"8px\",\n//     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\n//     zIndex: \"100\",\n//     minWidth: \"140px\",\n//   },\n//   dropdownItem: {\n//     display: \"block\",\n//     width: \"100%\",\n//     padding: \"10px 15px\",\n//     background: \"transparent\",\n//     border: \"none\",\n//     textAlign: \"left\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//     fontWeight: \"500\",\n//     transition: \"0.2s ease\",\n//     borderBottom: \"1px solid #f0f0f0\",\n//   },\n//   dropdownItemDelete: {\n//     display: \"block\",\n//     width: \"100%\",\n//     padding: \"10px 15px\",\n//     background: \"transparent\",\n//     border: \"none\",\n//     textAlign: \"left\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//     fontWeight: \"500\",\n//     color: \"#e63946\",\n//     transition: \"0.2s ease\",\n//   },\n//   pagination: {\n//     marginTop: \"18px\",\n//     display: \"flex\",\n//     justifyContent: \"center\",\n//     gap: \"10px\",\n//     flexWrap: \"wrap\",\n//   },\n//   paginationBtn: {\n//     padding: \"9px 13px\",\n//     borderRadius: \"8px\",\n//     background: \"#fff\",\n//     border: \"1px solid #ddd\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//   },\n//   paginationBtnActive: {\n//     padding: \"9px 13px\",\n//     borderRadius: \"8px\",\n//     background: \"#007bff\",\n//     color: \"white\",\n//     border: \"1px solid #0062cc\",\n//     cursor: \"pointer\",\n//     fontSize: \"14px\",\n//   },\n//   modalOverlay: {\n//     position: \"fixed\",\n//     top: 0,\n//     left: 0,\n//     right: 0,\n//     bottom: 0,\n//     background: \"rgba(0, 0, 0, 0.5)\",\n//     display: \"flex\",\n//     justifyContent: \"center\",\n//     alignItems: \"center\",\n//     zIndex: \"1000\",\n//     padding: \"20px\",\n//   },\n//   modal: {\n//     background: \"#fff\",\n//     borderRadius: \"16px\",\n//     padding: \"30px\",\n//     maxWidth: \"700px\",\n//     width: \"100%\",\n//     maxHeight: \"90vh\",\n//     overflowY: \"auto\",\n//     boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\n//   },\n//   modalTitle: {\n//     fontSize: \"22px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"20px\",\n//     textAlign: \"center\",\n//   },\n\n// }\n/* -------------------------------------------------------\r\n   FULL UPDATED PRICE LIST (BACKEND-LOGIC COMPATIBLE)\r\n   Author: ChatGPT\r\n---------------------------------------------------------*/\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // FORM\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    difference: \"\",\n    validTill: \"\",\n    file: null\n  });\n  const [editId, setEditId] = useState(null);\n  const [isCopyMode, setIsCopyMode] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [activeMenu, setActiveMenu] = useState(null);\n\n  // CATEGORY/ SUB\n  const [addingCategory, setAddingCategory] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n  const [addingSub, setAddingSub] = useState(false);\n  const [newSubName, setNewSubName] = useState(\"\");\n  const [newSubImage, setNewSubImage] = useState(null);\n  const [newSubPreview, setNewSubPreview] = useState(null);\n\n  // BULK\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [bulkMode, setBulkMode] = useState(false);\n\n  // CSV\n  const [csvFile, setCsvFile] = useState(null);\n  const csvInputRef = useRef();\n\n  // PAGINATION\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n\n  // FILTERS\n  const [filterCategory, setFilterCategory] = useState(\"\");\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n  const [filterSubs, setFilterSubs] = useState([]);\n\n  /* ----------------------------------------------------\r\n      LOAD CATEGORIES FIRST ‚Üí ITEMS AFTER\r\n  ----------------------------------------------------*/\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n  useEffect(() => {\n    if (categories.length > 0) fetchItems();\n  }, [categories]);\n\n  /* ----------------------------------------------------\r\n      FETCH ALL ITEMS (FINAL PRICE LOGIC FIXED)\r\n  ----------------------------------------------------*/\n  const fetchItems = async () => {\n    try {\n      var _res$data;\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.success) {\n        const raw = res.data.data;\n\n        // Correct category/subcategory merge\n        const enriched = raw.map(p => {\n          var _cat$subcategories, _ref, _ref2, _p$currentFinalPrice;\n          const cat = categories.find(c => {\n            var _p$category;\n            return c._id === p.category || c._id === ((_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category._id);\n          });\n          const sub = cat === null || cat === void 0 ? void 0 : (_cat$subcategories = cat.subcategories) === null || _cat$subcategories === void 0 ? void 0 : _cat$subcategories.find(s => {\n            var _p$subcategory;\n            return s._id === p.subcategory || s._id === ((_p$subcategory = p.subcategory) === null || _p$subcategory === void 0 ? void 0 : _p$subcategory._id);\n          });\n          const final = (_ref = (_ref2 = (_p$currentFinalPrice = p.currentFinalPrice) !== null && _p$currentFinalPrice !== void 0 ? _p$currentFinalPrice : p.finalPrice) !== null && _ref2 !== void 0 ? _ref2 : p.lastFinalPrice) !== null && _ref !== void 0 ? _ref : p.basePrice;\n          return {\n            ...p,\n            category: cat ? {\n              _id: cat._id,\n              name: cat.name\n            } : p.category,\n            subcategory: sub ? {\n              _id: sub._id,\n              name: sub.name\n            } : p.subcategory,\n            finalPrice: final\n          };\n        });\n        setItems(enriched);\n      }\n    } catch (err) {\n      console.error(\"Fetch items error\", err);\n      alert(\"Could not fetch items\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ----------------------------------------------------\r\n      CATEGORIES\r\n  ----------------------------------------------------*/\n  const fetchCategories = async () => {\n    try {\n      var _res$data2;\n      const res = await axios.get(CATEGORY_URL);\n      if ((_res$data2 = res.data) !== null && _res$data2 !== void 0 && _res$data2.success) setCategories(res.data.categories);\n    } catch (err) {\n      console.error(\"Fetch categories error\", err);\n      alert(\"Could not fetch categories\");\n    }\n  };\n\n  /* ----------------------------------------------------\r\n      FORM HANDLERS\r\n  ----------------------------------------------------*/\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (files !== null && files !== void 0 && files.length) {\n      setForm(p => ({\n        ...p,\n        file: files[0]\n      }));\n    } else {\n      setForm(p => ({\n        ...p,\n        [name]: value\n      }));\n    }\n  };\n\n  /* ----------------------------------------------------\r\n      SUBMIT (CREATE, COPY, EDIT)\r\n      NOTE: EDIT does NOT change price/diff (backend rule)\r\n  ----------------------------------------------------*/\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const fd = new FormData();\n      Object.entries(form).forEach(([k, v]) => {\n        if (v !== null && v !== undefined) fd.append(k, v);\n      });\n      let res;\n\n      // COPY\n      if (isCopyMode) {\n        res = await axios.post(API_URL, fd);\n        alert(\"Copied successfully\");\n      }\n      // UPDATE (metadata only)\n      else if (editId) {\n        res = await axios.put(`${API_URL}/${editId}`, fd);\n        alert(\"Updated\");\n      }\n      // CREATE\n      else {\n        res = await axios.post(API_URL, fd);\n        alert(\"Added\");\n      }\n      await fetchItems();\n      setShowModal(false);\n      setShowForm(false);\n      setEditId(null);\n      setIsCopyMode(false);\n      resetForm();\n    } catch (err) {\n      console.error(\"Save error\", err);\n      alert(\"Save failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetForm = () => {\n    setForm({\n      name: \"\",\n      category: \"\",\n      subcategory: \"\",\n      description: \"\",\n      basePrice: \"\",\n      difference: \"\",\n      validTill: \"\",\n      file: null\n    });\n  };\n\n  /* ----------------------------------------------------\r\n      EDIT\r\n  ----------------------------------------------------*/\n  const handleEdit = item => {\n    var _item$category, _item$subcategory;\n    setForm({\n      name: item.name,\n      category: (_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category._id,\n      subcategory: ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : _item$subcategory._id) || \"\",\n      description: item.description,\n      basePrice: item.basePrice,\n      difference: \"\",\n      // backend does NOT allow diff update on edit\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null\n    });\n    const cat = categories.find(c => {\n      var _item$category2;\n      return c._id === ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2._id);\n    });\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setEditId(item._id);\n    setIsCopyMode(false);\n    setShowModal(true);\n  };\n\n  /* ----------------------------------------------------\r\n      COPY\r\n  ----------------------------------------------------*/\n  const handleCopyToEdit = item => {\n    var _item$category3, _item$subcategory2;\n    setForm({\n      name: item.name,\n      category: (_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : _item$category3._id,\n      subcategory: ((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : _item$subcategory2._id) || \"\",\n      description: item.description,\n      basePrice: item.basePrice,\n      difference: item.todayDiff || 0,\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null\n    });\n    setEditId(null);\n    setIsCopyMode(true);\n    setShowModal(true);\n  };\n\n  /* ----------------------------------------------------\r\n      DELETE\r\n  ----------------------------------------------------*/\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete item?\")) return;\n    await axios.delete(`${API_URL}/${id}`);\n    setItems(p => p.filter(x => x._id !== id));\n  };\n\n  /* ----------------------------------------------------\r\n      STATUS\r\n  ----------------------------------------------------*/\n  const handleStatusToggle = async item => {\n    const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n    await axios.put(`${API_URL}/status/${item._id}`, {\n      status: newStatus\n    });\n    setItems(p => p.map(x => x._id === item._id ? {\n      ...x,\n      status: newStatus\n    } : x));\n  };\n\n  /* ----------------------------------------------------\r\n      CSV Import\r\n  ----------------------------------------------------*/\n  const handleImportCsv = async () => {\n    if (!csvFile) return alert(\"Select CSV\");\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", csvFile);\n      const res = await axios.post(`${API_URL}/import`, fd);\n      alert(`Imported: ${res.data.inserted}`);\n      csvInputRef.current.value = null;\n      setCsvFile(null);\n      fetchItems();\n    } catch (err) {\n      console.error(\"CSV import error\", err);\n      alert(\"Import failed\");\n    }\n  };\n\n  /* ----------------------------------------------------\r\n      CSV Export ‚Üí Backend final price support\r\n  ----------------------------------------------------*/\n  const handleExportCsv = () => {\n    if (!items.length) return alert(\"No items\");\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"todayDiff\", \"finalPrice\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = items.map(p => {\n      var _p$category2, _p$subcategory2;\n      return [p._id, p.name, ((_p$category2 = p.category) === null || _p$category2 === void 0 ? void 0 : _p$category2.name) || \"\", ((_p$subcategory2 = p.subcategory) === null || _p$subcategory2 === void 0 ? void 0 : _p$subcategory2.name) || \"\", p.basePrice, p.todayDiff || 0, p.finalPrice, p.status, p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description, p.image || \"\"];\n    });\n    const csv = [header, ...rows].map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const blob = new Blob([csv], {\n      type: \"text/csv\"\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `prices_${Date.now()}.csv`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  /* ----------------------------------------------------\r\n      FILTER + SEARCH + PAGINATION\r\n  ----------------------------------------------------*/\n  const filteredItems = items.filter(item => {\n    var _item$category4, _item$category4$name, _item$subcategory3, _item$subcategory3$na, _item$category5, _item$subcategory4;\n    const t = search.toLowerCase();\n    const matchSearch = item.name.toLowerCase().includes(t) || ((_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : (_item$category4$name = _item$category4.name) === null || _item$category4$name === void 0 ? void 0 : _item$category4$name.toLowerCase().includes(t)) || ((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : (_item$subcategory3$na = _item$subcategory3.name) === null || _item$subcategory3$na === void 0 ? void 0 : _item$subcategory3$na.toLowerCase().includes(t));\n    const matchCat = !filterCategory || ((_item$category5 = item.category) === null || _item$category5 === void 0 ? void 0 : _item$category5._id) === filterCategory;\n    const matchSub = !filterSubcategory || ((_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4._id) === filterSubcategory;\n    return matchSearch && matchCat && matchSub;\n  });\n  const indexLast = currentPage * itemsPerPage;\n  const currentItems = filteredItems.slice(indexLast - itemsPerPage, indexLast);\n  const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\n\n  /* ----------------------------------------------------\r\n      UI START\r\n  ----------------------------------------------------*/\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        fontSize: 22,\n        fontWeight: 700\n      },\n      children: \"Product Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1941,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search product...\",\n      value: search,\n      onChange: e => {\n        setSearch(e.target.value);\n        setCurrentPage(1);\n      },\n      style: {\n        width: \"100%\",\n        padding: 12,\n        marginTop: 12,\n        marginBottom: 20,\n        borderRadius: 10,\n        border: \"1px solid #ccc\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1944,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 10,\n        marginBottom: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        ref: csvInputRef,\n        onChange: e => setCsvFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1964,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleImportCsv,\n        children: \"Import CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1970,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExportCsv,\n        children: \"Export CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1971,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1963,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setShowForm(!showForm);\n        setEditId(null);\n        setIsCopyMode(false);\n      },\n      style: {\n        marginBottom: 15\n      },\n      children: showForm ? \"Close Form\" : \"Add Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1975,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 20,\n        background: \"#fff\",\n        borderRadius: 10,\n        marginBottom: 20,\n        border: \"1px solid #dddddd\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1997,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          placeholder: \"Name\",\n          value: form.name,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2000,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"category\",\n          value: form.category,\n          onChange: handleChange,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2014,\n            columnNumber: 15\n          }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c._id,\n            children: c.name\n          }, c._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2016,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2008,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"subcategory\",\n          value: form.subcategory,\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Subcategory\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2027,\n            columnNumber: 15\n          }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s._id,\n            children: s.name\n          }, s._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2029,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2022,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"basePrice\",\n          type: \"number\",\n          placeholder: \"Base Price\",\n          value: form.basePrice,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2035,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"difference\",\n          type: \"number\",\n          placeholder: \"Difference\",\n          value: form.difference,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2044,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"validTill\",\n          type: \"date\",\n          value: form.validTill,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2052,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"file\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2059,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          placeholder: \"Description\",\n          value: form.description,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2061,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          children: loading ? \"Saving...\" : \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2068,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1999,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1988,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        width: \"100%\",\n        borderCollapse: \"collapse\",\n        background: \"#fff\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            background: \"#e9f2ff\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2085,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2086,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2087,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Subcat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2088,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Base\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2089,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Diff\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2090,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Final\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2091,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2092,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Valid Till\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2093,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2094,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2084,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2083,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: currentItems.map(item => {\n          var _item$category6, _item$subcategory5;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image,\n                style: {\n                  width: 50,\n                  height: 50,\n                  borderRadius: 6\n                },\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2103,\n                columnNumber: 19\n              }, this) : \"No Img\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2113,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: (_item$category6 = item.category) === null || _item$category6 === void 0 ? void 0 : _item$category6.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2114,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: ((_item$subcategory5 = item.subcategory) === null || _item$subcategory5 === void 0 ? void 0 : _item$subcategory5.name) || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u20B9\", item.basePrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2117,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.todayDiff || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2118,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [\"\\u20B9\", item.finalPrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2121,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleStatusToggle(item),\n                style: {\n                  background: item.status === \"active\" ? \"#93d8ba\" : \"#e6b0b0\",\n                  border: \"none\",\n                  padding: \"6px 12px\",\n                  borderRadius: 6\n                },\n                children: item.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2125,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleEdit(item),\n                children: \"\\u270F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2146,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleCopyToEdit(item),\n                children: \"\\uD83D\\uDCC4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(item._id),\n                children: \"\\uD83D\\uDDD1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2148,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2145,\n              columnNumber: 15\n            }, this)]\n          }, item._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2100,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2098,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2076,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 15\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: currentPage === 1,\n        onClick: () => setCurrentPage(p => p - 1),\n        children: \"Previous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2157,\n        columnNumber: 9\n      }, this), Array.from({\n        length: totalPages\n      }).map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage(i + 1),\n        style: {\n          fontWeight: currentPage === i + 1 ? \"700\" : \"400\"\n        },\n        children: i + 1\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2165,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: currentPage === totalPages,\n        onClick: () => setCurrentPage(p => p + 1),\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2156,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        inset: 0,\n        background: \"rgba(0,0,0,0.4)\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        padding: 20,\n        zIndex: 999\n      },\n      onClick: () => setShowModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: 600,\n          width: \"100%\",\n          background: \"#fff\",\n          borderRadius: 12,\n          padding: 20\n        },\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginBottom: 20\n          },\n          children: isCopyMode ? \"Copy Product\" : \"Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            value: form.name,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"category\",\n            value: form.category,\n            onChange: handleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2226,\n              columnNumber: 17\n            }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: c._id,\n              children: c.name\n            }, c._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2228,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2221,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"subcategory\",\n            value: form.subcategory,\n            onChange: handleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2239,\n              columnNumber: 17\n            }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: s._id,\n              children: s.name\n            }, s._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2241,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"basePrice\",\n            value: form.basePrice,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2247,\n            columnNumber: 15\n          }, this), !editId && /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"difference\",\n            value: form.difference,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2257,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"validTill\",\n            value: form.validTill,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2265,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2274,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              setShowModal(false);\n              resetForm();\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2288,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2213,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2199,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2186,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1940,\n    columnNumber: 5\n  }, this);\n}\n_s(PriceList, \"HxI1XcsNUFFmTSoXZGsXPuJcu3E=\");\n_c = PriceList;\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsxDEV","_jsxDEV","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","difference","validTill","file","editId","setEditId","isCopyMode","setIsCopyMode","showForm","setShowForm","showModal","setShowModal","activeMenu","setActiveMenu","addingCategory","setAddingCategory","newCategoryName","setNewCategoryName","newCategoryImage","setNewCategoryImage","newCategoryPreview","setNewCategoryPreview","addingSub","setAddingSub","newSubName","setNewSubName","newSubImage","setNewSubImage","newSubPreview","setNewSubPreview","selectedItems","setSelectedItems","bulkMode","setBulkMode","csvFile","setCsvFile","csvInputRef","currentPage","setCurrentPage","itemsPerPage","filterCategory","setFilterCategory","filterSubcategory","setFilterSubcategory","filterSubs","setFilterSubs","fetchCategories","length","fetchItems","_res$data","res","get","data","success","raw","enriched","map","p","_cat$subcategories","_ref","_ref2","_p$currentFinalPrice","cat","find","c","_p$category","_id","sub","s","_p$subcategory","final","currentFinalPrice","finalPrice","lastFinalPrice","err","console","error","alert","_res$data2","handleChange","e","value","files","target","handleSubmit","preventDefault","fd","FormData","Object","entries","forEach","k","v","undefined","append","post","put","resetForm","handleEdit","item","_item$category","_item$subcategory","split","_item$category2","handleCopyToEdit","_item$category3","_item$subcategory2","todayDiff","handleDelete","id","window","confirm","delete","filter","x","handleStatusToggle","newStatus","status","handleImportCsv","inserted","current","handleExportCsv","header","rows","_p$category2","_p$subcategory2","Date","toISOString","image","csv","r","String","replace","join","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","now","click","revokeObjectURL","filteredItems","_item$category4","_item$category4$name","_item$subcategory3","_item$subcategory3$na","_item$category5","_item$subcategory4","t","toLowerCase","matchSearch","includes","matchCat","matchSub","indexLast","currentItems","slice","totalPages","Math","ceil","style","padding","children","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","width","marginTop","marginBottom","borderRadius","border","display","gap","accept","ref","onClick","background","onSubmit","required","disabled","borderCollapse","_item$category6","_item$subcategory5","src","height","alt","toLocaleDateString","Array","from","_","i","position","inset","justifyContent","alignItems","zIndex","maxWidth","stopPropagation","_c","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\"\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // FORM state\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [isCopyMode, setIsCopyMode] = useState(false);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   const [addingSub, setAddingSub] = useState(false);\r\n//   const [newSubName, setNewSubName] = useState(\"\");\r\n//   const [newSubImage, setNewSubImage] = useState(null);\r\n//   const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const csvInputRef = useRef();\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n// const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n// const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n// useEffect(() => {\r\n//   if (!filterCategory) {\r\n//     setFilterSubs([]);\r\n//     setFilterSubcategory(\"\");\r\n//     return;\r\n//   }\r\n\r\n//   const cat = categories.find(c => c._id === filterCategory);\r\n//   setFilterSubs(cat?.subcategories || []);\r\n//   setFilterSubcategory(\"\");\r\n// }, [filterCategory, categories]);\r\n\r\n\r\n//   // useEffect(() => {\r\n//   //   fetchItems();\r\n//   //   fetchCategories();\r\n\r\n//   //   const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//   //   window.addEventListener(\"resize\", handleResize);\r\n//   //   return () => window.removeEventListener(\"resize\", handleResize);\r\n//   // }, []);\r\n//   // 1. Pehle categories load karo\r\n// useEffect(() => {\r\n//   fetchCategories();\r\n// }, []);\r\n\r\n// // 2. Categories load hone ke baad items load karo\r\n// useEffect(() => {\r\n//   if (categories.length > 0) {\r\n//     fetchItems();\r\n//   }\r\n// }, [categories]);\r\n\r\n// // 3. Resize listener\r\n// useEffect(() => {\r\n//   const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//   window.addEventListener(\"resize\", handleResize);\r\n//   return () => window.removeEventListener(\"resize\", handleResize);\r\n// }, []);\r\n\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       // if (res.data && res.data.success) setItems(res.data.data || []);\r\n//       if (res.data && res.data.success) {\r\n//   const raw = res.data.data;\r\n\r\n//   // Agar categories abhi load nahi hui = raw items set\r\n//   if (!categories.length) {\r\n//     setItems(raw);\r\n//     return;\r\n//   }\r\n\r\n//   // Mapping to category + subcategory object\r\n//   const enriched = raw.map((item) => {\r\n//     const cat = categories.find(\r\n//       (c) =>\r\n//         c._id === item.category ||\r\n//         c._id === item.category?._id\r\n//     );\r\n\r\n//     const sub = cat?.subcategories?.find(\r\n//       (s) =>\r\n//         s._id === item.subcategory ||\r\n//         s._id === item.subcategory?._id\r\n//     );\r\n\r\n//     return {\r\n//       ...item,\r\n//       category: cat\r\n//         ? { _id: cat._id, name: cat.name }\r\n//         : item.category,\r\n\r\n//       subcategory: sub\r\n//         ? { _id: sub._id, name: sub.name }\r\n//         : item.subcategory,\r\n//     };\r\n//   });\r\n\r\n//   setItems(enriched);\r\n// }\r\n\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       alert(\"Could not fetch items\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       alert(\"Could not fetch categories\");\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     const subs = (cat && cat.subcategories) || [];\r\n//     setSubcategories(subs);\r\n\r\n//     const exists = subs.some((s) => s._id === form.subcategory);\r\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//   }, [form.category, categories]);\r\n\r\n//   const handleCreateCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newCategoryName.trim());\r\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//       const res = await axios.post(CATEGORY_URL, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Category created\");\r\n//         setNewCategoryName(\"\");\r\n//         setNewCategoryImage(null);\r\n//         setNewCategoryPreview(null);\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Category creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create category error\", err);\r\n//       alert(\"Category creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleCreateSub = async () => {\r\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n//     if (!form.category) return alert(\"Select category first\");\r\n\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newSubName.trim());\r\n//       if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Subcategory created\");\r\n//         setNewSubName(\"\");\r\n//         setNewSubImage(null);\r\n//         setNewSubPreview(null);\r\n//         setAddingSub(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Subcategory creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create sub error\", err);\r\n//       alert(\"Subcategory creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files && files.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       Object.keys(form).forEach((k) => {\r\n//         const val = form[k];\r\n//         if (val !== undefined && val !== null) {\r\n//           fd.append(k, val);\r\n//         }\r\n//       });\r\n\r\n//       let res;\r\n//       if (isCopyMode) {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Copied as new item\");\r\n//       } else if (editId) {\r\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n//         alert(\"Updated\");\r\n//       } else {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Added\");\r\n//       }\r\n\r\n//       await fetchItems();\r\n//       await fetchCategories();\r\n\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         subcategory: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n//       setEditId(null);\r\n//       setIsCopyMode(false);\r\n//       setShowModal(false);\r\n//       setShowForm(false);\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       difference: item.difference ?? \"\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(item._id);\r\n//     setIsCopyMode(false);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleCopyToEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       difference: item.difference ?? \"\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(null);\r\n//     setIsCopyMode(true);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//       setActiveMenu(null);\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       alert(\"Delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       alert(\"Status update failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         name: x.name,\r\n//         basePrice: x.basePrice,\r\n//         difference: x.difference,\r\n//         validTill: x.validTill,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       alert(\"Bulk save failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleCsvSelect = (e) => {\r\n//     setCsvFile(e.target.files[0]);\r\n//   };\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Select CSV file\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"file\", csvFile);\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//         fetchItems();\r\n//       } else {\r\n//         alert(\"CSV import failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"CSV import error\", err);\r\n//       alert(\"CSV import failed\");\r\n//     }\r\n//   };\r\n\r\n//   // const handleExportCsv = async () => {\r\n//   //   try {\r\n//   //     const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n//   //     const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//   //     const a = document.createElement(\"a\");\r\n//   //     a.href = url;\r\n//   //     a.download = \"prices.csv\";\r\n//   //     a.click();\r\n//   //     URL.revokeObjectURL(url);\r\n//   //   } catch (err) {\r\n//   //     console.error(\"CSV export error\", err);\r\n//   //     alert(\"CSV export failed\");\r\n//   //   }\r\n//   // };\r\n// const handleExportCsv = () => {\r\n//   if (!items.length) return alert(\"No items to export\");\r\n\r\n//   const header = [\r\n//     \"id\",\r\n//     \"name\",\r\n//     \"categoryName\",\r\n//     \"subcategoryName\",\r\n//     \"basePrice\",\r\n//     \"difference\",\r\n//     \"finalPrice\",\r\n//     \"status\",\r\n//     \"validTill\",\r\n//     \"description\",\r\n//     \"imageUrl\",\r\n//   ];\r\n\r\n//   const rows = items.map((p) => [\r\n//     p._id,\r\n//     p.name || \"\",\r\n//     p.category?.name || \"\",\r\n//     p.subcategory?.name || \"\",\r\n//     p.basePrice ?? \"\",\r\n//     p.difference ?? \"\",\r\n//     (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n//     p.status || \"\",\r\n//     p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//     p.description || \"\",\r\n//     p.image || \"\",\r\n//   ]);\r\n\r\n//   const csvArray = [header, ...rows];\r\n//   const csvContent =\r\n//     \"data:text/csv;charset=utf-8,\" +\r\n//     csvArray\r\n//       .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n//       .join(\"\\n\");\r\n\r\n//   const encodedUri = encodeURI(csvContent);\r\n//   const link = document.createElement(\"a\");\r\n//   link.href = encodedUri;\r\n//   link.download = `all_prices_${Date.now()}.csv`;\r\n//   link.click();\r\n// };\r\n\r\n//   const handleExportSelectedCsv = () => {\r\n//     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"difference\",\r\n//       \"finalPrice\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = selectedData.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.difference ?? \"\",\r\n//       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `selected_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   // const filteredItems = items.filter((item) => {\r\n//   //   const t = search.toLowerCase();\r\n//   //   return (\r\n//   //     (item.name || \"\").toString().toLowerCase().includes(t) ||\r\n//   //     (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//   //     (item.subcategory?.name || \"\").toLowerCase().includes(t)\r\n//   //   );\r\n//   // });\r\n//   const filteredItems = items.filter((item) => {\r\n//   const t = search.toLowerCase();\r\n\r\n//   const matchText =\r\n//     (item.name || \"\").toLowerCase().includes(t) ||\r\n//     (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//     (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//   const matchCategory =\r\n//     !filterCategory || item.category?._id === filterCategory;\r\n\r\n//   const matchSub =\r\n//     !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//   return matchText && matchCategory && matchSub;\r\n// });\r\n\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n//   return (\r\n//     <div style={styles.container}>\r\n//       {/* HEADER */}\r\n//       <div style={styles.header}>\r\n//         <h1 style={styles.title}>Product Management</h1>\r\n//         {/* <p style={styles.subtitle}>Manage prices, categories, images, CSV & bulk actions.</p> */}\r\n//       </div>\r\n\r\n//       {/* SEARCH */}\r\n      \r\n//      <div className=\"mobile-topbar\">\r\n//   <input\r\n//     type=\"text\"\r\n//     placeholder=\"Search product, category or subcategory...\"\r\n//     value={search}\r\n//     onChange={(e) => {\r\n//       setSearch(e.target.value);\r\n//       setCurrentPage(1);\r\n//     }}\r\n//     style={styles.searchInput}\r\n//   />\r\n\r\n//   <button\r\n//     style={styles.addButton}\r\n//     onClick={() => {\r\n//       setShowForm(!showForm);\r\n//       setEditId(null);\r\n//       setIsCopyMode(false);\r\n//     }}\r\n//   >\r\n//     {showForm ? \"‚úñ\" : \"Add Product\"}\r\n//   </button>\r\n// </div>\r\n// <div className=\"filter-bar\">\r\n//   <select\r\n//     value={filterCategory}\r\n//     onChange={(e) => setFilterCategory(e.target.value)}\r\n//     className=\"filter-select\"\r\n//   >\r\n//     <option value=\"\">Filter by Category</option>\r\n//     {categories.map((c) => (\r\n//       <option key={c._id} value={c._id}>{c.name}</option>\r\n//     ))}\r\n//   </select>\r\n\r\n//   <select\r\n//     value={filterSubcategory}\r\n//     onChange={(e) => setFilterSubcategory(e.target.value)}\r\n//     className=\"filter-select\"\r\n//     disabled={!filterSubs.length}\r\n//   >\r\n//     <option value=\"\">Filter by Subcategory</option>\r\n//     {filterSubs.map((s) => (\r\n//       <option key={s._id} value={s._id}>{s.name}</option>\r\n//     ))}\r\n//   </select>\r\n\r\n  \r\n// </div>\r\n\r\n\r\n//       {/* BULK BAR */}\r\n//       {selectedItems.length > 0 && (\r\n//         // <div style={styles.bulkBar}>\r\n//         <div className=\"bulk-bar\">\r\n\r\n//           {/* <span style={styles.bulkText}>{selectedItems.length} selected</span> */}\r\n\r\n//           {!bulkMode ? (\r\n//             // <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\r\n//             <div className=\"bulk-actions\">\r\n\r\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n\r\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n\r\n//               {/* <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n//                 ‚§ì Export Selected\r\n//               </button> */}\r\n//             </div>\r\n//           ) : (\r\n//             <div style={styles.bulkPanel}>\r\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} style={styles.bulkItemBox}>\r\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n//                     <div style={styles.formGrid}>\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Name</label>\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           value={item.name}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Base Price</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.basePrice}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\r\n//                           }\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Category</label>\r\n//                         <select\r\n//                           value={item.category?._id || \"\"}\r\n//                           onChange={(e) => {\r\n//                             const newCat = e.target.value;\r\n//                             updateLocalItemField(item._id, \"category\", { _id: newCat });\r\n//                             const catObj = categories.find((c) => c._id === newCat);\r\n//                             const firstSub = catObj?.subcategories?.[0]?._id || \"\";\r\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\r\n//                           }}\r\n//                           style={styles.select}\r\n//                         >\r\n//                           <option value=\"\">Select Category</option>\r\n//                           {categories.map((c) => (\r\n//                             <option key={c._id} value={c._id}>\r\n//                               {c.name}\r\n//                             </option>\r\n//                           ))}\r\n//                         </select>\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Subcategory</label>\r\n//                         <select\r\n//                           value={item.subcategory?._id || \"\"}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\r\n//                           }\r\n//                           style={styles.select}\r\n//                         >\r\n//                           <option value=\"\">Select Subcategory</option>\r\n//                           {categories\r\n//                             .find((c) => c._id === item.category?._id)\r\n//                             ?.subcategories?.map((s) => (\r\n//                               <option key={s._id} value={s._id}>\r\n//                                 {s.name}\r\n//                               </option>\r\n//                             ))}\r\n//                         </select>\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Difference</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.difference || 0}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\r\n//                           }\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               <div style={{ display: \"flex\", gap: 0, marginTop: 12 }}>\r\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n//                   ‚úî Save All\r\n//                 </button>\r\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n//                   ‚úñ Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* FORM */}\r\n//       {showForm && (\r\n//         <div style={styles.formCard}>\r\n//           <h2 style={styles.formTitle}>‚ûï Add \r\n            \r\n//           </h2>\r\n\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div style={styles.formGrid}>\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Product Name *</label>\r\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Category *</label>\r\n//                 <div style={styles.categoryRow}>\r\n//                   <select\r\n//                     required\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={(e) => {\r\n//                       handleChange(e);\r\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                     }}\r\n//                     style={styles.select}\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option value={c._id} key={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n\r\n//                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\r\n//                     {addingCategory ? \"Close\" : \"Add\"}\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {addingCategory && (\r\n//                 <div style={styles.addCategoryBox}>\r\n//                   <label style={styles.label}>Add New Category</label>\r\n//                   <div style={styles.categoryRow}>\r\n//                     <input\r\n//                       value={newCategoryName}\r\n//                       onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                       placeholder=\"Category name\"\r\n//                       style={styles.input}\r\n//                     />\r\n//                     <input\r\n//                       type=\"file\"\r\n//                       accept=\"image/*\"\r\n//                       onChange={(e) => {\r\n//                         setNewCategoryImage(e.target.files[0]);\r\n//                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                       }}\r\n//                       style={styles.fileInput}\r\n//                     />\r\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\r\n//                       Create\r\n//                     </button>\r\n//                   </div>\r\n//                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\r\n//                 </div>\r\n//               )}\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Subcategory</label>\r\n//                 <div style={styles.categoryRow}>\r\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n//                     <option value=\"\">Select Subcategory</option>\r\n//                     {subcategories.map((s) => (\r\n//                       <option value={s._id} key={s._id}>\r\n//                         {s.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n\r\n//                   {form.category && (\r\n//                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\r\n//                       {addingSub ? \"Close\" : \"Add\"}\r\n//                     </button>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {addingSub && (\r\n//                 <div style={styles.addCategoryBox}>\r\n//                   <label style={styles.label}>Add New Subcategory</label>\r\n//                   <div style={styles.categoryRow}>\r\n//                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\r\n//                     <input\r\n//                       type=\"file\"\r\n//                       accept=\"image/*\"\r\n//                       onChange={(e) => {\r\n//                         setNewSubImage(e.target.files[0]);\r\n//                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                       }}\r\n//                       style={styles.fileInput}\r\n//                     />\r\n//                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\r\n//                       Create\r\n//                     </button>\r\n//                   </div>\r\n//                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\r\n//                 </div>\r\n//               )}\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Base Price *</label>\r\n//                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Difference</label>\r\n//                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Valid Till</label>\r\n//                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Image</label>\r\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//               </div>\r\n//             </div>\r\n\r\n//             <div style={styles.formGroup}>\r\n//               <label style={styles.label}>Description</label>\r\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//             </div>\r\n\r\n//             <div style={styles.formActions}>\r\n//               <button style={styles.btnPrimary} disabled={loading}>\r\n//                 {loading ? \"Saving...\" : \"Add Product\"}\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* CSV CONTROLS */}\r\n//       {/* <div style={styles.csvControls}>\r\n//         <div>\r\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\r\n//           <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <div style={{ display: \"flex\", gap: 8 }}>\r\n//           <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n//             Export All CSV\r\n//           </button>\r\n\r\n//           <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n//             Export Selected CSV\r\n//           </button>\r\n//         </div>\r\n//       </div> */}\r\n// <div className=\"csv-topbar\">\r\n//   <div className=\"csv-row\">\r\n//     <input\r\n//       type=\"file\"\r\n//       accept=\".csv\"\r\n//       ref={csvInputRef}\r\n//       onChange={handleCsvSelect}\r\n//       style={styles.fileInput}\r\n//     />\r\n\r\n//     <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n//       Import\r\n//     </button>\r\n\r\n//     <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n//       Export All\r\n//     </button>\r\n\r\n//     <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n//        Selected \r\n//     </button>\r\n//   </div>\r\n// </div>\r\n\r\n//       {/* TABLE */}\r\n//       <div style={styles.tableCard}>\r\n//         <div style={styles.tableHeader}>\r\n//           <h2 style={styles.tableTitle}> Items</h2>\r\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         <div style={styles.tableWrapper}>\r\n//           <table style={styles.table}>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th style={styles.th}>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th style={styles.th}>Sr</th>\r\n//                 <th style={styles.th}>Image</th>\r\n//                 <th style={styles.th}>Name</th>\r\n//                 <th style={styles.th}>Category</th>\r\n//                 <th style={styles.th}>Subcategory</th>\r\n//                 <th style={styles.th}>Base</th>\r\n//                 <th style={styles.th}>Diff</th>\r\n//                 <th style={styles.th}>Final</th>\r\n//                 <th style={styles.th}>Status</th>\r\n//                 <th style={styles.th}>Valid Till</th>\r\n//                 <th style={styles.th}>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id} style={styles.tr}>\r\n//                   <td style={styles.td}>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n//                   <td style={styles.td}>{item.name}</td>\r\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n//                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n//                   <td style={styles.td}>‚Çπ{item.basePrice}</td>\r\n//                   <td style={styles.td}>{item.difference || 0}</td>\r\n//                   <td style={styles.td}>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n                  \r\n\r\n                  \r\n\r\n//                   <td style={styles.td}>\r\n//                     <button\r\n//                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ position: \"relative\" }}>\r\n//                       <button\r\n//                         style={styles.menuButton}\r\n//                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n//                       >\r\n//                         ‚ãÆ\r\n//                       </button>\r\n\r\n//                       {activeMenu === item._id && (\r\n//                         <div style={styles.dropdown}>\r\n//                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n//                             ‚úè Edit\r\n//                           </button>\r\n//                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\r\n//                             üìÑ Copy\r\n//                           </button>\r\n//                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n//                             üóë Delete\r\n//                           </button>\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         {/* PAGINATION */}\r\n//         <div style={styles.pagination}>\r\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }, (_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* MODAL FOR EDIT/COPY */}\r\n//       {showModal && (\r\n//         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n//           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n//             <h2 style={styles.modalTitle}>{isCopyMode ? \" Copy Product\" : \" Edit Product\"}</h2>\r\n\r\n//             <form onSubmit={handleSubmit}>\r\n//               <div style={styles.formGrid}>\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Product Name *</label>\r\n//                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Category *</label>\r\n//                   <select\r\n//                     required\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={(e) => {\r\n//                       handleChange(e);\r\n//                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                     }}\r\n//                     style={styles.select}\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option value={c._id} key={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Subcategory</label>\r\n//                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n//                     <option value=\"\">Select Subcategory</option>\r\n//                     {subcategories.map((s) => (\r\n//                       <option value={s._id} key={s._id}>\r\n//                         {s.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Base Price *</label>\r\n//                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Difference</label>\r\n//                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Valid Till</label>\r\n//                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Image</label>\r\n//                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//                 </div>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Description</label>\r\n//                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//               </div>\r\n\r\n//               <div style={styles.formActions}>\r\n//                 <button style={styles.btnPrimary} disabled={loading}>\r\n//                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\r\n//                 </button>\r\n\r\n//                 <button\r\n//                   type=\"button\"\r\n//                   style={styles.btnCancel}\r\n//                   onClick={() => {\r\n//                     setShowModal(false);\r\n//                     setEditId(null);\r\n//                     setIsCopyMode(false);\r\n//                     setForm({\r\n//                       name: \"\",\r\n//                       category: \"\",\r\n//                       subcategory: \"\",\r\n//                       description: \"\",\r\n//                       basePrice: \"\",\r\n//                       difference: \"\",\r\n//                       validTill: \"\",\r\n//                       file: null,\r\n//                     });\r\n//                   }}\r\n//                 >\r\n//                   Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </form>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// const styles = {\r\n//   container: {\r\n\r\n//   },\r\n//   header: {\r\n  \r\n//   },\r\n//   title: {\r\n//     fontSize: \"21px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"6px\",\r\n//   },\r\n//   subtitle: {\r\n//    fontSize: \"16px\",\r\n//   },\r\n//   searchBar: {\r\n//     maxWidth: \"320px\",\r\n//     margin: \"0 auto 25px auto\",\r\n//   },\r\n//   searchInput: {\r\n//     width: \"100%\",\r\n//     padding: \"12px 15px\",\r\n//     borderRadius: \"12px\",\r\n//     border: \"1px solid #ced4da\",\r\n//     background: \"#f9fbfc\",\r\n//     fontSize: \"15px\",\r\n//     outline: \"none\",\r\n//     boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\r\n//   },\r\n//   addButtonWrapper: {\r\n//     textAlign: \"left\",\r\n//     marginBottom: \"25px\",\r\n//   },\r\n//   addButton: {\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"12px\",\r\n//     padding: \"12px 24px\",\r\n//     fontSize: \"16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   bulkBar: {\r\n//     background: \"#e9f2ff\",\r\n//     border: \"1px solid #c4d9ff\",\r\n//     borderRadius: \"14px\",\r\n//     padding: \"15px 18px\",\r\n//     marginBottom: \"25px\",\r\n//     display: \"flex\",\r\n//     justifyContent: \"space-between\",\r\n//     alignItems: \"center\",\r\n//     flexWrap: \"wrap\",\r\n//     gap: \"14px\",\r\n//     boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\r\n//   },\r\n//   bulkText: {\r\n//     fontSize: \"15px\",\r\n//     fontWeight: \"600\",\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   bulkPanel: {\r\n//     width: \"100%\",\r\n//     background: \"#f7faff\",\r\n//     border: \"1px solid #cfe2ff\",\r\n//     padding: \"20px\",\r\n//     borderRadius: \"14px\",\r\n//     marginTop: \"10px\",\r\n//     boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\r\n//   },\r\n//   bulkPanelTitle: {\r\n//     textAlign: \"center\",\r\n//     fontSize: \"18px\",\r\n//     fontWeight: \"700\",\r\n//     marginBottom: \"15px\",\r\n//   },\r\n//   bulkItemBox: {\r\n//     background: \"#ffffff\",\r\n//     border: \"1px solid #dbe5f5\",\r\n//     padding: \"18px\",\r\n//     borderRadius: \"12px\",\r\n//     marginBottom: \"16px\",\r\n//     boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\r\n//   },\r\n//   bulkItemTitle: {\r\n//     fontSize: \"16px\",\r\n//     fontWeight: \"600\",\r\n//     marginBottom: \"12px\",\r\n//     color: \"#0d3b66\",\r\n//     borderLeft: \"4px solid #007bff\",\r\n//     paddingLeft: \"10px\",\r\n//   },\r\n//   formCard: {\r\n//     borderRadius: \"16px\",\r\n//     padding: \"25px\",\r\n//     marginBottom: \"28px\",\r\n//     background: \"#ffffff\",\r\n//     boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\r\n//     border: \"1px solid #eef2f7\",\r\n//   },\r\n//   formTitle: {\r\n//     fontSize: \"21px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"15px\",\r\n//   },\r\n//   formGrid: {\r\n//     display: \"grid\",\r\n//     gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\r\n//     gap: \"18px\",\r\n//   },\r\n//   formGroup: {\r\n//     display: \"flex\",\r\n//     flexDirection: \"column\",\r\n//     gap: \"6px\",\r\n//   },\r\n//   label: {\r\n//     fontWeight: \"600\",\r\n//     fontSize: \"14px\",\r\n//     color: \"#233142\",\r\n//   },\r\n//   input: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     transition: \"0.2s ease\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   select: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     transition: \"0.2s ease\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   textarea: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     transition: \"0.2s ease\",\r\n//     resize: \"none\",\r\n//     minHeight: \"80px\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   fileInput: {\r\n//     padding: \"8px\",\r\n//     fontSize: \"13px\",\r\n//   },\r\n//   categoryRow: {\r\n//     display: \"flex\",\r\n//     gap: \"10px\",\r\n//     alignItems: \"center\",\r\n//   },\r\n//   addCategoryBox: {\r\n//     gridColumn: \"1 / -1\",\r\n//     background: \"#f1f7ff\",\r\n//     border: \"1px solid #cfe1ff\",\r\n//     padding: \"16px\",\r\n//     borderRadius: \"12px\",\r\n//   },\r\n//   preview: {\r\n//     width: \"110px\",\r\n//     height: \"110px\",\r\n//     borderRadius: \"12px\",\r\n//     marginTop: \"10px\",\r\n//     objectFit: \"cover\",\r\n//     border: \"1px solid #b7c9e2\",\r\n//   },\r\n//   formActions: {\r\n//     marginTop: \"15px\",\r\n//     display: \"flex\",\r\n//     gap: \"12px\",\r\n//     flexWrap: \"wrap\",\r\n//   },\r\n//   btnPrimary: {\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   btnSmall: {\r\n//     background: \"#43a047\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   btnDelete: {\r\n//     background: \"#e63946\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   btnCancel: {\r\n//     background: \"#adb5bd\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"9px 16px\",\r\n//     fontWeight: \"600\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.25s ease\",\r\n//   },\r\n//   csvControls: {\r\n//     borderRadius: \"12px\",\r\n//     padding: \"16px\",\r\n//     background: \"#f7faff\",\r\n//     border: \"1px solid #d8e6ff\",\r\n//     display: \"flex\",\r\n//     alignItems: \"center\",\r\n//     justifyContent: \"space-between\",\r\n//     marginBottom: \"28px\",\r\n//     flexWrap: \"wrap\",\r\n//     gap: \"12px\",\r\n//   },\r\n//   tableCard: {\r\n\r\n\r\n\r\n\r\n//   },\r\n//   tableHeader: {\r\n//     display: \"flex\",\r\n//     justifyContent: \"space-between\",\r\n//     marginBottom: \"15px\",\r\n//   },\r\n//   tableTitle: {\r\n//     fontSize: \"21px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   totalCount: {\r\n//     fontSize: \"15px\",\r\n//     color: \"#6c757d\",\r\n//     fontWeight: \"600\",\r\n//   },\r\n//   tableWrapper: {\r\n//     overflowX: \"auto\",\r\n//   },\r\n//   table: {\r\n//     width: \"100%\",\r\n//     borderCollapse: \"collapse\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   th: {\r\n//     background: \"#e9f2ff\",\r\n//     padding: \"12px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     textAlign: \"left\",\r\n//     whiteSpace: \"nowrap\",\r\n//   },\r\n//   tr: {\r\n//     borderBottom: \"1px solid #edf2f7\",\r\n//   },\r\n//   td: {\r\n//     padding: \"12px 10px\",\r\n//     whiteSpace: \"nowrap\",\r\n//   },\r\n//   tableImg: {\r\n//     width: \"55px\",\r\n//     height: \"55px\",\r\n//     borderRadius: \"8px\",\r\n//     objectFit: \"cover\",\r\n//     border: \"1px solid #cfd9e5\",\r\n//   },\r\n//   statusActive: {\r\n//     background: \"#93d8ba\",\r\n//     padding: \"7px 12px\",\r\n//     borderRadius: \"8px\",\r\n//     color: \"black\",\r\n//     fontWeight: \"600\",\r\n//     border: \"none\",\r\n//     cursor: \"pointer\",\r\n//   },\r\n//   statusInactive: {\r\n//     background: \"#d9b1b1\",\r\n//     padding: \"7px 12px\",\r\n//     borderRadius: \"8px\",\r\n//     color: \"black\",\r\n//     fontWeight: \"600\",\r\n//     border: \"none\",\r\n//     cursor: \"pointer\",\r\n//   },\r\n//   menuButton: {\r\n//     background: \"#f0f0f0\",\r\n//     border: \"none\",\r\n//     borderRadius: \"6px\",\r\n//     padding: \"6px 12px\",\r\n//     fontSize: \"20px\",\r\n//     fontWeight: \"bold\",\r\n//     cursor: \"pointer\",\r\n//     transition: \"0.2s ease\",\r\n//   },\r\n//   dropdown: {\r\n//     position: \"absolute\",\r\n//     right: \"0\",\r\n//     top: \"35px\",\r\n//     background: \"#fff\",\r\n//     border: \"1px solid #ddd\",\r\n//     borderRadius: \"8px\",\r\n//     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\r\n//     zIndex: \"100\",\r\n//     minWidth: \"140px\",\r\n//   },\r\n//   dropdownItem: {\r\n//     display: \"block\",\r\n//     width: \"100%\",\r\n//     padding: \"10px 15px\",\r\n//     background: \"transparent\",\r\n//     border: \"none\",\r\n//     textAlign: \"left\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//     fontWeight: \"500\",\r\n//     transition: \"0.2s ease\",\r\n//     borderBottom: \"1px solid #f0f0f0\",\r\n//   },\r\n//   dropdownItemDelete: {\r\n//     display: \"block\",\r\n//     width: \"100%\",\r\n//     padding: \"10px 15px\",\r\n//     background: \"transparent\",\r\n//     border: \"none\",\r\n//     textAlign: \"left\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//     fontWeight: \"500\",\r\n//     color: \"#e63946\",\r\n//     transition: \"0.2s ease\",\r\n//   },\r\n//   pagination: {\r\n//     marginTop: \"18px\",\r\n//     display: \"flex\",\r\n//     justifyContent: \"center\",\r\n//     gap: \"10px\",\r\n//     flexWrap: \"wrap\",\r\n//   },\r\n//   paginationBtn: {\r\n//     padding: \"9px 13px\",\r\n//     borderRadius: \"8px\",\r\n//     background: \"#fff\",\r\n//     border: \"1px solid #ddd\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   paginationBtnActive: {\r\n//     padding: \"9px 13px\",\r\n//     borderRadius: \"8px\",\r\n//     background: \"#007bff\",\r\n//     color: \"white\",\r\n//     border: \"1px solid #0062cc\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   modalOverlay: {\r\n//     position: \"fixed\",\r\n//     top: 0,\r\n//     left: 0,\r\n//     right: 0,\r\n//     bottom: 0,\r\n//     background: \"rgba(0, 0, 0, 0.5)\",\r\n//     display: \"flex\",\r\n//     justifyContent: \"center\",\r\n//     alignItems: \"center\",\r\n//     zIndex: \"1000\",\r\n//     padding: \"20px\",\r\n//   },\r\n//   modal: {\r\n//     background: \"#fff\",\r\n//     borderRadius: \"16px\",\r\n//     padding: \"30px\",\r\n//     maxWidth: \"700px\",\r\n//     width: \"100%\",\r\n//     maxHeight: \"90vh\",\r\n//     overflowY: \"auto\",\r\n//     boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n//   },\r\n//   modalTitle: {\r\n//     fontSize: \"22px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"20px\",\r\n//     textAlign: \"center\",\r\n//   },\r\n  \r\n  \r\n// }\r\n/* -------------------------------------------------------\r\n   FULL UPDATED PRICE LIST (BACKEND-LOGIC COMPATIBLE)\r\n   Author: ChatGPT\r\n---------------------------------------------------------*/\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\";\r\n\r\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // FORM\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    difference: \"\",\r\n    validTill: \"\",\r\n    file: null,\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [isCopyMode, setIsCopyMode] = useState(false);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n  // CATEGORY/ SUB\r\n  const [addingCategory, setAddingCategory] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n  const [addingSub, setAddingSub] = useState(false);\r\n  const [newSubName, setNewSubName] = useState(\"\");\r\n  const [newSubImage, setNewSubImage] = useState(null);\r\n  const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n  // BULK\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  // CSV\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const csvInputRef = useRef();\r\n\r\n  // PAGINATION\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  // FILTERS\r\n  const [filterCategory, setFilterCategory] = useState(\"\");\r\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n  const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n  /* ----------------------------------------------------\r\n      LOAD CATEGORIES FIRST ‚Üí ITEMS AFTER\r\n  ----------------------------------------------------*/\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (categories.length > 0) fetchItems();\r\n  }, [categories]);\r\n\r\n  /* ----------------------------------------------------\r\n      FETCH ALL ITEMS (FINAL PRICE LOGIC FIXED)\r\n  ----------------------------------------------------*/\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n\r\n      if (res.data?.success) {\r\n        const raw = res.data.data;\r\n\r\n        // Correct category/subcategory merge\r\n        const enriched = raw.map((p) => {\r\n          const cat = categories.find(\r\n            (c) => c._id === p.category || c._id === p.category?._id\r\n          );\r\n\r\n          const sub = cat?.subcategories?.find(\r\n            (s) => s._id === p.subcategory || s._id === p.subcategory?._id\r\n          );\r\n\r\n          const final =\r\n            p.currentFinalPrice ??\r\n            p.finalPrice ??\r\n            p.lastFinalPrice ??\r\n            p.basePrice;\r\n\r\n          return {\r\n            ...p,\r\n            category: cat ? { _id: cat._id, name: cat.name } : p.category,\r\n            subcategory: sub\r\n              ? { _id: sub._id, name: sub.name }\r\n              : p.subcategory,\r\n            finalPrice: final,\r\n          };\r\n        });\r\n\r\n        setItems(enriched);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Fetch items error\", err);\r\n      alert(\"Could not fetch items\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      CATEGORIES\r\n  ----------------------------------------------------*/\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data?.success) setCategories(res.data.categories);\r\n    } catch (err) {\r\n      console.error(\"Fetch categories error\", err);\r\n      alert(\"Could not fetch categories\");\r\n    }\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      FORM HANDLERS\r\n  ----------------------------------------------------*/\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files?.length) {\r\n      setForm((p) => ({ ...p, file: files[0] }));\r\n    } else {\r\n      setForm((p) => ({ ...p, [name]: value }));\r\n    }\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      SUBMIT (CREATE, COPY, EDIT)\r\n      NOTE: EDIT does NOT change price/diff (backend rule)\r\n  ----------------------------------------------------*/\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      Object.entries(form).forEach(([k, v]) => {\r\n        if (v !== null && v !== undefined) fd.append(k, v);\r\n      });\r\n\r\n      let res;\r\n\r\n      // COPY\r\n      if (isCopyMode) {\r\n        res = await axios.post(API_URL, fd);\r\n        alert(\"Copied successfully\");\r\n      }\r\n      // UPDATE (metadata only)\r\n      else if (editId) {\r\n        res = await axios.put(`${API_URL}/${editId}`, fd);\r\n        alert(\"Updated\");\r\n      }\r\n      // CREATE\r\n      else {\r\n        res = await axios.post(API_URL, fd);\r\n        alert(\"Added\");\r\n      }\r\n\r\n      await fetchItems();\r\n      setShowModal(false);\r\n      setShowForm(false);\r\n      setEditId(null);\r\n      setIsCopyMode(false);\r\n      resetForm();\r\n    } catch (err) {\r\n      console.error(\"Save error\", err);\r\n      alert(\"Save failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      category: \"\",\r\n      subcategory: \"\",\r\n      description: \"\",\r\n      basePrice: \"\",\r\n      difference: \"\",\r\n      validTill: \"\",\r\n      file: null,\r\n    });\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      EDIT\r\n  ----------------------------------------------------*/\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name,\r\n      category: item.category?._id,\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description,\r\n      basePrice: item.basePrice,\r\n      difference: \"\", // backend does NOT allow diff update on edit\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n\r\n    setEditId(item._id);\r\n    setIsCopyMode(false);\r\n    setShowModal(true);\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      COPY\r\n  ----------------------------------------------------*/\r\n  const handleCopyToEdit = (item) => {\r\n    setForm({\r\n      name: item.name,\r\n      category: item.category?._id,\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description,\r\n      basePrice: item.basePrice,\r\n      difference: item.todayDiff || 0,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n    });\r\n\r\n    setEditId(null);\r\n    setIsCopyMode(true);\r\n    setShowModal(true);\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      DELETE\r\n  ----------------------------------------------------*/\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete item?\")) return;\r\n    await axios.delete(`${API_URL}/${id}`);\r\n    setItems((p) => p.filter((x) => x._id !== id));\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      STATUS\r\n  ----------------------------------------------------*/\r\n  const handleStatusToggle = async (item) => {\r\n    const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n    await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n    setItems((p) =>\r\n      p.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n    );\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      CSV Import\r\n  ----------------------------------------------------*/\r\n  const handleImportCsv = async () => {\r\n    if (!csvFile) return alert(\"Select CSV\");\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", csvFile);\r\n\r\n      const res = await axios.post(`${API_URL}/import`, fd);\r\n      alert(`Imported: ${res.data.inserted}`);\r\n\r\n      csvInputRef.current.value = null;\r\n      setCsvFile(null);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"CSV import error\", err);\r\n      alert(\"Import failed\");\r\n    }\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      CSV Export ‚Üí Backend final price support\r\n  ----------------------------------------------------*/\r\n  const handleExportCsv = () => {\r\n    if (!items.length) return alert(\"No items\");\r\n\r\n    const header = [\r\n      \"id\",\r\n      \"name\",\r\n      \"categoryName\",\r\n      \"subcategoryName\",\r\n      \"basePrice\",\r\n      \"todayDiff\",\r\n      \"finalPrice\",\r\n      \"status\",\r\n      \"validTill\",\r\n      \"description\",\r\n      \"imageUrl\",\r\n    ];\r\n\r\n    const rows = items.map((p) => [\r\n      p._id,\r\n      p.name,\r\n      p.category?.name || \"\",\r\n      p.subcategory?.name || \"\",\r\n      p.basePrice,\r\n      p.todayDiff || 0,\r\n      p.finalPrice,\r\n      p.status,\r\n      p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n      p.description,\r\n      p.image || \"\",\r\n    ]);\r\n\r\n    const csv = [header, ...rows]\r\n      .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n      .join(\"\\n\");\r\n\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `prices_${Date.now()}.csv`;\r\n    a.click();\r\n\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  /* ----------------------------------------------------\r\n      FILTER + SEARCH + PAGINATION\r\n  ----------------------------------------------------*/\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n\r\n    const matchSearch =\r\n      item.name.toLowerCase().includes(t) ||\r\n      item.category?.name?.toLowerCase().includes(t) ||\r\n      item.subcategory?.name?.toLowerCase().includes(t);\r\n\r\n    const matchCat =\r\n      !filterCategory || item.category?._id === filterCategory;\r\n\r\n    const matchSub =\r\n      !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n    return matchSearch && matchCat && matchSub;\r\n  });\r\n\r\n  const indexLast = currentPage * itemsPerPage;\r\n  const currentItems = filteredItems.slice(\r\n    indexLast - itemsPerPage,\r\n    indexLast\r\n  );\r\n\r\n  const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\r\n\r\n  /* ----------------------------------------------------\r\n      UI START\r\n  ----------------------------------------------------*/\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h1 style={{ fontSize: 22, fontWeight: 700 }}>Product Management</h1>\r\n\r\n      {/* SEARCH */}\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Search product...\"\r\n        value={search}\r\n        onChange={(e) => {\r\n          setSearch(e.target.value);\r\n          setCurrentPage(1);\r\n        }}\r\n        style={{\r\n          width: \"100%\",\r\n          padding: 12,\r\n          marginTop: 12,\r\n          marginBottom: 20,\r\n          borderRadius: 10,\r\n          border: \"1px solid #ccc\",\r\n        }}\r\n      />\r\n\r\n      {/* CSV */}\r\n      <div style={{ display: \"flex\", gap: 10, marginBottom: 20 }}>\r\n        <input\r\n          type=\"file\"\r\n          accept=\".csv\"\r\n          ref={csvInputRef}\r\n          onChange={(e) => setCsvFile(e.target.files[0])}\r\n        />\r\n        <button onClick={handleImportCsv}>Import CSV</button>\r\n        <button onClick={handleExportCsv}>Export CSV</button>\r\n      </div>\r\n\r\n      {/* ADD BUTTON */}\r\n      <button\r\n        onClick={() => {\r\n          setShowForm(!showForm);\r\n          setEditId(null);\r\n          setIsCopyMode(false);\r\n        }}\r\n        style={{ marginBottom: 15 }}\r\n      >\r\n        {showForm ? \"Close Form\" : \"Add Product\"}\r\n      </button>\r\n\r\n      {/* FORM SHOW */}\r\n      {showForm && (\r\n        <div\r\n          style={{\r\n            padding: 20,\r\n            background: \"#fff\",\r\n            borderRadius: 10,\r\n            marginBottom: 20,\r\n            border: \"1px solid #dddddd\",\r\n          }}\r\n        >\r\n          <h2>Add Product</h2>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              name=\"name\"\r\n              placeholder=\"Name\"\r\n              value={form.name}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n\r\n            <select\r\n              name=\"category\"\r\n              value={form.category}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Select Category</option>\r\n              {categories.map((c) => (\r\n                <option value={c._id} key={c._id}>\r\n                  {c.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n\r\n            <select\r\n              name=\"subcategory\"\r\n              value={form.subcategory}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"\">Subcategory</option>\r\n              {subcategories.map((s) => (\r\n                <option value={s._id} key={s._id}>\r\n                  {s.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n\r\n            <input\r\n              name=\"basePrice\"\r\n              type=\"number\"\r\n              placeholder=\"Base Price\"\r\n              value={form.basePrice}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n\r\n            <input\r\n              name=\"difference\"\r\n              type=\"number\"\r\n              placeholder=\"Difference\"\r\n              value={form.difference}\r\n              onChange={handleChange}\r\n            />\r\n\r\n            <input\r\n              name=\"validTill\"\r\n              type=\"date\"\r\n              value={form.validTill}\r\n              onChange={handleChange}\r\n            />\r\n\r\n            <input type=\"file\" name=\"file\" onChange={handleChange} />\r\n\r\n            <textarea\r\n              name=\"description\"\r\n              placeholder=\"Description\"\r\n              value={form.description}\r\n              onChange={handleChange}\r\n            ></textarea>\r\n\r\n            <button type=\"submit\" disabled={loading}>\r\n              {loading ? \"Saving...\" : \"Save\"}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* TABLE */}\r\n      <table\r\n        style={{\r\n          width: \"100%\",\r\n          borderCollapse: \"collapse\",\r\n          background: \"#fff\",\r\n        }}\r\n      >\r\n        <thead>\r\n          <tr style={{ background: \"#e9f2ff\" }}>\r\n            <th>Image</th>\r\n            <th>Name</th>\r\n            <th>Category</th>\r\n            <th>Subcat</th>\r\n            <th>Base</th>\r\n            <th>Diff</th>\r\n            <th>Final</th>\r\n            <th>Status</th>\r\n            <th>Valid Till</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {currentItems.map((item) => (\r\n            <tr key={item._id}>\r\n              <td>\r\n                {item.image ? (\r\n                  <img\r\n                    src={item.image}\r\n                    style={{ width: 50, height: 50, borderRadius: 6 }}\r\n                    alt=\"\"\r\n                  />\r\n                ) : (\r\n                  \"No Img\"\r\n                )}\r\n              </td>\r\n\r\n              <td>{item.name}</td>\r\n              <td>{item.category?.name}</td>\r\n              <td>{item.subcategory?.name || \"-\"}</td>\r\n\r\n              <td>‚Çπ{item.basePrice}</td>\r\n              <td>{item.todayDiff || 0}</td>\r\n\r\n              <td>\r\n                <b>‚Çπ{item.finalPrice}</b>\r\n              </td>\r\n\r\n              <td>\r\n                <button\r\n                  onClick={() => handleStatusToggle(item)}\r\n                  style={{\r\n                    background:\r\n                      item.status === \"active\" ? \"#93d8ba\" : \"#e6b0b0\",\r\n                    border: \"none\",\r\n                    padding: \"6px 12px\",\r\n                    borderRadius: 6,\r\n                  }}\r\n                >\r\n                  {item.status}\r\n                </button>\r\n              </td>\r\n\r\n              <td>\r\n                {item.validTill\r\n                  ? new Date(item.validTill).toLocaleDateString()\r\n                  : \"-\"}\r\n              </td>\r\n\r\n              <td>\r\n                <button onClick={() => handleEdit(item)}>‚úè</button>\r\n                <button onClick={() => handleCopyToEdit(item)}>üìÑ</button>\r\n                <button onClick={() => handleDelete(item._id)}>üóë</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* PAGINATION */}\r\n      <div style={{ marginTop: 15 }}>\r\n        <button\r\n          disabled={currentPage === 1}\r\n          onClick={() => setCurrentPage((p) => p - 1)}\r\n        >\r\n          Previous\r\n        </button>\r\n\r\n        {Array.from({ length: totalPages }).map((_, i) => (\r\n          <button\r\n            key={i}\r\n            onClick={() => setCurrentPage(i + 1)}\r\n            style={{\r\n              fontWeight: currentPage === i + 1 ? \"700\" : \"400\",\r\n            }}\r\n          >\r\n            {i + 1}\r\n          </button>\r\n        ))}\r\n\r\n        <button\r\n          disabled={currentPage === totalPages}\r\n          onClick={() => setCurrentPage((p) => p + 1)}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n\r\n      {/* EDIT/COPY MODAL */}\r\n      {showModal && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            inset: 0,\r\n            background: \"rgba(0,0,0,0.4)\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            padding: 20,\r\n            zIndex: 999,\r\n          }}\r\n          onClick={() => setShowModal(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              maxWidth: 600,\r\n              width: \"100%\",\r\n              background: \"#fff\",\r\n              borderRadius: 12,\r\n              padding: 20,\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <h2 style={{ marginBottom: 20 }}>\r\n              {isCopyMode ? \"Copy Product\" : \"Edit Product\"}\r\n            </h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <input\r\n                name=\"name\"\r\n                value={form.name}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n\r\n              <select\r\n                name=\"category\"\r\n                value={form.category}\r\n                onChange={handleChange}\r\n              >\r\n                <option value=\"\">Select Category</option>\r\n                {categories.map((c) => (\r\n                  <option key={c._id} value={c._id}>\r\n                    {c.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n\r\n              <select\r\n                name=\"subcategory\"\r\n                value={form.subcategory}\r\n                onChange={handleChange}\r\n              >\r\n                <option value=\"\">Subcategory</option>\r\n                {subcategories.map((s) => (\r\n                  <option key={s._id} value={s._id}>\r\n                    {s.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n\r\n              <input\r\n                type=\"number\"\r\n                name=\"basePrice\"\r\n                value={form.basePrice}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n\r\n              {/* DIFF NOT ALLOWED ON EDIT - ONLY COPY OR CREATE */}\r\n              {!editId && (\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"difference\"\r\n                  value={form.difference}\r\n                  onChange={handleChange}\r\n                />\r\n              )}\r\n\r\n              <input\r\n                type=\"date\"\r\n                name=\"validTill\"\r\n                value={form.validTill}\r\n                onChange={handleChange}\r\n              />\r\n\r\n              <input type=\"file\" onChange={handleChange} />\r\n\r\n              <textarea\r\n                name=\"description\"\r\n                value={form.description}\r\n                onChange={handleChange}\r\n              ></textarea>\r\n\r\n              <button type=\"submit\">\r\n                {loading\r\n                  ? \"Saving...\"\r\n                  : isCopyMode\r\n                  ? \"Save Copy\"\r\n                  : \"Update\"}\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowModal(false);\r\n                  resetForm();\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;A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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}