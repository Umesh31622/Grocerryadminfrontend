{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\admin\\\\PriceAnalytics.jsx\",\n  _s = $RefreshSig$();\n// // import React, { useEffect, useState } from \"react\";\n// // import axios from \"axios\";\n// // import {\n// //   Chart as ChartJS,\n// //   CategoryScale,\n// //   LinearScale,\n// //   BarElement,\n// //   Title,\n// //   Tooltip,\n// //   Legend,\n// // } from \"chart.js\";\n// // import { Bar } from \"react-chartjs-2\";\n// // import \"./PriceAnalytics.css\";\n\n// // ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n\n// // const API_BASE = \"https://grocerrybackend.vercel.app/api\";\n\n// // const PriceAnalytics = () => {\n// //   const [loading, setLoading] = useState(true);\n// //   const [productList, setProductList] = useState([]);\n// //   const [categoryList, setCategoryList] = useState([]);\n// //   const [selectedProduct, setSelectedProduct] = useState(\"\");\n// //   const [selectedCategory, setSelectedCategory] = useState(\"\");\n// //   const [chartData, setChartData] = useState(null);\n\n// //   // Fetch data for dropdowns\n// //   useEffect(() => {\n// //     const fetchDropdowns = async () => {\n// //       try {\n// //         const [products, categories] = await Promise.all([\n// //           axios.get(`${API_BASE}/prices`),\n// //           axios.get(`${API_BASE}/categories`),\n// //         ]);\n// //         setProductList(products.data.data || []);\n// //         setCategoryList(categories.data.categories || []);\n// //       } catch (err) {\n// //         console.error(\"Dropdown fetch error:\", err);\n// //       }\n// //     };\n// //     fetchDropdowns();\n// //   }, []);\n\n// //   // Fetch chart data\n// //   useEffect(() => {\n// //     const fetchChart = async () => {\n// //       setLoading(true);\n// //       try {\n// //         const res = await axios.get(`${API_BASE}/prices`);\n// //         const allPrices = res.data.data || [];\n\n// //         // Product data\n// //         let productFiltered = allPrices;\n// //         if (selectedProduct) {\n// //           productFiltered = allPrices.filter(\n// //             (p) => p.name === selectedProduct\n// //           );\n// //         }\n\n// //         // Category data\n// //         let categoryFiltered = allPrices;\n// //         if (selectedCategory) {\n// //           categoryFiltered = allPrices.filter(\n// //             (p) => p.category?.name === selectedCategory\n// //           );\n// //         }\n\n// //         // Prepare data for chart\n// //         const labels = productFiltered.map((p) => p.name);\n// //         const basePrices = productFiltered.map((p) => p.basePrice);\n// //         const differences = productFiltered.map((p) => p.difference || 0);\n\n// //         const categoryBase = categoryFiltered.map((p) => p.basePrice);\n// //         const categoryDiff = categoryFiltered.map((p) => p.difference || 0);\n\n// //         setChartData({\n// //           labels,\n// //           datasets: [\n// //             {\n// //               label: \"Base Price (‚Çπ)\",\n// //               data: basePrices,\n// //               backgroundColor: \"rgba(0, 123, 255, 0.6)\",\n// //               borderRadius: 8,\n// //             },\n// //             {\n// //               label: \"Difference (‚Çπ)\",\n// //               data: differences,\n// //               backgroundColor: \"rgba(255, 193, 7, 0.6)\",\n// //               borderRadius: 8,\n// //             },\n// //             {\n// //               label: \"Category Avg Price (‚Çπ)\",\n// //               data: categoryBase,\n// //               backgroundColor: \"rgba(40, 167, 69, 0.6)\",\n// //               borderRadius: 8,\n// //             },\n// //             {\n// //               label: \"Category Difference (‚Çπ)\",\n// //               data: categoryDiff,\n// //               backgroundColor: \"rgba(220, 53, 69, 0.6)\",\n// //               borderRadius: 8,\n// //             },\n// //           ],\n// //         });\n// //       } catch (err) {\n// //         console.error(\"Chart data fetch error:\", err);\n// //       } finally {\n// //         setLoading(false);\n// //       }\n// //     };\n// //     fetchChart();\n// //   }, [selectedProduct, selectedCategory]);\n\n// //   return (\n// //     <div className=\"analytics-container\">\n// //       <h2 className=\"analytics-title\">üìä Product & Category Analytics</h2>\n// //       <p className=\"analytics-subtitle\">\n// //         View price trends and category performance in real-time\n// //       </p>\n\n// //       {/* Filters */}\n// //       <div className=\"filter-section\">\n// //         <div className=\"filter-group\">\n// //           <label>üßÉ Product:</label>\n// //           <select\n// //             value={selectedProduct}\n// //             onChange={(e) => setSelectedProduct(e.target.value)}\n// //           >\n// //             <option value=\"\">All Products</option>\n// //             {productList.map((p) => (\n// //               <option key={p._id} value={p.name}>\n// //                 {p.name}\n// //               </option>\n// //             ))}\n// //           </select>\n// //         </div>\n\n// //         <div className=\"filter-group\">\n// //           <label>üóÇÔ∏è Category:</label>\n// //           <select\n// //             value={selectedCategory}\n// //             onChange={(e) => setSelectedCategory(e.target.value)}\n// //           >\n// //             <option value=\"\">All Categories</option>\n// //             {categoryList.map((c) => (\n// //               <option key={c._id} value={c.name}>\n// //                 {c.name}\n// //               </option>\n// //             ))}\n// //           </select>\n// //         </div>\n// //       </div>\n\n// //       {/* Chart */}\n// //       <div className=\"chart-wrapper\">\n// //         {loading ? (\n// //           <div className=\"loading\">Loading chart...</div>\n// //         ) : chartData ? (\n// //           <Bar\n// //             data={chartData}\n// //             options={{\n// //               responsive: true,\n// //               maintainAspectRatio: false,\n// //               plugins: {\n// //                 legend: { position: \"bottom\" },\n// //                 tooltip: {\n// //                   callbacks: {\n// //                     label: (context) =>\n// //                       `${context.dataset.label}: ‚Çπ${context.parsed.y}`,\n// //                   },\n// //                 },\n// //               },\n// //               scales: {\n// //                 y: {\n// //                   beginAtZero: true,\n// //                   title: {\n// //                     display: true,\n// //                     text: \"Price (‚Çπ)\",\n// //                     color: \"#333\",\n// //                     font: { size: 14, weight: \"bold\" },\n// //                   },\n// //                 },\n// //                 x: {\n// //                   ticks: { color: \"#333\" },\n// //                 },\n// //               },\n// //             }}\n// //           />\n// //         ) : (\n// //           <div className=\"no-data\">No data available for selection</div>\n// //         )}\n// //       </div>\n// //     </div>\n// //   );\n// // };\n\n// // export default PriceAnalytics;\n\n// // import React, { useEffect, useState } from \"react\";\n// // import axios from \"axios\";\n// // import {\n// //   Chart as ChartJS,\n// //   CategoryScale,\n// //   LinearScale,\n// //   BarElement,\n// //   Title,\n// //   Tooltip,\n// //   Legend,\n// // } from \"chart.js\";\n// // import { Bar } from \"react-chartjs-2\";\n// // import \"./PriceAnalytics.css\";\n\n// // ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n\n// // const API_BASE = \"https://grocerrybackend.vercel.app/api\";\n\n// // const PriceAnalytics = () => {\n// //   const [loading, setLoading] = useState(true);\n// //   const [productList, setProductList] = useState([]);\n// //   const [categoryList, setCategoryList] = useState([]);\n// //   const [selectedProduct, setSelectedProduct] = useState(\"\");\n// //   const [selectedCategory, setSelectedCategory] = useState(\"\");\n// //   const [startDate, setStartDate] = useState(\"\");\n// //   const [endDate, setEndDate] = useState(\"\");\n// //   const [chartData, setChartData] = useState(null);\n\n// //   // üîπ Fetch dropdowns\n// //   useEffect(() => {\n// //     const fetchDropdowns = async () => {\n// //       try {\n// //         const [products, categories] = await Promise.all([\n// //           axios.get(`${API_BASE}/prices`),\n// //           axios.get(`${API_BASE}/categories`),\n// //         ]);\n// //         setProductList(products.data.data || []);\n// //         setCategoryList(categories.data.categories || []);\n// //       } catch (err) {\n// //         console.error(\"Dropdown fetch error:\", err);\n// //       }\n// //     };\n// //     fetchDropdowns();\n// //   }, []);\n\n// //   // üîπ Fetch chart data with date filter\n// //   const fetchChart = async () => {\n// //     setLoading(true);\n// //     try {\n// //       const res = await axios.get(`${API_BASE}/prices`);\n// //       const allPrices = res.data.data || [];\n\n// //       // ‚úÖ Filter by Product / Category\n// //       let filtered = allPrices;\n// //       if (selectedProduct)\n// //         filtered = filtered.filter((p) => p.name === selectedProduct);\n// //       if (selectedCategory)\n// //         filtered = filtered.filter(\n// //           (p) => p.category?.name === selectedCategory\n// //         );\n\n// //       // ‚úÖ Filter by Date Range (using validTill or createdAt)\n// //       if (startDate && endDate) {\n// //         const start = new Date(startDate);\n// //         const end = new Date(endDate);\n// //         filtered = filtered.filter((item) => {\n// //           const date = new Date(item.validTill || item.createdAt);\n// //           return date >= start && date <= end;\n// //         });\n// //       }\n\n// //       // ‚úÖ Group data by Date\n// //       const groupedByDate = {};\n// //       filtered.forEach((item) => {\n// //         const dateKey = new Date(\n// //           item.validTill || item.createdAt\n// //         ).toLocaleDateString(\"en-IN\");\n// //         if (!groupedByDate[dateKey]) {\n// //           groupedByDate[dateKey] = [];\n// //         }\n// //         groupedByDate[dateKey].push(item);\n// //       });\n\n// //       // ‚úÖ Prepare chart arrays\n// //       const labels = Object.keys(groupedByDate);\n// //       const avgBasePrice = labels.map((d) => {\n// //         const dayData = groupedByDate[d];\n// //         return (\n// //           dayData.reduce((sum, i) => sum + Number(i.basePrice || 0), 0) /\n// //           dayData.length\n// //         );\n// //       });\n\n// //       const avgDiff = labels.map((d) => {\n// //         const dayData = groupedByDate[d];\n// //         return (\n// //           dayData.reduce((sum, i) => sum + Number(i.difference || 0), 0) /\n// //           dayData.length\n// //         );\n// //       });\n\n// //       const totalCount = labels.map((d) => groupedByDate[d].length);\n\n// //       // ‚úÖ Build chart dataset\n// //       setChartData({\n// //         labels,\n// //         datasets: [\n// //           {\n// //             label: \"Average Base Price (‚Çπ)\",\n// //             data: avgBasePrice,\n// //             backgroundColor: \"rgba(0, 123, 255, 0.6)\",\n// //             borderRadius: 6,\n// //           },\n// //           {\n// //             label: \"Average Difference (‚Çπ)\",\n// //             data: avgDiff,\n// //             backgroundColor: \"rgba(255, 193, 7, 0.6)\",\n// //             borderRadius: 6,\n// //           },\n// //           {\n// //             label: \"Total Products Count\",\n// //             data: totalCount,\n// //             backgroundColor: \"rgba(40, 167, 69, 0.6)\",\n// //             borderRadius: 6,\n// //           },\n// //         ],\n// //       });\n// //     } catch (err) {\n// //       console.error(\"Chart fetch error:\", err);\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     fetchChart();\n// //   }, [selectedProduct, selectedCategory, startDate, endDate]);\n\n// //   return (\n// //     <div className=\"analytics-container\">\n// //       <h2 className=\"analytics-title\">üìÖ Price History & Analytics</h2>\n// //       <p className=\"analytics-subtitle\">\n// //         Track your product & category price trends over time\n// //       </p>\n\n// //       {/* üîπ Filters */}\n// //       <div className=\"filter-section\">\n// //         <div className=\"filter-group\">\n// //           <label>üßÉ Product:</label>\n// //           <select\n// //             value={selectedProduct}\n// //             onChange={(e) => setSelectedProduct(e.target.value)}\n// //           >\n// //             <option value=\"\">All Products</option>\n// //             {productList.map((p) => (\n// //               <option key={p._id} value={p.name}>\n// //                 {p.name}\n// //               </option>\n// //             ))}\n// //           </select>\n// //         </div>\n\n// //         <div className=\"filter-group\">\n// //           <label>üóÇÔ∏è Category:</label>\n// //           <select\n// //             value={selectedCategory}\n// //             onChange={(e) => setSelectedCategory(e.target.value)}\n// //           >\n// //             <option value=\"\">All Categories</option>\n// //             {categoryList.map((c) => (\n// //               <option key={c._id} value={c.name}>\n// //                 {c.name}\n// //               </option>\n// //             ))}\n// //           </select>\n// //         </div>\n\n// //         <div className=\"filter-group\">\n// //           <label>üìÜ From:</label>\n// //           <input\n// //             type=\"date\"\n// //             value={startDate}\n// //             onChange={(e) => setStartDate(e.target.value)}\n// //           />\n// //         </div>\n\n// //         <div className=\"filter-group\">\n// //           <label>‚û°Ô∏è To:</label>\n// //           <input\n// //             type=\"date\"\n// //             value={endDate}\n// //             onChange={(e) => setEndDate(e.target.value)}\n// //           />\n// //         </div>\n\n// //         <button className=\"btn refresh\" onClick={fetchChart}>\n// //           üîÑ Apply\n// //         </button>\n// //       </div>\n\n// //       {/* üîπ Chart */}\n// //       <div className=\"chart-wrapper\">\n// //         {loading ? (\n// //           <div className=\"loading\">Loading chart...</div>\n// //         ) : chartData ? (\n// //           <Bar\n// //             data={chartData}\n// //             options={{\n// //               responsive: true,\n// //               maintainAspectRatio: false,\n// //               plugins: {\n// //                 legend: { position: \"bottom\" },\n// //                 tooltip: {\n// //                   callbacks: {\n// //                     label: (context) =>\n// //                       `${context.dataset.label}: ${\n// //                         context.dataset.label.includes(\"Count\")\n// //                           ? context.parsed.y\n// //                           : \"‚Çπ\" + context.parsed.y.toFixed(2)\n// //                       }`,\n// //                   },\n// //                 },\n// //               },\n// //               scales: {\n// //                 x: {\n// //                   ticks: { color: \"#333\" },\n// //                   title: {\n// //                     display: true,\n// //                     text: \"Date (by Validity)\",\n// //                     color: \"#444\",\n// //                     font: { weight: \"bold\" },\n// //                   },\n// //                 },\n// //                 y: {\n// //                   beginAtZero: true,\n// //                   title: {\n// //                     display: true,\n// //                     text: \"Price / Count\",\n// //                     color: \"#444\",\n// //                     font: { weight: \"bold\" },\n// //                   },\n// //                 },\n// //               },\n// //             }}\n// //           />\n// //         ) : (\n// //           <div className=\"no-data\">No data found for selection.</div>\n// //         )}\n// //       </div>\n// //     </div>\n// //   );\n// // };\n\n// // export default PriceAnalytics;\n\n// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import {\n//   Chart as ChartJS,\n//   CategoryScale,\n//   LinearScale,\n//   LineElement,\n//   PointElement,\n//   Title,\n//   Tooltip,\n//   Legend\n// } from \"chart.js\";\n// import { Line } from \"react-chartjs-2\";\n// import \"./PriceAnalytics.css\";\n\n// ChartJS.register(\n//   CategoryScale,\n//   LinearScale,\n//   LineElement,\n//   PointElement,\n//   Title,\n//   Tooltip,\n//   Legend\n// );\n\n// const API_BASE = \"https://grocerrybackend.vercel.app/api\";\n\n// const PriceAnalytics = () => {\n//   const [loading, setLoading] = useState(true);\n//   const [productList, setProductList] = useState([]);\n//   const [categoryList, setCategoryList] = useState([]);\n//   const [selectedProduct, setSelectedProduct] = useState(\"\");\n//   const [selectedCategory, setSelectedCategory] = useState(\"\");\n//   const [startDate, setStartDate] = useState(\"\");\n//   const [endDate, setEndDate] = useState(\"\");\n//   const [chartData, setChartData] = useState(null);\n\n//   // üîπ Fetch dropdowns\n//   useEffect(() => {\n//     const fetchDropdowns = async () => {\n//       try {\n//         const [products, categories] = await Promise.all([\n//           axios.get(`${API_BASE}/prices`),\n//           axios.get(`${API_BASE}/categories`)\n//         ]);\n//         setProductList(products.data.data || []);\n//         setCategoryList(categories.data.categories || []);\n//       } catch (err) {\n//         console.error(\"Dropdown fetch error:\", err);\n//       }\n//     };\n//     fetchDropdowns();\n//   }, []);\n\n//   // üîπ Fetch chart data with date filter\n//   const fetchChart = async () => {\n//     setLoading(true);\n//     try {\n//       const res = await axios.get(`${API_BASE}/prices`);\n//       const allPrices = res.data.data || [];\n\n//       let filtered = allPrices;\n\n//       // Product filter\n//       if (selectedProduct) {\n//         filtered = filtered.filter((p) => p.name === selectedProduct);\n//       }\n\n//       // Category filter\n//       if (selectedCategory) {\n//         filtered = filtered.filter(\n//           (p) => p.category?.name === selectedCategory\n//         );\n//       }\n\n//       // Date filter\n//       if (startDate && endDate) {\n//         const start = new Date(startDate);\n//         const end = new Date(endDate);\n//         filtered = filtered.filter((item) => {\n//           const date = new Date(item.validTill || item.createdAt);\n//           return date >= start && date <= end;\n//         });\n//       }\n\n//       /* -------------------------\n//          Group Data by Date\n//       --------------------------*/\n//       const groupedByDate = {};\n//       filtered.forEach((item) => {\n//         const dateKey = new Date(\n//           item.validTill || item.createdAt\n//         ).toLocaleDateString(\"en-IN\");\n\n//         if (!groupedByDate[dateKey]) {\n//           groupedByDate[dateKey] = [];\n//         }\n//         groupedByDate[dateKey].push(item);\n//       });\n\n//       const labels = Object.keys(groupedByDate);\n\n//       const avgBasePrice = labels.map((d) => {\n//         const dayData = groupedByDate[d];\n//         return (\n//           dayData.reduce((sum, i) => sum + Number(i.basePrice || 0), 0) /\n//           dayData.length\n//         );\n//       });\n\n//       const avgDiff = labels.map((d) => {\n//         const dayData = groupedByDate[d];\n//         return (\n//           dayData.reduce((sum, i) => sum + Number(i.difference || 0), 0) /\n//           dayData.length\n//         );\n//       });\n\n//       const totalCount = labels.map((d) => groupedByDate[d].length);\n\n//       /* -------------------------\n//          Create LINE chart data\n//       --------------------------*/\n//       setChartData({\n//         labels,\n//         datasets: [\n//           {\n//             label: \"Average Base Price (‚Çπ)\",\n//             data: avgBasePrice,\n//             borderColor: \"rgba(0, 123, 255, 1)\",\n//             borderWidth: 2,\n//             tension: 0.3,\n//             fill: false\n//           },\n//           {\n//             label: \"Average Difference (‚Çπ)\",\n//             data: avgDiff,\n//             borderColor: \"rgba(255, 193, 7, 1)\",\n//             borderWidth: 2,\n//             tension: 0.3,\n//             fill: false\n//           },\n//           {\n//             label: \"Products Count\",\n//             data: totalCount,\n//             borderColor: \"rgba(40, 167, 69, 1)\",\n//             borderWidth: 2,\n//             tension: 0.3,\n//             fill: false\n//           }\n//         ]\n//       });\n//     } catch (err) {\n//       console.error(\"Chart fetch error:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchChart();\n//   }, [selectedProduct, selectedCategory, startDate, endDate]);\n\n//   return (\n//     <div className=\"analytics-container\">\n//       <h2 className=\"analytics-title\">üìâ Price Trends ‚Äî Line Graph</h2>\n//       <p className=\"analytics-subtitle\">Multiple line price analytics</p>\n\n//       {/* üîπ Filters */}\n//       <div className=\"filter-section\">\n//         <div className=\"filter-group\">\n//           <label>Product:</label>\n//           <select\n//             value={selectedProduct}\n//             onChange={(e) => setSelectedProduct(e.target.value)}\n//           >\n//             <option value=\"\">All Products</option>\n//             {productList.map((p) => (\n//               <option key={p._id} value={p.name}>\n//                 {p.name}\n//               </option>\n//             ))}\n//           </select>\n//         </div>\n\n//         <div className=\"filter-group\">\n//           <label>Category:</label>\n//           <select\n//             value={selectedCategory}\n//             onChange={(e) => setSelectedCategory(e.target.value)}\n//           >\n//             <option value=\"\">All Categories</option>\n//             {categoryList.map((c) => (\n//               <option key={c._id} value={c.name}>\n//                 {c.name}\n//               </option>\n//             ))}\n//           </select>\n//         </div>\n\n//         <div className=\"filter-group\">\n//           <label>From:</label>\n//           <input\n//             type=\"date\"\n//             value={startDate}\n//             onChange={(e) => setStartDate(e.target.value)}\n//           />\n//         </div>\n\n//         <div className=\"filter-group\">\n//           <label>To:</label>\n//           <input\n//             type=\"date\"\n//             value={endDate}\n//             onChange={(e) => setEndDate(e.target.value)}\n//           />\n//         </div>\n\n//         <button className=\"btn refresh\" onClick={fetchChart}>üîÑ Apply</button>\n//       </div>\n\n//       {/* üîπ Chart */}\n//       <div className=\"chart-wrapper\">\n//         {loading ? (\n//           <div className=\"loading\">Loading chart...</div>\n//         ) : chartData ? (\n//           <Line\n//             data={chartData}\n//             options={{\n//               responsive: true,\n//               maintainAspectRatio: false,\n//               plugins: {\n//                 legend: { position: \"bottom\" },\n//               },\n//               scales: {\n//                 y: {\n//                   beginAtZero: true\n//                 }\n//               }\n//             }}\n//           />\n//         ) : (\n//           <div className=\"no-data\">No data found</div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default PriceAnalytics;\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { Line } from \"react-chartjs-2\";\nimport \"./PriceAnalytics.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nconst API_BASE = \"https://grocerrybackend.vercel.app/api\";\nconst PriceAnalytics = () => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [productList, setProductList] = useState([]);\n  const [categoryList, setCategoryList] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [chartData, setChartData] = useState(null);\n\n  // üîπ Fetch dropdowns\n  useEffect(() => {\n    const fetchDropdowns = async () => {\n      try {\n        const [products, categories] = await Promise.all([axios.get(`${API_BASE}/prices`), axios.get(`${API_BASE}/categories`)]);\n        setProductList(products.data.data || []);\n        setCategoryList(categories.data.categories || []);\n      } catch (err) {\n        console.error(\"Dropdown fetch error:\", err);\n      }\n    };\n    fetchDropdowns();\n  }, []);\n\n  // üîπ Fetch chart data with date filter\n  const fetchChart = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.get(`${API_BASE}/prices`);\n      const allPrices = res.data.data || [];\n\n      // ‚úÖ Filter by Product / Category\n      let filtered = allPrices;\n      if (selectedProduct) filtered = filtered.filter(p => p.name === selectedProduct);\n      if (selectedCategory) filtered = filtered.filter(p => {\n        var _p$category;\n        return ((_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category.name) === selectedCategory;\n      });\n\n      // ‚úÖ Filter by Date Range\n      if (startDate && endDate) {\n        const start = new Date(startDate);\n        const end = new Date(endDate);\n        filtered = filtered.filter(item => {\n          const date = new Date(item.validTill || item.createdAt);\n          return date >= start && date <= end;\n        });\n      }\n\n      // ‚úÖ Group by Date\n      const groupedByDate = {};\n      filtered.forEach(item => {\n        const dateKey = new Date(item.validTill || item.createdAt).toLocaleDateString(\"en-IN\");\n        if (!groupedByDate[dateKey]) groupedByDate[dateKey] = [];\n        groupedByDate[dateKey].push(item);\n      });\n      const labels = Object.keys(groupedByDate);\n      const avgBasePrice = labels.map(d => {\n        const dayData = groupedByDate[d];\n        return dayData.reduce((sum, i) => sum + Number(i.basePrice || 0), 0) / dayData.length;\n      });\n      const avgDiff = labels.map(d => {\n        const dayData = groupedByDate[d];\n        return dayData.reduce((sum, i) => sum + Number(i.difference || 0), 0) / dayData.length;\n      });\n      const totalCount = labels.map(d => groupedByDate[d].length);\n\n      // üîπ Multiple Line Datasets\n      setChartData({\n        labels,\n        datasets: [{\n          label: \"Average Base Price (‚Çπ)\",\n          data: avgBasePrice,\n          borderColor: \"#007bff\",\n          backgroundColor: \"rgba(0,123,255,0.3)\",\n          tension: 0.3,\n          fill: false\n        }, {\n          label: \"Average Difference (‚Çπ)\",\n          data: avgDiff,\n          borderColor: \"#ffc107\",\n          backgroundColor: \"rgba(255,193,7,0.3)\",\n          tension: 0.3,\n          fill: false\n        }, {\n          label: \"Total Products Count\",\n          data: totalCount,\n          borderColor: \"#28a745\",\n          backgroundColor: \"rgba(40,167,69,0.3)\",\n          tension: 0.3,\n          fill: false\n        }]\n      });\n    } catch (err) {\n      console.error(\"Chart fetch error:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchChart();\n  }, [selectedProduct, selectedCategory, startDate, endDate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"analytics-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"analytics-title\",\n      children: \"\\uD83D\\uDCC5 Price History & Analytics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 860,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"analytics-subtitle\",\n      children: \"Track your product & category price trends over time\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uD83E\\uDDC3 Product:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedProduct,\n          onChange: e => setSelectedProduct(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 13\n          }, this), productList.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p.name,\n            children: p.name\n          }, p._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 872,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 867,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uD83D\\uDDC2\\uFE0F Category:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 878,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedCategory,\n          onChange: e => setSelectedCategory(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 13\n          }, this), categoryList.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c.name,\n            children: c.name\n          }, c._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 882,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 879,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 877,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uD83D\\uDCC6 From:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: startDate,\n          onChange: e => setStartDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 887,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u27A1 To:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: endDate,\n          onChange: e => setEndDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 892,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn refresh\",\n        onClick: fetchChart,\n        children: \"\\uD83D\\uDD04 Apply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 897,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 866,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-wrapper\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading chart...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 903,\n        columnNumber: 11\n      }, this) : chartData ? /*#__PURE__*/_jsxDEV(Line, {\n        data: chartData,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: \"bottom\"\n            }\n          },\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 905,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data\",\n        children: \"No data found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 901,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 859,\n    columnNumber: 5\n  }, this);\n};\n_s(PriceAnalytics, \"uP7aIfoYFCB0pdW2n2OEX4wmyC4=\");\n_c = PriceAnalytics;\nexport default PriceAnalytics;\nvar _c;\n$RefreshReg$(_c, \"PriceAnalytics\");","map":{"version":3,"names":["React","useEffect","useState","axios","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Line","jsxDEV","_jsxDEV","register","API_BASE","PriceAnalytics","_s","loading","setLoading","productList","setProductList","categoryList","setCategoryList","selectedProduct","setSelectedProduct","selectedCategory","setSelectedCategory","startDate","setStartDate","endDate","setEndDate","chartData","setChartData","fetchDropdowns","products","categories","Promise","all","get","data","err","console","error","fetchChart","res","allPrices","filtered","filter","p","name","_p$category","category","start","Date","end","item","date","validTill","createdAt","groupedByDate","forEach","dateKey","toLocaleDateString","push","labels","Object","keys","avgBasePrice","map","d","dayData","reduce","sum","i","Number","basePrice","length","avgDiff","difference","totalCount","datasets","label","borderColor","backgroundColor","tension","fill","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","_id","c","type","onClick","options","responsive","maintainAspectRatio","plugins","legend","position","scales","y","beginAtZero","_c","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/admin/PriceAnalytics.jsx"],"sourcesContent":["// // import React, { useEffect, useState } from \"react\";\r\n// // import axios from \"axios\";\r\n// // import {\r\n// //   Chart as ChartJS,\r\n// //   CategoryScale,\r\n// //   LinearScale,\r\n// //   BarElement,\r\n// //   Title,\r\n// //   Tooltip,\r\n// //   Legend,\r\n// // } from \"chart.js\";\r\n// // import { Bar } from \"react-chartjs-2\";\r\n// // import \"./PriceAnalytics.css\";\r\n\r\n// // ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\n// // const API_BASE = \"https://grocerrybackend.vercel.app/api\";\r\n\r\n// // const PriceAnalytics = () => {\r\n// //   const [loading, setLoading] = useState(true);\r\n// //   const [productList, setProductList] = useState([]);\r\n// //   const [categoryList, setCategoryList] = useState([]);\r\n// //   const [selectedProduct, setSelectedProduct] = useState(\"\");\r\n// //   const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n// //   const [chartData, setChartData] = useState(null);\r\n\r\n// //   // Fetch data for dropdowns\r\n// //   useEffect(() => {\r\n// //     const fetchDropdowns = async () => {\r\n// //       try {\r\n// //         const [products, categories] = await Promise.all([\r\n// //           axios.get(`${API_BASE}/prices`),\r\n// //           axios.get(`${API_BASE}/categories`),\r\n// //         ]);\r\n// //         setProductList(products.data.data || []);\r\n// //         setCategoryList(categories.data.categories || []);\r\n// //       } catch (err) {\r\n// //         console.error(\"Dropdown fetch error:\", err);\r\n// //       }\r\n// //     };\r\n// //     fetchDropdowns();\r\n// //   }, []);\r\n\r\n// //   // Fetch chart data\r\n// //   useEffect(() => {\r\n// //     const fetchChart = async () => {\r\n// //       setLoading(true);\r\n// //       try {\r\n// //         const res = await axios.get(`${API_BASE}/prices`);\r\n// //         const allPrices = res.data.data || [];\r\n\r\n// //         // Product data\r\n// //         let productFiltered = allPrices;\r\n// //         if (selectedProduct) {\r\n// //           productFiltered = allPrices.filter(\r\n// //             (p) => p.name === selectedProduct\r\n// //           );\r\n// //         }\r\n\r\n// //         // Category data\r\n// //         let categoryFiltered = allPrices;\r\n// //         if (selectedCategory) {\r\n// //           categoryFiltered = allPrices.filter(\r\n// //             (p) => p.category?.name === selectedCategory\r\n// //           );\r\n// //         }\r\n\r\n// //         // Prepare data for chart\r\n// //         const labels = productFiltered.map((p) => p.name);\r\n// //         const basePrices = productFiltered.map((p) => p.basePrice);\r\n// //         const differences = productFiltered.map((p) => p.difference || 0);\r\n\r\n// //         const categoryBase = categoryFiltered.map((p) => p.basePrice);\r\n// //         const categoryDiff = categoryFiltered.map((p) => p.difference || 0);\r\n\r\n// //         setChartData({\r\n// //           labels,\r\n// //           datasets: [\r\n// //             {\r\n// //               label: \"Base Price (‚Çπ)\",\r\n// //               data: basePrices,\r\n// //               backgroundColor: \"rgba(0, 123, 255, 0.6)\",\r\n// //               borderRadius: 8,\r\n// //             },\r\n// //             {\r\n// //               label: \"Difference (‚Çπ)\",\r\n// //               data: differences,\r\n// //               backgroundColor: \"rgba(255, 193, 7, 0.6)\",\r\n// //               borderRadius: 8,\r\n// //             },\r\n// //             {\r\n// //               label: \"Category Avg Price (‚Çπ)\",\r\n// //               data: categoryBase,\r\n// //               backgroundColor: \"rgba(40, 167, 69, 0.6)\",\r\n// //               borderRadius: 8,\r\n// //             },\r\n// //             {\r\n// //               label: \"Category Difference (‚Çπ)\",\r\n// //               data: categoryDiff,\r\n// //               backgroundColor: \"rgba(220, 53, 69, 0.6)\",\r\n// //               borderRadius: 8,\r\n// //             },\r\n// //           ],\r\n// //         });\r\n// //       } catch (err) {\r\n// //         console.error(\"Chart data fetch error:\", err);\r\n// //       } finally {\r\n// //         setLoading(false);\r\n// //       }\r\n// //     };\r\n// //     fetchChart();\r\n// //   }, [selectedProduct, selectedCategory]);\r\n\r\n// //   return (\r\n// //     <div className=\"analytics-container\">\r\n// //       <h2 className=\"analytics-title\">üìä Product & Category Analytics</h2>\r\n// //       <p className=\"analytics-subtitle\">\r\n// //         View price trends and category performance in real-time\r\n// //       </p>\r\n\r\n// //       {/* Filters */}\r\n// //       <div className=\"filter-section\">\r\n// //         <div className=\"filter-group\">\r\n// //           <label>üßÉ Product:</label>\r\n// //           <select\r\n// //             value={selectedProduct}\r\n// //             onChange={(e) => setSelectedProduct(e.target.value)}\r\n// //           >\r\n// //             <option value=\"\">All Products</option>\r\n// //             {productList.map((p) => (\r\n// //               <option key={p._id} value={p.name}>\r\n// //                 {p.name}\r\n// //               </option>\r\n// //             ))}\r\n// //           </select>\r\n// //         </div>\r\n\r\n// //         <div className=\"filter-group\">\r\n// //           <label>üóÇÔ∏è Category:</label>\r\n// //           <select\r\n// //             value={selectedCategory}\r\n// //             onChange={(e) => setSelectedCategory(e.target.value)}\r\n// //           >\r\n// //             <option value=\"\">All Categories</option>\r\n// //             {categoryList.map((c) => (\r\n// //               <option key={c._id} value={c.name}>\r\n// //                 {c.name}\r\n// //               </option>\r\n// //             ))}\r\n// //           </select>\r\n// //         </div>\r\n// //       </div>\r\n\r\n// //       {/* Chart */}\r\n// //       <div className=\"chart-wrapper\">\r\n// //         {loading ? (\r\n// //           <div className=\"loading\">Loading chart...</div>\r\n// //         ) : chartData ? (\r\n// //           <Bar\r\n// //             data={chartData}\r\n// //             options={{\r\n// //               responsive: true,\r\n// //               maintainAspectRatio: false,\r\n// //               plugins: {\r\n// //                 legend: { position: \"bottom\" },\r\n// //                 tooltip: {\r\n// //                   callbacks: {\r\n// //                     label: (context) =>\r\n// //                       `${context.dataset.label}: ‚Çπ${context.parsed.y}`,\r\n// //                   },\r\n// //                 },\r\n// //               },\r\n// //               scales: {\r\n// //                 y: {\r\n// //                   beginAtZero: true,\r\n// //                   title: {\r\n// //                     display: true,\r\n// //                     text: \"Price (‚Çπ)\",\r\n// //                     color: \"#333\",\r\n// //                     font: { size: 14, weight: \"bold\" },\r\n// //                   },\r\n// //                 },\r\n// //                 x: {\r\n// //                   ticks: { color: \"#333\" },\r\n// //                 },\r\n// //               },\r\n// //             }}\r\n// //           />\r\n// //         ) : (\r\n// //           <div className=\"no-data\">No data available for selection</div>\r\n// //         )}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default PriceAnalytics;\r\n\r\n// // import React, { useEffect, useState } from \"react\";\r\n// // import axios from \"axios\";\r\n// // import {\r\n// //   Chart as ChartJS,\r\n// //   CategoryScale,\r\n// //   LinearScale,\r\n// //   BarElement,\r\n// //   Title,\r\n// //   Tooltip,\r\n// //   Legend,\r\n// // } from \"chart.js\";\r\n// // import { Bar } from \"react-chartjs-2\";\r\n// // import \"./PriceAnalytics.css\";\r\n\r\n// // ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\n// // const API_BASE = \"https://grocerrybackend.vercel.app/api\";\r\n\r\n// // const PriceAnalytics = () => {\r\n// //   const [loading, setLoading] = useState(true);\r\n// //   const [productList, setProductList] = useState([]);\r\n// //   const [categoryList, setCategoryList] = useState([]);\r\n// //   const [selectedProduct, setSelectedProduct] = useState(\"\");\r\n// //   const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n// //   const [startDate, setStartDate] = useState(\"\");\r\n// //   const [endDate, setEndDate] = useState(\"\");\r\n// //   const [chartData, setChartData] = useState(null);\r\n\r\n// //   // üîπ Fetch dropdowns\r\n// //   useEffect(() => {\r\n// //     const fetchDropdowns = async () => {\r\n// //       try {\r\n// //         const [products, categories] = await Promise.all([\r\n// //           axios.get(`${API_BASE}/prices`),\r\n// //           axios.get(`${API_BASE}/categories`),\r\n// //         ]);\r\n// //         setProductList(products.data.data || []);\r\n// //         setCategoryList(categories.data.categories || []);\r\n// //       } catch (err) {\r\n// //         console.error(\"Dropdown fetch error:\", err);\r\n// //       }\r\n// //     };\r\n// //     fetchDropdowns();\r\n// //   }, []);\r\n\r\n// //   // üîπ Fetch chart data with date filter\r\n// //   const fetchChart = async () => {\r\n// //     setLoading(true);\r\n// //     try {\r\n// //       const res = await axios.get(`${API_BASE}/prices`);\r\n// //       const allPrices = res.data.data || [];\r\n\r\n// //       // ‚úÖ Filter by Product / Category\r\n// //       let filtered = allPrices;\r\n// //       if (selectedProduct)\r\n// //         filtered = filtered.filter((p) => p.name === selectedProduct);\r\n// //       if (selectedCategory)\r\n// //         filtered = filtered.filter(\r\n// //           (p) => p.category?.name === selectedCategory\r\n// //         );\r\n\r\n// //       // ‚úÖ Filter by Date Range (using validTill or createdAt)\r\n// //       if (startDate && endDate) {\r\n// //         const start = new Date(startDate);\r\n// //         const end = new Date(endDate);\r\n// //         filtered = filtered.filter((item) => {\r\n// //           const date = new Date(item.validTill || item.createdAt);\r\n// //           return date >= start && date <= end;\r\n// //         });\r\n// //       }\r\n\r\n// //       // ‚úÖ Group data by Date\r\n// //       const groupedByDate = {};\r\n// //       filtered.forEach((item) => {\r\n// //         const dateKey = new Date(\r\n// //           item.validTill || item.createdAt\r\n// //         ).toLocaleDateString(\"en-IN\");\r\n// //         if (!groupedByDate[dateKey]) {\r\n// //           groupedByDate[dateKey] = [];\r\n// //         }\r\n// //         groupedByDate[dateKey].push(item);\r\n// //       });\r\n\r\n// //       // ‚úÖ Prepare chart arrays\r\n// //       const labels = Object.keys(groupedByDate);\r\n// //       const avgBasePrice = labels.map((d) => {\r\n// //         const dayData = groupedByDate[d];\r\n// //         return (\r\n// //           dayData.reduce((sum, i) => sum + Number(i.basePrice || 0), 0) /\r\n// //           dayData.length\r\n// //         );\r\n// //       });\r\n\r\n// //       const avgDiff = labels.map((d) => {\r\n// //         const dayData = groupedByDate[d];\r\n// //         return (\r\n// //           dayData.reduce((sum, i) => sum + Number(i.difference || 0), 0) /\r\n// //           dayData.length\r\n// //         );\r\n// //       });\r\n\r\n// //       const totalCount = labels.map((d) => groupedByDate[d].length);\r\n\r\n// //       // ‚úÖ Build chart dataset\r\n// //       setChartData({\r\n// //         labels,\r\n// //         datasets: [\r\n// //           {\r\n// //             label: \"Average Base Price (‚Çπ)\",\r\n// //             data: avgBasePrice,\r\n// //             backgroundColor: \"rgba(0, 123, 255, 0.6)\",\r\n// //             borderRadius: 6,\r\n// //           },\r\n// //           {\r\n// //             label: \"Average Difference (‚Çπ)\",\r\n// //             data: avgDiff,\r\n// //             backgroundColor: \"rgba(255, 193, 7, 0.6)\",\r\n// //             borderRadius: 6,\r\n// //           },\r\n// //           {\r\n// //             label: \"Total Products Count\",\r\n// //             data: totalCount,\r\n// //             backgroundColor: \"rgba(40, 167, 69, 0.6)\",\r\n// //             borderRadius: 6,\r\n// //           },\r\n// //         ],\r\n// //       });\r\n// //     } catch (err) {\r\n// //       console.error(\"Chart fetch error:\", err);\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   useEffect(() => {\r\n// //     fetchChart();\r\n// //   }, [selectedProduct, selectedCategory, startDate, endDate]);\r\n\r\n// //   return (\r\n// //     <div className=\"analytics-container\">\r\n// //       <h2 className=\"analytics-title\">üìÖ Price History & Analytics</h2>\r\n// //       <p className=\"analytics-subtitle\">\r\n// //         Track your product & category price trends over time\r\n// //       </p>\r\n\r\n// //       {/* üîπ Filters */}\r\n// //       <div className=\"filter-section\">\r\n// //         <div className=\"filter-group\">\r\n// //           <label>üßÉ Product:</label>\r\n// //           <select\r\n// //             value={selectedProduct}\r\n// //             onChange={(e) => setSelectedProduct(e.target.value)}\r\n// //           >\r\n// //             <option value=\"\">All Products</option>\r\n// //             {productList.map((p) => (\r\n// //               <option key={p._id} value={p.name}>\r\n// //                 {p.name}\r\n// //               </option>\r\n// //             ))}\r\n// //           </select>\r\n// //         </div>\r\n\r\n// //         <div className=\"filter-group\">\r\n// //           <label>üóÇÔ∏è Category:</label>\r\n// //           <select\r\n// //             value={selectedCategory}\r\n// //             onChange={(e) => setSelectedCategory(e.target.value)}\r\n// //           >\r\n// //             <option value=\"\">All Categories</option>\r\n// //             {categoryList.map((c) => (\r\n// //               <option key={c._id} value={c.name}>\r\n// //                 {c.name}\r\n// //               </option>\r\n// //             ))}\r\n// //           </select>\r\n// //         </div>\r\n\r\n// //         <div className=\"filter-group\">\r\n// //           <label>üìÜ From:</label>\r\n// //           <input\r\n// //             type=\"date\"\r\n// //             value={startDate}\r\n// //             onChange={(e) => setStartDate(e.target.value)}\r\n// //           />\r\n// //         </div>\r\n\r\n// //         <div className=\"filter-group\">\r\n// //           <label>‚û°Ô∏è To:</label>\r\n// //           <input\r\n// //             type=\"date\"\r\n// //             value={endDate}\r\n// //             onChange={(e) => setEndDate(e.target.value)}\r\n// //           />\r\n// //         </div>\r\n\r\n// //         <button className=\"btn refresh\" onClick={fetchChart}>\r\n// //           üîÑ Apply\r\n// //         </button>\r\n// //       </div>\r\n\r\n// //       {/* üîπ Chart */}\r\n// //       <div className=\"chart-wrapper\">\r\n// //         {loading ? (\r\n// //           <div className=\"loading\">Loading chart...</div>\r\n// //         ) : chartData ? (\r\n// //           <Bar\r\n// //             data={chartData}\r\n// //             options={{\r\n// //               responsive: true,\r\n// //               maintainAspectRatio: false,\r\n// //               plugins: {\r\n// //                 legend: { position: \"bottom\" },\r\n// //                 tooltip: {\r\n// //                   callbacks: {\r\n// //                     label: (context) =>\r\n// //                       `${context.dataset.label}: ${\r\n// //                         context.dataset.label.includes(\"Count\")\r\n// //                           ? context.parsed.y\r\n// //                           : \"‚Çπ\" + context.parsed.y.toFixed(2)\r\n// //                       }`,\r\n// //                   },\r\n// //                 },\r\n// //               },\r\n// //               scales: {\r\n// //                 x: {\r\n// //                   ticks: { color: \"#333\" },\r\n// //                   title: {\r\n// //                     display: true,\r\n// //                     text: \"Date (by Validity)\",\r\n// //                     color: \"#444\",\r\n// //                     font: { weight: \"bold\" },\r\n// //                   },\r\n// //                 },\r\n// //                 y: {\r\n// //                   beginAtZero: true,\r\n// //                   title: {\r\n// //                     display: true,\r\n// //                     text: \"Price / Count\",\r\n// //                     color: \"#444\",\r\n// //                     font: { weight: \"bold\" },\r\n// //                   },\r\n// //                 },\r\n// //               },\r\n// //             }}\r\n// //           />\r\n// //         ) : (\r\n// //           <div className=\"no-data\">No data found for selection.</div>\r\n// //         )}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default PriceAnalytics;\r\n\r\n// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import {\r\n//   Chart as ChartJS,\r\n//   CategoryScale,\r\n//   LinearScale,\r\n//   LineElement,\r\n//   PointElement,\r\n//   Title,\r\n//   Tooltip,\r\n//   Legend\r\n// } from \"chart.js\";\r\n// import { Line } from \"react-chartjs-2\";\r\n// import \"./PriceAnalytics.css\";\r\n\r\n// ChartJS.register(\r\n//   CategoryScale,\r\n//   LinearScale,\r\n//   LineElement,\r\n//   PointElement,\r\n//   Title,\r\n//   Tooltip,\r\n//   Legend\r\n// );\r\n\r\n// const API_BASE = \"https://grocerrybackend.vercel.app/api\";\r\n\r\n// const PriceAnalytics = () => {\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [productList, setProductList] = useState([]);\r\n//   const [categoryList, setCategoryList] = useState([]);\r\n//   const [selectedProduct, setSelectedProduct] = useState(\"\");\r\n//   const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n//   const [startDate, setStartDate] = useState(\"\");\r\n//   const [endDate, setEndDate] = useState(\"\");\r\n//   const [chartData, setChartData] = useState(null);\r\n\r\n//   // üîπ Fetch dropdowns\r\n//   useEffect(() => {\r\n//     const fetchDropdowns = async () => {\r\n//       try {\r\n//         const [products, categories] = await Promise.all([\r\n//           axios.get(`${API_BASE}/prices`),\r\n//           axios.get(`${API_BASE}/categories`)\r\n//         ]);\r\n//         setProductList(products.data.data || []);\r\n//         setCategoryList(categories.data.categories || []);\r\n//       } catch (err) {\r\n//         console.error(\"Dropdown fetch error:\", err);\r\n//       }\r\n//     };\r\n//     fetchDropdowns();\r\n//   }, []);\r\n\r\n//   // üîπ Fetch chart data with date filter\r\n//   const fetchChart = async () => {\r\n//     setLoading(true);\r\n//     try {\r\n//       const res = await axios.get(`${API_BASE}/prices`);\r\n//       const allPrices = res.data.data || [];\r\n\r\n//       let filtered = allPrices;\r\n\r\n//       // Product filter\r\n//       if (selectedProduct) {\r\n//         filtered = filtered.filter((p) => p.name === selectedProduct);\r\n//       }\r\n\r\n//       // Category filter\r\n//       if (selectedCategory) {\r\n//         filtered = filtered.filter(\r\n//           (p) => p.category?.name === selectedCategory\r\n//         );\r\n//       }\r\n\r\n//       // Date filter\r\n//       if (startDate && endDate) {\r\n//         const start = new Date(startDate);\r\n//         const end = new Date(endDate);\r\n//         filtered = filtered.filter((item) => {\r\n//           const date = new Date(item.validTill || item.createdAt);\r\n//           return date >= start && date <= end;\r\n//         });\r\n//       }\r\n\r\n//       /* -------------------------\r\n//          Group Data by Date\r\n//       --------------------------*/\r\n//       const groupedByDate = {};\r\n//       filtered.forEach((item) => {\r\n//         const dateKey = new Date(\r\n//           item.validTill || item.createdAt\r\n//         ).toLocaleDateString(\"en-IN\");\r\n\r\n//         if (!groupedByDate[dateKey]) {\r\n//           groupedByDate[dateKey] = [];\r\n//         }\r\n//         groupedByDate[dateKey].push(item);\r\n//       });\r\n\r\n//       const labels = Object.keys(groupedByDate);\r\n\r\n//       const avgBasePrice = labels.map((d) => {\r\n//         const dayData = groupedByDate[d];\r\n//         return (\r\n//           dayData.reduce((sum, i) => sum + Number(i.basePrice || 0), 0) /\r\n//           dayData.length\r\n//         );\r\n//       });\r\n\r\n//       const avgDiff = labels.map((d) => {\r\n//         const dayData = groupedByDate[d];\r\n//         return (\r\n//           dayData.reduce((sum, i) => sum + Number(i.difference || 0), 0) /\r\n//           dayData.length\r\n//         );\r\n//       });\r\n\r\n//       const totalCount = labels.map((d) => groupedByDate[d].length);\r\n\r\n//       /* -------------------------\r\n//          Create LINE chart data\r\n//       --------------------------*/\r\n//       setChartData({\r\n//         labels,\r\n//         datasets: [\r\n//           {\r\n//             label: \"Average Base Price (‚Çπ)\",\r\n//             data: avgBasePrice,\r\n//             borderColor: \"rgba(0, 123, 255, 1)\",\r\n//             borderWidth: 2,\r\n//             tension: 0.3,\r\n//             fill: false\r\n//           },\r\n//           {\r\n//             label: \"Average Difference (‚Çπ)\",\r\n//             data: avgDiff,\r\n//             borderColor: \"rgba(255, 193, 7, 1)\",\r\n//             borderWidth: 2,\r\n//             tension: 0.3,\r\n//             fill: false\r\n//           },\r\n//           {\r\n//             label: \"Products Count\",\r\n//             data: totalCount,\r\n//             borderColor: \"rgba(40, 167, 69, 1)\",\r\n//             borderWidth: 2,\r\n//             tension: 0.3,\r\n//             fill: false\r\n//           }\r\n//         ]\r\n//       });\r\n//     } catch (err) {\r\n//       console.error(\"Chart fetch error:\", err);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     fetchChart();\r\n//   }, [selectedProduct, selectedCategory, startDate, endDate]);\r\n\r\n//   return (\r\n//     <div className=\"analytics-container\">\r\n//       <h2 className=\"analytics-title\">üìâ Price Trends ‚Äî Line Graph</h2>\r\n//       <p className=\"analytics-subtitle\">Multiple line price analytics</p>\r\n\r\n//       {/* üîπ Filters */}\r\n//       <div className=\"filter-section\">\r\n//         <div className=\"filter-group\">\r\n//           <label>Product:</label>\r\n//           <select\r\n//             value={selectedProduct}\r\n//             onChange={(e) => setSelectedProduct(e.target.value)}\r\n//           >\r\n//             <option value=\"\">All Products</option>\r\n//             {productList.map((p) => (\r\n//               <option key={p._id} value={p.name}>\r\n//                 {p.name}\r\n//               </option>\r\n//             ))}\r\n//           </select>\r\n//         </div>\r\n\r\n//         <div className=\"filter-group\">\r\n//           <label>Category:</label>\r\n//           <select\r\n//             value={selectedCategory}\r\n//             onChange={(e) => setSelectedCategory(e.target.value)}\r\n//           >\r\n//             <option value=\"\">All Categories</option>\r\n//             {categoryList.map((c) => (\r\n//               <option key={c._id} value={c.name}>\r\n//                 {c.name}\r\n//               </option>\r\n//             ))}\r\n//           </select>\r\n//         </div>\r\n\r\n//         <div className=\"filter-group\">\r\n//           <label>From:</label>\r\n//           <input\r\n//             type=\"date\"\r\n//             value={startDate}\r\n//             onChange={(e) => setStartDate(e.target.value)}\r\n//           />\r\n//         </div>\r\n\r\n//         <div className=\"filter-group\">\r\n//           <label>To:</label>\r\n//           <input\r\n//             type=\"date\"\r\n//             value={endDate}\r\n//             onChange={(e) => setEndDate(e.target.value)}\r\n//           />\r\n//         </div>\r\n\r\n//         <button className=\"btn refresh\" onClick={fetchChart}>üîÑ Apply</button>\r\n//       </div>\r\n\r\n//       {/* üîπ Chart */}\r\n//       <div className=\"chart-wrapper\">\r\n//         {loading ? (\r\n//           <div className=\"loading\">Loading chart...</div>\r\n//         ) : chartData ? (\r\n//           <Line\r\n//             data={chartData}\r\n//             options={{\r\n//               responsive: true,\r\n//               maintainAspectRatio: false,\r\n//               plugins: {\r\n//                 legend: { position: \"bottom\" },\r\n//               },\r\n//               scales: {\r\n//                 y: {\r\n//                   beginAtZero: true\r\n//                 }\r\n//               }\r\n//             }}\r\n//           />\r\n//         ) : (\r\n//           <div className=\"no-data\">No data found</div>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default PriceAnalytics;\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport \"./PriceAnalytics.css\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst API_BASE = \"https://grocerrybackend.vercel.app/api\";\r\n\r\nconst PriceAnalytics = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [productList, setProductList] = useState([]);\r\n  const [categoryList, setCategoryList] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [chartData, setChartData] = useState(null);\r\n\r\n  // üîπ Fetch dropdowns\r\n  useEffect(() => {\r\n    const fetchDropdowns = async () => {\r\n      try {\r\n        const [products, categories] = await Promise.all([\r\n          axios.get(`${API_BASE}/prices`),\r\n          axios.get(`${API_BASE}/categories`),\r\n        ]);\r\n        setProductList(products.data.data || []);\r\n        setCategoryList(categories.data.categories || []);\r\n      } catch (err) {\r\n        console.error(\"Dropdown fetch error:\", err);\r\n      }\r\n    };\r\n    fetchDropdowns();\r\n  }, []);\r\n\r\n  // üîπ Fetch chart data with date filter\r\n  const fetchChart = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/prices`);\r\n      const allPrices = res.data.data || [];\r\n\r\n      // ‚úÖ Filter by Product / Category\r\n      let filtered = allPrices;\r\n      if (selectedProduct)\r\n        filtered = filtered.filter((p) => p.name === selectedProduct);\r\n      if (selectedCategory)\r\n        filtered = filtered.filter(\r\n          (p) => p.category?.name === selectedCategory\r\n        );\r\n\r\n      // ‚úÖ Filter by Date Range\r\n      if (startDate && endDate) {\r\n        const start = new Date(startDate);\r\n        const end = new Date(endDate);\r\n\r\n        filtered = filtered.filter((item) => {\r\n          const date = new Date(item.validTill || item.createdAt);\r\n          return date >= start && date <= end;\r\n        });\r\n      }\r\n\r\n      // ‚úÖ Group by Date\r\n      const groupedByDate = {};\r\n      filtered.forEach((item) => {\r\n        const dateKey = new Date(\r\n          item.validTill || item.createdAt\r\n        ).toLocaleDateString(\"en-IN\");\r\n\r\n        if (!groupedByDate[dateKey]) groupedByDate[dateKey] = [];\r\n        groupedByDate[dateKey].push(item);\r\n      });\r\n\r\n      const labels = Object.keys(groupedByDate);\r\n\r\n      const avgBasePrice = labels.map((d) => {\r\n        const dayData = groupedByDate[d];\r\n        return (\r\n          dayData.reduce((sum, i) => sum + Number(i.basePrice || 0), 0) /\r\n          dayData.length\r\n        );\r\n      });\r\n\r\n      const avgDiff = labels.map((d) => {\r\n        const dayData = groupedByDate[d];\r\n        return (\r\n          dayData.reduce((sum, i) => sum + Number(i.difference || 0), 0) /\r\n          dayData.length\r\n        );\r\n      });\r\n\r\n      const totalCount = labels.map((d) => groupedByDate[d].length);\r\n\r\n      // üîπ Multiple Line Datasets\r\n      setChartData({\r\n        labels,\r\n        datasets: [\r\n          {\r\n            label: \"Average Base Price (‚Çπ)\",\r\n            data: avgBasePrice,\r\n            borderColor: \"#007bff\",\r\n            backgroundColor: \"rgba(0,123,255,0.3)\",\r\n            tension: 0.3,\r\n            fill: false,\r\n          },\r\n          {\r\n            label: \"Average Difference (‚Çπ)\",\r\n            data: avgDiff,\r\n            borderColor: \"#ffc107\",\r\n            backgroundColor: \"rgba(255,193,7,0.3)\",\r\n            tension: 0.3,\r\n            fill: false,\r\n          },\r\n          {\r\n            label: \"Total Products Count\",\r\n            data: totalCount,\r\n            borderColor: \"#28a745\",\r\n            backgroundColor: \"rgba(40,167,69,0.3)\",\r\n            tension: 0.3,\r\n            fill: false,\r\n          },\r\n        ],\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Chart fetch error:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchChart();\r\n  }, [selectedProduct, selectedCategory, startDate, endDate]);\r\n\r\n  return (\r\n    <div className=\"analytics-container\">\r\n      <h2 className=\"analytics-title\">üìÖ Price History & Analytics</h2>\r\n      <p className=\"analytics-subtitle\">\r\n        Track your product & category price trends over time\r\n      </p>\r\n\r\n      {/* Filters */}\r\n      <div className=\"filter-section\">\r\n        <div className=\"filter-group\">\r\n          <label>üßÉ Product:</label>\r\n          <select value={selectedProduct} onChange={(e) => setSelectedProduct(e.target.value)}>\r\n            <option value=\"\">All Products</option>\r\n            {productList.map((p) => (\r\n              <option key={p._id} value={p.name}>{p.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"filter-group\">\r\n          <label>üóÇÔ∏è Category:</label>\r\n          <select value={selectedCategory} onChange={(e) => setSelectedCategory(e.target.value)}>\r\n            <option value=\"\">All Categories</option>\r\n            {categoryList.map((c) => (\r\n              <option key={c._id} value={c.name}>{c.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"filter-group\">\r\n          <label>üìÜ From:</label>\r\n          <input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\r\n        </div>\r\n\r\n        <div className=\"filter-group\">\r\n          <label>‚û° To:</label>\r\n          <input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\r\n        </div>\r\n\r\n        <button className=\"btn refresh\" onClick={fetchChart}>üîÑ Apply</button>\r\n      </div>\r\n\r\n      {/* Chart */}\r\n      <div className=\"chart-wrapper\">\r\n        {loading ? (\r\n          <div className=\"loading\">Loading chart...</div>\r\n        ) : chartData ? (\r\n          <Line\r\n            data={chartData}\r\n            options={{\r\n              responsive: true,\r\n              maintainAspectRatio: false,\r\n              plugins: {\r\n                legend: { position: \"bottom\" },\r\n              },\r\n              scales: {\r\n                y: { beginAtZero: true },\r\n              },\r\n            }}\r\n          />\r\n        ) : (\r\n          <div className=\"no-data\">No data found.</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PriceAnalytics;\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SACEC,KAAK,IAAIC,OAAO,EAChBC,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,KAAK,EACLC,OAAO,EACPC,MAAM,QACD,UAAU;AACjB,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9BV,OAAO,CAACW,QAAQ,CACdV,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,WAAW,EA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}