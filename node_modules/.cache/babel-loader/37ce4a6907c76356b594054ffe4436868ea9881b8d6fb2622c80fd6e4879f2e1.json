{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\n// // import React, { useEffect, useState, useRef } from \"react\";\n// // import axios from \"axios\";\n// // import \"./PriceList.css\";\n\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// // export default function PriceList() {\n// //   const [items, setItems] = useState([]);\n// //   const [categories, setCategories] = useState([]);\n// //   const [subcategories, setSubcategories] = useState([]);\n// //   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n// //   const [search, setSearch] = useState(\"\");\n// //   const [loading, setLoading] = useState(false);\n\n// //   // form state for add/update\n// //   const [form, setForm] = useState({\n// //     name: \"\",\n// //     category: \"\",\n// //     subcategory: \"\",\n// //     description: \"\",\n// //     basePrice: \"\",\n// //     difference: \"\", // used as todayDiff when creating/updating (but backend update-diff is preferred)\n// //     validTill: \"\",\n// //     file: null,\n// //     status: \"inactive\",\n// //   });\n\n// //   const [editId, setEditId] = useState(null);\n// //   const [isCopyMode, setIsCopyMode] = useState(false);\n// //   const [showForm, setShowForm] = useState(false);\n// //   const [showModal, setShowModal] = useState(false);\n// //   const [activeMenu, setActiveMenu] = useState(null);\n// // const [quickBasePrices, setQuickBasePrices] = useState({});\n\n// //   const [addingCategory, setAddingCategory] = useState(false);\n// //   const [newCategoryName, setNewCategoryName] = useState(\"\");\n// //   const [newCategoryImage, setNewCategoryImage] = useState(null);\n// //   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n// //   const [addingSub, setAddingSub] = useState(false);\n// //   const [newSubName, setNewSubName] = useState(\"\");\n// //   const [newSubImage, setNewSubImage] = useState(null);\n// //   const [newSubPreview, setNewSubPreview] = useState(null);\n\n// //   const [selectedItems, setSelectedItems] = useState([]);\n// //   const [bulkMode, setBulkMode] = useState(false);\n\n// //   const [csvFile, setCsvFile] = useState(null);\n// //   const csvInputRef = useRef();\n\n// //   const [currentPage, setCurrentPage] = useState(1);\n// //   const itemsPerPage = 30;\n\n// //   const [filterCategory, setFilterCategory] = useState(\"\");\n// //   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n// //   const [filterSubs, setFilterSubs] = useState([]);\n\n// //   // local per-row quick diff input map: { [id]: number }\n// //   const [quickDiffs, setQuickDiffs] = useState({});\n\n// //   // fetch categories on start\n// //   useEffect(() => {\n// //     fetchCategories();\n// //   }, []);\n\n// //   // whenever categories change, fetch items (so we can populate category/sub names)\n// //   useEffect(() => {\n// //     if (categories.length > 0) fetchItems();\n// //   }, [categories]);\n\n// //   // responsive\n// //   useEffect(() => {\n// //     const handleResize = () => setIsMobile(window.innerWidth < 768);\n// //     window.addEventListener(\"resize\", handleResize);\n// //     return () => window.removeEventListener(\"resize\", handleResize);\n// //   }, []);\n\n// //   // when filterCategory changes update filterSubs\n// //   useEffect(() => {\n// //     if (!filterCategory) {\n// //       setFilterSubs([]);\n// //       setFilterSubcategory(\"\");\n// //       return;\n// //     }\n// //     const cat = categories.find((c) => c._id === filterCategory);\n// //     setFilterSubs(cat?.subcategories || []);\n// //     setFilterSubcategory(\"\");\n// //   }, [filterCategory, categories]);\n\n// //   // when form.category changes update subcategories for the form\n// //   useEffect(() => {\n// //     if (!form.category) {\n// //       setSubcategories([]);\n// //       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n// //       return;\n// //     }\n// //     const cat = categories.find((c) => c._id === form.category);\n// //     setSubcategories(cat?.subcategories || []);\n// //     const exists = cat?.subcategories?.some((s) => s._id === form.subcategory);\n// //     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\n// //   }, [form.category, categories]);\n\n// //   // ------------------ API calls ------------------\n// //   const fetchCategories = async () => {\n// //     try {\n// //       const res = await axios.get(CATEGORY_URL);\n// //       if (res.data && res.data.success) setCategories(res.data.categories || []);\n// //     } catch (err) {\n// //       console.error(\"Fetch categories error\", err);\n// //       alert(\"Could not fetch categories\");\n// //     }\n// //   };\n\n// //   const fetchItems = async () => {\n// //     try {\n// //       setLoading(true);\n// //       const res = await axios.get(API_URL);\n// //       if (res.data && res.data.success) {\n// //         const raw = res.data.data || [];\n\n// //         // ensure fields exist\n// //         const enriched = raw.map((item) => {\n// //           // category/subcategory may be populated objects or ids\n// //           const catObj = categories.find(\n// //             (c) => c._id === item.category || c._id === (item.category?._id || item.category)\n// //           );\n// //           const subObj = catObj?.subcategories?.find(\n// //             (s) =>\n// //               s._id === item.subcategory ||\n// //               s._id === (item.subcategory?._id || item.subcategory)\n// //           );\n\n// //           return {\n// //             ...item,\n// //             // maintain compatibility: backend provides todayDiff/lastFinalPrice/currentFinalPrice\n// //             todayDiff: item.todayDiff ?? item.difference ?? 0,\n// //             lastFinalPrice: item.lastFinalPrice ?? (item.basePrice ?? 0),\n// //             currentFinalPrice:\n// //               item.currentFinalPrice ??\n// //               item.finalPrice ??\n// //               (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0)),\n// //             category: catObj ? { _id: catObj._id, name: catObj.name } : (item.category || null),\n// //             subcategory: subObj ? { _id: subObj._id, name: subObj.name } : (item.subcategory || null),\n// //           };\n// //         });\n\n// //         setItems(enriched);\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Fetch items error\", err);\n// //       alert(\"Could not fetch items\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // ------------------ Category/Sub creation ------------------\n// //   const handleCreateCategory = async () => {\n// //     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n// //     try {\n// //       const fd = new FormData();\n// //       fd.append(\"name\", newCategoryName.trim());\n// //       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n// //       const res = await axios.post(CATEGORY_URL, fd);\n// //       if (res.data && res.data.success) {\n// //         setNewCategoryName(\"\");\n// //         setNewCategoryImage(null);\n// //         setNewCategoryPreview(null);\n// //         setAddingCategory(false);\n// //         fetchCategories();\n// //       } else {\n// //         alert(\"Category creation failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Create category error\", err);\n// //       alert(\"Category creation failed\");\n// //     }\n// //   };\n\n// //   const handleCreateSub = async () => {\n// //     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n// //     if (!form.category) return alert(\"Select category first\");\n\n// //     try {\n// //       const fd = new FormData();\n// //       fd.append(\"name\", newSubName.trim());\n// //       if (newSubImage) fd.append(\"image\", newSubImage);\n\n// //       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n// //       if (res.data && res.data.success) {\n// //         setNewSubName(\"\");\n// //         setNewSubImage(null);\n// //         setNewSubPreview(null);\n// //         setAddingSub(false);\n// //         fetchCategories();\n// //       } else {\n// //         alert(\"Subcategory creation failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Create sub error\", err);\n// //       alert(\"Subcategory creation failed\");\n// //     }\n// //   };\n\n// //   // ------------------ Handlers (create/update/delete) ------------------\n// //   const handleChange = (e) => {\n// //     const { name, value, files } = e.target;\n// //     if (files && files.length) {\n// //       setForm((p) => ({ ...p, file: files[0] }));\n// //     } else {\n// //       setForm((p) => ({ ...p, [name]: value }));\n// //     }\n// //   };\n\n// //   const handleSubmit = async (e) => {\n// //     e.preventDefault();\n// //     setLoading(true);\n\n// //     try {\n// //       if (!form.name || !form.category || !form.basePrice) {\n// //         alert(\"Name, category & base price are required\");\n// //         setLoading(false);\n// //         return;\n// //       }\n\n// //       const fd = new FormData();\n// //       Object.keys(form).forEach((k) => {\n// //         const val = form[k];\n// //         if (val !== undefined && val !== null) {\n// //           fd.append(k, val);\n// //         }\n// //       });\n\n// //       let res;\n// //       if (isCopyMode) {\n// //         // create new item from copy data\n// //         res = await axios.post(API_URL, fd);\n// //         alert(\"Copied as new item\");\n// //       } else if (editId) {\n// //         // update general fields (basePrice allowed but base is expected to be fixed by your requirements; be careful)\n// //         res = await axios.put(`${API_URL}/${editId}`, fd);\n// //         alert(\"Updated\");\n// //       } else {\n// //         // add new\n// //         res = await axios.post(API_URL, fd);\n// //         alert(\"Added\");\n// //       }\n\n// //       await fetchItems();\n// //       await fetchCategories();\n\n// //       setForm({\n// //         name: \"\",\n// //         category: \"\",\n// //         subcategory: \"\",\n// //         description: \"\",\n// //         basePrice: \"\",\n// //         difference: \"\",\n// //         validTill: \"\",\n// //         file: null,\n// //         status: \"inactive\",\n// //       });\n// //       setEditId(null);\n// //       setIsCopyMode(false);\n// //       setShowModal(false);\n// //       setShowForm(false);\n// //     } catch (err) {\n// //       console.error(\"Save error\", err);\n// //       alert(\"Save failed\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   const handleEdit = (item) => {\n// //     setForm({\n// //       name: item.name || \"\",\n// //       category: item.category?._id?.toString() || \"\",\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\n// //       description: item.description || \"\",\n// //       basePrice: item.basePrice ?? \"\",\n// //       difference: item.todayDiff ?? 0,\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n// //       file: null,\n// //       status: item.status || \"inactive\",\n// //     });\n\n// //     const cat = categories.find((c) => c._id === item.category?._id);\n// //     setSubcategories(cat?.subcategories || []);\n\n// //     setEditId(item._id);\n// //     setIsCopyMode(false);\n// //     setShowModal(true);\n// //     setActiveMenu(null);\n// //   };\n\n// //   const handleCopyToEdit = (item) => {\n// //     setForm({\n// //       name: item.name || \"\",\n// //       category: item.category?._id?.toString() || \"\",\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\n// //       description: item.description || \"\",\n// //       basePrice: item.basePrice ?? \"\",\n// //       difference: item.todayDiff ?? 0,\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n// //       file: null,\n// //       status: item.status || \"inactive\",\n// //     });\n\n// //     const cat = categories.find((c) => c._id === item.category?._id);\n// //     setSubcategories(cat?.subcategories || []);\n\n// //     setEditId(null);\n// //     setIsCopyMode(true);\n// //     setShowModal(true);\n// //     setActiveMenu(null);\n// //   };\n\n// //   const handleDelete = async (id) => {\n// //     if (!window.confirm(\"Delete item?\")) return;\n// //     try {\n// //       await axios.delete(`${API_URL}/${id}`);\n// //       setItems((prev) => prev.filter((x) => x._id !== id));\n// //       setSelectedItems((prev) => prev.filter((x) => x !== id));\n// //       setActiveMenu(null);\n// //     } catch (err) {\n// //       console.error(\"Delete error\", err);\n// //       alert(\"Delete failed\");\n// //     }\n// //   };\n\n// //   const handleStatusToggle = async (item) => {\n// //     try {\n// //       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n// //       const res = await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n// //       if (res.data && res.data.success) {\n// //         // update local\n// //         setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n// //       } else {\n// //         alert(\"Status update failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Status toggle error\", err);\n// //       alert(\"Status update failed\");\n// //     }\n// //   };\n\n// //   const handleBulkDelete = async () => {\n// //     if (!selectedItems.length) return alert(\"No items selected\");\n// //     if (!window.confirm(\"Delete selected items?\")) return;\n\n// //     try {\n// //       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n// //       setSelectedItems([]);\n// //       fetchItems();\n// //       setBulkMode(false);\n// //     } catch (err) {\n// //       console.error(\"Bulk delete error\", err);\n// //       alert(\"Bulk delete failed\");\n// //     }\n// //   };\n\n// //   const updateLocalItemField = (id, key, value) => {\n// //     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n// //   };\n\n// //   const handleBulkSave = async () => {\n// //     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n\n// //     const updates = items\n// //       .filter((x) => selectedItems.includes(x._id))\n// //       .map((x) => ({\n// //         id: x._id,\n// //         name: x.name,\n// //         basePrice: Number(x.basePrice),\n// //         difference: Number(x.todayDiff || 0), // backend bulk expects difference key\n// //         validTill: x.validTill,\n// //         status: x.status,\n// //       }));\n\n// //     try {\n// //       const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\n// //       if (res.data && res.data.success) {\n// //         setBulkMode(false);\n// //         setSelectedItems([]);\n// //         fetchItems();\n// //       } else {\n// //         alert(\"Bulk save failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Bulk save error\", err);\n// //       alert(\"Bulk save failed\");\n// //     }\n// //   };\n\n// //   // ------------------ CSV import/export ------------------\n// //   const handleCsvSelect = (e) => {\n// //     setCsvFile(e.target.files[0]);\n// //   };\n\n// //   const handleImportCsv = async () => {\n// //     if (!csvFile) return alert(\"Select CSV file\");\n// //     try {\n// //       const fd = new FormData();\n// //       fd.append(\"file\", csvFile);\n// //       const res = await axios.post(`${API_URL}/import`, fd);\n// //       if (res.data && res.data.success) {\n// //         alert(`Imported ${res.data.inserted || 0} items`);\n// //         setCsvFile(null);\n// //         if (csvInputRef.current) csvInputRef.current.value = null;\n// //         fetchItems();\n// //       } else {\n// //         alert(\"CSV import failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"CSV import error\", err);\n// //       alert(\"CSV import failed\");\n// //     }\n// //   };\n\n// //   const handleExportCsv = () => {\n// //     if (!items.length) return alert(\"No items to export\");\n\n// //     const header = [\n// //       \"id\",\n// //       \"name\",\n// //       \"categoryName\",\n// //       \"subcategoryName\",\n// //       \"basePrice\",\n// //       \"todayDiff\",\n// //       \"lastFinalPrice\",\n// //       \"currentFinalPrice\",\n// //       \"status\",\n// //       \"validTill\",\n// //       \"description\",\n// //       \"imageUrl\",\n// //     ];\n\n// //     const rows = items.map((p) => [\n// //       p._id,\n// //       p.name || \"\",\n// //       p.category?.name || \"\",\n// //       p.subcategory?.name || \"\",\n// //       p.basePrice ?? \"\",\n// //       p.todayDiff ?? \"\",\n// //       p.lastFinalPrice ?? \"\",\n// //       p.currentFinalPrice ?? \"\",\n// //       p.status || \"\",\n// //       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n// //       p.description || \"\",\n// //       p.image || \"\",\n// //     ]);\n\n// //     const csvArray = [header, ...rows];\n// //     const csvContent =\n// //       \"data:text/csv;charset=utf-8,\" +\n// //       csvArray\n// //         .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\n// //         .join(\"\\n\");\n\n// //     const encodedUri = encodeURI(csvContent);\n// //     const link = document.createElement(\"a\");\n// //     link.href = encodedUri;\n// //     link.download = `all_prices_${Date.now()}.csv`;\n// //     link.click();\n// //   };\n\n// //   const handleExportSelectedCsv = () => {\n// //     if (!selectedItems.length) return alert(\"Select items to export\");\n\n// //     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n// //     const header = [\n// //       \"id\",\n// //       \"name\",\n// //       \"categoryName\",\n// //       \"subcategoryName\",\n// //       \"basePrice\",\n// //       \"todayDiff\",\n// //       \"lastFinalPrice\",\n// //       \"currentFinalPrice\",\n// //       \"status\",\n// //       \"validTill\",\n// //       \"description\",\n// //       \"imageUrl\",\n// //     ];\n\n// //     const rows = selectedData.map((p) => [\n// //       p._id,\n// //       p.name || \"\",\n// //       p.category?.name || \"\",\n// //       p.subcategory?.name || \"\",\n// //       p.basePrice ?? \"\",\n// //       p.todayDiff ?? \"\",\n// //       p.lastFinalPrice ?? \"\",\n// //       p.currentFinalPrice ?? \"\",\n// //       p.status || \"\",\n// //       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n// //       p.description || \"\",\n// //       p.image || \"\",\n// //     ]);\n\n// //     const csvArray = [header, ...rows];\n// //     const csvContent =\n// //       \"data:text/csv;charset=utf-8,\" +\n// //       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n// //     const encodedUri = encodeURI(csvContent);\n// //     const link = document.createElement(\"a\");\n// //     link.href = encodedUri;\n// //     link.download = `selected_prices_${Date.now()}.csv`;\n// //     link.click();\n// //   };\n\n// //   // ------------------ Filtering/Pagination ------------------\n// //   const filteredItems = items.filter((item) => {\n// //     const t = search.toLowerCase();\n\n// //     const matchText =\n// //       (item.name || \"\").toLowerCase().includes(t) ||\n// //       (item.category?.name || \"\").toLowerCase().includes(t) ||\n// //       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n// //     const matchCategory = !filterCategory || item.category?._id === filterCategory;\n// //     const matchSub = !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n// //     return matchText && matchCategory && matchSub;\n// //   });\n\n// //   const indexOfLast = currentPage * itemsPerPage;\n// //   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n// //   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n// //   // ------------------ Final price helper ------------------\n// //   const getFinalPrice = (item) => {\n// //     // trust backend: currentFinalPrice computed server-side\n// //     return item.currentFinalPrice ?? (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0));\n// //   };\n\n// //   // ------------------ QUICK DIFF (per-row) ------------------\n// //   const handleQuickDiffChange = (id, value) => {\n// //     setQuickDiffs((p) => ({ ...p, [id]: value }));\n// //   };\n\n// //   const applyQuickDiff = async (id) => {\n// //     const diff = Number(quickDiffs[id] ?? 0);\n// //     try {\n// //       setLoading(true);\n// //       const res = await axios.put(`${API_URL}/updateDiff/${id}`, { diff });\n// //       if (res.data && res.data.success) {\n// //         await fetchItems();\n// //         setQuickDiffs((p) => ({ ...p, [id]: undefined }));\n// //       } else {\n// //         alert(\"Diff update failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"update-diff error\", err);\n// //       alert(\"Diff update failed\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // ------------------ ROUTINE UI ------------------\n// //   return (\n// //     <div style={styles.container}>\n// //       <div style={styles.header}>\n// //         <h1 style={styles.title}>Product Management</h1>\n// //       </div>\n\n// //       <div className=\"mobile-topbar\" style={{ marginBottom: 12 }}>\n// //         <input\n// //           type=\"text\"\n// //           placeholder=\"Search product, category or subcategory...\"\n// //           value={search}\n// //           onChange={(e) => {\n// //             setSearch(e.target.value);\n// //             setCurrentPage(1);\n// //           }}\n// //           style={styles.searchInput}\n// //         />\n\n// //         <button\n// //           style={styles.addButton}\n// //           onClick={() => {\n// //             setShowForm(!showForm);\n// //             setEditId(null);\n// //             setIsCopyMode(false);\n// //           }}\n// //         >\n// //           {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\n// //         </button>\n// //       </div>\n\n// //       <div className=\"filter-bar\" style={{ display: \"flex\", gap: 10, marginBottom: 12 }}>\n// //         <select value={filterCategory} onChange={(e) => setFilterCategory(e.target.value)} className=\"filter-select\" style={styles.select}>\n// //           <option value=\"\">Filter by Category</option>\n// //           {categories.map((c) => (\n// //             <option key={c._id} value={c._id}>\n// //               {c.name}\n// //             </option>\n// //           ))}\n// //         </select>\n\n// //         <select\n// //           value={filterSubcategory}\n// //           onChange={(e) => setFilterSubcategory(e.target.value)}\n// //           className=\"filter-select\"\n// //           disabled={!filterSubs.length}\n// //           style={styles.select}\n// //         >\n// //           <option value=\"\">Filter by Subcategory</option>\n// //           {filterSubs.map((s) => (\n// //             <option key={s._id} value={s._id}>\n// //               {s.name}\n// //             </option>\n// //           ))}\n// //         </select>\n\n// //         <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\n\n// //           <button style={styles.btnPrimary} onClick={handleExportCsv}>\n// //             Export All\n// //           </button>\n// //         </div>\n// //       </div>\n\n// //       {selectedItems.length > 0 && (\n// //         <div className=\"bulk-bar\" style={styles.bulkBar}>\n// //           {!bulkMode ? (\n// //             <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 8 }}>\n// //               <button style={styles.btnDelete} onClick={handleBulkDelete}>\n// //                 üóë Bulk Delete\n// //               </button>\n\n// //               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\n// //                 ‚úè Bulk Edit\n// //               </button>\n// //             </div>\n// //           ) : (\n// //             <div style={styles.bulkPanel}>\n// //               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\n\n// //               {items\n// //                 .filter((item) => selectedItems.includes(item._id))\n// //                 .map((item) => (\n// //                   <div key={item._id} style={styles.bulkItemBox}>\n// //                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\n\n// //                     <div style={styles.formGrid}>\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Name</label>\n// //                         <input\n// //                           type=\"text\"\n// //                           value={item.name}\n// //                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\n// //                           style={styles.input}\n// //                         />\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Base Price</label>\n// //                         <input\n// //                           type=\"number\"\n// //                           value={item.basePrice}\n// //                           onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))}\n// //                           style={styles.input}\n// //                         />\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Today's Difference</label>\n// //                         <input\n// //                           type=\"number\"\n// //                           value={item.todayDiff || 0}\n// //                           onChange={(e) => updateLocalItemField(item._id, \"todayDiff\", Number(e.target.value))}\n// //                           style={styles.input}\n// //                         />\n// //                       </div>\n\n// //                       <div style={styles.formGroup}>\n// //                         <label style={styles.label}>Status</label>\n// //                         <select\n// //                           value={item.status}\n// //                           onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)}\n// //                           style={styles.select}\n// //                         >\n// //                           <option value=\"active\">active</option>\n// //                           <option value=\"inactive\">inactive</option>\n// //                         </select>\n// //                       </div>\n// //                     </div>\n// //                   </div>\n// //                 ))}\n\n// //               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\n// //                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\n// //                   ‚úî Save All\n// //                 </button>\n// //                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\n// //                   ‚úñ Cancel\n// //                 </button>\n// //               </div>\n// //             </div>\n// //           )}\n// //         </div>\n// //       )}\n\n// //       {showForm && (\n// //         <div style={styles.formCard}>\n// //           <h2 style={styles.formTitle}>‚ûï Add / Edit Product</h2>\n\n// //           <form onSubmit={handleSubmit}>\n// //             <div style={styles.formGrid}>\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Product Name *</label>\n// //                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Category *</label>\n// //                 <div style={styles.categoryRow}>\n// //                   <select\n// //                     required\n// //                     name=\"category\"\n// //                     value={form.category}\n// //                     onChange={(e) => {\n// //                       handleChange(e);\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\n// //                     }}\n// //                     style={styles.select}\n// //                   >\n// //                     <option value=\"\">Select Category</option>\n// //                     {categories.map((c) => (\n// //                       <option value={c._id} key={c._id}>\n// //                         {c.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n\n// //                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\n// //                     {addingCategory ? \"Close\" : \"Add\"}\n// //                   </button>\n// //                 </div>\n// //               </div>\n\n// //               {addingCategory && (\n// //                 <div style={styles.addCategoryBox}>\n// //                   <label style={styles.label}>Add New Category</label>\n// //                   <div style={styles.categoryRow}>\n// //                     <input\n// //                       value={newCategoryName}\n// //                       onChange={(e) => setNewCategoryName(e.target.value)}\n// //                       placeholder=\"Category name\"\n// //                       style={styles.input}\n// //                     />\n// //                     <input\n// //                       type=\"file\"\n// //                       accept=\"image/*\"\n// //                       onChange={(e) => {\n// //                         setNewCategoryImage(e.target.files[0]);\n// //                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n// //                       }}\n// //                       style={styles.fileInput}\n// //                     />\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\n// //                       Create\n// //                     </button>\n// //                   </div>\n// //                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\n// //                 </div>\n// //               )}\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Subcategory</label>\n// //                 <div style={styles.categoryRow}>\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n// //                     <option value=\"\">Select Subcategory</option>\n// //                     {subcategories.map((s) => (\n// //                       <option value={s._id} key={s._id}>\n// //                         {s.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n\n// //                   {form.category && (\n// //                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\n// //                       {addingSub ? \"Close\" : \"Add\"}\n// //                     </button>\n// //                   )}\n// //                 </div>\n// //               </div>\n\n// //               {addingSub && (\n// //                 <div style={styles.addCategoryBox}>\n// //                   <label style={styles.label}>Add New Subcategory</label>\n// //                   <div style={styles.categoryRow}>\n// //                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\n// //                     <input\n// //                       type=\"file\"\n// //                       accept=\"image/*\"\n// //                       onChange={(e) => {\n// //                         setNewSubImage(e.target.files[0]);\n// //                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n// //                       }}\n// //                       style={styles.fileInput}\n// //                     />\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\n// //                       Create\n// //                     </button>\n// //                   </div>\n// //                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\n// //                 </div>\n// //               )}\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Base Price *</label>\n// //                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n// //                 <small style={{ color: \"#666\" }}>\n// //                   Base is considered fixed logic-wise. Changing it here will update the stored basePrice.\n// //                 </small>\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Today's Difference (optional)</label>\n// //                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n// //                 <small style={{ color: \"#666\" }}>\n// //                   \n// //                 </small>\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Valid Till</label>\n// //                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Image</label>\n// //                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n// //               </div>\n// //             </div>\n\n// //             <div style={styles.formGroup}>\n// //               <label style={styles.label}>Description</label>\n// //               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n// //             </div>\n\n// //             <div style={styles.formActions}>\n// //               <button style={styles.btnPrimary} disabled={loading}>\n// //                 {loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"}\n// //               </button>\n\n// //               <button\n// //                 type=\"button\"\n// //                 style={styles.btnCancel}\n// //                 onClick={() => {\n// //                   setShowForm(false);\n// //                   setEditId(null);\n// //                   setIsCopyMode(false);\n// //                   setForm({\n// //                     name: \"\",\n// //                     category: \"\",\n// //                     subcategory: \"\",\n// //                     description: \"\",\n// //                     basePrice: \"\",\n// //                     difference: \"\",\n// //                     validTill: \"\",\n// //                     file: null,\n// //                     status: \"inactive\",\n// //                   });\n// //                 }}\n// //               >\n// //                 Cancel\n// //               </button>\n// //             </div>\n// //           </form>\n// //         </div>\n// //       )}\n\n// //       {/* <div className=\"csv-topbar\" style={{ display: \"flex\", gap: 8, marginTop: 12, marginBottom: 12 }}>\n\n// //     <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\n// //         <button style={styles.btnSmall} onClick={handleImportCsv}>Import</button>\n// //         <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>Export Selected</button>\n// //       </div> */}\n// //       <div style={styles.csvBar}>\n// //   <div style={styles.csvLeft}>\n// //     <input\n// //       type=\"file\"\n// //       accept=\".csv\"\n// //       ref={csvInputRef}\n// //       onChange={handleCsvSelect}\n// //       style={styles.csvInput}\n// //     />\n// //   </div>\n\n// //   <div style={styles.csvButtons}>\n// //     <button style={styles.csvBtn} onClick={handleImportCsv}>Import</button>\n// //     <button style={styles.csvBtn} onClick={handleExportSelectedCsv}>Selected</button>\n// //     <button style={styles.csvBtnPrimary} onClick={handleExportCsv}>Export All</button>\n// //   </div>\n// // </div>\n\n// //       <div style={styles.tableCard}>\n// //         <div style={styles.tableHeader}>\n// //           <h2 style={styles.tableTitle}>Items</h2>\n// //           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\n// //         </div>\n\n// //         <div style={styles.tableWrapper}>\n// //           <table style={styles.table}>\n// //             <thead>\n// //               <tr>\n// //                 <th style={styles.th}>\n// //                   <input\n// //                     type=\"checkbox\"\n// //                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n// //                     onChange={() => {\n// //                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n// //                       else setSelectedItems(filteredItems.map((x) => x._id));\n// //                     }}\n// //                   />\n// //                 </th>\n// //                 <th style={styles.th}>Sr</th>\n// //                 <th style={styles.th}>Image</th>\n// //                 <th style={styles.th}>Name</th>\n// //                 <th style={styles.th}>Category</th>\n// //                 <th style={styles.th}>Subcategory</th>\n\n// //                 <th style={styles.th}>Base</th>\n// //                 <th style={styles.th}>YTD</th>\n// //                 <th style={styles.th}>PnL</th>\n// //                 <th style={styles.th}>Current Final</th>\n\n// //                 <th style={styles.th}>Quick PnL</th>\n// //                 <th style={styles.th}>Status</th>\n// //                 <th style={styles.th}>Valid Till</th>\n// //                 <th style={styles.th}>Actions</th>\n// //               </tr>\n// //             </thead>\n\n// //             <tbody>\n// //               {currentItems.map((item, i) => (\n// //                 <tr key={item._id} style={styles.tr}>\n// //                   <td style={styles.td}>\n// //                     <input\n// //                       type=\"checkbox\"\n// //                       checked={selectedItems.includes(item._id)}\n// //                       onChange={() =>\n// //                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n// //                       }\n// //                     />\n// //                   </td>\n\n// //                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n// //                   <td style={styles.td}>\n// //                     {item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}\n// //                   </td>\n\n// //                   <td style={styles.td}>{item.name}</td>\n// //                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\n// //                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\n\n// //                   {/* <td style={styles.td}>‚Çπ{item.basePrice}</td>\n// //                    */}\n// //                    <td style={styles.td}>\n// //   <>\n// //     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n// //       <input\n// //         type=\"number\"\n// //         placeholder=\"base\"\n// //         value={\n// //           quickBasePrices[item._id] !== undefined\n// //             ? quickBasePrices[item._id]\n// //             : item.basePrice\n// //         }\n// //         onChange={(e) =>\n// //           setQuickBasePrices((p) => ({\n// //             ...p,\n// //             [item._id]: e.target.value,\n// //           }))\n// //         }\n// //         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\n// //       />\n\n// //       <button\n// //         style={styles.btnSmall}\n// //         onClick={async () => {\n// //           const newBase = Number(\n// //             quickBasePrices[item._id] ?? item.basePrice\n// //           );\n\n// //           if (isNaN(newBase)) return alert(\"Invalid Base Price\");\n\n// //           try {\n// //             setLoading(true);\n// //             const fd = new FormData();\n// //             fd.append(\"name\", item.name);\n// //             fd.append(\"category\", item.category?._id);\n// //             fd.append(\"subcategory\", item.subcategory?._id || \"\");\n// //             fd.append(\"description\", item.description || \"\");\n// //             fd.append(\"basePrice\", newBase);\n// //             fd.append(\"validTill\", item.validTill || \"\");\n// //             fd.append(\"status\", item.status);\n\n// //             const res = await axios.put(`${API_URL}/${item._id}`, fd);\n\n// //             if (res.data.success) {\n// //   const newCurrent = newBase + Number(item.todayDiff || 0);\n\n// //   // Update UI instantly without refresh\n// //   setItems((prev) =>\n// //     prev.map((x) =>\n// //       x._id === item._id\n// //         ? {\n// //             ...x,\n// //             basePrice: newBase,\n// //             currentFinalPrice: newCurrent,\n// //             lastFinalPrice: newBase, // OPTIONAL (if you want it)\n// //           }\n// //         : x\n// //     )\n// //   );\n\n// //   setQuickBasePrices((p) => ({\n// //     ...p,\n// //     [item._id]: newBase,\n// //   }));\n// // }\n// //  else {\n// //               alert(\"Base update failed\");\n// //             }\n// //           } catch (err) {\n// //             console.error(err);\n// //             alert(\"Base update error\");\n// //           } finally {\n// //             setLoading(false);\n// //           }\n// //         }}\n// //       >\n// //         ‚úî\n// //       </button>\n// //     </div>\n\n// //     <small style={{ display: \"block\", color: \"#2b8d28ff\", marginTop: 4 }}>\n// //       Saved: ‚Çπ{item.basePrice}\n// //     </small>\n// //   </>\n// // </td>\n\n// //                   <td style={styles.td}>‚Çπ{item.lastFinalPrice ?? item.basePrice}</td>\n// //                   <td style={styles.td}>{item.todayDiff ?? 0}</td>\n// //                   <td style={styles.td}>‚Çπ{getFinalPrice(item)}</td>\n\n// //                   <td style={styles.td}>\n// //                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n// //                       <input\n// //                         type=\"number\"\n// //                         placeholder=\"diff\"\n// //                         value={quickDiffs[item._id] ?? \"\"}\n// //                         onChange={(e) => handleQuickDiffChange(item._id, e.target.value)}\n// //                         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\n// //                       />\n// //                       <button style={styles.btnSmall} onClick={() => applyQuickDiff(item._id)}>\n// //                         ‚úî\n// //                       </button>\n// //                     </div>\n// //                     <small style={{ display: \"block\", color: \"#666\" }}>\n\n// //                     </small>\n// //                   </td>\n\n// //                   <td style={styles.td}>\n// //                     <button\n// //                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\n// //                       onClick={() => handleStatusToggle(item)}\n// //                     >\n// //                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n// //                     </button>\n// //                   </td>\n\n// //                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\n\n// //                   <td style={styles.td}>\n// //                     <div style={{ position: \"relative\" }}>\n// //                       <button\n// //                         style={styles.menuButton}\n// //                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\n// //                       >\n// //                         ‚ãÆ\n// //                       </button>\n\n// //                       {activeMenu === item._id && (\n// //                         <div style={styles.dropdown}>\n// //                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\n// //                             ‚úè Edit\n// //                           </button>\n// //                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\n// //                             üìÑ Copy\n// //                           </button>\n// //                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\n// //                             üóë Delete\n// //                           </button>\n// //                         </div>\n// //                       )}\n// //                     </div>\n// //                   </td>\n// //                 </tr>\n// //               ))}\n// //             </tbody>\n// //           </table>\n// //         </div>\n\n// //         <div style={styles.pagination}>\n// //           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n// //             Previous\n// //           </button>\n\n// //           {Array.from({ length: totalPages }, (_, i) => (\n// //             <button\n// //               key={i}\n// //               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\n// //               onClick={() => setCurrentPage(i + 1)}\n// //             >\n// //               {i + 1}\n// //             </button>\n// //           ))}\n\n// //           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n// //             Next\n// //           </button>\n// //         </div>\n// //       </div>\n\n// //       {showModal && (\n// //         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\n// //           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\n// //             <h2 style={styles.modalTitle}>{isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"}</h2>\n\n// //             <form onSubmit={handleSubmit}>\n// //               <div style={styles.formGrid}>\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Product Name *</label>\n// //                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Category *</label>\n// //                   <select\n// //                     required\n// //                     name=\"category\"\n// //                     value={form.category}\n// //                     onChange={(e) => {\n// //                       handleChange(e);\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\n// //                     }}\n// //                     style={styles.select}\n// //                   >\n// //                     <option value=\"\">Select Category</option>\n// //                     {categories.map((c) => (\n// //                       <option value={c._id} key={c._id}>\n// //                         {c.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Subcategory</label>\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n// //                     <option value=\"\">Select Subcategory</option>\n// //                     {subcategories.map((s) => (\n// //                       <option value={s._id} key={s._id}>\n// //                         {s.name}\n// //                       </option>\n// //                     ))}\n// //                   </select>\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Base Price *</label>\n// //                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Today's Difference</label>\n// //                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Valid Till</label>\n// //                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n// //                 </div>\n\n// //                 <div style={styles.formGroup}>\n// //                   <label style={styles.label}>Image</label>\n// //                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n// //                 </div>\n// //               </div>\n\n// //               <div style={styles.formGroup}>\n// //                 <label style={styles.label}>Description</label>\n// //                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n// //               </div>\n\n// //               <div style={styles.formActions}>\n// //                 <button style={styles.btnPrimary} disabled={loading}>\n// //                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\n// //                 </button>\n\n// //                 <button\n// //                   type=\"button\"\n// //                   style={styles.btnCancel}\n// //                   onClick={() => {\n// //                     setShowModal(false);\n// //                     setEditId(null);\n// //                     setIsCopyMode(false);\n// //                     setForm({\n// //                       name: \"\",\n// //                       category: \"\",\n// //                       subcategory: \"\",\n// //                       description: \"\",\n// //                       basePrice: \"\",\n// //                       difference: \"\",\n// //                       validTill: \"\",\n// //                       file: null,\n// //                       status: \"inactive\",\n// //                     });\n// //                   }}\n// //                 >\n// //                   Cancel\n// //                 </button>\n// //               </div>\n// //             </form>\n// //           </div>\n// //         </div>\n// //       )}\n// //     </div>\n// //   );\n// // }\n\n// // /* ---------------------- Styles ---------------------- */\n// // /* Reused and tweaked from your original file to match look & feel */\n// // const styles = {\n// //   container: { padding: 16 },\n// //   header: { marginBottom: 8 },\n// //   title: {\n// //     fontSize: \"21px\",\n// //     fontWeight: \"700\",\n// //     color: \"#0d3b66\",\n// //     marginBottom: \"6px\",\n// //   },\n\n// // csvBar: {\n// //   display: \"flex\",\n// //   alignItems: \"center\",\n// //   justifyContent: \"space-between\",\n// //   gap: 10,\n// //   padding: \"8px\",\n// //   background: \"#f1f5fb\",\n// //   borderRadius: 10,\n// //   border: \"1px solid #d0d7e2\",\n// //   flexWrap: \"wrap\",\n// // },\n\n// // csvLeft: {\n// //   display: \"flex\",\n// //   alignItems: \"center\",\n// // },\n\n// // csvInput: {\n// //   padding: \"6px\",\n// //   fontSize: \"12px\",\n// // },\n\n// // csvButtons: {\n// //   display: \"flex\",\n// //   gap: 6,\n// //   flexWrap: \"wrap\",\n// // },\n\n// // csvBtn: {\n// //   background: \"#6c8ffc\",\n// //   color: \"#fff\",\n// //   padding: \"6px 10px\",\n// //   borderRadius: 6,\n// //   border: \"none\",\n// //   fontSize: \"12px\",\n// //   cursor: \"pointer\",\n// // },\n\n// // csvBtnPrimary: {\n// //   background: \"#3b6ef6\",\n// //   color: \"#fff\",\n// //   padding: \"6px 10px\",\n// //   borderRadius: 6,\n// //   border: \"none\",\n// //   fontSize: \"12px\",\n// //   cursor: \"pointer\",\n// // },\n\n// //   searchInput: {\n// //     width: \"320px\",\n// //     padding: \"10px 12px\",\n// //     borderRadius: \"10px\",\n// //     border: \"1px solid #ced4da\",\n// //     background: \"#f9fbfc\",\n// //     fontSize: \"14px\",\n// //     outline: \"none\",\n// //   },\n// //   addButton: {\n// //     marginLeft: 12,\n// //     background: \"#007bff\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"10px\",\n// //     padding: \"10px 14px\",\n// //     fontSize: \"14px\",\n// //     cursor: \"pointer\",\n// //   },\n// //   bulkBar: {\n// //     background: \"#e9f2ff\",\n// //     border: \"1px solid #c4d9ff\",\n// //     borderRadius: \"10px\",\n// //     padding: \"12px\",\n// //     marginBottom: \"12px\",\n// //   },\n// //   bulkPanel: {\n// //     width: \"100%\",\n// //     background: \"#f7faff\",\n// //     border: \"1px solid #cfe2ff\",\n// //     padding: \"12px\",\n// //     borderRadius: \"10px\",\n// //   },\n// //   bulkPanelTitle: {\n// //     textAlign: \"center\",\n// //     fontSize: \"16px\",\n// //     fontWeight: \"700\",\n// //     marginBottom: \"10px\",\n// //   },\n// //   bulkItemBox: {\n// //     background: \"#fff\",\n// //     border: \"1px solid #dbe5f5\",\n// //     padding: \"12px\",\n// //     borderRadius: \"8px\",\n// //     marginBottom: \"10px\",\n// //   },\n// //   bulkItemTitle: {\n// //     fontSize: \"14px\",\n// //     fontWeight: \"600\",\n// //     marginBottom: \"8px\",\n// //   },\n// //   formCard: {\n// //     borderRadius: \"12px\",\n// //     padding: \"16px\",\n// //     marginBottom: \"18px\",\n// //     background: \"#ffffff\",\n// //     border: \"1px solid #eef2f7\",\n// //   },\n// //   formTitle: { fontSize: \"18px\", fontWeight: \"700\", marginBottom: 10 },\n// //   formGrid: {\n// //     display: \"grid\",\n// //     gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\n// //     gap: \"12px\",\n// //   },\n// //   formGroup: { display: \"flex\", flexDirection: \"column\", gap: \"6px\" },\n// //   label: { fontWeight: \"600\", fontSize: \"13px\", color: \"#233142\" },\n// //   input: {\n// //     padding: \"8px\",\n// //     borderRadius: \"8px\",\n// //     border: \"1px solid #cfd6e0\",\n// //     background: \"#f8fafc\",\n// //     fontSize: \"13px\",\n// //   },\n// //   select: {\n// //     padding: \"8px\",\n// //     borderRadius: \"8px\",\n// //     border: \"1px solid #cfd6e0\",\n// //     background: \"#f8fafc\",\n// //     fontSize: \"13px\",\n// //   },\n// //   textarea: {\n// //     padding: \"8px\",\n// //     borderRadius: \"8px\",\n// //     border: \"1px solid #cfd6e0\",\n// //     background: \"#f8fafc\",\n// //     minHeight: 80,\n// //   },\n// //   fileInput: { padding: \"6px\" },\n// //   categoryRow: { display: \"flex\", gap: \"8px\", alignItems: \"center\" },\n// //   addCategoryBox: { gridColumn: \"1 / -1\", padding: 10, background: \"#f1f7ff\", borderRadius: 8 },\n// //   preview: { width: 90, height: 90, objectFit: \"cover\", borderRadius: 8 },\n// //   formActions: { marginTop: 10, display: \"flex\", gap: 8 },\n// //   btnPrimary: {\n// //     background: \"#007bff\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"8px\",\n// //     padding: \"8px 12px\",\n// //     cursor: \"pointer\",\n// //   },\n// //   btnSmall: {\n// //     background: \"#43a047\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"8px\",\n// //     padding: \"6px 10px\",\n// //     cursor: \"pointer\",\n// //   },\n// //   btnDelete: {\n// //     background: \"#e63946\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"8px\",\n// //     padding: \"8px 12px\",\n// //     cursor: \"pointer\",\n// //   },\n// //   btnCancel: {\n// //     background: \"#adb5bd\",\n// //     color: \"#fff\",\n// //     border: \"none\",\n// //     borderRadius: \"8px\",\n// //     padding: \"8px 12px\",\n// //     cursor: \"pointer\",\n// //   },\n// //   tableCard: { marginTop: 12 },\n// //   tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 8 },\n// //   tableTitle: { fontSize: \"18px\", fontWeight: \"700\" },\n// //   totalCount: { fontSize: \"13px\", color: \"#6c757d\", fontWeight: \"600\" },\n// //   tableWrapper: { overflowX: \"auto\" },\n// //   table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: \"14px\" },\n// //   th: { background: \"#e9f2ff\", padding: \"10px\", fontWeight: \"700\", color: \"#0d3b66\", textAlign: \"left\" },\n// //   tr: { borderBottom: \"1px solid #edf2f7\" },\n// //   td: { padding: \"10px\", whiteSpace: \"nowrap\", verticalAlign: \"middle\" },\n// //   tableImg: { width: \"55px\", height: \"55px\", borderRadius: \"6px\", objectFit: \"cover\" },\n// //   statusActive: { background: \"#93d8ba\", padding: \"6px 10px\", borderRadius: \"8px\", color: \"black\", fontWeight: \"600\", border: \"none\", cursor: \"pointer\" },\n// //   statusInactive: { background: \"#d9b1b1\", padding: \"6px 10px\", borderRadius: \"8px\", color: \"black\", fontWeight: \"600\", border: \"none\", cursor: \"pointer\" },\n// //   menuButton: { background: \"#f0f0f0\", border: \"none\", borderRadius: \"6px\", padding: \"6px 10px\", fontSize: \"16px\", cursor: \"pointer\" },\n// //   dropdown: { position: \"absolute\", right: 0, top: 32, background: \"#fff\", border: \"1px solid #ddd\", borderRadius: 8, zIndex: 100, minWidth: 140 },\n// //   dropdownItem: { display: \"block\", width: \"100%\", padding: \"8px 12px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 500 },\n// //   dropdownItemDelete: { display: \"block\", width: \"100%\", padding: \"8px 12px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 500, color: \"#e63946\" },\n// //   pagination: { marginTop: 12, display: \"flex\", justifyContent: \"center\", gap: 8 },\n// //   paginationBtn: { padding: \"8px 10px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #ddd\", cursor: \"pointer\" },\n// //   paginationBtnActive: { padding: \"8px 10px\", borderRadius: 8, background: \"#007bff\", color: \"white\", border: \"1px solid #0062cc\", cursor: \"pointer\" },\n// //   modalOverlay: { position: \"fixed\", top: 0, left: 0, right: 0, bottom: 0, background: \"rgba(0,0,0,0.5)\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 1000, padding: 20 },\n// //   modal: { background: \"#fff\", borderRadius: 12, padding: 20, maxWidth: 700, width: \"100%\", maxHeight: \"90vh\", overflowY: \"auto\" },\n// //   modalTitle: { fontSize: 18, fontWeight: \"700\", color: \"#0d3b66\", marginBottom: 12, textAlign: \"center\" },\n// // };\n\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// // NEW BACKEND URL\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   // FORM for Add/Edit\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     profitLoss: \"\",      // UPDATED FIELD (instead of difference)\n//     validTill: \"\",\n//     file: null,\n//     status: \"inactive\",\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [isCopyMode, setIsCopyMode] = useState(false);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const [csvFile, setCsvFile] = useState(null);\n//   const csvInputRef = useRef();\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n//   const [filterSubs, setFilterSubs] = useState([]);\n\n//   // NEW ‚Äî Quick Edit Base & ProfitLoss\n//   const [quickEdit, setQuickEdit] = useState({});\n\n//   // NORMALIZE ITEM ACCORDING TO NEW BACKEND FIELDS\n//   const normalizeItem = (item) => {\n//     return {\n//       ...item,\n//       basePrice: Number(item.basePrice ?? 0),\n//       profitLoss: Number(item.profitLoss ?? 0),\n//       salePrice: Number(item.salePrice ?? 0),\n//       lockedPrice: Number(item.lockedPrice ?? 0),\n//       yesterdayLock: Number(item.yesterdayLock ?? 0),\n//       brokerDisplay: Number(item.brokerDisplay ?? 0),\n//     };\n//   };\n\n//   // FETCH CATEGORIES\n//   useEffect(() => {\n//     fetchCategories();\n//   }, []);\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       alert(\"Categories load error\");\n//     }\n//   };\n\n//   // FETCH ITEMS\n//   useEffect(() => {\n//     if (categories.length > 0) fetchItems();\n//   }, [categories]);\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n\n//       if (res.data.success) {\n//         const data = res.data.data.map((x) => normalizeItem(x));\n//         setItems(data);\n//       }\n//     } catch (err) {\n//       alert(\"Error loading items\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // FORM INPUT CHANGE\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files?.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   // SUBMIT (ADD/EDIT)\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n\n//     if (!form.name || !form.category || !form.basePrice) {\n//       alert(\"Name, category, base price required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const fd = new FormData();\n\n//       Object.keys(form).forEach((k) => {\n//         if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\n//       });\n\n//       let res;\n\n//       if (isCopyMode) {\n//         res = await axios.post(API_URL, fd);\n//       } else if (editId) {\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\n//       } else {\n//         res = await axios.post(API_URL, fd);\n//       }\n\n//       if (res.data.success) {\n//         fetchItems();\n//         resetForm();\n//         setShowForm(false);\n//         setShowModal(false);\n//       }\n//     } catch (err) {\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const resetForm = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       subcategory: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       profitLoss: \"\",\n//       validTill: \"\",\n//       file: null,\n//       status: \"inactive\",\n//     });\n//     setEditId(null);\n//     setIsCopyMode(false);\n//   };\n\n//   // EDIT ITEM\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       subcategory: item.subcategory?._id || \"\",\n//       description: item.description,\n//       basePrice: item.basePrice,\n//       profitLoss: item.profitLoss,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//       status: item.status,\n//     });\n\n//     setEditId(item._id);\n//     setIsCopyMode(false);\n//     setShowModal(true);\n//   };\n\n//   // COPY ITEM\n//   const handleCopyToEdit = (item) => {\n//     setForm({\n//       name: item.name,\n//       category: item.category?._id || \"\",\n//       subcategory: item.subcategory?._id || \"\",\n//       description: item.description,\n//       basePrice: item.basePrice,\n//       profitLoss: item.profitLoss,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//       status: item.status,\n//     });\n\n//     setEditId(null);\n//     setIsCopyMode(true);\n//     setShowModal(true);\n//   };\n\n//   // DELETE ONE\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete item?\")) return;\n\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       fetchItems();\n//     } catch (err) {\n//       alert(\"Delete error\");\n//     }\n//   };\n\n//   // STATUS TOGGLE\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       fetchItems();\n//     } catch (err) {\n//       alert(\"Status error\");\n//     }\n//   };\n\n//   // QUICK DIFF ‚Üí update profitLoss\n\n//   // ------------------ CSV import/export ------------------\n//   const handleCsvSelect = (e) => {\n//     setCsvFile(e.target.files[0]);\n//   };\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Select CSV file\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"file\", csvFile);\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data && res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//         fetchItems();\n//       } else {\n//         alert(\"CSV import failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"CSV import error\", err);\n//       alert(\"CSV import failed\");\n//     }\n//   };\n\n//   const handleExportCsv = () => {\n//     if (!items.length) return alert(\"No items to export\");\n\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"profitLoss\",\n//       \"salePrice\",\n//       \"lockedPrice\",\n//       \"yesterdayLock\",\n//       \"brokerDisplay\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = items.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.profitLoss ?? \"\",\n//       p.salePrice ?? \"\",\n//       p.lockedPrice ?? \"\",\n//       p.yesterdayLock ?? \"\",\n//       p.brokerDisplay ?? \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray\n//         .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\n//         .join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `all_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   const handleExportSelectedCsv = () => {\n//     if (!selectedItems.length) return alert(\"Select items to export\");\n\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"profitLoss\",\n//       \"salePrice\",\n//       \"lockedPrice\",\n//       \"yesterdayLock\",\n//       \"brokerDisplay\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = selectedData.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.profitLoss ?? \"\",\n//       p.salePrice ?? \"\",\n//       p.lockedPrice ?? \"\",\n//       p.yesterdayLock ?? \"\",\n//       p.brokerDisplay ?? \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `selected_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   // ------------------ Bulk delete / save ------------------\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await axios.post(`${API_URL}/delete-selected`, { ids: selectedItems });\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n\n//     // Prepare updates from local items state\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         basePrice: Number(x.basePrice),\n//         profitLoss: Number(x.profitLoss),\n//         status: x.status,\n//         validTill: x.validTill || null,\n//         name: x.name,\n//         category: x.category?._id || \"\",\n//         subcategory: x.subcategory?._id || \"\",\n//       }));\n\n//     try {\n//       const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       if (res.data.success) {\n//         alert(\"Bulk Updated\");\n//         setBulkMode(false);\n//         setSelectedItems([]);\n//         fetchItems();\n//       } else {\n//         alert(\"Bulk update failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Bulk update error\", err);\n//       alert(\"Bulk update failed\");\n//     }\n//   };\n\n//   // ------------------ Filtering / Pagination ------------------\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     const matchText =\n//       (item.name || \"\").toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n//     const matchCategory = !filterCategory || String(item.category?._id) === String(filterCategory);\n//     const matchSub =\n//       !filterSubcategory ||\n//       String(item.subcategory?._id || \"\") === String(filterSubcategory) ||\n//       String(item.subcategory?.name || \"\").toLowerCase() ===\n//         String(filterSubs.find((s) => s._id === filterSubcategory)?.name || \"\").toLowerCase();\n\n//     return matchText && matchCategory && matchSub;\n//   });\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n//   const getFinalPrice = (item) => {\n//     // salePrice is authoritative\n//     return Number(item.salePrice ?? item.basePrice ?? 0);\n//   };\n\n//   // ------------------ Render ------------------\n//   return (\n//     <div style={styles.container}>\n//       <div style={styles.header}>\n//         <h1 style={styles.title}>Product Management</h1>\n//       </div>\n\n//       <div style={{ display: \"flex\", gap: 10, alignItems: \"center\", marginBottom: 12 }}>\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product, category or subcategory...\"\n//           value={search}\n//           onChange={(e) => {\n//             setSearch(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//           style={styles.searchInput}\n//         />\n\n//         <button\n//           style={styles.addButton}\n//           onClick={() => {\n//             setShowForm((v) => !v);\n//             resetForm();\n//             setShowModal(false);\n//           }}\n//         >\n//           {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\n//         </button>\n\n//         <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\n//           <input ref={csvInputRef} type=\"file\" accept=\".csv\" onChange={handleCsvSelect} />\n//           <button style={styles.csvBtn} onClick={handleImportCsv}>Import CSV</button>\n//           <button style={styles.csvBtn} onClick={handleExportSelectedCsv}>Export Selected</button>\n//           <button style={styles.csvBtnPrimary} onClick={handleExportCsv}>Export All</button>\n//         </div>\n//       </div>\n\n//       {selectedItems.length > 0 && (\n//         <div style={styles.bulkBar}>\n//           {!bulkMode ? (\n//             <div style={{ display: \"flex\", gap: 8 }}>\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>üóë Bulk Delete</button>\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>‚úè Bulk Edit</button>\n//             </div>\n//           ) : (\n//             <div style={styles.bulkPanel}>\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} style={styles.bulkItemBox}>\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\n//                     <div style={styles.formGrid}>\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Name</label>\n//                         <input value={item.name} onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)} style={styles.input} />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Base Price</label>\n//                         <input type=\"number\" value={item.basePrice} onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))} style={styles.input} />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Profit/Loss</label>\n//                         <input type=\"number\" value={item.profitLoss} onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))} style={styles.input} />\n//                       </div>\n\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Status</label>\n//                         <select value={item.status} onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)} style={styles.select}>\n//                           <option value=\"active\">active</option>\n//                           <option value=\"inactive\">inactive</option>\n//                         </select>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 ))}\n\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>‚úî Save All</button>\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>‚úñ Cancel</button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {showForm && (\n//         <div style={styles.formCard}>\n//           <h2 style={styles.formTitle}> Add Product</h2>\n\n//           <form onSubmit={handleSubmit}>\n//             <div style={styles.formGrid}>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Product Name *</label>\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Category *</label>\n//                 <select required name=\"category\" value={form.category} onChange={(e) => {\n//                   handleChange(e);\n//                   setForm((p) => ({ ...p, subcategory: \"\" }));\n//                 }} style={styles.select}>\n//                   <option value=\"\">Select Category</option>\n//                   {categories.map((c) => (<option value={c._id} key={c._id}>{c.name}</option>))}\n//                 </select>\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Subcategory</label>\n//                 <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (<option value={s._id} key={s._id}>{s.name}</option>))}\n//                 </select>\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Base Price *</label>\n//                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Profit / Loss</label>\n//                 <input type=\"number\" name=\"profitLoss\" value={form.profitLoss} onChange={handleChange} style={styles.input} />\n//               </div>\n\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Image</label>\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//               </div>\n//             </div>\n\n//             <div style={styles.formGroup}>\n//               <label style={styles.label}>Description</label>\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//             </div>\n\n//             <div style={styles.formActions}>\n//               <button style={styles.btnPrimary} disabled={loading}>{loading ? \"Saving...\" : editId ? (isCopyMode ? \"Save Copy\" : \"Update Product\") : \"Add Product\"}</button>\n\n//               <button type=\"button\" style={styles.btnCancel} onClick={() => { setShowForm(false); resetForm(); }}>\n//                 Cancel\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n\n//       <div style={styles.tableCard}>\n//         <div style={styles.tableHeader}>\n//           <h2 style={styles.tableTitle}>Items</h2>\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\n//         </div>\n\n//         <div style={styles.tableWrapper}>\n//           <table style={styles.table}>\n//             <thead>\n//               <tr>\n//                 <th style={styles.th}>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th style={styles.th}>Sr</th>\n//                 <th style={styles.th}>Image</th>\n//                 <th style={styles.th}>Name</th>\n//                 <th style={styles.th}>Category</th>\n//                 <th style={styles.th}>Subcategory</th>\n\n//                 <th style={styles.th}>Base</th>\n//                 <th style={styles.th}>Profit / Loss</th>\n//                 <th style={styles.th}>Sale Price</th>\n//                 <th style={styles.th}>Locked Price</th>\n\n//                 <th style={styles.th}>Tejji/Maddi</th>\n\n//                 <th style={styles.th}>Status</th>\n\n//                 <th style={styles.th}>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id} style={styles.tr}>\n//                   <td style={styles.td}>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                       }\n//                     />\n//                   </td>\n\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\n\n//                   <td style={styles.td}>{item.name}</td>\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\n//                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\n\n//                   <td style={styles.td}>\n//                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n//                       <input\n//                         type=\"number\"\n//                         value={quickEdit[item._id] !== undefined ? quickEdit[item._id] : item.basePrice}\n//                         onChange={(e) => setQuickEdit((p) => ({ ...p, [item._id]: e.target.value }))}\n//                         style={{ ...styles.input, padding: \"6px 8px\", width: 90 }}\n//                       />\n//                       <button style={styles.btnSmall} onClick={() => applyQuickBase(item)}>‚úî</button>\n//                     </div>\n//                     <small style={{ display: \"block\", color: \"#2b8d28\", marginTop: 4 }}>Saved: ‚Çπ{item.basePrice}</small>\n//                   </td>\n\n//                   <td style={styles.td}>\n//                     <input\n//                       type=\"number\"\n//                       value={item.profitLoss}\n//                       onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))}\n//                       style={{ ...styles.input, width: 90 }}\n//                     />\n\n//                   </td>\n\n//                   <td style={styles.td}>‚Çπ{getFinalPrice(item).toFixed(2)}</td>\n//                   <td style={styles.td}>‚Çπ{item.lockedPrice?.toFixed(2)}</td>\n//                   <td style={styles.td}>{item.brokerDisplay !== undefined ? item.brokerDisplay.toFixed(2) : \"0.00\"}</td>\n\n//                   <td style={styles.td}>\n//                     <button style={item.status === \"active\" ? styles.statusActive : styles.statusInactive} onClick={() => handleStatusToggle(item)}>\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td style={styles.td}>\n//                     <div style={{ display: \"flex\", gap: 6 }}>\n//                       <button style={styles.btnSmall} onClick={() => handleEdit(item)}>‚úè Edit</button>\n//                       <button style={styles.btnSmall} onClick={() => handleCopyToEdit(item)}>üìÑ Copy</button>\n//                       <button style={styles.btnDelete} onClick={() => handleDelete(item._id)}>üóë Delete</button>\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n\n//         <div style={styles.pagination}>\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>Previous</button>\n\n//           {Array.from({ length: totalPages }, (_, i) => (\n//             <button key={i} style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn} onClick={() => setCurrentPage(i + 1)}>{i + 1}</button>\n//           ))}\n\n//           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>Next</button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// /* ---------------------- Helper: updateLocalItemField ---------------------- */\n// function updateLocalItemField(id, key, value) {\n//   // This function will be hoisted to window scope if defined outside; to keep inside component,\n//   // we defined it by referencing state updater in part1. But since we are sending single-file component,\n//   // ensure this helper exists in the top of the file. If you paste both parts in same file, replace this with\n//   // the inline version used earlier:\n//   // setItems(prev => prev.map(x => x._id === id ? { ...x, [key]: value } : x));\n//   // For safety, we attach to window to fallback:\n//   if (typeof window.__updateLocal === \"function\") {\n//     window.__updateLocal(id, key, value);\n//   } else {\n//     console.warn(\"updateLocalItemField helper missing ‚Äî please ensure you paste PART 1 then PART 2 in same file so the internal updater is available.\");\n//   }\n// }\n\n// /* ---------------------- Styles ---------------------- */\n// const styles = {\n//   container: { padding: 16 },\n//   header: { marginBottom: 6 },\n//   title: { fontSize: \"21px\", fontWeight: 700, color: \"#161718\", marginBottom: 6 },\n\n//   searchInput: {\n//     width: 320,\n//     padding: \"10px 12px\",\n//     borderRadius: 10,\n//     border: \"1px solid #ced4da\",\n//     background: \"#f9fbfc\",\n//     fontSize: 14,\n//     outline: \"none\",\n//   },\n//   addButton: {\n//     marginLeft: 12,\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: 10,\n//     padding: \"10px 14px\",\n//     fontSize: 14,\n//     cursor: \"pointer\",\n//   },\n\n//   csvBtn: {\n//     background: \"#6c8ffc\",\n//     color: \"#fff\",\n//     padding: \"6px 10px\",\n//     borderRadius: 6,\n//     border: \"none\",\n//     fontSize: 12,\n//     cursor: \"pointer\",\n//   },\n\n//   csvBtnPrimary: {\n//     background: \"#3b6ef6\",\n//     color: \"#fff\",\n//     padding: \"6px 10px\",\n//     borderRadius: 6,\n//     border: \"none\",\n//     fontSize: 12,\n//     cursor: \"pointer\",\n//   },\n\n//   bulkBar: {\n//     background: \"#e9f2ff\",\n//     border: \"1px solid #c4d9ff\",\n//     borderRadius: 10,\n//     padding: 12,\n//     marginBottom: 12,\n//   },\n//   bulkPanel: {\n//     width: \"100%\",\n//     background: \"#f7faff\",\n//     border: \"1px solid #cfe2ff\",\n//     padding: 12,\n//     borderRadius: 10,\n//   },\n//   bulkPanelTitle: { textAlign: \"center\", fontSize: 16, fontWeight: 700, marginBottom: 10 },\n//   bulkItemBox: { background: \"#fff\", border: \"1px solid #dbe5f5\", padding: 12, borderRadius: 8, marginBottom: 10 },\n//   bulkItemTitle: { fontSize: 14, fontWeight: 600, marginBottom: 8 },\n\n//   formCard: { borderRadius: 12, padding: 16, marginBottom: 18, background: \"#fff\", border: \"1px solid #eef2f7\" },\n//   formTitle: { fontSize: 18, fontWeight: 700, marginBottom: 10 },\n//   formGrid: { display: \"grid\", gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\", gap: 12 },\n//   formGroup: { display: \"flex\", flexDirection: \"column\", gap: 6 },\n//   label: { fontWeight: 600, fontSize: 13, color: \"#233142\" },\n//   input: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", fontSize: 13 },\n//   select: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", fontSize: 13 },\n//   textarea: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", minHeight: 80 },\n//   fileInput: { padding: 6 },\n//   formActions: { marginTop: 10, display: \"flex\", gap: 8 },\n\n//   btnPrimary: { background: \"#007bff\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"8px 12px\", cursor: \"pointer\" },\n//   btnSmall: { background: \"#43a047\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" },\n//   btnDelete: { background: \"#e63946\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" },\n//   btnCancel: { background: \"#adb5bd\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"8px 12px\", cursor: \"pointer\" },\n\n//   tableCard: { marginTop: 12 },\n//   tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 8 },\n//   tableTitle: { fontSize: 18, fontWeight: 700 },\n//   totalCount: { fontSize: 13, color: \"#6c757d\", fontWeight: 600 },\n//   tableWrapper: { overflowX: \"auto\" },\n//   table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: 14 },\n//   th: { background: \"#e9f2ff\", padding: \"10px\", fontWeight: 700, color: \"#0d3b66\", textAlign: \"left\" },\n//   tr: { borderBottom: \"1px solid #edf2f7\" },\n//   td: { padding: \"10px\", whiteSpace: \"nowrap\", verticalAlign: \"middle\" },\n//   tableImg: { width: 55, height: 55, borderRadius: 6, objectFit: \"cover\" },\n\n//   statusActive: { background: \"#93d8ba\", padding: \"6px 10px\", borderRadius: 8, color: \"black\", fontWeight: 600, border: \"none\", cursor: \"pointer\" },\n//   statusInactive: { background: \"#d9b1b1\", padding: \"6px 10px\", borderRadius: 8, color: \"black\", fontWeight: 600, border: \"none\", cursor: \"pointer\" },\n\n//   pagination: { marginTop: 12, display: \"flex\", justifyContent: \"center\", gap: 8 },\n//   paginationBtn: { padding: \"8px 10px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #ddd\", cursor: \"pointer\" },\n//   paginationBtnActive: { padding: \"8px 10px\", borderRadius: 8, background: \"#007bff\", color: \"white\", border: \"1px solid #0062cc\", cursor: \"pointer\" },\n// };\nimport React, { useState, useEffect } from 'react';\nimport { Plus, Edit2, Trash2, Copy, Upload, Download, Search, Filter, X, Check, ChevronDown, TrendingUp, TrendingDown } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PriceManagementApp = () => {\n  _s();\n  const [prices, setPrices] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showBulkEditModal, setShowBulkEditModal] = useState(false);\n  const [editingItem, setEditingItem] = useState(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    category: '',\n    subcategory: '',\n    basePrice: '',\n    profitLoss: '',\n    description: '',\n    status: 'inactive'\n  });\n  const [bulkFormData, setBulkFormData] = useState({\n    basePrice: '',\n    profitLoss: '',\n    status: ''\n  });\n  useEffect(() => {\n    const mockCategories = [{\n      _id: '1',\n      name: 'Electronics'\n    }, {\n      _id: '2',\n      name: 'Groceries'\n    }, {\n      _id: '3',\n      name: 'Clothing'\n    }];\n    const mockPrices = [{\n      _id: '1',\n      name: 'iPhone 15 Pro',\n      category: {\n        _id: '1',\n        name: 'Electronics'\n      },\n      basePrice: 90000,\n      profitLoss: 5000,\n      salePrice: 95000,\n      lockedPrice: 94000,\n      yesterdayLock: 92000,\n      brokerDisplay: 2000,\n      status: 'active',\n      description: 'Latest iPhone model'\n    }, {\n      _id: '2',\n      name: 'Samsung Galaxy S24',\n      category: {\n        _id: '1',\n        name: 'Electronics'\n      },\n      basePrice: 75000,\n      profitLoss: 3000,\n      salePrice: 78000,\n      lockedPrice: 77000,\n      yesterdayLock: 78000,\n      brokerDisplay: -1000,\n      status: 'active',\n      description: 'Flagship Samsung phone'\n    }, {\n      _id: '3',\n      name: 'Rice (1kg)',\n      category: {\n        _id: '2',\n        name: 'Groceries'\n      },\n      basePrice: 50,\n      profitLoss: 10,\n      salePrice: 60,\n      lockedPrice: 58,\n      yesterdayLock: 55,\n      brokerDisplay: 3,\n      status: 'active',\n      description: 'Basmati rice'\n    }];\n    setCategories(mockCategories);\n    setPrices(mockPrices);\n  }, []);\n  const filteredPrices = prices.filter(p => {\n    const matchesSearch = p.name.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus = filterStatus === 'all' || p.status === filterStatus;\n    return matchesSearch && matchesStatus;\n  });\n  const toggleSelect = id => {\n    setSelectedItems(prev => prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]);\n  };\n  const selectAll = () => {\n    if (selectedItems.length === filteredPrices.length) {\n      setSelectedItems([]);\n    } else {\n      setSelectedItems(filteredPrices.map(p => p._id));\n    }\n  };\n  const handleSubmit = () => {\n    const base = Number(formData.basePrice);\n    const pl = Number(formData.profitLoss);\n    const sale = base + pl;\n    if (editingItem) {\n      setPrices(prev => prev.map(p => p._id === editingItem._id ? {\n        ...p,\n        ...formData,\n        basePrice: base,\n        profitLoss: pl,\n        salePrice: sale\n      } : p));\n      setShowEditModal(false);\n    } else {\n      const newPrice = {\n        _id: Date.now().toString(),\n        ...formData,\n        basePrice: base,\n        profitLoss: pl,\n        salePrice: sale,\n        lockedPrice: 0,\n        yesterdayLock: 0,\n        brokerDisplay: 0,\n        category: categories.find(c => c._id === formData.category)\n      };\n      setPrices(prev => [newPrice, ...prev]);\n      setShowAddModal(false);\n    }\n    resetForm();\n  };\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      category: '',\n      subcategory: '',\n      basePrice: '',\n      profitLoss: '',\n      description: '',\n      status: 'inactive'\n    });\n    setEditingItem(null);\n  };\n  const handleEdit = item => {\n    setEditingItem(item);\n    setFormData({\n      name: item.name,\n      category: item.category._id,\n      subcategory: item.subcategory || '',\n      basePrice: item.basePrice.toString(),\n      profitLoss: item.profitLoss.toString(),\n      description: item.description || '',\n      status: item.status\n    });\n    setShowEditModal(true);\n  };\n  const handleDelete = id => {\n    if (confirm('Delete this item?')) {\n      setPrices(prev => prev.filter(p => p._id !== id));\n    }\n  };\n  const handleDeleteSelected = () => {\n    if (confirm(`Delete ${selectedItems.length} items?`)) {\n      setPrices(prev => prev.filter(p => !selectedItems.includes(p._id)));\n      setSelectedItems([]);\n    }\n  };\n  const handleCopy = item => {\n    const newItem = {\n      ...item,\n      _id: Date.now().toString(),\n      name: item.name + ' (Copy)',\n      lockedPrice: 0,\n      yesterdayLock: 0,\n      brokerDisplay: 0\n    };\n    setPrices(prev => [newItem, ...prev]);\n  };\n  const handleBulkEdit = () => {\n    setShowBulkEditModal(true);\n  };\n  const applyBulkEdit = () => {\n    setPrices(prev => prev.map(p => {\n      if (!selectedItems.includes(p._id)) return p;\n      const newBase = bulkFormData.basePrice ? Number(bulkFormData.basePrice) : p.basePrice;\n      const newPL = bulkFormData.profitLoss ? Number(bulkFormData.profitLoss) : p.profitLoss;\n      return {\n        ...p,\n        basePrice: newBase,\n        profitLoss: newPL,\n        salePrice: newBase + newPL,\n        status: bulkFormData.status || p.status\n      };\n    }));\n    setSelectedItems([]);\n    setShowBulkEditModal(false);\n    setBulkFormData({\n      basePrice: '',\n      profitLoss: '',\n      status: ''\n    });\n  };\n  const exportCSV = () => {\n    const headers = ['Name', 'Category', 'Base Price', 'Profit/Loss', 'Sale Price', 'Locked Price', 'Yesterday Lock', 'Teji/Mandi', 'Status'];\n    const rows = filteredPrices.map(p => {\n      var _p$category;\n      return [p.name, ((_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category.name) || '', p.basePrice, p.profitLoss, p.salePrice, p.lockedPrice, p.yesterdayLock, p.brokerDisplay, p.status];\n    });\n    const csv = [headers, ...rows].map(row => row.join(',')).join('\\n');\n    const blob = new Blob([csv], {\n      type: 'text/csv'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'prices.csv';\n    a.click();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-sm sticky top-0 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 py-3\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold text-gray-800\",\n          children: \"Price Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2515,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2514,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2513,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 relative\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2522,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search products...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2523,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2521,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowAddModal(true),\n          className: \"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700\",\n          children: /*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2535,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2520,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 overflow-x-auto pb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setFilterStatus('all'),\n          className: `px-3 py-1.5 rounded-lg text-sm whitespace-nowrap ${filterStatus === 'all' ? 'bg-blue-600 text-white' : 'bg-white border border-gray-300'}`,\n          children: \"All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2540,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setFilterStatus('active'),\n          className: `px-3 py-1.5 rounded-lg text-sm whitespace-nowrap ${filterStatus === 'active' ? 'bg-green-600 text-white' : 'bg-white border border-gray-300'}`,\n          children: \"Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2548,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setFilterStatus('inactive'),\n          className: `px-3 py-1.5 rounded-lg text-sm whitespace-nowrap ${filterStatus === 'inactive' ? 'bg-gray-600 text-white' : 'bg-white border border-gray-300'}`,\n          children: \"Inactive\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2556,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2539,\n        columnNumber: 9\n      }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium text-blue-900\",\n          children: [selectedItems.length, \" selected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2568,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleBulkEdit,\n            className: \"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm\",\n            children: \"Bulk Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2572,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDeleteSelected,\n            className: \"px-3 py-1.5 bg-red-600 text-white rounded-lg text-sm\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2578,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2571,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2567,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportCSV,\n          className: \"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50\",\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2593,\n            columnNumber: 13\n          }, this), \"Export CSV\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2589,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2599,\n            columnNumber: 13\n          }, this), \"Import CSV\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2596,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2588,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2519,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 pb-20 space-y-3\",\n      children: filteredPrices.map(item => {\n        var _item$category;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm border border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: selectedItems.includes(item._id),\n                onChange: () => toggleSelect(item._id),\n                className: \"mt-1 w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2610,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-start justify-between mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"font-semibold text-gray-900\",\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2620,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: (_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2621,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2619,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-2 py-1 rounded text-xs font-medium ${item.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'}`,\n                    children: item.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2623,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2618,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 gap-3 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: \"Base Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2632,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium\",\n                      children: [\"\\u20B9\", item.basePrice.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2633,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2631,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: \"Profit/Loss\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2636,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: `text-sm font-medium ${item.profitLoss >= 0 ? 'text-green-600' : 'text-red-600'}`,\n                      children: [\"\\u20B9\", item.profitLoss.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2637,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2635,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: \"Sale Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2642,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium text-blue-600\",\n                      children: [\"\\u20B9\", item.salePrice.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2643,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2641,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: \"Locked Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2646,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium\",\n                      children: [\"\\u20B9\", item.lockedPrice.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2647,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2645,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2630,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `flex items-center gap-2 p-2 rounded-lg mb-3 ${item.brokerDisplay > 0 ? 'bg-green-50' : item.brokerDisplay < 0 ? 'bg-red-50' : 'bg-gray-50'}`,\n                  children: [item.brokerDisplay > 0 ? /*#__PURE__*/_jsxDEV(TrendingUp, {\n                    className: \"w-4 h-4 text-green-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2655,\n                    columnNumber: 23\n                  }, this) : item.brokerDisplay < 0 ? /*#__PURE__*/_jsxDEV(TrendingDown, {\n                    className: \"w-4 h-4 text-red-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2657,\n                    columnNumber: 23\n                  }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-600\",\n                      children: \"Teji/Mandi (vs Yesterday)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2660,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: `text-sm font-bold ${item.brokerDisplay > 0 ? 'text-green-600' : item.brokerDisplay < 0 ? 'text-red-600' : 'text-gray-600'}`,\n                      children: [item.brokerDisplay > 0 ? '+' : '', \"\\u20B9\", item.brokerDisplay.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2661,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2659,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-right\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: [\"Yesterday: \\u20B9\", item.yesterdayLock.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2668,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500\",\n                      children: [\"Today: \\u20B9\", item.lockedPrice.toLocaleString()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2669,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2667,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2651,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEdit(item),\n                    className: \"flex-1 flex items-center justify-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg text-sm hover:bg-blue-100\",\n                    children: [/*#__PURE__*/_jsxDEV(Edit2, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2678,\n                      columnNumber: 23\n                    }, this), \"Edit\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2674,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleCopy(item),\n                    className: \"flex-1 flex items-center justify-center gap-2 px-3 py-1.5 bg-gray-50 text-gray-600 rounded-lg text-sm hover:bg-gray-100\",\n                    children: [/*#__PURE__*/_jsxDEV(Copy, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2685,\n                      columnNumber: 23\n                    }, this), \"Copy\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2681,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleDelete(item._id),\n                    className: \"px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100\",\n                    children: /*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2692,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2688,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2673,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2617,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2609,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2608,\n            columnNumber: 13\n          }, this)\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2607,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2605,\n      columnNumber: 7\n    }, this), (showAddModal || showEditModal) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-t-2xl sm:rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold\",\n            children: editingItem ? 'Edit Price' : 'Add New Price'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2706,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowAddModal(false);\n              setShowEditModal(false);\n              resetForm();\n            },\n            className: \"p-2 hover:bg-gray-100 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2717,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2709,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2705,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2723,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: formData.name,\n              onChange: e => setFormData({\n                ...formData,\n                name: e.target.value\n              }),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2726,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2722,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2735,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.category,\n              onChange: e => setFormData({\n                ...formData,\n                category: e.target.value\n              }),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2743,\n                columnNumber: 19\n              }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: cat._id,\n                children: cat.name\n              }, cat._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2745,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2738,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2734,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Base Price *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2752,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: formData.basePrice,\n                onChange: e => setFormData({\n                  ...formData,\n                  basePrice: e.target.value\n                }),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2755,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2751,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Profit/Loss\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2764,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: formData.profitLoss,\n                onChange: e => setFormData({\n                  ...formData,\n                  profitLoss: e.target.value\n                }),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2767,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2763,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2750,\n            columnNumber: 15\n          }, this), formData.basePrice && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-200 rounded-lg p-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Sale Price:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2778,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl font-bold text-blue-600\",\n              children: [\"\\u20B9\", (Number(formData.basePrice) + Number(formData.profitLoss || 0)).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2779,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2777,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2786,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: formData.description,\n              onChange: e => setFormData({\n                ...formData,\n                description: e.target.value\n              }),\n              rows: 3,\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2789,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2785,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2798,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.status,\n              onChange: e => setFormData({\n                ...formData,\n                status: e.target.value\n              }),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"active\",\n                children: \"Active\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2806,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"inactive\",\n                children: \"Inactive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2807,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2801,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2797,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubmit,\n            className: \"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700\",\n            children: editingItem ? 'Update Price' : 'Add Price'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2811,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2721,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2704,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2703,\n      columnNumber: 9\n    }, this), showBulkEditModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-t-2xl sm:rounded-2xl w-full max-w-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-b border-gray-200 px-4 py-3 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold\",\n            children: [\"Bulk Edit (\", selectedItems.length, \" items)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2826,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowBulkEditModal(false),\n            className: \"p-2 hover:bg-gray-100 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2831,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2827,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2825,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Set Base Price (leave empty to keep current)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2837,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: bulkFormData.basePrice,\n              onChange: e => setBulkFormData({\n                ...bulkFormData,\n                basePrice: e.target.value\n              }),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2840,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2836,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Set Profit/Loss (leave empty to keep current)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2849,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: bulkFormData.profitLoss,\n              onChange: e => setBulkFormData({\n                ...bulkFormData,\n                profitLoss: e.target.value\n              }),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2852,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2848,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Set Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2861,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: bulkFormData.status,\n              onChange: e => setBulkFormData({\n                ...bulkFormData,\n                status: e.target.value\n              }),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Keep Current\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2869,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"active\",\n                children: \"Active\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2870,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"inactive\",\n                children: \"Inactive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2871,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2864,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2860,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: applyBulkEdit,\n            className: \"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700\",\n            children: \"Apply Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2875,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2835,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2824,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2823,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2512,\n    columnNumber: 5\n  }, this);\n};\n_s(PriceManagementApp, \"kHjMopeWGCgypgo41MvtAF5uWRM=\");\n_c = PriceManagementApp;\nexport default PriceManagementApp;\nvar _c;\n$RefreshReg$(_c, \"PriceManagementApp\");","map":{"version":3,"names":["React","useState","useEffect","Plus","Edit2","Trash2","Copy","Upload","Download","Search","Filter","X","Check","ChevronDown","TrendingUp","TrendingDown","jsxDEV","_jsxDEV","PriceManagementApp","_s","prices","setPrices","categories","setCategories","selectedItems","setSelectedItems","searchTerm","setSearchTerm","filterStatus","setFilterStatus","showAddModal","setShowAddModal","showEditModal","setShowEditModal","showBulkEditModal","setShowBulkEditModal","editingItem","setEditingItem","formData","setFormData","name","category","subcategory","basePrice","profitLoss","description","status","bulkFormData","setBulkFormData","mockCategories","_id","mockPrices","salePrice","lockedPrice","yesterdayLock","brokerDisplay","filteredPrices","filter","p","matchesSearch","toLowerCase","includes","matchesStatus","toggleSelect","id","prev","i","selectAll","length","map","handleSubmit","base","Number","pl","sale","newPrice","Date","now","toString","find","c","resetForm","handleEdit","item","handleDelete","confirm","handleDeleteSelected","handleCopy","newItem","handleBulkEdit","applyBulkEdit","newBase","newPL","exportCSV","headers","rows","_p$category","csv","row","join","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","onClick","_item$category","checked","toLocaleString","cat","_c","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\n\r\n\r\n// // import React, { useEffect, useState, useRef } from \"react\";\r\n// // import axios from \"axios\";\r\n// // import \"./PriceList.css\";\r\n\r\n// // const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// // const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// // export default function PriceList() {\r\n// //   const [items, setItems] = useState([]);\r\n// //   const [categories, setCategories] = useState([]);\r\n// //   const [subcategories, setSubcategories] = useState([]);\r\n// //   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n// //   const [search, setSearch] = useState(\"\");\r\n// //   const [loading, setLoading] = useState(false);\r\n\r\n// //   // form state for add/update\r\n// //   const [form, setForm] = useState({\r\n// //     name: \"\",\r\n// //     category: \"\",\r\n// //     subcategory: \"\",\r\n// //     description: \"\",\r\n// //     basePrice: \"\",\r\n// //     difference: \"\", // used as todayDiff when creating/updating (but backend update-diff is preferred)\r\n// //     validTill: \"\",\r\n// //     file: null,\r\n// //     status: \"inactive\",\r\n// //   });\r\n\r\n// //   const [editId, setEditId] = useState(null);\r\n// //   const [isCopyMode, setIsCopyMode] = useState(false);\r\n// //   const [showForm, setShowForm] = useState(false);\r\n// //   const [showModal, setShowModal] = useState(false);\r\n// //   const [activeMenu, setActiveMenu] = useState(null);\r\n// // const [quickBasePrices, setQuickBasePrices] = useState({});\r\n\r\n// //   const [addingCategory, setAddingCategory] = useState(false);\r\n// //   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n// //   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n// //   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n// //   const [addingSub, setAddingSub] = useState(false);\r\n// //   const [newSubName, setNewSubName] = useState(\"\");\r\n// //   const [newSubImage, setNewSubImage] = useState(null);\r\n// //   const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n// //   const [selectedItems, setSelectedItems] = useState([]);\r\n// //   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n// //   const [csvFile, setCsvFile] = useState(null);\r\n// //   const csvInputRef = useRef();\r\n\r\n// //   const [currentPage, setCurrentPage] = useState(1);\r\n// //   const itemsPerPage = 30;\r\n\r\n// //   const [filterCategory, setFilterCategory] = useState(\"\");\r\n// //   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n// //   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n// //   // local per-row quick diff input map: { [id]: number }\r\n// //   const [quickDiffs, setQuickDiffs] = useState({});\r\n\r\n// //   // fetch categories on start\r\n// //   useEffect(() => {\r\n// //     fetchCategories();\r\n// //   }, []);\r\n\r\n// //   // whenever categories change, fetch items (so we can populate category/sub names)\r\n// //   useEffect(() => {\r\n// //     if (categories.length > 0) fetchItems();\r\n// //   }, [categories]);\r\n\r\n// //   // responsive\r\n// //   useEffect(() => {\r\n// //     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n// //     window.addEventListener(\"resize\", handleResize);\r\n// //     return () => window.removeEventListener(\"resize\", handleResize);\r\n// //   }, []);\r\n\r\n// //   // when filterCategory changes update filterSubs\r\n// //   useEffect(() => {\r\n// //     if (!filterCategory) {\r\n// //       setFilterSubs([]);\r\n// //       setFilterSubcategory(\"\");\r\n// //       return;\r\n// //     }\r\n// //     const cat = categories.find((c) => c._id === filterCategory);\r\n// //     setFilterSubs(cat?.subcategories || []);\r\n// //     setFilterSubcategory(\"\");\r\n// //   }, [filterCategory, categories]);\r\n\r\n// //   // when form.category changes update subcategories for the form\r\n// //   useEffect(() => {\r\n// //     if (!form.category) {\r\n// //       setSubcategories([]);\r\n// //       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n// //       return;\r\n// //     }\r\n// //     const cat = categories.find((c) => c._id === form.category);\r\n// //     setSubcategories(cat?.subcategories || []);\r\n// //     const exists = cat?.subcategories?.some((s) => s._id === form.subcategory);\r\n// //     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n// //   }, [form.category, categories]);\r\n\r\n// //   // ------------------ API calls ------------------\r\n// //   const fetchCategories = async () => {\r\n// //     try {\r\n// //       const res = await axios.get(CATEGORY_URL);\r\n// //       if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n// //     } catch (err) {\r\n// //       console.error(\"Fetch categories error\", err);\r\n// //       alert(\"Could not fetch categories\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const fetchItems = async () => {\r\n// //     try {\r\n// //       setLoading(true);\r\n// //       const res = await axios.get(API_URL);\r\n// //       if (res.data && res.data.success) {\r\n// //         const raw = res.data.data || [];\r\n\r\n// //         // ensure fields exist\r\n// //         const enriched = raw.map((item) => {\r\n// //           // category/subcategory may be populated objects or ids\r\n// //           const catObj = categories.find(\r\n// //             (c) => c._id === item.category || c._id === (item.category?._id || item.category)\r\n// //           );\r\n// //           const subObj = catObj?.subcategories?.find(\r\n// //             (s) =>\r\n// //               s._id === item.subcategory ||\r\n// //               s._id === (item.subcategory?._id || item.subcategory)\r\n// //           );\r\n\r\n// //           return {\r\n// //             ...item,\r\n// //             // maintain compatibility: backend provides todayDiff/lastFinalPrice/currentFinalPrice\r\n// //             todayDiff: item.todayDiff ?? item.difference ?? 0,\r\n// //             lastFinalPrice: item.lastFinalPrice ?? (item.basePrice ?? 0),\r\n// //             currentFinalPrice:\r\n// //               item.currentFinalPrice ??\r\n// //               item.finalPrice ??\r\n// //               (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0)),\r\n// //             category: catObj ? { _id: catObj._id, name: catObj.name } : (item.category || null),\r\n// //             subcategory: subObj ? { _id: subObj._id, name: subObj.name } : (item.subcategory || null),\r\n// //           };\r\n// //         });\r\n\r\n// //         setItems(enriched);\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Fetch items error\", err);\r\n// //       alert(\"Could not fetch items\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // ------------------ Category/Sub creation ------------------\r\n// //   const handleCreateCategory = async () => {\r\n// //     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n// //     try {\r\n// //       const fd = new FormData();\r\n// //       fd.append(\"name\", newCategoryName.trim());\r\n// //       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n// //       const res = await axios.post(CATEGORY_URL, fd);\r\n// //       if (res.data && res.data.success) {\r\n// //         setNewCategoryName(\"\");\r\n// //         setNewCategoryImage(null);\r\n// //         setNewCategoryPreview(null);\r\n// //         setAddingCategory(false);\r\n// //         fetchCategories();\r\n// //       } else {\r\n// //         alert(\"Category creation failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Create category error\", err);\r\n// //       alert(\"Category creation failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleCreateSub = async () => {\r\n// //     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n// //     if (!form.category) return alert(\"Select category first\");\r\n\r\n// //     try {\r\n// //       const fd = new FormData();\r\n// //       fd.append(\"name\", newSubName.trim());\r\n// //       if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n// //       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n// //       if (res.data && res.data.success) {\r\n// //         setNewSubName(\"\");\r\n// //         setNewSubImage(null);\r\n// //         setNewSubPreview(null);\r\n// //         setAddingSub(false);\r\n// //         fetchCategories();\r\n// //       } else {\r\n// //         alert(\"Subcategory creation failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Create sub error\", err);\r\n// //       alert(\"Subcategory creation failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   // ------------------ Handlers (create/update/delete) ------------------\r\n// //   const handleChange = (e) => {\r\n// //     const { name, value, files } = e.target;\r\n// //     if (files && files.length) {\r\n// //       setForm((p) => ({ ...p, file: files[0] }));\r\n// //     } else {\r\n// //       setForm((p) => ({ ...p, [name]: value }));\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleSubmit = async (e) => {\r\n// //     e.preventDefault();\r\n// //     setLoading(true);\r\n\r\n// //     try {\r\n// //       if (!form.name || !form.category || !form.basePrice) {\r\n// //         alert(\"Name, category & base price are required\");\r\n// //         setLoading(false);\r\n// //         return;\r\n// //       }\r\n\r\n// //       const fd = new FormData();\r\n// //       Object.keys(form).forEach((k) => {\r\n// //         const val = form[k];\r\n// //         if (val !== undefined && val !== null) {\r\n// //           fd.append(k, val);\r\n// //         }\r\n// //       });\r\n\r\n// //       let res;\r\n// //       if (isCopyMode) {\r\n// //         // create new item from copy data\r\n// //         res = await axios.post(API_URL, fd);\r\n// //         alert(\"Copied as new item\");\r\n// //       } else if (editId) {\r\n// //         // update general fields (basePrice allowed but base is expected to be fixed by your requirements; be careful)\r\n// //         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n// //         alert(\"Updated\");\r\n// //       } else {\r\n// //         // add new\r\n// //         res = await axios.post(API_URL, fd);\r\n// //         alert(\"Added\");\r\n// //       }\r\n\r\n// //       await fetchItems();\r\n// //       await fetchCategories();\r\n\r\n// //       setForm({\r\n// //         name: \"\",\r\n// //         category: \"\",\r\n// //         subcategory: \"\",\r\n// //         description: \"\",\r\n// //         basePrice: \"\",\r\n// //         difference: \"\",\r\n// //         validTill: \"\",\r\n// //         file: null,\r\n// //         status: \"inactive\",\r\n// //       });\r\n// //       setEditId(null);\r\n// //       setIsCopyMode(false);\r\n// //       setShowModal(false);\r\n// //       setShowForm(false);\r\n// //     } catch (err) {\r\n// //       console.error(\"Save error\", err);\r\n// //       alert(\"Save failed\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleEdit = (item) => {\r\n// //     setForm({\r\n// //       name: item.name || \"\",\r\n// //       category: item.category?._id?.toString() || \"\",\r\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\r\n// //       description: item.description || \"\",\r\n// //       basePrice: item.basePrice ?? \"\",\r\n// //       difference: item.todayDiff ?? 0,\r\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n// //       file: null,\r\n// //       status: item.status || \"inactive\",\r\n// //     });\r\n\r\n// //     const cat = categories.find((c) => c._id === item.category?._id);\r\n// //     setSubcategories(cat?.subcategories || []);\r\n\r\n// //     setEditId(item._id);\r\n// //     setIsCopyMode(false);\r\n// //     setShowModal(true);\r\n// //     setActiveMenu(null);\r\n// //   };\r\n\r\n// //   const handleCopyToEdit = (item) => {\r\n// //     setForm({\r\n// //       name: item.name || \"\",\r\n// //       category: item.category?._id?.toString() || \"\",\r\n// //       subcategory: item.subcategory?._id?.toString() || \"\",\r\n// //       description: item.description || \"\",\r\n// //       basePrice: item.basePrice ?? \"\",\r\n// //       difference: item.todayDiff ?? 0,\r\n// //       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n// //       file: null,\r\n// //       status: item.status || \"inactive\",\r\n// //     });\r\n\r\n// //     const cat = categories.find((c) => c._id === item.category?._id);\r\n// //     setSubcategories(cat?.subcategories || []);\r\n\r\n// //     setEditId(null);\r\n// //     setIsCopyMode(true);\r\n// //     setShowModal(true);\r\n// //     setActiveMenu(null);\r\n// //   };\r\n\r\n// //   const handleDelete = async (id) => {\r\n// //     if (!window.confirm(\"Delete item?\")) return;\r\n// //     try {\r\n// //       await axios.delete(`${API_URL}/${id}`);\r\n// //       setItems((prev) => prev.filter((x) => x._id !== id));\r\n// //       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n// //       setActiveMenu(null);\r\n// //     } catch (err) {\r\n// //       console.error(\"Delete error\", err);\r\n// //       alert(\"Delete failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleStatusToggle = async (item) => {\r\n// //     try {\r\n// //       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n// //       const res = await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n// //       if (res.data && res.data.success) {\r\n// //         // update local\r\n// //         setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n// //       } else {\r\n// //         alert(\"Status update failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Status toggle error\", err);\r\n// //       alert(\"Status update failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleBulkDelete = async () => {\r\n// //     if (!selectedItems.length) return alert(\"No items selected\");\r\n// //     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n// //     try {\r\n// //       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n// //       setSelectedItems([]);\r\n// //       fetchItems();\r\n// //       setBulkMode(false);\r\n// //     } catch (err) {\r\n// //       console.error(\"Bulk delete error\", err);\r\n// //       alert(\"Bulk delete failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const updateLocalItemField = (id, key, value) => {\r\n// //     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n// //   };\r\n\r\n// //   const handleBulkSave = async () => {\r\n// //     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n// //     const updates = items\r\n// //       .filter((x) => selectedItems.includes(x._id))\r\n// //       .map((x) => ({\r\n// //         id: x._id,\r\n// //         name: x.name,\r\n// //         basePrice: Number(x.basePrice),\r\n// //         difference: Number(x.todayDiff || 0), // backend bulk expects difference key\r\n// //         validTill: x.validTill,\r\n// //         status: x.status,\r\n// //       }));\r\n\r\n// //     try {\r\n// //       const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n// //       if (res.data && res.data.success) {\r\n// //         setBulkMode(false);\r\n// //         setSelectedItems([]);\r\n// //         fetchItems();\r\n// //       } else {\r\n// //         alert(\"Bulk save failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Bulk save error\", err);\r\n// //       alert(\"Bulk save failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   // ------------------ CSV import/export ------------------\r\n// //   const handleCsvSelect = (e) => {\r\n// //     setCsvFile(e.target.files[0]);\r\n// //   };\r\n\r\n// //   const handleImportCsv = async () => {\r\n// //     if (!csvFile) return alert(\"Select CSV file\");\r\n// //     try {\r\n// //       const fd = new FormData();\r\n// //       fd.append(\"file\", csvFile);\r\n// //       const res = await axios.post(`${API_URL}/import`, fd);\r\n// //       if (res.data && res.data.success) {\r\n// //         alert(`Imported ${res.data.inserted || 0} items`);\r\n// //         setCsvFile(null);\r\n// //         if (csvInputRef.current) csvInputRef.current.value = null;\r\n// //         fetchItems();\r\n// //       } else {\r\n// //         alert(\"CSV import failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"CSV import error\", err);\r\n// //       alert(\"CSV import failed\");\r\n// //     }\r\n// //   };\r\n\r\n// //   const handleExportCsv = () => {\r\n// //     if (!items.length) return alert(\"No items to export\");\r\n\r\n// //     const header = [\r\n// //       \"id\",\r\n// //       \"name\",\r\n// //       \"categoryName\",\r\n// //       \"subcategoryName\",\r\n// //       \"basePrice\",\r\n// //       \"todayDiff\",\r\n// //       \"lastFinalPrice\",\r\n// //       \"currentFinalPrice\",\r\n// //       \"status\",\r\n// //       \"validTill\",\r\n// //       \"description\",\r\n// //       \"imageUrl\",\r\n// //     ];\r\n\r\n// //     const rows = items.map((p) => [\r\n// //       p._id,\r\n// //       p.name || \"\",\r\n// //       p.category?.name || \"\",\r\n// //       p.subcategory?.name || \"\",\r\n// //       p.basePrice ?? \"\",\r\n// //       p.todayDiff ?? \"\",\r\n// //       p.lastFinalPrice ?? \"\",\r\n// //       p.currentFinalPrice ?? \"\",\r\n// //       p.status || \"\",\r\n// //       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n// //       p.description || \"\",\r\n// //       p.image || \"\",\r\n// //     ]);\r\n\r\n// //     const csvArray = [header, ...rows];\r\n// //     const csvContent =\r\n// //       \"data:text/csv;charset=utf-8,\" +\r\n// //       csvArray\r\n// //         .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n// //         .join(\"\\n\");\r\n\r\n// //     const encodedUri = encodeURI(csvContent);\r\n// //     const link = document.createElement(\"a\");\r\n// //     link.href = encodedUri;\r\n// //     link.download = `all_prices_${Date.now()}.csv`;\r\n// //     link.click();\r\n// //   };\r\n\r\n// //   const handleExportSelectedCsv = () => {\r\n// //     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n// //     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n// //     const header = [\r\n// //       \"id\",\r\n// //       \"name\",\r\n// //       \"categoryName\",\r\n// //       \"subcategoryName\",\r\n// //       \"basePrice\",\r\n// //       \"todayDiff\",\r\n// //       \"lastFinalPrice\",\r\n// //       \"currentFinalPrice\",\r\n// //       \"status\",\r\n// //       \"validTill\",\r\n// //       \"description\",\r\n// //       \"imageUrl\",\r\n// //     ];\r\n\r\n// //     const rows = selectedData.map((p) => [\r\n// //       p._id,\r\n// //       p.name || \"\",\r\n// //       p.category?.name || \"\",\r\n// //       p.subcategory?.name || \"\",\r\n// //       p.basePrice ?? \"\",\r\n// //       p.todayDiff ?? \"\",\r\n// //       p.lastFinalPrice ?? \"\",\r\n// //       p.currentFinalPrice ?? \"\",\r\n// //       p.status || \"\",\r\n// //       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n// //       p.description || \"\",\r\n// //       p.image || \"\",\r\n// //     ]);\r\n\r\n// //     const csvArray = [header, ...rows];\r\n// //     const csvContent =\r\n// //       \"data:text/csv;charset=utf-8,\" +\r\n// //       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n// //     const encodedUri = encodeURI(csvContent);\r\n// //     const link = document.createElement(\"a\");\r\n// //     link.href = encodedUri;\r\n// //     link.download = `selected_prices_${Date.now()}.csv`;\r\n// //     link.click();\r\n// //   };\r\n\r\n// //   // ------------------ Filtering/Pagination ------------------\r\n// //   const filteredItems = items.filter((item) => {\r\n// //     const t = search.toLowerCase();\r\n\r\n// //     const matchText =\r\n// //       (item.name || \"\").toLowerCase().includes(t) ||\r\n// //       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n// //       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n// //     const matchCategory = !filterCategory || item.category?._id === filterCategory;\r\n// //     const matchSub = !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n// //     return matchText && matchCategory && matchSub;\r\n// //   });\r\n\r\n// //   const indexOfLast = currentPage * itemsPerPage;\r\n// //   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n// //   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n// //   // ------------------ Final price helper ------------------\r\n// //   const getFinalPrice = (item) => {\r\n// //     // trust backend: currentFinalPrice computed server-side\r\n// //     return item.currentFinalPrice ?? (Number(item.lastFinalPrice ?? item.basePrice ?? 0) + Number(item.todayDiff ?? 0));\r\n// //   };\r\n\r\n// //   // ------------------ QUICK DIFF (per-row) ------------------\r\n// //   const handleQuickDiffChange = (id, value) => {\r\n// //     setQuickDiffs((p) => ({ ...p, [id]: value }));\r\n// //   };\r\n\r\n// //   const applyQuickDiff = async (id) => {\r\n// //     const diff = Number(quickDiffs[id] ?? 0);\r\n// //     try {\r\n// //       setLoading(true);\r\n// //       const res = await axios.put(`${API_URL}/updateDiff/${id}`, { diff });\r\n// //       if (res.data && res.data.success) {\r\n// //         await fetchItems();\r\n// //         setQuickDiffs((p) => ({ ...p, [id]: undefined }));\r\n// //       } else {\r\n// //         alert(\"Diff update failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"update-diff error\", err);\r\n// //       alert(\"Diff update failed\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // ------------------ ROUTINE UI ------------------\r\n// //   return (\r\n// //     <div style={styles.container}>\r\n// //       <div style={styles.header}>\r\n// //         <h1 style={styles.title}>Product Management</h1>\r\n// //       </div>\r\n\r\n// //       <div className=\"mobile-topbar\" style={{ marginBottom: 12 }}>\r\n// //         <input\r\n// //           type=\"text\"\r\n// //           placeholder=\"Search product, category or subcategory...\"\r\n// //           value={search}\r\n// //           onChange={(e) => {\r\n// //             setSearch(e.target.value);\r\n// //             setCurrentPage(1);\r\n// //           }}\r\n// //           style={styles.searchInput}\r\n// //         />\r\n\r\n// //         <button\r\n// //           style={styles.addButton}\r\n// //           onClick={() => {\r\n// //             setShowForm(!showForm);\r\n// //             setEditId(null);\r\n// //             setIsCopyMode(false);\r\n// //           }}\r\n// //         >\r\n// //           {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\r\n// //         </button>\r\n// //       </div>\r\n\r\n// //       <div className=\"filter-bar\" style={{ display: \"flex\", gap: 10, marginBottom: 12 }}>\r\n// //         <select value={filterCategory} onChange={(e) => setFilterCategory(e.target.value)} className=\"filter-select\" style={styles.select}>\r\n// //           <option value=\"\">Filter by Category</option>\r\n// //           {categories.map((c) => (\r\n// //             <option key={c._id} value={c._id}>\r\n// //               {c.name}\r\n// //             </option>\r\n// //           ))}\r\n// //         </select>\r\n\r\n// //         <select\r\n// //           value={filterSubcategory}\r\n// //           onChange={(e) => setFilterSubcategory(e.target.value)}\r\n// //           className=\"filter-select\"\r\n// //           disabled={!filterSubs.length}\r\n// //           style={styles.select}\r\n// //         >\r\n// //           <option value=\"\">Filter by Subcategory</option>\r\n// //           {filterSubs.map((s) => (\r\n// //             <option key={s._id} value={s._id}>\r\n// //               {s.name}\r\n// //             </option>\r\n// //           ))}\r\n// //         </select>\r\n\r\n// //         <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n         \r\n// //           <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n// //             Export All\r\n// //           </button>\r\n// //         </div>\r\n// //       </div>\r\n\r\n// //       {selectedItems.length > 0 && (\r\n// //         <div className=\"bulk-bar\" style={styles.bulkBar}>\r\n// //           {!bulkMode ? (\r\n// //             <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 8 }}>\r\n// //               <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n// //                 üóë Bulk Delete\r\n// //               </button>\r\n\r\n// //               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n// //                 ‚úè Bulk Edit\r\n// //               </button>\r\n// //             </div>\r\n// //           ) : (\r\n// //             <div style={styles.bulkPanel}>\r\n// //               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n// //               {items\r\n// //                 .filter((item) => selectedItems.includes(item._id))\r\n// //                 .map((item) => (\r\n// //                   <div key={item._id} style={styles.bulkItemBox}>\r\n// //                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n// //                     <div style={styles.formGrid}>\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Name</label>\r\n// //                         <input\r\n// //                           type=\"text\"\r\n// //                           value={item.name}\r\n// //                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n// //                           style={styles.input}\r\n// //                         />\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Base Price</label>\r\n// //                         <input\r\n// //                           type=\"number\"\r\n// //                           value={item.basePrice}\r\n// //                           onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))}\r\n// //                           style={styles.input}\r\n// //                         />\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Today's Difference</label>\r\n// //                         <input\r\n// //                           type=\"number\"\r\n// //                           value={item.todayDiff || 0}\r\n// //                           onChange={(e) => updateLocalItemField(item._id, \"todayDiff\", Number(e.target.value))}\r\n// //                           style={styles.input}\r\n// //                         />\r\n// //                       </div>\r\n\r\n// //                       <div style={styles.formGroup}>\r\n// //                         <label style={styles.label}>Status</label>\r\n// //                         <select\r\n// //                           value={item.status}\r\n// //                           onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)}\r\n// //                           style={styles.select}\r\n// //                         >\r\n// //                           <option value=\"active\">active</option>\r\n// //                           <option value=\"inactive\">inactive</option>\r\n// //                         </select>\r\n// //                       </div>\r\n// //                     </div>\r\n// //                   </div>\r\n// //                 ))}\r\n\r\n// //               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n// //                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n// //                   ‚úî Save All\r\n// //                 </button>\r\n// //                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n// //                   ‚úñ Cancel\r\n// //                 </button>\r\n// //               </div>\r\n// //             </div>\r\n// //           )}\r\n// //         </div>\r\n// //       )}\r\n\r\n// //       {showForm && (\r\n// //         <div style={styles.formCard}>\r\n// //           <h2 style={styles.formTitle}>‚ûï Add / Edit Product</h2>\r\n\r\n// //           <form onSubmit={handleSubmit}>\r\n// //             <div style={styles.formGrid}>\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Product Name *</label>\r\n// //                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Category *</label>\r\n// //                 <div style={styles.categoryRow}>\r\n// //                   <select\r\n// //                     required\r\n// //                     name=\"category\"\r\n// //                     value={form.category}\r\n// //                     onChange={(e) => {\r\n// //                       handleChange(e);\r\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n// //                     }}\r\n// //                     style={styles.select}\r\n// //                   >\r\n// //                     <option value=\"\">Select Category</option>\r\n// //                     {categories.map((c) => (\r\n// //                       <option value={c._id} key={c._id}>\r\n// //                         {c.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n\r\n// //                   <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\r\n// //                     {addingCategory ? \"Close\" : \"Add\"}\r\n// //                   </button>\r\n// //                 </div>\r\n// //               </div>\r\n\r\n// //               {addingCategory && (\r\n// //                 <div style={styles.addCategoryBox}>\r\n// //                   <label style={styles.label}>Add New Category</label>\r\n// //                   <div style={styles.categoryRow}>\r\n// //                     <input\r\n// //                       value={newCategoryName}\r\n// //                       onChange={(e) => setNewCategoryName(e.target.value)}\r\n// //                       placeholder=\"Category name\"\r\n// //                       style={styles.input}\r\n// //                     />\r\n// //                     <input\r\n// //                       type=\"file\"\r\n// //                       accept=\"image/*\"\r\n// //                       onChange={(e) => {\r\n// //                         setNewCategoryImage(e.target.files[0]);\r\n// //                         setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n// //                       }}\r\n// //                       style={styles.fileInput}\r\n// //                     />\r\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\r\n// //                       Create\r\n// //                     </button>\r\n// //                   </div>\r\n// //                   {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\r\n// //                 </div>\r\n// //               )}\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Subcategory</label>\r\n// //                 <div style={styles.categoryRow}>\r\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n// //                     <option value=\"\">Select Subcategory</option>\r\n// //                     {subcategories.map((s) => (\r\n// //                       <option value={s._id} key={s._id}>\r\n// //                         {s.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n\r\n// //                   {form.category && (\r\n// //                     <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\r\n// //                       {addingSub ? \"Close\" : \"Add\"}\r\n// //                     </button>\r\n// //                   )}\r\n// //                 </div>\r\n// //               </div>\r\n\r\n// //               {addingSub && (\r\n// //                 <div style={styles.addCategoryBox}>\r\n// //                   <label style={styles.label}>Add New Subcategory</label>\r\n// //                   <div style={styles.categoryRow}>\r\n// //                     <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\r\n// //                     <input\r\n// //                       type=\"file\"\r\n// //                       accept=\"image/*\"\r\n// //                       onChange={(e) => {\r\n// //                         setNewSubImage(e.target.files[0]);\r\n// //                         setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n// //                       }}\r\n// //                       style={styles.fileInput}\r\n// //                     />\r\n// //                     <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\r\n// //                       Create\r\n// //                     </button>\r\n// //                   </div>\r\n// //                   {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\r\n// //                 </div>\r\n// //               )}\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Base Price *</label>\r\n// //                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n// //                 <small style={{ color: \"#666\" }}>\r\n// //                   Base is considered fixed logic-wise. Changing it here will update the stored basePrice.\r\n// //                 </small>\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Today's Difference (optional)</label>\r\n// //                 <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n// //                 <small style={{ color: \"#666\" }}>\r\n// //                   \r\n// //                 </small>\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Valid Till</label>\r\n// //                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Image</label>\r\n// //                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n// //               </div>\r\n// //             </div>\r\n\r\n// //             <div style={styles.formGroup}>\r\n// //               <label style={styles.label}>Description</label>\r\n// //               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n// //             </div>\r\n\r\n// //             <div style={styles.formActions}>\r\n// //               <button style={styles.btnPrimary} disabled={loading}>\r\n// //                 {loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"}\r\n// //               </button>\r\n\r\n// //               <button\r\n// //                 type=\"button\"\r\n// //                 style={styles.btnCancel}\r\n// //                 onClick={() => {\r\n// //                   setShowForm(false);\r\n// //                   setEditId(null);\r\n// //                   setIsCopyMode(false);\r\n// //                   setForm({\r\n// //                     name: \"\",\r\n// //                     category: \"\",\r\n// //                     subcategory: \"\",\r\n// //                     description: \"\",\r\n// //                     basePrice: \"\",\r\n// //                     difference: \"\",\r\n// //                     validTill: \"\",\r\n// //                     file: null,\r\n// //                     status: \"inactive\",\r\n// //                   });\r\n// //                 }}\r\n// //               >\r\n// //                 Cancel\r\n// //               </button>\r\n// //             </div>\r\n// //           </form>\r\n// //         </div>\r\n// //       )}\r\n\r\n// //       {/* <div className=\"csv-topbar\" style={{ display: \"flex\", gap: 8, marginTop: 12, marginBottom: 12 }}>\r\n     \r\n// //     <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\r\n// //         <button style={styles.btnSmall} onClick={handleImportCsv}>Import</button>\r\n// //         <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>Export Selected</button>\r\n// //       </div> */}\r\n// //       <div style={styles.csvBar}>\r\n// //   <div style={styles.csvLeft}>\r\n// //     <input\r\n// //       type=\"file\"\r\n// //       accept=\".csv\"\r\n// //       ref={csvInputRef}\r\n// //       onChange={handleCsvSelect}\r\n// //       style={styles.csvInput}\r\n// //     />\r\n// //   </div>\r\n\r\n// //   <div style={styles.csvButtons}>\r\n// //     <button style={styles.csvBtn} onClick={handleImportCsv}>Import</button>\r\n// //     <button style={styles.csvBtn} onClick={handleExportSelectedCsv}>Selected</button>\r\n// //     <button style={styles.csvBtnPrimary} onClick={handleExportCsv}>Export All</button>\r\n// //   </div>\r\n// // </div>\r\n\r\n\r\n// //       <div style={styles.tableCard}>\r\n// //         <div style={styles.tableHeader}>\r\n// //           <h2 style={styles.tableTitle}>Items</h2>\r\n// //           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n// //         </div>\r\n\r\n// //         <div style={styles.tableWrapper}>\r\n// //           <table style={styles.table}>\r\n// //             <thead>\r\n// //               <tr>\r\n// //                 <th style={styles.th}>\r\n// //                   <input\r\n// //                     type=\"checkbox\"\r\n// //                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n// //                     onChange={() => {\r\n// //                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n// //                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n// //                     }}\r\n// //                   />\r\n// //                 </th>\r\n// //                 <th style={styles.th}>Sr</th>\r\n// //                 <th style={styles.th}>Image</th>\r\n// //                 <th style={styles.th}>Name</th>\r\n// //                 <th style={styles.th}>Category</th>\r\n// //                 <th style={styles.th}>Subcategory</th>\r\n\r\n// //                 <th style={styles.th}>Base</th>\r\n// //                 <th style={styles.th}>YTD</th>\r\n// //                 <th style={styles.th}>PnL</th>\r\n// //                 <th style={styles.th}>Current Final</th>\r\n\r\n// //                 <th style={styles.th}>Quick PnL</th>\r\n// //                 <th style={styles.th}>Status</th>\r\n// //                 <th style={styles.th}>Valid Till</th>\r\n// //                 <th style={styles.th}>Actions</th>\r\n// //               </tr>\r\n// //             </thead>\r\n\r\n// //             <tbody>\r\n// //               {currentItems.map((item, i) => (\r\n// //                 <tr key={item._id} style={styles.tr}>\r\n// //                   <td style={styles.td}>\r\n// //                     <input\r\n// //                       type=\"checkbox\"\r\n// //                       checked={selectedItems.includes(item._id)}\r\n// //                       onChange={() =>\r\n// //                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n// //                       }\r\n// //                     />\r\n// //                   </td>\r\n\r\n// //                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n// //                   <td style={styles.td}>\r\n// //                     {item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}\r\n// //                   </td>\r\n\r\n// //                   <td style={styles.td}>{item.name}</td>\r\n// //                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n// //                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n// //                   {/* <td style={styles.td}>‚Çπ{item.basePrice}</td>\r\n// //                    */}\r\n// //                    <td style={styles.td}>\r\n// //   <>\r\n// //     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n// //       <input\r\n// //         type=\"number\"\r\n// //         placeholder=\"base\"\r\n// //         value={\r\n// //           quickBasePrices[item._id] !== undefined\r\n// //             ? quickBasePrices[item._id]\r\n// //             : item.basePrice\r\n// //         }\r\n// //         onChange={(e) =>\r\n// //           setQuickBasePrices((p) => ({\r\n// //             ...p,\r\n// //             [item._id]: e.target.value,\r\n// //           }))\r\n// //         }\r\n// //         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n// //       />\r\n\r\n// //       <button\r\n// //         style={styles.btnSmall}\r\n// //         onClick={async () => {\r\n// //           const newBase = Number(\r\n// //             quickBasePrices[item._id] ?? item.basePrice\r\n// //           );\r\n\r\n// //           if (isNaN(newBase)) return alert(\"Invalid Base Price\");\r\n\r\n// //           try {\r\n// //             setLoading(true);\r\n// //             const fd = new FormData();\r\n// //             fd.append(\"name\", item.name);\r\n// //             fd.append(\"category\", item.category?._id);\r\n// //             fd.append(\"subcategory\", item.subcategory?._id || \"\");\r\n// //             fd.append(\"description\", item.description || \"\");\r\n// //             fd.append(\"basePrice\", newBase);\r\n// //             fd.append(\"validTill\", item.validTill || \"\");\r\n// //             fd.append(\"status\", item.status);\r\n\r\n// //             const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n\r\n// //             if (res.data.success) {\r\n// //   const newCurrent = newBase + Number(item.todayDiff || 0);\r\n\r\n// //   // Update UI instantly without refresh\r\n// //   setItems((prev) =>\r\n// //     prev.map((x) =>\r\n// //       x._id === item._id\r\n// //         ? {\r\n// //             ...x,\r\n// //             basePrice: newBase,\r\n// //             currentFinalPrice: newCurrent,\r\n// //             lastFinalPrice: newBase, // OPTIONAL (if you want it)\r\n// //           }\r\n// //         : x\r\n// //     )\r\n// //   );\r\n\r\n// //   setQuickBasePrices((p) => ({\r\n// //     ...p,\r\n// //     [item._id]: newBase,\r\n// //   }));\r\n// // }\r\n// //  else {\r\n// //               alert(\"Base update failed\");\r\n// //             }\r\n// //           } catch (err) {\r\n// //             console.error(err);\r\n// //             alert(\"Base update error\");\r\n// //           } finally {\r\n// //             setLoading(false);\r\n// //           }\r\n// //         }}\r\n// //       >\r\n// //         ‚úî\r\n// //       </button>\r\n// //     </div>\r\n\r\n// //     <small style={{ display: \"block\", color: \"#2b8d28ff\", marginTop: 4 }}>\r\n// //       Saved: ‚Çπ{item.basePrice}\r\n// //     </small>\r\n// //   </>\r\n// // </td>\r\n\r\n// //                   <td style={styles.td}>‚Çπ{item.lastFinalPrice ?? item.basePrice}</td>\r\n// //                   <td style={styles.td}>{item.todayDiff ?? 0}</td>\r\n// //                   <td style={styles.td}>‚Çπ{getFinalPrice(item)}</td>\r\n\r\n// //                   <td style={styles.td}>\r\n// //                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n// //                       <input\r\n// //                         type=\"number\"\r\n// //                         placeholder=\"diff\"\r\n// //                         value={quickDiffs[item._id] ?? \"\"}\r\n// //                         onChange={(e) => handleQuickDiffChange(item._id, e.target.value)}\r\n// //                         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n// //                       />\r\n// //                       <button style={styles.btnSmall} onClick={() => applyQuickDiff(item._id)}>\r\n// //                         ‚úî\r\n// //                       </button>\r\n// //                     </div>\r\n// //                     <small style={{ display: \"block\", color: \"#666\" }}>\r\n                      \r\n// //                     </small>\r\n// //                   </td>\r\n\r\n// //                   <td style={styles.td}>\r\n// //                     <button\r\n// //                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n// //                       onClick={() => handleStatusToggle(item)}\r\n// //                     >\r\n// //                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n// //                     </button>\r\n// //                   </td>\r\n\r\n// //                   <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n// //                   <td style={styles.td}>\r\n// //                     <div style={{ position: \"relative\" }}>\r\n// //                       <button\r\n// //                         style={styles.menuButton}\r\n// //                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n// //                       >\r\n// //                         ‚ãÆ\r\n// //                       </button>\r\n\r\n// //                       {activeMenu === item._id && (\r\n// //                         <div style={styles.dropdown}>\r\n// //                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n// //                             ‚úè Edit\r\n// //                           </button>\r\n// //                           <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\r\n// //                             üìÑ Copy\r\n// //                           </button>\r\n// //                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n// //                             üóë Delete\r\n// //                           </button>\r\n// //                         </div>\r\n// //                       )}\r\n// //                     </div>\r\n// //                   </td>\r\n// //                 </tr>\r\n// //               ))}\r\n// //             </tbody>\r\n// //           </table>\r\n// //         </div>\r\n\r\n// //         <div style={styles.pagination}>\r\n// //           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n// //             Previous\r\n// //           </button>\r\n\r\n// //           {Array.from({ length: totalPages }, (_, i) => (\r\n// //             <button\r\n// //               key={i}\r\n// //               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n// //               onClick={() => setCurrentPage(i + 1)}\r\n// //             >\r\n// //               {i + 1}\r\n// //             </button>\r\n// //           ))}\r\n\r\n// //           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n// //             Next\r\n// //           </button>\r\n// //         </div>\r\n// //       </div>\r\n\r\n// //       {showModal && (\r\n// //         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n// //           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n// //             <h2 style={styles.modalTitle}>{isCopyMode ? \"üìÑ Copy Product\" : \"‚úè Edit Product\"}</h2>\r\n\r\n// //             <form onSubmit={handleSubmit}>\r\n// //               <div style={styles.formGrid}>\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Product Name *</label>\r\n// //                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Category *</label>\r\n// //                   <select\r\n// //                     required\r\n// //                     name=\"category\"\r\n// //                     value={form.category}\r\n// //                     onChange={(e) => {\r\n// //                       handleChange(e);\r\n// //                       setForm((p) => ({ ...p, subcategory: \"\" }));\r\n// //                     }}\r\n// //                     style={styles.select}\r\n// //                   >\r\n// //                     <option value=\"\">Select Category</option>\r\n// //                     {categories.map((c) => (\r\n// //                       <option value={c._id} key={c._id}>\r\n// //                         {c.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Subcategory</label>\r\n// //                   <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n// //                     <option value=\"\">Select Subcategory</option>\r\n// //                     {subcategories.map((s) => (\r\n// //                       <option value={s._id} key={s._id}>\r\n// //                         {s.name}\r\n// //                       </option>\r\n// //                     ))}\r\n// //                   </select>\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Base Price *</label>\r\n// //                   <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Today's Difference</label>\r\n// //                   <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Valid Till</label>\r\n// //                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n// //                 </div>\r\n\r\n// //                 <div style={styles.formGroup}>\r\n// //                   <label style={styles.label}>Image</label>\r\n// //                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n// //                 </div>\r\n// //               </div>\r\n\r\n// //               <div style={styles.formGroup}>\r\n// //                 <label style={styles.label}>Description</label>\r\n// //                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n// //               </div>\r\n\r\n// //               <div style={styles.formActions}>\r\n// //                 <button style={styles.btnPrimary} disabled={loading}>\r\n// //                   {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\r\n// //                 </button>\r\n\r\n// //                 <button\r\n// //                   type=\"button\"\r\n// //                   style={styles.btnCancel}\r\n// //                   onClick={() => {\r\n// //                     setShowModal(false);\r\n// //                     setEditId(null);\r\n// //                     setIsCopyMode(false);\r\n// //                     setForm({\r\n// //                       name: \"\",\r\n// //                       category: \"\",\r\n// //                       subcategory: \"\",\r\n// //                       description: \"\",\r\n// //                       basePrice: \"\",\r\n// //                       difference: \"\",\r\n// //                       validTill: \"\",\r\n// //                       file: null,\r\n// //                       status: \"inactive\",\r\n// //                     });\r\n// //                   }}\r\n// //                 >\r\n// //                   Cancel\r\n// //                 </button>\r\n// //               </div>\r\n// //             </form>\r\n// //           </div>\r\n// //         </div>\r\n// //       )}\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ---------------------- Styles ---------------------- */\r\n// // /* Reused and tweaked from your original file to match look & feel */\r\n// // const styles = {\r\n// //   container: { padding: 16 },\r\n// //   header: { marginBottom: 8 },\r\n// //   title: {\r\n// //     fontSize: \"21px\",\r\n// //     fontWeight: \"700\",\r\n// //     color: \"#0d3b66\",\r\n// //     marginBottom: \"6px\",\r\n// //   },\r\n\r\n// // csvBar: {\r\n// //   display: \"flex\",\r\n// //   alignItems: \"center\",\r\n// //   justifyContent: \"space-between\",\r\n// //   gap: 10,\r\n// //   padding: \"8px\",\r\n// //   background: \"#f1f5fb\",\r\n// //   borderRadius: 10,\r\n// //   border: \"1px solid #d0d7e2\",\r\n// //   flexWrap: \"wrap\",\r\n// // },\r\n\r\n// // csvLeft: {\r\n// //   display: \"flex\",\r\n// //   alignItems: \"center\",\r\n// // },\r\n\r\n// // csvInput: {\r\n// //   padding: \"6px\",\r\n// //   fontSize: \"12px\",\r\n// // },\r\n\r\n// // csvButtons: {\r\n// //   display: \"flex\",\r\n// //   gap: 6,\r\n// //   flexWrap: \"wrap\",\r\n// // },\r\n\r\n// // csvBtn: {\r\n// //   background: \"#6c8ffc\",\r\n// //   color: \"#fff\",\r\n// //   padding: \"6px 10px\",\r\n// //   borderRadius: 6,\r\n// //   border: \"none\",\r\n// //   fontSize: \"12px\",\r\n// //   cursor: \"pointer\",\r\n// // },\r\n\r\n// // csvBtnPrimary: {\r\n// //   background: \"#3b6ef6\",\r\n// //   color: \"#fff\",\r\n// //   padding: \"6px 10px\",\r\n// //   borderRadius: 6,\r\n// //   border: \"none\",\r\n// //   fontSize: \"12px\",\r\n// //   cursor: \"pointer\",\r\n// // },\r\n\r\n\r\n\r\n// //   searchInput: {\r\n// //     width: \"320px\",\r\n// //     padding: \"10px 12px\",\r\n// //     borderRadius: \"10px\",\r\n// //     border: \"1px solid #ced4da\",\r\n// //     background: \"#f9fbfc\",\r\n// //     fontSize: \"14px\",\r\n// //     outline: \"none\",\r\n// //   },\r\n// //   addButton: {\r\n// //     marginLeft: 12,\r\n// //     background: \"#007bff\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"10px\",\r\n// //     padding: \"10px 14px\",\r\n// //     fontSize: \"14px\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   bulkBar: {\r\n// //     background: \"#e9f2ff\",\r\n// //     border: \"1px solid #c4d9ff\",\r\n// //     borderRadius: \"10px\",\r\n// //     padding: \"12px\",\r\n// //     marginBottom: \"12px\",\r\n// //   },\r\n// //   bulkPanel: {\r\n// //     width: \"100%\",\r\n// //     background: \"#f7faff\",\r\n// //     border: \"1px solid #cfe2ff\",\r\n// //     padding: \"12px\",\r\n// //     borderRadius: \"10px\",\r\n// //   },\r\n// //   bulkPanelTitle: {\r\n// //     textAlign: \"center\",\r\n// //     fontSize: \"16px\",\r\n// //     fontWeight: \"700\",\r\n// //     marginBottom: \"10px\",\r\n// //   },\r\n// //   bulkItemBox: {\r\n// //     background: \"#fff\",\r\n// //     border: \"1px solid #dbe5f5\",\r\n// //     padding: \"12px\",\r\n// //     borderRadius: \"8px\",\r\n// //     marginBottom: \"10px\",\r\n// //   },\r\n// //   bulkItemTitle: {\r\n// //     fontSize: \"14px\",\r\n// //     fontWeight: \"600\",\r\n// //     marginBottom: \"8px\",\r\n// //   },\r\n// //   formCard: {\r\n// //     borderRadius: \"12px\",\r\n// //     padding: \"16px\",\r\n// //     marginBottom: \"18px\",\r\n// //     background: \"#ffffff\",\r\n// //     border: \"1px solid #eef2f7\",\r\n// //   },\r\n// //   formTitle: { fontSize: \"18px\", fontWeight: \"700\", marginBottom: 10 },\r\n// //   formGrid: {\r\n// //     display: \"grid\",\r\n// //     gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n// //     gap: \"12px\",\r\n// //   },\r\n// //   formGroup: { display: \"flex\", flexDirection: \"column\", gap: \"6px\" },\r\n// //   label: { fontWeight: \"600\", fontSize: \"13px\", color: \"#233142\" },\r\n// //   input: {\r\n// //     padding: \"8px\",\r\n// //     borderRadius: \"8px\",\r\n// //     border: \"1px solid #cfd6e0\",\r\n// //     background: \"#f8fafc\",\r\n// //     fontSize: \"13px\",\r\n// //   },\r\n// //   select: {\r\n// //     padding: \"8px\",\r\n// //     borderRadius: \"8px\",\r\n// //     border: \"1px solid #cfd6e0\",\r\n// //     background: \"#f8fafc\",\r\n// //     fontSize: \"13px\",\r\n// //   },\r\n// //   textarea: {\r\n// //     padding: \"8px\",\r\n// //     borderRadius: \"8px\",\r\n// //     border: \"1px solid #cfd6e0\",\r\n// //     background: \"#f8fafc\",\r\n// //     minHeight: 80,\r\n// //   },\r\n// //   fileInput: { padding: \"6px\" },\r\n// //   categoryRow: { display: \"flex\", gap: \"8px\", alignItems: \"center\" },\r\n// //   addCategoryBox: { gridColumn: \"1 / -1\", padding: 10, background: \"#f1f7ff\", borderRadius: 8 },\r\n// //   preview: { width: 90, height: 90, objectFit: \"cover\", borderRadius: 8 },\r\n// //   formActions: { marginTop: 10, display: \"flex\", gap: 8 },\r\n// //   btnPrimary: {\r\n// //     background: \"#007bff\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"8px\",\r\n// //     padding: \"8px 12px\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   btnSmall: {\r\n// //     background: \"#43a047\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"8px\",\r\n// //     padding: \"6px 10px\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   btnDelete: {\r\n// //     background: \"#e63946\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"8px\",\r\n// //     padding: \"8px 12px\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   btnCancel: {\r\n// //     background: \"#adb5bd\",\r\n// //     color: \"#fff\",\r\n// //     border: \"none\",\r\n// //     borderRadius: \"8px\",\r\n// //     padding: \"8px 12px\",\r\n// //     cursor: \"pointer\",\r\n// //   },\r\n// //   tableCard: { marginTop: 12 },\r\n// //   tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 8 },\r\n// //   tableTitle: { fontSize: \"18px\", fontWeight: \"700\" },\r\n// //   totalCount: { fontSize: \"13px\", color: \"#6c757d\", fontWeight: \"600\" },\r\n// //   tableWrapper: { overflowX: \"auto\" },\r\n// //   table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: \"14px\" },\r\n// //   th: { background: \"#e9f2ff\", padding: \"10px\", fontWeight: \"700\", color: \"#0d3b66\", textAlign: \"left\" },\r\n// //   tr: { borderBottom: \"1px solid #edf2f7\" },\r\n// //   td: { padding: \"10px\", whiteSpace: \"nowrap\", verticalAlign: \"middle\" },\r\n// //   tableImg: { width: \"55px\", height: \"55px\", borderRadius: \"6px\", objectFit: \"cover\" },\r\n// //   statusActive: { background: \"#93d8ba\", padding: \"6px 10px\", borderRadius: \"8px\", color: \"black\", fontWeight: \"600\", border: \"none\", cursor: \"pointer\" },\r\n// //   statusInactive: { background: \"#d9b1b1\", padding: \"6px 10px\", borderRadius: \"8px\", color: \"black\", fontWeight: \"600\", border: \"none\", cursor: \"pointer\" },\r\n// //   menuButton: { background: \"#f0f0f0\", border: \"none\", borderRadius: \"6px\", padding: \"6px 10px\", fontSize: \"16px\", cursor: \"pointer\" },\r\n// //   dropdown: { position: \"absolute\", right: 0, top: 32, background: \"#fff\", border: \"1px solid #ddd\", borderRadius: 8, zIndex: 100, minWidth: 140 },\r\n// //   dropdownItem: { display: \"block\", width: \"100%\", padding: \"8px 12px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 500 },\r\n// //   dropdownItemDelete: { display: \"block\", width: \"100%\", padding: \"8px 12px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 500, color: \"#e63946\" },\r\n// //   pagination: { marginTop: 12, display: \"flex\", justifyContent: \"center\", gap: 8 },\r\n// //   paginationBtn: { padding: \"8px 10px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #ddd\", cursor: \"pointer\" },\r\n// //   paginationBtnActive: { padding: \"8px 10px\", borderRadius: 8, background: \"#007bff\", color: \"white\", border: \"1px solid #0062cc\", cursor: \"pointer\" },\r\n// //   modalOverlay: { position: \"fixed\", top: 0, left: 0, right: 0, bottom: 0, background: \"rgba(0,0,0,0.5)\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 1000, padding: 20 },\r\n// //   modal: { background: \"#fff\", borderRadius: 12, padding: 20, maxWidth: 700, width: \"100%\", maxHeight: \"90vh\", overflowY: \"auto\" },\r\n// //   modalTitle: { fontSize: 18, fontWeight: \"700\", color: \"#0d3b66\", marginBottom: 12, textAlign: \"center\" },\r\n// // };\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// // NEW BACKEND URL\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // FORM for Add/Edit\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     profitLoss: \"\",      // UPDATED FIELD (instead of difference)\r\n//     validTill: \"\",\r\n//     file: null,\r\n//     status: \"inactive\",\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [isCopyMode, setIsCopyMode] = useState(false);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const csvInputRef = useRef();\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n//   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n//   // NEW ‚Äî Quick Edit Base & ProfitLoss\r\n//   const [quickEdit, setQuickEdit] = useState({});\r\n\r\n//   // NORMALIZE ITEM ACCORDING TO NEW BACKEND FIELDS\r\n//   const normalizeItem = (item) => {\r\n//     return {\r\n//       ...item,\r\n//       basePrice: Number(item.basePrice ?? 0),\r\n//       profitLoss: Number(item.profitLoss ?? 0),\r\n//       salePrice: Number(item.salePrice ?? 0),\r\n//       lockedPrice: Number(item.lockedPrice ?? 0),\r\n//       yesterdayLock: Number(item.yesterdayLock ?? 0),\r\n//       brokerDisplay: Number(item.brokerDisplay ?? 0),\r\n//     };\r\n//   };\r\n\r\n//   // FETCH CATEGORIES\r\n//   useEffect(() => {\r\n//     fetchCategories();\r\n//   }, []);\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       alert(\"Categories load error\");\r\n//     }\r\n//   };\r\n\r\n//   // FETCH ITEMS\r\n//   useEffect(() => {\r\n//     if (categories.length > 0) fetchItems();\r\n//   }, [categories]);\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n\r\n//       if (res.data.success) {\r\n//         const data = res.data.data.map((x) => normalizeItem(x));\r\n//         setItems(data);\r\n//       }\r\n//     } catch (err) {\r\n//       alert(\"Error loading items\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // FORM INPUT CHANGE\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files?.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   // SUBMIT (ADD/EDIT)\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n\r\n//     if (!form.name || !form.category || !form.basePrice) {\r\n//       alert(\"Name, category, base price required\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const fd = new FormData();\r\n\r\n//       Object.keys(form).forEach((k) => {\r\n//         if (form[k] !== \"\" && form[k] !== null) fd.append(k, form[k]);\r\n//       });\r\n\r\n//       let res;\r\n\r\n//       if (isCopyMode) {\r\n//         res = await axios.post(API_URL, fd);\r\n//       } else if (editId) {\r\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n//       } else {\r\n//         res = await axios.post(API_URL, fd);\r\n//       }\r\n\r\n//       if (res.data.success) {\r\n//         fetchItems();\r\n//         resetForm();\r\n//         setShowForm(false);\r\n//         setShowModal(false);\r\n//       }\r\n//     } catch (err) {\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const resetForm = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       subcategory: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       profitLoss: \"\",\r\n//       validTill: \"\",\r\n//       file: null,\r\n//       status: \"inactive\",\r\n//     });\r\n//     setEditId(null);\r\n//     setIsCopyMode(false);\r\n//   };\r\n\r\n//   // EDIT ITEM\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       subcategory: item.subcategory?._id || \"\",\r\n//       description: item.description,\r\n//       basePrice: item.basePrice,\r\n//       profitLoss: item.profitLoss,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//       status: item.status,\r\n//     });\r\n\r\n//     setEditId(item._id);\r\n//     setIsCopyMode(false);\r\n//     setShowModal(true);\r\n//   };\r\n\r\n//   // COPY ITEM\r\n//   const handleCopyToEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name,\r\n//       category: item.category?._id || \"\",\r\n//       subcategory: item.subcategory?._id || \"\",\r\n//       description: item.description,\r\n//       basePrice: item.basePrice,\r\n//       profitLoss: item.profitLoss,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//       status: item.status,\r\n//     });\r\n\r\n//     setEditId(null);\r\n//     setIsCopyMode(true);\r\n//     setShowModal(true);\r\n//   };\r\n\r\n//   // DELETE ONE\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete item?\")) return;\r\n\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       alert(\"Delete error\");\r\n//     }\r\n//   };\r\n\r\n//   // STATUS TOGGLE\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       alert(\"Status error\");\r\n//     }\r\n//   };\r\n\r\n//   // QUICK DIFF ‚Üí update profitLoss\r\n  \r\n//   // ------------------ CSV import/export ------------------\r\n//   const handleCsvSelect = (e) => {\r\n//     setCsvFile(e.target.files[0]);\r\n//   };\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Select CSV file\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"file\", csvFile);\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//         fetchItems();\r\n//       } else {\r\n//         alert(\"CSV import failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"CSV import error\", err);\r\n//       alert(\"CSV import failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleExportCsv = () => {\r\n//     if (!items.length) return alert(\"No items to export\");\r\n\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"profitLoss\",\r\n//       \"salePrice\",\r\n//       \"lockedPrice\",\r\n//       \"yesterdayLock\",\r\n//       \"brokerDisplay\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = items.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.profitLoss ?? \"\",\r\n//       p.salePrice ?? \"\",\r\n//       p.lockedPrice ?? \"\",\r\n//       p.yesterdayLock ?? \"\",\r\n//       p.brokerDisplay ?? \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray\r\n//         .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n//         .join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `all_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   const handleExportSelectedCsv = () => {\r\n//     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"profitLoss\",\r\n//       \"salePrice\",\r\n//       \"lockedPrice\",\r\n//       \"yesterdayLock\",\r\n//       \"brokerDisplay\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = selectedData.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.profitLoss ?? \"\",\r\n//       p.salePrice ?? \"\",\r\n//       p.lockedPrice ?? \"\",\r\n//       p.yesterdayLock ?? \"\",\r\n//       p.brokerDisplay ?? \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `selected_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   // ------------------ Bulk delete / save ------------------\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/delete-selected`, { ids: selectedItems });\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n//     // Prepare updates from local items state\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         basePrice: Number(x.basePrice),\r\n//         profitLoss: Number(x.profitLoss),\r\n//         status: x.status,\r\n//         validTill: x.validTill || null,\r\n//         name: x.name,\r\n//         category: x.category?._id || \"\",\r\n//         subcategory: x.subcategory?._id || \"\",\r\n//       }));\r\n\r\n//     try {\r\n//       const res = await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       if (res.data.success) {\r\n//         alert(\"Bulk Updated\");\r\n//         setBulkMode(false);\r\n//         setSelectedItems([]);\r\n//         fetchItems();\r\n//       } else {\r\n//         alert(\"Bulk update failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Bulk update error\", err);\r\n//       alert(\"Bulk update failed\");\r\n//     }\r\n//   };\r\n\r\n//   // ------------------ Filtering / Pagination ------------------\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     const matchText =\r\n//       (item.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//     const matchCategory = !filterCategory || String(item.category?._id) === String(filterCategory);\r\n//     const matchSub =\r\n//       !filterSubcategory ||\r\n//       String(item.subcategory?._id || \"\") === String(filterSubcategory) ||\r\n//       String(item.subcategory?.name || \"\").toLowerCase() ===\r\n//         String(filterSubs.find((s) => s._id === filterSubcategory)?.name || \"\").toLowerCase();\r\n\r\n//     return matchText && matchCategory && matchSub;\r\n//   });\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n//   const getFinalPrice = (item) => {\r\n//     // salePrice is authoritative\r\n//     return Number(item.salePrice ?? item.basePrice ?? 0);\r\n//   };\r\n\r\n//   // ------------------ Render ------------------\r\n//   return (\r\n//     <div style={styles.container}>\r\n//       <div style={styles.header}>\r\n//         <h1 style={styles.title}>Product Management</h1>\r\n//       </div>\r\n\r\n//       <div style={{ display: \"flex\", gap: 10, alignItems: \"center\", marginBottom: 12 }}>\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product, category or subcategory...\"\r\n//           value={search}\r\n//           onChange={(e) => {\r\n//             setSearch(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//           style={styles.searchInput}\r\n//         />\r\n\r\n//         <button\r\n//           style={styles.addButton}\r\n//           onClick={() => {\r\n//             setShowForm((v) => !v);\r\n//             resetForm();\r\n//             setShowModal(false);\r\n//           }}\r\n//         >\r\n//           {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\r\n//         </button>\r\n\r\n//         <div style={{ marginLeft: \"auto\", display: \"flex\", gap: 8 }}>\r\n//           <input ref={csvInputRef} type=\"file\" accept=\".csv\" onChange={handleCsvSelect} />\r\n//           <button style={styles.csvBtn} onClick={handleImportCsv}>Import CSV</button>\r\n//           <button style={styles.csvBtn} onClick={handleExportSelectedCsv}>Export Selected</button>\r\n//           <button style={styles.csvBtnPrimary} onClick={handleExportCsv}>Export All</button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {selectedItems.length > 0 && (\r\n//         <div style={styles.bulkBar}>\r\n//           {!bulkMode ? (\r\n//             <div style={{ display: \"flex\", gap: 8 }}>\r\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>üóë Bulk Delete</button>\r\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>‚úè Bulk Edit</button>\r\n//             </div>\r\n//           ) : (\r\n//             <div style={styles.bulkPanel}>\r\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} style={styles.bulkItemBox}>\r\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n//                     <div style={styles.formGrid}>\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Name</label>\r\n//                         <input value={item.name} onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)} style={styles.input} />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Base Price</label>\r\n//                         <input type=\"number\" value={item.basePrice} onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))} style={styles.input} />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Profit/Loss</label>\r\n//                         <input type=\"number\" value={item.profitLoss} onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))} style={styles.input} />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Status</label>\r\n//                         <select value={item.status} onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)} style={styles.select}>\r\n//                           <option value=\"active\">active</option>\r\n//                           <option value=\"inactive\">inactive</option>\r\n//                         </select>\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>‚úî Save All</button>\r\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>‚úñ Cancel</button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {showForm && (\r\n//         <div style={styles.formCard}>\r\n//           <h2 style={styles.formTitle}> Add Product</h2>\r\n\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div style={styles.formGrid}>\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Product Name *</label>\r\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Category *</label>\r\n//                 <select required name=\"category\" value={form.category} onChange={(e) => {\r\n//                   handleChange(e);\r\n//                   setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                 }} style={styles.select}>\r\n//                   <option value=\"\">Select Category</option>\r\n//                   {categories.map((c) => (<option value={c._id} key={c._id}>{c.name}</option>))}\r\n//                 </select>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Subcategory</label>\r\n//                 <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (<option value={s._id} key={s._id}>{s.name}</option>))}\r\n//                 </select>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Base Price *</label>\r\n//                 <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Profit / Loss</label>\r\n//                 <input type=\"number\" name=\"profitLoss\" value={form.profitLoss} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n              \r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Image</label>\r\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//               </div>\r\n//             </div>\r\n\r\n//             <div style={styles.formGroup}>\r\n//               <label style={styles.label}>Description</label>\r\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//             </div>\r\n\r\n//             <div style={styles.formActions}>\r\n//               <button style={styles.btnPrimary} disabled={loading}>{loading ? \"Saving...\" : editId ? (isCopyMode ? \"Save Copy\" : \"Update Product\") : \"Add Product\"}</button>\r\n\r\n//               <button type=\"button\" style={styles.btnCancel} onClick={() => { setShowForm(false); resetForm(); }}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n\r\n//       <div style={styles.tableCard}>\r\n//         <div style={styles.tableHeader}>\r\n//           <h2 style={styles.tableTitle}>Items</h2>\r\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         <div style={styles.tableWrapper}>\r\n//           <table style={styles.table}>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th style={styles.th}>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th style={styles.th}>Sr</th>\r\n//                 <th style={styles.th}>Image</th>\r\n//                 <th style={styles.th}>Name</th>\r\n//                 <th style={styles.th}>Category</th>\r\n//                 <th style={styles.th}>Subcategory</th>\r\n\r\n//                 <th style={styles.th}>Base</th>\r\n//                 <th style={styles.th}>Profit / Loss</th>\r\n//                 <th style={styles.th}>Sale Price</th>\r\n//                 <th style={styles.th}>Locked Price</th>\r\n                \r\n//                 <th style={styles.th}>Tejji/Maddi</th>\r\n\r\n                \r\n//                 <th style={styles.th}>Status</th>\r\n                \r\n//                 <th style={styles.th}>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id} style={styles.tr}>\r\n//                   <td style={styles.td}>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n//                   <td style={styles.td}>{item.name}</td>\r\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n//                   <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         value={quickEdit[item._id] !== undefined ? quickEdit[item._id] : item.basePrice}\r\n//                         onChange={(e) => setQuickEdit((p) => ({ ...p, [item._id]: e.target.value }))}\r\n//                         style={{ ...styles.input, padding: \"6px 8px\", width: 90 }}\r\n//                       />\r\n//                       <button style={styles.btnSmall} onClick={() => applyQuickBase(item)}>‚úî</button>\r\n//                     </div>\r\n//                     <small style={{ display: \"block\", color: \"#2b8d28\", marginTop: 4 }}>Saved: ‚Çπ{item.basePrice}</small>\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>\r\n//                     <input\r\n//                       type=\"number\"\r\n//                       value={item.profitLoss}\r\n//                       onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))}\r\n//                       style={{ ...styles.input, width: 90 }}\r\n//                     />\r\n                    \r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>‚Çπ{getFinalPrice(item).toFixed(2)}</td>\r\n//                   <td style={styles.td}>‚Çπ{item.lockedPrice?.toFixed(2)}</td>\r\n//                   <td style={styles.td}>{item.brokerDisplay !== undefined ? item.brokerDisplay.toFixed(2) : \"0.00\"}</td>\r\n\r\n                \r\n\r\n//                   <td style={styles.td}>\r\n//                     <button style={item.status === \"active\" ? styles.statusActive : styles.statusInactive} onClick={() => handleStatusToggle(item)}>\r\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n                \r\n\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ display: \"flex\", gap: 6 }}>\r\n//                       <button style={styles.btnSmall} onClick={() => handleEdit(item)}>‚úè Edit</button>\r\n//                       <button style={styles.btnSmall} onClick={() => handleCopyToEdit(item)}>üìÑ Copy</button>\r\n//                       <button style={styles.btnDelete} onClick={() => handleDelete(item._id)}>üóë Delete</button>\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         <div style={styles.pagination}>\r\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>Previous</button>\r\n\r\n//           {Array.from({ length: totalPages }, (_, i) => (\r\n//             <button key={i} style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn} onClick={() => setCurrentPage(i + 1)}>{i + 1}</button>\r\n//           ))}\r\n\r\n//           <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>Next</button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ---------------------- Helper: updateLocalItemField ---------------------- */\r\n// function updateLocalItemField(id, key, value) {\r\n//   // This function will be hoisted to window scope if defined outside; to keep inside component,\r\n//   // we defined it by referencing state updater in part1. But since we are sending single-file component,\r\n//   // ensure this helper exists in the top of the file. If you paste both parts in same file, replace this with\r\n//   // the inline version used earlier:\r\n//   // setItems(prev => prev.map(x => x._id === id ? { ...x, [key]: value } : x));\r\n//   // For safety, we attach to window to fallback:\r\n//   if (typeof window.__updateLocal === \"function\") {\r\n//     window.__updateLocal(id, key, value);\r\n//   } else {\r\n//     console.warn(\"updateLocalItemField helper missing ‚Äî please ensure you paste PART 1 then PART 2 in same file so the internal updater is available.\");\r\n//   }\r\n// }\r\n\r\n// /* ---------------------- Styles ---------------------- */\r\n// const styles = {\r\n//   container: { padding: 16 },\r\n//   header: { marginBottom: 6 },\r\n//   title: { fontSize: \"21px\", fontWeight: 700, color: \"#161718\", marginBottom: 6 },\r\n\r\n//   searchInput: {\r\n//     width: 320,\r\n//     padding: \"10px 12px\",\r\n//     borderRadius: 10,\r\n//     border: \"1px solid #ced4da\",\r\n//     background: \"#f9fbfc\",\r\n//     fontSize: 14,\r\n//     outline: \"none\",\r\n//   },\r\n//   addButton: {\r\n//     marginLeft: 12,\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: 10,\r\n//     padding: \"10px 14px\",\r\n//     fontSize: 14,\r\n//     cursor: \"pointer\",\r\n//   },\r\n\r\n//   csvBtn: {\r\n//     background: \"#6c8ffc\",\r\n//     color: \"#fff\",\r\n//     padding: \"6px 10px\",\r\n//     borderRadius: 6,\r\n//     border: \"none\",\r\n//     fontSize: 12,\r\n//     cursor: \"pointer\",\r\n//   },\r\n\r\n//   csvBtnPrimary: {\r\n//     background: \"#3b6ef6\",\r\n//     color: \"#fff\",\r\n//     padding: \"6px 10px\",\r\n//     borderRadius: 6,\r\n//     border: \"none\",\r\n//     fontSize: 12,\r\n//     cursor: \"pointer\",\r\n//   },\r\n\r\n//   bulkBar: {\r\n//     background: \"#e9f2ff\",\r\n//     border: \"1px solid #c4d9ff\",\r\n//     borderRadius: 10,\r\n//     padding: 12,\r\n//     marginBottom: 12,\r\n//   },\r\n//   bulkPanel: {\r\n//     width: \"100%\",\r\n//     background: \"#f7faff\",\r\n//     border: \"1px solid #cfe2ff\",\r\n//     padding: 12,\r\n//     borderRadius: 10,\r\n//   },\r\n//   bulkPanelTitle: { textAlign: \"center\", fontSize: 16, fontWeight: 700, marginBottom: 10 },\r\n//   bulkItemBox: { background: \"#fff\", border: \"1px solid #dbe5f5\", padding: 12, borderRadius: 8, marginBottom: 10 },\r\n//   bulkItemTitle: { fontSize: 14, fontWeight: 600, marginBottom: 8 },\r\n\r\n//   formCard: { borderRadius: 12, padding: 16, marginBottom: 18, background: \"#fff\", border: \"1px solid #eef2f7\" },\r\n//   formTitle: { fontSize: 18, fontWeight: 700, marginBottom: 10 },\r\n//   formGrid: { display: \"grid\", gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\", gap: 12 },\r\n//   formGroup: { display: \"flex\", flexDirection: \"column\", gap: 6 },\r\n//   label: { fontWeight: 600, fontSize: 13, color: \"#233142\" },\r\n//   input: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", fontSize: 13 },\r\n//   select: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", fontSize: 13 },\r\n//   textarea: { padding: 8, borderRadius: 8, border: \"1px solid #cfd6e0\", background: \"#f8fafc\", minHeight: 80 },\r\n//   fileInput: { padding: 6 },\r\n//   formActions: { marginTop: 10, display: \"flex\", gap: 8 },\r\n\r\n//   btnPrimary: { background: \"#007bff\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"8px 12px\", cursor: \"pointer\" },\r\n//   btnSmall: { background: \"#43a047\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" },\r\n//   btnDelete: { background: \"#e63946\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" },\r\n//   btnCancel: { background: \"#adb5bd\", color: \"#fff\", border: \"none\", borderRadius: 8, padding: \"8px 12px\", cursor: \"pointer\" },\r\n\r\n//   tableCard: { marginTop: 12 },\r\n//   tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 8 },\r\n//   tableTitle: { fontSize: 18, fontWeight: 700 },\r\n//   totalCount: { fontSize: 13, color: \"#6c757d\", fontWeight: 600 },\r\n//   tableWrapper: { overflowX: \"auto\" },\r\n//   table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: 14 },\r\n//   th: { background: \"#e9f2ff\", padding: \"10px\", fontWeight: 700, color: \"#0d3b66\", textAlign: \"left\" },\r\n//   tr: { borderBottom: \"1px solid #edf2f7\" },\r\n//   td: { padding: \"10px\", whiteSpace: \"nowrap\", verticalAlign: \"middle\" },\r\n//   tableImg: { width: 55, height: 55, borderRadius: 6, objectFit: \"cover\" },\r\n\r\n//   statusActive: { background: \"#93d8ba\", padding: \"6px 10px\", borderRadius: 8, color: \"black\", fontWeight: 600, border: \"none\", cursor: \"pointer\" },\r\n//   statusInactive: { background: \"#d9b1b1\", padding: \"6px 10px\", borderRadius: 8, color: \"black\", fontWeight: 600, border: \"none\", cursor: \"pointer\" },\r\n\r\n//   pagination: { marginTop: 12, display: \"flex\", justifyContent: \"center\", gap: 8 },\r\n//   paginationBtn: { padding: \"8px 10px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #ddd\", cursor: \"pointer\" },\r\n//   paginationBtnActive: { padding: \"8px 10px\", borderRadius: 8, background: \"#007bff\", color: \"white\", border: \"1px solid #0062cc\", cursor: \"pointer\" },\r\n// };\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Plus, Edit2, Trash2, Copy, Upload, Download, Search, Filter, X, Check, ChevronDown, TrendingUp, TrendingDown } from 'lucide-react';\r\n\r\nconst PriceManagementApp = () => {\r\n  const [prices, setPrices] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [showBulkEditModal, setShowBulkEditModal] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    category: '',\r\n    subcategory: '',\r\n    basePrice: '',\r\n    profitLoss: '',\r\n    description: '',\r\n    status: 'inactive'\r\n  });\r\n\r\n  const [bulkFormData, setBulkFormData] = useState({\r\n    basePrice: '',\r\n    profitLoss: '',\r\n    status: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    const mockCategories = [\r\n      { _id: '1', name: 'Electronics' },\r\n      { _id: '2', name: 'Groceries' },\r\n      { _id: '3', name: 'Clothing' }\r\n    ];\r\n\r\n    const mockPrices = [\r\n      {\r\n        _id: '1',\r\n        name: 'iPhone 15 Pro',\r\n        category: { _id: '1', name: 'Electronics' },\r\n        basePrice: 90000,\r\n        profitLoss: 5000,\r\n        salePrice: 95000,\r\n        lockedPrice: 94000,\r\n        yesterdayLock: 92000,\r\n        brokerDisplay: 2000,\r\n        status: 'active',\r\n        description: 'Latest iPhone model'\r\n      },\r\n      {\r\n        _id: '2',\r\n        name: 'Samsung Galaxy S24',\r\n        category: { _id: '1', name: 'Electronics' },\r\n        basePrice: 75000,\r\n        profitLoss: 3000,\r\n        salePrice: 78000,\r\n        lockedPrice: 77000,\r\n        yesterdayLock: 78000,\r\n        brokerDisplay: -1000,\r\n        status: 'active',\r\n        description: 'Flagship Samsung phone'\r\n      },\r\n      {\r\n        _id: '3',\r\n        name: 'Rice (1kg)',\r\n        category: { _id: '2', name: 'Groceries' },\r\n        basePrice: 50,\r\n        profitLoss: 10,\r\n        salePrice: 60,\r\n        lockedPrice: 58,\r\n        yesterdayLock: 55,\r\n        brokerDisplay: 3,\r\n        status: 'active',\r\n        description: 'Basmati rice'\r\n      }\r\n    ];\r\n\r\n    setCategories(mockCategories);\r\n    setPrices(mockPrices);\r\n  }, []);\r\n\r\n  const filteredPrices = prices.filter(p => {\r\n    const matchesSearch = p.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = filterStatus === 'all' || p.status === filterStatus;\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const toggleSelect = (id) => {\r\n    setSelectedItems(prev =>\r\n      prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const selectAll = () => {\r\n    if (selectedItems.length === filteredPrices.length) {\r\n      setSelectedItems([]);\r\n    } else {\r\n      setSelectedItems(filteredPrices.map(p => p._id));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    const base = Number(formData.basePrice);\r\n    const pl = Number(formData.profitLoss);\r\n    const sale = base + pl;\r\n\r\n    if (editingItem) {\r\n      setPrices(prev => prev.map(p =>\r\n        p._id === editingItem._id\r\n          ? { ...p, ...formData, basePrice: base, profitLoss: pl, salePrice: sale }\r\n          : p\r\n      ));\r\n      setShowEditModal(false);\r\n    } else {\r\n      const newPrice = {\r\n        _id: Date.now().toString(),\r\n        ...formData,\r\n        basePrice: base,\r\n        profitLoss: pl,\r\n        salePrice: sale,\r\n        lockedPrice: 0,\r\n        yesterdayLock: 0,\r\n        brokerDisplay: 0,\r\n        category: categories.find(c => c._id === formData.category)\r\n      };\r\n      setPrices(prev => [newPrice, ...prev]);\r\n      setShowAddModal(false);\r\n    }\r\n\r\n    resetForm();\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      category: '',\r\n      subcategory: '',\r\n      basePrice: '',\r\n      profitLoss: '',\r\n      description: '',\r\n      status: 'inactive'\r\n    });\r\n    setEditingItem(null);\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setEditingItem(item);\r\n    setFormData({\r\n      name: item.name,\r\n      category: item.category._id,\r\n      subcategory: item.subcategory || '',\r\n      basePrice: item.basePrice.toString(),\r\n      profitLoss: item.profitLoss.toString(),\r\n      description: item.description || '',\r\n      status: item.status\r\n    });\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    if (confirm('Delete this item?')) {\r\n      setPrices(prev => prev.filter(p => p._id !== id));\r\n    }\r\n  };\r\n\r\n  const handleDeleteSelected = () => {\r\n    if (confirm(`Delete ${selectedItems.length} items?`)) {\r\n      setPrices(prev => prev.filter(p => !selectedItems.includes(p._id)));\r\n      setSelectedItems([]);\r\n    }\r\n  };\r\n\r\n  const handleCopy = (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      _id: Date.now().toString(),\r\n      name: item.name + ' (Copy)',\r\n      lockedPrice: 0,\r\n      yesterdayLock: 0,\r\n      brokerDisplay: 0\r\n    };\r\n    setPrices(prev => [newItem, ...prev]);\r\n  };\r\n\r\n  const handleBulkEdit = () => {\r\n    setShowBulkEditModal(true);\r\n  };\r\n\r\n  const applyBulkEdit = () => {\r\n    setPrices(prev => prev.map(p => {\r\n      if (!selectedItems.includes(p._id)) return p;\r\n      \r\n      const newBase = bulkFormData.basePrice ? Number(bulkFormData.basePrice) : p.basePrice;\r\n      const newPL = bulkFormData.profitLoss ? Number(bulkFormData.profitLoss) : p.profitLoss;\r\n      \r\n      return {\r\n        ...p,\r\n        basePrice: newBase,\r\n        profitLoss: newPL,\r\n        salePrice: newBase + newPL,\r\n        status: bulkFormData.status || p.status\r\n      };\r\n    }));\r\n    setSelectedItems([]);\r\n    setShowBulkEditModal(false);\r\n    setBulkFormData({ basePrice: '', profitLoss: '', status: '' });\r\n  };\r\n\r\n  const exportCSV = () => {\r\n    const headers = ['Name', 'Category', 'Base Price', 'Profit/Loss', 'Sale Price', 'Locked Price', 'Yesterday Lock', 'Teji/Mandi', 'Status'];\r\n    const rows = filteredPrices.map(p => [\r\n      p.name,\r\n      p.category?.name || '',\r\n      p.basePrice,\r\n      p.profitLoss,\r\n      p.salePrice,\r\n      p.lockedPrice,\r\n      p.yesterdayLock,\r\n      p.brokerDisplay,\r\n      p.status\r\n    ]);\r\n    \r\n    const csv = [headers, ...rows].map(row => row.join(',')).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'prices.csv';\r\n    a.click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"bg-white shadow-sm sticky top-0 z-10\">\r\n        <div className=\"px-4 py-3\">\r\n          <h1 className=\"text-xl font-bold text-gray-800\">Price Management</h1>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-4 space-y-3\">\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"flex-1 relative\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search products...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          <button\r\n            onClick={() => setShowAddModal(true)}\r\n            className=\"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700\"\r\n          >\r\n            <Plus className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex gap-2 overflow-x-auto pb-2\">\r\n          <button\r\n            onClick={() => setFilterStatus('all')}\r\n            className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap ${\r\n              filterStatus === 'all' ? 'bg-blue-600 text-white' : 'bg-white border border-gray-300'\r\n            }`}\r\n          >\r\n            All\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterStatus('active')}\r\n            className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap ${\r\n              filterStatus === 'active' ? 'bg-green-600 text-white' : 'bg-white border border-gray-300'\r\n            }`}\r\n          >\r\n            Active\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterStatus('inactive')}\r\n            className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap ${\r\n              filterStatus === 'inactive' ? 'bg-gray-600 text-white' : 'bg-white border border-gray-300'\r\n            }`}\r\n          >\r\n            Inactive\r\n          </button>\r\n        </div>\r\n\r\n        {selectedItems.length > 0 && (\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between\">\r\n            <span className=\"text-sm font-medium text-blue-900\">\r\n              {selectedItems.length} selected\r\n            </span>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={handleBulkEdit}\r\n                className=\"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm\"\r\n              >\r\n                Bulk Edit\r\n              </button>\r\n              <button\r\n                onClick={handleDeleteSelected}\r\n                className=\"px-3 py-1.5 bg-red-600 text-white rounded-lg text-sm\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={exportCSV}\r\n            className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50\"\r\n          >\r\n            <Download className=\"w-4 h-4\" />\r\n            Export CSV\r\n          </button>\r\n          <button\r\n            className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50\"\r\n          >\r\n            <Upload className=\"w-4 h-4\" />\r\n            Import CSV\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-4 pb-20 space-y-3\">\r\n        {filteredPrices.map(item => (\r\n          <div key={item._id} className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n            <div className=\"p-4\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedItems.includes(item._id)}\r\n                  onChange={() => toggleSelect(item._id)}\r\n                  className=\"mt-1 w-4 h-4\"\r\n                />\r\n                \r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-gray-900\">{item.name}</h3>\r\n                      <p className=\"text-sm text-gray-500\">{item.category?.name}</p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                      item.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'\r\n                    }`}>\r\n                      {item.status}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-3 mb-3\">\r\n                    <div>\r\n                      <p className=\"text-xs text-gray-500\">Base Price</p>\r\n                      <p className=\"text-sm font-medium\">‚Çπ{item.basePrice.toLocaleString()}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-xs text-gray-500\">Profit/Loss</p>\r\n                      <p className={`text-sm font-medium ${item.profitLoss >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                        ‚Çπ{item.profitLoss.toLocaleString()}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-xs text-gray-500\">Sale Price</p>\r\n                      <p className=\"text-sm font-medium text-blue-600\">‚Çπ{item.salePrice.toLocaleString()}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-xs text-gray-500\">Locked Price</p>\r\n                      <p className=\"text-sm font-medium\">‚Çπ{item.lockedPrice.toLocaleString()}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className={`flex items-center gap-2 p-2 rounded-lg mb-3 ${\r\n                    item.brokerDisplay > 0 ? 'bg-green-50' : item.brokerDisplay < 0 ? 'bg-red-50' : 'bg-gray-50'\r\n                  }`}>\r\n                    {item.brokerDisplay > 0 ? (\r\n                      <TrendingUp className=\"w-4 h-4 text-green-600\" />\r\n                    ) : item.brokerDisplay < 0 ? (\r\n                      <TrendingDown className=\"w-4 h-4 text-red-600\" />\r\n                    ) : null}\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"text-xs text-gray-600\">Teji/Mandi (vs Yesterday)</p>\r\n                      <p className={`text-sm font-bold ${\r\n                        item.brokerDisplay > 0 ? 'text-green-600' : item.brokerDisplay < 0 ? 'text-red-600' : 'text-gray-600'\r\n                      }`}>\r\n                        {item.brokerDisplay > 0 ? '+' : ''}‚Çπ{item.brokerDisplay.toLocaleString()}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-xs text-gray-500\">Yesterday: ‚Çπ{item.yesterdayLock.toLocaleString()}</p>\r\n                      <p className=\"text-xs text-gray-500\">Today: ‚Çπ{item.lockedPrice.toLocaleString()}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => handleEdit(item)}\r\n                      className=\"flex-1 flex items-center justify-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg text-sm hover:bg-blue-100\"\r\n                    >\r\n                      <Edit2 className=\"w-3 h-3\" />\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleCopy(item)}\r\n                      className=\"flex-1 flex items-center justify-center gap-2 px-3 py-1.5 bg-gray-50 text-gray-600 rounded-lg text-sm hover:bg-gray-100\"\r\n                    >\r\n                      <Copy className=\"w-3 h-3\" />\r\n                      Copy\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(item._id)}\r\n                      className=\"px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100\"\r\n                    >\r\n                      <Trash2 className=\"w-3 h-3\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {(showAddModal || showEditModal) && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-t-2xl sm:rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\r\n              <h2 className=\"text-lg font-semibold\">\r\n                {editingItem ? 'Edit Price' : 'Add New Price'}\r\n              </h2>\r\n              <button\r\n                onClick={() => {\r\n                  setShowAddModal(false);\r\n                  setShowEditModal(false);\r\n                  resetForm();\r\n                }}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-4 space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Product Name *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.name}\r\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Category *\r\n                </label>\r\n                <select\r\n                  value={formData.category}\r\n                  onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">Select Category</option>\r\n                  {categories.map(cat => (\r\n                    <option key={cat._id} value={cat._id}>{cat.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Base Price *\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.basePrice}\r\n                    onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Profit/Loss\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.profitLoss}\r\n                    onChange={(e) => setFormData({ ...formData, profitLoss: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {formData.basePrice && (\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n                  <p className=\"text-sm text-gray-600\">Sale Price:</p>\r\n                  <p className=\"text-xl font-bold text-blue-600\">\r\n                    ‚Çπ{(Number(formData.basePrice) + Number(formData.profitLoss || 0)).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Description\r\n                </label>\r\n                <textarea\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Status\r\n                </label>\r\n                <select\r\n                  value={formData.status}\r\n                  onChange={(e) => setFormData({ ...formData, status: e.target.value })}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"active\">Active</option>\r\n                  <option value=\"inactive\">Inactive</option>\r\n                </select>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleSubmit}\r\n                className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700\"\r\n              >\r\n                {editingItem ? 'Update Price' : 'Add Price'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showBulkEditModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-t-2xl sm:rounded-2xl w-full max-w-lg\">\r\n            <div className=\"border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\r\n              <h2 className=\"text-lg font-semibold\">Bulk Edit ({selectedItems.length} items)</h2>\r\n              <button\r\n                onClick={() => setShowBulkEditModal(false)}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-4 space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Set Base Price (leave empty to keep current)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={bulkFormData.basePrice}\r\n                  onChange={(e) => setBulkFormData({ ...bulkFormData, basePrice: e.target.value })}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Set Profit/Loss (leave empty to keep current)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={bulkFormData.profitLoss}\r\n                  onChange={(e) => setBulkFormData({ ...bulkFormData, profitLoss: e.target.value })}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Set Status\r\n                </label>\r\n                <select\r\n                  value={bulkFormData.status}\r\n                  onChange={(e) => setBulkFormData({ ...bulkFormData, status: e.target.value })}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">Keep Current</option>\r\n                  <option value=\"active\">Active</option>\r\n                  <option value=\"inactive\">Inactive</option>\r\n                </select>\r\n              </div>\r\n\r\n              <button\r\n                onClick={applyBulkEdit}\r\n                className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700\"\r\n              >\r\n                Apply Changes\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PriceManagementApp;"],"mappings":";;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAEC,IAAI,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,EAAEC,CAAC,EAAEC,KAAK,EAAEC,WAAW,EAAEC,UAAU,EAAEC,YAAY,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5I,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACqB,UAAU,EAAEC,aAAa,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACuB,aAAa,EAAEC,gBAAgB,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}