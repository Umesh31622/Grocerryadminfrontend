{"ast":null,"code":"var _jsxFileName = \"E:\\\\infyle\\\\Grocerry_final\\\\frontend\\\\src\\\\pages\\\\PriceList.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\n\n// export default function PriceList() {\n//   // DATA\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n\n//   // UI state\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   // FORM state\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     difference: \"\",\n//     validTill: \"\",\n//     file: null,\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [isCopyMode, setIsCopyMode] = useState(false);\n\n//   // category/subcategory add UI\n//   const [addingCategory, setAddingCategory] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n\n//   const [addingSub, setAddingSub] = useState(false);\n//   const [newSubName, setNewSubName] = useState(\"\");\n//   const [newSubImage, setNewSubImage] = useState(null);\n//   const [newSubPreview, setNewSubPreview] = useState(null);\n\n//   // bulk\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   // csv import\n//   const [csvFile, setCsvFile] = useState(null);\n//   const csvInputRef = useRef();\n\n//   // pagination\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   // -------------------- FETCH --------------------\n//   useEffect(() => {\n//     fetchItems();\n//     fetchCategories();\n\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\n//     window.addEventListener(\"resize\", handleResize);\n//     return () => window.removeEventListener(\"resize\", handleResize);\n//     // eslint-disable-next-line\n//   }, []);\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data && res.data.success) setItems(res.data.data || []);\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       alert(\"Could not fetch items\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       alert(\"Could not fetch categories\");\n//     }\n//   };\n\n//   // -------------------- SUBCATEGORY AUTO LOAD --------------------\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n\n//     const cat = categories.find((c) => c._id === form.category);\n//     const subs = (cat && cat.subcategories) || [];\n//     setSubcategories(subs);\n\n//     // keep current subcategory if exists in new subs, otherwise reset\n//     const exists = subs.some((s) => s._id === form.subcategory);\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//   }, [form.category, categories]);\n\n//   // -------------------- CREATE CATEGORY --------------------\n//   const handleCreateCategory = async () => {\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newCategoryName.trim());\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n\n//       const res = await axios.post(CATEGORY_URL, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Category created\");\n//         setNewCategoryName(\"\");\n//         setNewCategoryImage(null);\n//         setNewCategoryPreview(null);\n//         setAddingCategory(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Category creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create category error\", err);\n//       alert(\"Category creation failed\");\n//     }\n//   };\n\n//   // -------------------- CREATE SUBCATEGORY --------------------\n//   const handleCreateSub = async () => {\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n//     if (!form.category) return alert(\"Select category first\");\n\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"name\", newSubName.trim());\n//       if (newSubImage) fd.append(\"image\", newSubImage);\n\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n//       if (res.data && res.data.success) {\n//         alert(\"Subcategory created\");\n//         setNewSubName(\"\");\n//         setNewSubImage(null);\n//         setNewSubPreview(null);\n//         setAddingSub(false);\n//         fetchCategories();\n//       } else {\n//         alert(\"Subcategory creation failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Create sub error\", err);\n//       alert(\"Subcategory creation failed\");\n//     }\n//   };\n\n//   // -------------------- FORM HANDLING --------------------\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files && files.length) {\n//       // file input (both image for product and category/sub)\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   // -------------------- SUBMIT (ADD / UPDATE / COPY) --------------------\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       // append all keys (including 0 or empty string when necessary)\n//       Object.keys(form).forEach((k) => {\n//         const val = form[k];\n//         if (val !== undefined && val !== null) {\n//           fd.append(k, val);\n//         }\n//       });\n\n//       let res;\n//       if (isCopyMode) {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Copied as new item\");\n//       } else if (editId) {\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\n//         alert(\"Updated\");\n//       } else {\n//         res = await axios.post(API_URL, fd);\n//         alert(\"Added\");\n//       }\n\n//       // refresh\n//       await fetchItems();\n//       await fetchCategories();\n\n//       // reset\n//       setForm({\n//         name: \"\",\n//         category: \"\",\n//         subcategory: \"\",\n//         description: \"\",\n//         basePrice: \"\",\n//         difference: \"\",\n//         validTill: \"\",\n//         file: null,\n//       });\n//       setEditId(null);\n//       setIsCopyMode(false);\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // -------------------- EDIT --------------------\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       difference: item.difference ?? \"\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     // preload subs for better UX\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(item._id);\n//     setIsCopyMode(false);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // -------------------- COPY --------------------\n//   const handleCopyToEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id?.toString() || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice ?? \"\",\n//       difference: item.difference ?? \"\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n\n//     setEditId(null);\n//     setIsCopyMode(true);\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\n//   };\n\n//   // -------------------- DELETE --------------------\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       alert(\"Delete failed\");\n//     }\n//   };\n\n//   // -------------------- STATUS TOGGLE --------------------\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       alert(\"Status update failed\");\n//     }\n//   };\n\n//   // -------------------- BULK --------------------\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         name: x.name,\n//         basePrice: x.basePrice,\n//         difference: x.difference,\n//         validTill: x.validTill,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       alert(\"Bulk save failed\");\n//     }\n//   };\n\n//   // -------------------- CSV IMPORT/EXPORT --------------------\n//   const handleCsvSelect = (e) => {\n//     setCsvFile(e.target.files[0]);\n//   };\n\n//   const handleImportCsv = async () => {\n//     if (!csvFile) return alert(\"Select CSV file\");\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"file\", csvFile);\n//       const res = await axios.post(`${API_URL}/import`, fd);\n//       if (res.data && res.data.success) {\n//         alert(`Imported ${res.data.inserted || 0} items`);\n//         setCsvFile(null);\n//         if (csvInputRef.current) csvInputRef.current.value = null;\n//         fetchItems();\n//       } else {\n//         alert(\"CSV import failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"CSV import error\", err);\n//       alert(\"CSV import failed\");\n//     }\n//   };\n\n//   const handleExportCsv = async () => {\n//     try {\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"prices.csv\";\n//       a.click();\n//       URL.revokeObjectURL(url);\n//     } catch (err) {\n//       console.error(\"CSV export error\", err);\n//       alert(\"CSV export failed\");\n//     }\n//   };\n\n//   const handleExportSelectedCsv = () => {\n//     if (!selectedItems.length) return alert(\"Select items to export\");\n\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\n//     const header = [\n//       \"id\",\n//       \"name\",\n//       \"categoryName\",\n//       \"subcategoryName\",\n//       \"basePrice\",\n//       \"difference\",\n//       \"finalPrice\",\n//       \"status\",\n//       \"validTill\",\n//       \"description\",\n//       \"imageUrl\",\n//     ];\n\n//     const rows = selectedData.map((p) => [\n//       p._id,\n//       p.name || \"\",\n//       p.category?.name || \"\",\n//       p.subcategory?.name || \"\",\n//       p.basePrice ?? \"\",\n//       p.difference ?? \"\",\n//       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\n//       p.status || \"\",\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\n//       p.description || \"\",\n//       p.image || \"\",\n//     ]);\n\n//     const csvArray = [header, ...rows];\n//     const csvContent =\n//       \"data:text/csv;charset=utf-8,\" +\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n\n//     const encodedUri = encodeURI(csvContent);\n//     const link = document.createElement(\"a\");\n//     link.href = encodedUri;\n//     link.download = `selected_prices_${Date.now()}.csv`;\n//     link.click();\n//   };\n\n//   // -------------------- SEARCH & PAGINATION --------------------\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     return (\n//       (item.name || \"\").toString().toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t)\n//     );\n//   });\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n\n//   // -------------------- RENDER --------------------\n//   return (\n//     <div className=\"price-container\">\n//       {/* HEADER */}\n//       <div className=\"header-section\">\n//         <h1>üí∞ Product Management</h1>\n//         <p>Manage prices, categories, images, CSV & bulk actions.</p>\n//       </div>\n\n//       {/* SEARCH */}\n//       <div className=\"search-bar\">\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product, category or subcategory...\"\n//           value={search}\n//           onChange={(e) => {\n//             setSearch(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//         />\n//       </div>\n\n//       {/* BULK BAR */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-bar\">\n//           <span>{selectedItems.length} selected</span>\n\n//           {!bulkMode ? (\n//             <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 10 }}>\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n\n//               <button className=\"btn small\" onClick={handleExportSelectedCsv}>\n//                 ‚§ì Export Selected\n//               </button>\n//             </div>\n//           ) : (\n//             <div className=\"bulk-panel\">\n//               <h3>‚úè Bulk Edit Selected Items</h3>\n\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} className=\"bulk-edit-item-box\">\n//                     <h4>{item.name}</h4>\n\n//                     <div className=\"form-grid\">\n//                       <div className=\"form-group\">\n//                         <label>Name</label>\n//                         <input\n//                           type=\"text\"\n//                           value={item.name}\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\n//                         />\n//                       </div>\n\n//                       <div className=\"form-group\">\n//                         <label>Base Price</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.basePrice}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\n//                           }\n//                         />\n//                       </div>\n//                           <div className=\"form-group\">\n//   <label>Category</label>\n//   <select\n//     value={item.category?._id || \"\"}\n//     onChange={(e) => {\n//       const newCat = e.target.value;\n\n//       updateLocalItemField(item._id, \"category\", { _id: newCat });\n\n//       const catObj = categories.find((c) => c._id === newCat);\n//       const firstSub = catObj?.subcategories?.[0]?._id || \"\";\n\n//       updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\n//     }}\n//   >\n//     <option value=\"\">Select Category</option>\n//     {categories.map((c) => (\n//       <option key={c._id} value={c._id}>\n//         {c.name}\n//       </option>\n//     ))}\n//   </select>\n// </div>\n\n// <div className=\"form-group\">\n//   <label>Subcategory</label>\n//   <select\n//     value={item.subcategory?._id || \"\"}\n//     onChange={(e) =>\n//       updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\n//     }\n//   >\n//     <option value=\"\">Select Subcategory</option>\n\n//     {categories\n//       .find((c) => c._id === item.category?._id)\n//       ?.subcategories?.map((s) => (\n//         <option key={s._id} value={s._id}>\n//           {s.name}\n//         </option>\n//       ))}\n//   </select>\n// </div>\n//                       <div className=\"form-group\">\n//                         <label>Difference</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.difference || 0}\n//                           onChange={(e) =>\n//                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\n//                           }\n//                         />\n//                       </div>\n\n//                       {/* <div className=\"form-group\">\n//                         <label>Valid Till</label>\n//                         <input\n//                           type=\"date\"\n//                           value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\n//                           onChange={(e) => updateLocalItemField(item._id, \"validTill\", e.target.value)}\n//                         />\n//                       </div> */}\n//                     </div>\n//                   </div>\n//                 ))}\n\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\n//                 <button className=\"btn primary\" onClick={handleBulkSave}>\n//                   ‚úî Save All\n//                 </button>\n//                 <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\n//                   ‚úñ Cancel\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* FORM */}\n//       <div className=\"price-form-card\">\n//         <h2>{isCopyMode ? \"üìÑ Save Duplicate Product\" : editId ? \"‚úè Update Product\" : \"‚ûï Add Product\"}</h2>\n\n//         <form onSubmit={handleSubmit}>\n//           <div className=\"form-grid\">\n//             {/* NAME */}\n//             <div className=\"form-group\">\n//               <label>Product Name *</label>\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\n//             </div>\n\n//             {/* CATEGORY */}\n//             <div className=\"form-group\">\n//               <label>Category *</label>\n//               <div className=\"category-row\">\n//                 <select\n//                   required\n//                   name=\"category\"\n//                   value={form.category}\n//                   onChange={(e) => {\n//                     handleChange(e);\n//                     // reset subcategory on category change (useEffect will set subs)\n//                     setForm((p) => ({ ...p, subcategory: \"\" }));\n//                   }}\n//                 >\n//                   <option value=\"\">Select Category</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 <button type=\"button\" className=\"btn small\" onClick={() => setAddingCategory((v) => !v)}>\n//                   {addingCategory ? \"Close\" : \"Add\"}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {/* ADD CATEGORY UI */}\n//             {addingCategory && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>Add New Category</label>\n//                 <div className=\"category-row\">\n//                   <input\n//                     value={newCategoryName}\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\n//                     placeholder=\"Category name\"\n//                   />\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewCategoryImage(e.target.files[0]);\n//                       setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                     }}\n//                   />\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateCategory}>\n//                     Create\n//                   </button>\n//                 </div>\n//                 {newCategoryPreview && <img src={newCategoryPreview} className=\"categoryPreview\" alt=\"preview\" />}\n//               </div>\n//             )}\n\n//             {/* SUBCATEGORY */}\n//             <div className=\"form-group\">\n//               <label>Subcategory</label>\n//               <div className=\"category-row\">\n//                 <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length}>\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (\n//                     <option value={s._id} key={s._id}>\n//                       {s.name}\n//                     </option>\n//                   ))}\n//                 </select>\n\n//                 {form.category && (\n//                   <button type=\"button\" className=\"btn small\" onClick={() => setAddingSub((v) => !v)}>\n//                     {addingSub ? \"Close\" : \"Add\"}\n//                   </button>\n//                 )}\n//               </div>\n//             </div>\n\n//             {/* ADD SUBCATEGORY UI */}\n//             {addingSub && (\n//               <div className=\"form-group full-width addCategoryBox\">\n//                 <label>Add New Subcategory</label>\n//                 <div className=\"category-row\">\n//                   <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" />\n//                   <input\n//                     type=\"file\"\n//                     accept=\"image/*\"\n//                     onChange={(e) => {\n//                       setNewSubImage(e.target.files[0]);\n//                       setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n//                     }}\n//                   />\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateSub}>\n//                     Create\n//                   </button>\n//                 </div>\n//                 {newSubPreview && <img src={newSubPreview} className=\"categoryPreview\" alt=\"preview\" />}\n//               </div>\n//             )}\n\n//             {/* BASE PRICE */}\n//             <div className=\"form-group\">\n//               <label>Base Price *</label>\n//               <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} />\n//             </div>\n\n//             {/* DIFFERENCE */}\n//             <div className=\"form-group\">\n//               <label>Difference</label>\n//               <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} />\n//             </div>\n\n//             {/* VALID TILL */}\n//             <div className=\"form-group\">\n//               <label>Valid Till</label>\n//               <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} />\n//             </div>\n\n//             {/* IMAGE */}\n//             <div className=\"form-group\">\n//               <label>Image</label>\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\n//             </div>\n//           </div>\n\n//           {/* DESCRIPTION */}\n//           <div className=\"form-group full-width\">\n//             <label>Description</label>\n//             <textarea name=\"description\" value={form.description} onChange={handleChange}></textarea>\n//           </div>\n\n//           {/* ACTIONS */}\n//           <div className=\"form-actions\">\n//             <button className=\"btn primary\" disabled={loading}>\n//               {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : editId ? \"Update\" : \"Add\"}\n//             </button>\n\n//             {(editId || isCopyMode) && (\n//               <button\n//                 type=\"button\"\n//                 className=\"btn cancel\"\n//                 onClick={() => {\n//                   setEditId(null);\n//                   setIsCopyMode(false);\n//                   setForm({\n//                     name: \"\",\n//                     category: \"\",\n//                     subcategory: \"\",\n//                     description: \"\",\n//                     basePrice: \"\",\n//                     difference: \"\",\n//                     validTill: \"\",\n//                     file: null,\n//                   });\n//                 }}\n//               >\n//                 Cancel\n//               </button>\n//             )}\n//           </div>\n//         </form>\n//       </div>\n\n//       {/* CSV CONTROLS */}\n//       <div className=\"csv-controls\">\n//         <div>\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} />\n//           <button className=\"btn small\" onClick={handleImportCsv}>\n//             Import CSV\n//           </button>\n//         </div>\n\n//         <div style={{ display: \"flex\", gap: 8 }}>\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\n//             Export All CSV\n//           </button>\n\n//           <button className=\"btn\" onClick={handleExportSelectedCsv}>\n//             Export Selected CSV\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* TABLE */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <h2>üìã Items</h2>\n//           <span>Total: {filteredItems.length}</span>\n//         </div>\n\n//         {!isMobile ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th>Sr</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Subcategory</th>\n//                 <th>Base</th>\n//                 <th>Diff</th>\n//                 <th>Final</th>\n//                 <th>Status</th>\n//                 <th>Valid Till</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                       }\n//                     />\n//                   </td>\n\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n\n//                   <td>{item.image ? <img src={item.image} alt=\"\" /> : \"No Img\"}</td>\n\n//                   <td>{item.name}</td>\n//                   <td>{item.category?.name || \"-\"}</td>\n//                   <td>{item.subcategory?.name || \"-\"}</td>\n\n//                   <td>‚Çπ{item.basePrice}</td>\n//                   <td>{item.difference || 0}</td>\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\n\n//                   <td>\n//                     <button\n//                       className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \" Active\" : \" Inactive\"}\n//                     </button>\n//                   </td>\n\n//                   <td>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\n\n//                   <td className=\"actions\">\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                       Edit\n//                     </button>\n\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                       Delete\n//                     </button>\n\n//                     <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\n//                       Copy\n//                     </button>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <div className=\"mobile-list\">\n//             {currentItems.map((item) => (\n//               <div key={item._id} className=\"mobile-card\">\n//                 <input\n//                   type=\"checkbox\"\n//                   checked={selectedItems.includes(item._id)}\n//                   onChange={() =>\n//                     setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\n//                   }\n//                 />\n\n//                 {item.image ? <img src={item.image} alt=\"\" /> : <div>No Image</div>}\n\n//                 <h3>{item.name}</h3>\n\n//                 <p>\n//                   <b>Category:</b> {item.category?.name || \"-\"}\n//                 </p>\n\n//                 <p>\n//                   <b>Subcategory:</b> {item.subcategory?.name || \"-\"}\n//                 </p>\n\n//                 <p>\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\n//                 </p>\n\n//                 <p>\n//                   <b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\n//                 </p>\n\n//                 <button className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"} onClick={() => handleStatusToggle(item)}>\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                 </button>\n\n//                 <div className=\"actions\">\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\n//                     Edit\n//                   </button>\n\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\n//                     Delete\n//                   </button>\n\n//                   <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\n//                     Copy\n//                   </button>\n//                 </div>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n\n//         {/* PAGINATION */}\n//         <div className=\"pagination\">\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n\n//           {Array.from({ length: totalPages }, (_, i) => (\n//             <button key={i} className={i + 1 === currentPage ? \"active-page\" : \"\"} onClick={() => setCurrentPage(i + 1)}>\n//               {i + 1}\n//             </button>\n//           ))}\n\n//           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // FORM state\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    difference: \"\",\n    validTill: \"\",\n    file: null\n  });\n  const [editId, setEditId] = useState(null);\n  const [isCopyMode, setIsCopyMode] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [activeMenu, setActiveMenu] = useState(null);\n  const [addingCategory, setAddingCategory] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\n  const [addingSub, setAddingSub] = useState(false);\n  const [newSubName, setNewSubName] = useState(\"\");\n  const [newSubImage, setNewSubImage] = useState(null);\n  const [newSubPreview, setNewSubPreview] = useState(null);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [bulkMode, setBulkMode] = useState(false);\n  const [csvFile, setCsvFile] = useState(null);\n  const csvInputRef = useRef();\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n  const [filterCategory, setFilterCategory] = useState(\"\");\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n  const [filterSubs, setFilterSubs] = useState([]);\n  useEffect(() => {\n    if (!filterCategory) {\n      setFilterSubs([]);\n      setFilterSubcategory(\"\");\n      return;\n    }\n    const cat = categories.find(c => c._id === filterCategory);\n    setFilterSubs((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setFilterSubcategory(\"\");\n  }, [filterCategory, categories]);\n\n  // useEffect(() => {\n  //   fetchItems();\n  //   fetchCategories();\n\n  //   const handleResize = () => setIsMobile(window.innerWidth < 768);\n  //   window.addEventListener(\"resize\", handleResize);\n  //   return () => window.removeEventListener(\"resize\", handleResize);\n  // }, []);\n  // 1. Pehle categories load karo\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  // 2. Categories load hone ke baad items load karo\n  useEffect(() => {\n    if (categories.length > 0) {\n      fetchItems();\n    }\n  }, [categories]);\n\n  // 3. Resize listener\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  const fetchItems = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      // if (res.data && res.data.success) setItems(res.data.data || []);\n      if (res.data && res.data.success) {\n        const raw = res.data.data;\n\n        // Agar categories abhi load nahi hui = raw items set\n        if (!categories.length) {\n          setItems(raw);\n          return;\n        }\n\n        // Mapping to category + subcategory object\n        const enriched = raw.map(item => {\n          var _cat$subcategories;\n          const cat = categories.find(c => {\n            var _item$category;\n            return c._id === item.category || c._id === ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category._id);\n          });\n          const sub = cat === null || cat === void 0 ? void 0 : (_cat$subcategories = cat.subcategories) === null || _cat$subcategories === void 0 ? void 0 : _cat$subcategories.find(s => {\n            var _item$subcategory;\n            return s._id === item.subcategory || s._id === ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : _item$subcategory._id);\n          });\n          return {\n            ...item,\n            category: cat ? {\n              _id: cat._id,\n              name: cat.name\n            } : item.category,\n            subcategory: sub ? {\n              _id: sub._id,\n              name: sub.name\n            } : item.subcategory\n          };\n        });\n        setItems(enriched);\n      }\n    } catch (err) {\n      console.error(\"Fetch items error\", err);\n      alert(\"Could not fetch items\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      const res = await axios.get(CATEGORY_URL);\n      if (res.data && res.data.success) setCategories(res.data.categories || []);\n    } catch (err) {\n      console.error(\"Fetch categories error\", err);\n      alert(\"Could not fetch categories\");\n    }\n  };\n  useEffect(() => {\n    if (!form.category) {\n      setSubcategories([]);\n      setForm(prev => ({\n        ...prev,\n        subcategory: \"\"\n      }));\n      return;\n    }\n    const cat = categories.find(c => c._id === form.category);\n    const subs = cat && cat.subcategories || [];\n    setSubcategories(subs);\n    const exists = subs.some(s => s._id === form.subcategory);\n    if (!exists) setForm(prev => ({\n      ...prev,\n      subcategory: \"\"\n    }));\n  }, [form.category, categories]);\n  const handleCreateCategory = async () => {\n    if (!newCategoryName.trim()) return alert(\"Enter category name\");\n    try {\n      const fd = new FormData();\n      fd.append(\"name\", newCategoryName.trim());\n      if (newCategoryImage) fd.append(\"image\", newCategoryImage);\n      const res = await axios.post(CATEGORY_URL, fd);\n      if (res.data && res.data.success) {\n        alert(\"Category created\");\n        setNewCategoryName(\"\");\n        setNewCategoryImage(null);\n        setNewCategoryPreview(null);\n        setAddingCategory(false);\n        fetchCategories();\n      } else {\n        alert(\"Category creation failed\");\n      }\n    } catch (err) {\n      console.error(\"Create category error\", err);\n      alert(\"Category creation failed\");\n    }\n  };\n  const handleCreateSub = async () => {\n    if (!newSubName.trim()) return alert(\"Enter subcategory name\");\n    if (!form.category) return alert(\"Select category first\");\n    try {\n      const fd = new FormData();\n      fd.append(\"name\", newSubName.trim());\n      if (newSubImage) fd.append(\"image\", newSubImage);\n      const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\n      if (res.data && res.data.success) {\n        alert(\"Subcategory created\");\n        setNewSubName(\"\");\n        setNewSubImage(null);\n        setNewSubPreview(null);\n        setAddingSub(false);\n        fetchCategories();\n      } else {\n        alert(\"Subcategory creation failed\");\n      }\n    } catch (err) {\n      console.error(\"Create sub error\", err);\n      alert(\"Subcategory creation failed\");\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (files && files.length) {\n      setForm(p => ({\n        ...p,\n        file: files[0]\n      }));\n    } else {\n      setForm(p => ({\n        ...p,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      if (!form.name || !form.category || !form.basePrice) {\n        alert(\"Name, category & base price are required\");\n        setLoading(false);\n        return;\n      }\n      const fd = new FormData();\n      Object.keys(form).forEach(k => {\n        const val = form[k];\n        if (val !== undefined && val !== null) {\n          fd.append(k, val);\n        }\n      });\n      let res;\n      if (isCopyMode) {\n        res = await axios.post(API_URL, fd);\n        alert(\"Copied as new item\");\n      } else if (editId) {\n        res = await axios.put(`${API_URL}/${editId}`, fd);\n        alert(\"Updated\");\n      } else {\n        res = await axios.post(API_URL, fd);\n        alert(\"Added\");\n      }\n      await fetchItems();\n      await fetchCategories();\n      setForm({\n        name: \"\",\n        category: \"\",\n        subcategory: \"\",\n        description: \"\",\n        basePrice: \"\",\n        difference: \"\",\n        validTill: \"\",\n        file: null\n      });\n      setEditId(null);\n      setIsCopyMode(false);\n      setShowModal(false);\n      setShowForm(false);\n    } catch (err) {\n      console.error(\"Save error\", err);\n      alert(\"Save failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleEdit = item => {\n    var _item$category2, _item$category2$_id, _item$subcategory2, _item$subcategory2$_i, _item$basePrice, _item$difference;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : (_item$category2$_id = _item$category2._id) === null || _item$category2$_id === void 0 ? void 0 : _item$category2$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : (_item$subcategory2$_i = _item$subcategory2._id) === null || _item$subcategory2$_i === void 0 ? void 0 : _item$subcategory2$_i.toString()) || \"\",\n      description: item.description || \"\",\n      basePrice: (_item$basePrice = item.basePrice) !== null && _item$basePrice !== void 0 ? _item$basePrice : \"\",\n      difference: (_item$difference = item.difference) !== null && _item$difference !== void 0 ? _item$difference : \"\",\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null\n    });\n    const cat = categories.find(c => {\n      var _item$category3;\n      return c._id === ((_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : _item$category3._id);\n    });\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setEditId(item._id);\n    setIsCopyMode(false);\n    setShowModal(true);\n    setActiveMenu(null);\n  };\n  const handleCopyToEdit = item => {\n    var _item$category4, _item$category4$_id, _item$subcategory3, _item$subcategory3$_i, _item$basePrice2, _item$difference2;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : (_item$category4$_id = _item$category4._id) === null || _item$category4$_id === void 0 ? void 0 : _item$category4$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : (_item$subcategory3$_i = _item$subcategory3._id) === null || _item$subcategory3$_i === void 0 ? void 0 : _item$subcategory3$_i.toString()) || \"\",\n      description: item.description || \"\",\n      basePrice: (_item$basePrice2 = item.basePrice) !== null && _item$basePrice2 !== void 0 ? _item$basePrice2 : \"\",\n      difference: (_item$difference2 = item.difference) !== null && _item$difference2 !== void 0 ? _item$difference2 : \"\",\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null\n    });\n    const cat = categories.find(c => {\n      var _item$category5;\n      return c._id === ((_item$category5 = item.category) === null || _item$category5 === void 0 ? void 0 : _item$category5._id);\n    });\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setEditId(null);\n    setIsCopyMode(true);\n    setShowModal(true);\n    setActiveMenu(null);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete item?\")) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`);\n      setItems(prev => prev.filter(x => x._id !== id));\n      setSelectedItems(prev => prev.filter(x => x !== id));\n      setActiveMenu(null);\n    } catch (err) {\n      console.error(\"Delete error\", err);\n      alert(\"Delete failed\");\n    }\n  };\n  const handleStatusToggle = async item => {\n    try {\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n      await axios.put(`${API_URL}/status/${item._id}`, {\n        status: newStatus\n      });\n      setItems(prev => prev.map(x => x._id === item._id ? {\n        ...x,\n        status: newStatus\n      } : x));\n    } catch (err) {\n      console.error(\"Status toggle error\", err);\n      alert(\"Status update failed\");\n    }\n  };\n  const handleBulkDelete = async () => {\n    if (!selectedItems.length) return alert(\"No items selected\");\n    if (!window.confirm(\"Delete selected items?\")) return;\n    try {\n      await Promise.all(selectedItems.map(id => axios.delete(`${API_URL}/${id}`)));\n      setSelectedItems([]);\n      fetchItems();\n      setBulkMode(false);\n    } catch (err) {\n      console.error(\"Bulk delete error\", err);\n      alert(\"Bulk delete failed\");\n    }\n  };\n  const updateLocalItemField = (id, key, value) => {\n    setItems(prev => prev.map(x => x._id === id ? {\n      ...x,\n      [key]: value\n    } : x));\n  };\n  const handleBulkSave = async () => {\n    if (!selectedItems.length) return alert(\"No items selected for bulk save\");\n    const updates = items.filter(x => selectedItems.includes(x._id)).map(x => ({\n      id: x._id,\n      name: x.name,\n      basePrice: x.basePrice,\n      difference: x.difference,\n      validTill: x.validTill\n    }));\n    try {\n      await axios.post(`${API_URL}/bulk-update`, {\n        products: updates\n      });\n      setBulkMode(false);\n      setSelectedItems([]);\n      fetchItems();\n    } catch (err) {\n      console.error(\"Bulk save error\", err);\n      alert(\"Bulk save failed\");\n    }\n  };\n  const handleCsvSelect = e => {\n    setCsvFile(e.target.files[0]);\n  };\n  const handleImportCsv = async () => {\n    if (!csvFile) return alert(\"Select CSV file\");\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", csvFile);\n      const res = await axios.post(`${API_URL}/import`, fd);\n      if (res.data && res.data.success) {\n        alert(`Imported ${res.data.inserted || 0} items`);\n        setCsvFile(null);\n        if (csvInputRef.current) csvInputRef.current.value = null;\n        fetchItems();\n      } else {\n        alert(\"CSV import failed\");\n      }\n    } catch (err) {\n      console.error(\"CSV import error\", err);\n      alert(\"CSV import failed\");\n    }\n  };\n\n  // const handleExportCsv = async () => {\n  //   try {\n  //     const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\n  //     const url = window.URL.createObjectURL(new Blob([res.data]));\n  //     const a = document.createElement(\"a\");\n  //     a.href = url;\n  //     a.download = \"prices.csv\";\n  //     a.click();\n  //     URL.revokeObjectURL(url);\n  //   } catch (err) {\n  //     console.error(\"CSV export error\", err);\n  //     alert(\"CSV export failed\");\n  //   }\n  // };\n  const handleExportCsv = () => {\n    if (!items.length) return alert(\"No items to export\");\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"difference\", \"finalPrice\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = items.map(p => {\n      var _p$category, _p$subcategory, _p$basePrice, _p$difference;\n      return [p._id, p.name || \"\", ((_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category.name) || \"\", ((_p$subcategory = p.subcategory) === null || _p$subcategory === void 0 ? void 0 : _p$subcategory.name) || \"\", (_p$basePrice = p.basePrice) !== null && _p$basePrice !== void 0 ? _p$basePrice : \"\", (_p$difference = p.difference) !== null && _p$difference !== void 0 ? _p$difference : \"\", Number(p.basePrice) + Number(p.difference || 0) || \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n    });\n    const csvArray = [header, ...rows];\n    const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.href = encodedUri;\n    link.download = `all_prices_${Date.now()}.csv`;\n    link.click();\n  };\n  const handleExportSelectedCsv = () => {\n    if (!selectedItems.length) return alert(\"Select items to export\");\n    const selectedData = items.filter(x => selectedItems.includes(x._id));\n    const header = [\"id\", \"name\", \"categoryName\", \"subcategoryName\", \"basePrice\", \"difference\", \"finalPrice\", \"status\", \"validTill\", \"description\", \"imageUrl\"];\n    const rows = selectedData.map(p => {\n      var _p$category2, _p$subcategory2, _p$basePrice2, _p$difference2;\n      return [p._id, p.name || \"\", ((_p$category2 = p.category) === null || _p$category2 === void 0 ? void 0 : _p$category2.name) || \"\", ((_p$subcategory2 = p.subcategory) === null || _p$subcategory2 === void 0 ? void 0 : _p$subcategory2.name) || \"\", (_p$basePrice2 = p.basePrice) !== null && _p$basePrice2 !== void 0 ? _p$basePrice2 : \"\", (_p$difference2 = p.difference) !== null && _p$difference2 !== void 0 ? _p$difference2 : \"\", Number(p.basePrice) + Number(p.difference || 0) || \"\", p.status || \"\", p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\", p.description || \"\", p.image || \"\"];\n    });\n    const csvArray = [header, ...rows];\n    const csvContent = \"data:text/csv;charset=utf-8,\" + csvArray.map(r => r.map(c => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.href = encodedUri;\n    link.download = `selected_prices_${Date.now()}.csv`;\n    link.click();\n  };\n\n  // const filteredItems = items.filter((item) => {\n  //   const t = search.toLowerCase();\n  //   return (\n  //     (item.name || \"\").toString().toLowerCase().includes(t) ||\n  //     (item.category?.name || \"\").toLowerCase().includes(t) ||\n  //     (item.subcategory?.name || \"\").toLowerCase().includes(t)\n  //   );\n  // });\n\n  const indexOfLast = currentPage * itemsPerPage;\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n  const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.header,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.title,\n        children: \"Product Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1488,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1487,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-topbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search product, category or subcategory...\",\n        value: search,\n        onChange: e => {\n          setSearch(e.target.value);\n          setCurrentPage(1);\n        },\n        style: styles.searchInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1495,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.addButton,\n        onClick: () => {\n          setShowForm(!showForm);\n          setEditId(null);\n          setIsCopyMode(false);\n        },\n        children: showForm ? \"‚úñ\" : \"Add Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1506,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1494,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: filterCategory,\n        onChange: e => setFilterCategory(e.target.value),\n        className: \"filter-select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Filter by Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1523,\n          columnNumber: 5\n        }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c._id,\n          children: c.name\n        }, c._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1525,\n          columnNumber: 7\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1518,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: filterSubcategory,\n        onChange: e => setFilterSubcategory(e.target.value),\n        className: \"filter-select\",\n        disabled: !filterSubs.length,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Filter by Subcategory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1535,\n          columnNumber: 5\n        }, this), filterSubs.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: s._id,\n          children: s.name\n        }, s._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1537,\n          columnNumber: 7\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1529,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1517,\n      columnNumber: 1\n    }, this), selectedItems.length > 0 &&\n    /*#__PURE__*/\n    // <div style={styles.bulkBar}>\n    _jsxDEV(\"div\", {\n      className: \"bulk-bar\",\n      children: !bulkMode ?\n      /*#__PURE__*/\n      // <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\n      _jsxDEV(\"div\", {\n        className: \"bulk-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnDelete,\n          onClick: handleBulkDelete,\n          children: \"\\uD83D\\uDDD1 Bulk Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1556,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnPrimary,\n          onClick: () => setBulkMode(true),\n          children: \"\\u270F Bulk Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1560,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1554,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.bulkPanel,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: styles.bulkPanelTitle,\n          children: \"\\u270F Bulk Edit Selected Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1570,\n          columnNumber: 15\n        }, this), items.filter(item => selectedItems.includes(item._id)).map(item => {\n          var _item$category6, _item$subcategory4, _categories$find, _categories$find$subc;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.bulkItemBox,\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: styles.bulkItemTitle,\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1576,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGrid,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.formGroup,\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: styles.label,\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1580,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: item.name,\n                  onChange: e => updateLocalItemField(item._id, \"name\", e.target.value),\n                  style: styles.input\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1581,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1579,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.formGroup,\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: styles.label,\n                  children: \"Base Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1590,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: item.basePrice,\n                  onChange: e => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value)),\n                  style: styles.input\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1591,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1589,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.formGroup,\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: styles.label,\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1602,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: ((_item$category6 = item.category) === null || _item$category6 === void 0 ? void 0 : _item$category6._id) || \"\",\n                  onChange: e => {\n                    var _catObj$subcategories, _catObj$subcategories2;\n                    const newCat = e.target.value;\n                    updateLocalItemField(item._id, \"category\", {\n                      _id: newCat\n                    });\n                    const catObj = categories.find(c => c._id === newCat);\n                    const firstSub = (catObj === null || catObj === void 0 ? void 0 : (_catObj$subcategories = catObj.subcategories) === null || _catObj$subcategories === void 0 ? void 0 : (_catObj$subcategories2 = _catObj$subcategories[0]) === null || _catObj$subcategories2 === void 0 ? void 0 : _catObj$subcategories2._id) || \"\";\n                    updateLocalItemField(item._id, \"subcategory\", {\n                      _id: firstSub\n                    });\n                  },\n                  style: styles.select,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1614,\n                    columnNumber: 27\n                  }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: c._id,\n                    children: c.name\n                  }, c._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1616,\n                    columnNumber: 29\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1603,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1601,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.formGroup,\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: styles.label,\n                  children: \"Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1624,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: ((_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4._id) || \"\",\n                  onChange: e => updateLocalItemField(item._id, \"subcategory\", {\n                    _id: e.target.value\n                  }),\n                  style: styles.select,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select Subcategory\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1632,\n                    columnNumber: 27\n                  }, this), (_categories$find = categories.find(c => {\n                    var _item$category7;\n                    return c._id === ((_item$category7 = item.category) === null || _item$category7 === void 0 ? void 0 : _item$category7._id);\n                  })) === null || _categories$find === void 0 ? void 0 : (_categories$find$subc = _categories$find.subcategories) === null || _categories$find$subc === void 0 ? void 0 : _categories$find$subc.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: s._id,\n                    children: s.name\n                  }, s._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1636,\n                    columnNumber: 31\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1625,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1623,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.formGroup,\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: styles.label,\n                  children: \"Difference\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: item.difference || 0,\n                  onChange: e => updateLocalItemField(item._id, \"difference\", Number(e.target.value)),\n                  style: styles.input\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1645,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1643,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1578,\n              columnNumber: 21\n            }, this)]\n          }, item._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1575,\n            columnNumber: 19\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 0,\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnPrimary,\n            onClick: handleBulkSave,\n            children: \"\\u2714 Save All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1659,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnCancel,\n            onClick: () => setBulkMode(false),\n            children: \"\\u2716 Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1662,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1658,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1569,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1548,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.formCard,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.formTitle,\n        children: \"\\u2795 Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1674,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGrid,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1681,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              name: \"name\",\n              value: form.name,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1682,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1680,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1686,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                required: true,\n                name: \"category\",\n                value: form.category,\n                onChange: e => {\n                  handleChange(e);\n                  setForm(p => ({\n                    ...p,\n                    subcategory: \"\"\n                  }));\n                },\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1698,\n                  columnNumber: 21\n                }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c._id,\n                  children: c.name\n                }, c._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1700,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1688,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                style: styles.btnSmall,\n                onClick: () => setAddingCategory(v => !v),\n                children: addingCategory ? \"Close\" : \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1706,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1687,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1685,\n            columnNumber: 15\n          }, this), addingCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.addCategoryBox,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Add New Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1714,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: newCategoryName,\n                onChange: e => setNewCategoryName(e.target.value),\n                placeholder: \"Category name\",\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1716,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  setNewCategoryImage(e.target.files[0]);\n                  setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n                },\n                style: styles.fileInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1722,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: styles.btnPrimary,\n                type: \"button\",\n                onClick: handleCreateCategory,\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1731,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1715,\n              columnNumber: 19\n            }, this), newCategoryPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: newCategoryPreview,\n              style: styles.preview,\n              alt: \"preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1735,\n              columnNumber: 42\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1713,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1740,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"subcategory\",\n                value: form.subcategory,\n                onChange: handleChange,\n                disabled: !subcategories.length,\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1743,\n                  columnNumber: 21\n                }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: s._id,\n                  children: s.name\n                }, s._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1745,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1742,\n                columnNumber: 19\n              }, this), form.category && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                style: styles.btnSmall,\n                onClick: () => setAddingSub(v => !v),\n                children: addingSub ? \"Close\" : \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1752,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1741,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1739,\n            columnNumber: 15\n          }, this), addingSub && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.addCategoryBox,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Add New Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1761,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.categoryRow,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: newSubName,\n                onChange: e => setNewSubName(e.target.value),\n                placeholder: \"Subcategory name\",\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1763,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => {\n                  setNewSubImage(e.target.files[0]);\n                  setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\n                },\n                style: styles.fileInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1764,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: styles.btnPrimary,\n                type: \"button\",\n                onClick: handleCreateSub,\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1773,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1762,\n              columnNumber: 19\n            }, this), newSubPreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: newSubPreview,\n              style: styles.preview,\n              alt: \"preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1777,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1760,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Base Price *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1782,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              required: true,\n              name: \"basePrice\",\n              value: form.basePrice,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1783,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1781,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Difference\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1787,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"difference\",\n              value: form.difference,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1788,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1786,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Valid Till\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1792,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"validTill\",\n              value: form.validTill,\n              onChange: handleChange,\n              style: styles.input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1793,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1791,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1797,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleChange,\n              style: styles.fileInput\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1798,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1796,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1679,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: styles.label,\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1803,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange,\n            style: styles.textarea\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1804,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1802,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.formActions,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.btnPrimary,\n            disabled: loading,\n            children: loading ? \"Saving...\" : \"Add Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1808,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1807,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1678,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1673,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"csv-topbar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"csv-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".csv\",\n          ref: csvInputRef,\n          onChange: handleCsvSelect,\n          style: styles.fileInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1837,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnSmall,\n          onClick: handleImportCsv,\n          children: \"Import\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1845,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnPrimary,\n          onClick: handleExportCsv,\n          children: \"Export All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1849,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.btnSmall,\n          onClick: handleExportSelectedCsv,\n          children: \"Selected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1853,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1836,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1835,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.tableCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.tableHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.tableTitle,\n          children: \" Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1862,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.totalCount,\n          children: [\"Total: \", filteredItems.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1863,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1861,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.tableWrapper,\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          style: styles.table,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedItems.length === filteredItems.length && filteredItems.length > 0,\n                  onChange: () => {\n                    if (selectedItems.length === filteredItems.length) setSelectedItems([]);else setSelectedItems(filteredItems.map(x => x._id));\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1871,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1870,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Sr\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1880,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1881,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1882,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1883,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1884,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1885,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Diff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1886,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Final\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1887,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1888,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Valid Till\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1889,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: styles.th,\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1890,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1869,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1868,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: currentItems.map((item, i) => {\n              var _item$category8, _item$subcategory5;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: styles.tr,\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedItems.includes(item._id),\n                    onChange: () => setSelectedItems(prev => prev.includes(item._id) ? prev.filter(x => x !== item._id) : [...prev, item._id])\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1898,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1897,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: (currentPage - 1) * itemsPerPage + (i + 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1907,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.image,\n                    style: styles.tableImg,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1909,\n                    columnNumber: 55\n                  }, this) : \"No Img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1909,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1911,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: ((_item$category8 = item.category) === null || _item$category8 === void 0 ? void 0 : _item$category8.name) || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1912,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: ((_item$subcategory5 = item.subcategory) === null || _item$subcategory5 === void 0 ? void 0 : _item$subcategory5.name) || \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1913,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [\"\\u20B9\", item.basePrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1915,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.difference || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1916,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: [\"\\u20B9\", Number(item.basePrice) + Number(item.difference || 0)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1917,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: item.status === \"active\" ? styles.statusActive : styles.statusInactive,\n                    onClick: () => handleStatusToggle(item),\n                    children: item.status === \"active\" ? \"Active\" : \"Inactive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1922,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1921,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1930,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: styles.td,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      position: \"relative\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      style: styles.menuButton,\n                      onClick: () => setActiveMenu(activeMenu === item._id ? null : item._id),\n                      children: \"\\u22EE\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1934,\n                      columnNumber: 23\n                    }, this), activeMenu === item._id && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: styles.dropdown,\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.dropdownItem,\n                        onClick: () => handleEdit(item),\n                        children: \"\\u270F Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1943,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.dropdownItem,\n                        onClick: () => handleCopyToEdit(item),\n                        children: \"\\uD83D\\uDCC4 Copy\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1946,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        style: styles.dropdownItemDelete,\n                        onClick: () => handleDelete(item._id),\n                        children: \"\\uD83D\\uDDD1 Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1949,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1942,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1933,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1932,\n                  columnNumber: 19\n                }, this)]\n              }, item._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1896,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1894,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1867,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1866,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.pagination,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.paginationBtn,\n          disabled: currentPage === 1,\n          onClick: () => setCurrentPage(p => p - 1),\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1964,\n          columnNumber: 11\n        }, this), Array.from({\n          length: totalPages\n        }, (_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n          style: i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn,\n          onClick: () => setCurrentPage(i + 1),\n          children: i + 1\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1969,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles.paginationBtn,\n          disabled: currentPage === totalPages,\n          onClick: () => setCurrentPage(p => p + 1),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1978,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1963,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1860,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.modalOverlay,\n      onClick: () => setShowModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.modal,\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.modalTitle,\n          children: isCopyMode ? \" Copy Product\" : \" Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1988,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGrid,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Product Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1993,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                required: true,\n                name: \"name\",\n                value: form.name,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1994,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1992,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Category *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1998,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                required: true,\n                name: \"category\",\n                value: form.category,\n                onChange: e => {\n                  handleChange(e);\n                  setForm(p => ({\n                    ...p,\n                    subcategory: \"\"\n                  }));\n                },\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2009,\n                  columnNumber: 21\n                }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c._id,\n                  children: c.name\n                }, c._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2011,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1999,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1997,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2019,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"subcategory\",\n                value: form.subcategory,\n                onChange: handleChange,\n                disabled: !subcategories.length,\n                style: styles.select,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2021,\n                  columnNumber: 21\n                }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: s._id,\n                  children: s.name\n                }, s._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2023,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2020,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2018,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Base Price *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2031,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                required: true,\n                name: \"basePrice\",\n                value: form.basePrice,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2032,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2030,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Difference\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2036,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"difference\",\n                value: form.difference,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2037,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2035,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Valid Till\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2041,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                name: \"validTill\",\n                value: form.validTill,\n                onChange: handleChange,\n                style: styles.input\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2042,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2040,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.formGroup,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: styles.label,\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2046,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleChange,\n                style: styles.fileInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2047,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2045,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1991,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formGroup,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.label,\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2052,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: form.description,\n              onChange: handleChange,\n              style: styles.textarea\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2053,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2051,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.formActions,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              style: styles.btnPrimary,\n              disabled: loading,\n              children: loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2057,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              style: styles.btnCancel,\n              onClick: () => {\n                setShowModal(false);\n                setEditId(null);\n                setIsCopyMode(false);\n                setForm({\n                  name: \"\",\n                  category: \"\",\n                  subcategory: \"\",\n                  description: \"\",\n                  basePrice: \"\",\n                  difference: \"\",\n                  validTill: \"\",\n                  file: null\n                });\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2061,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2056,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1990,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1987,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1986,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1485,\n    columnNumber: 5\n  }, this);\n}\n_s(PriceList, \"Hhzo9OF0IfAefbvnOxCS26a+/Rk=\");\n_c = PriceList;\nconst styles = {\n  container: {},\n  header: {},\n  title: {\n    fontSize: \"21px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    marginBottom: \"6px\"\n  },\n  subtitle: {\n    fontSize: \"16px\"\n  },\n  searchBar: {\n    maxWidth: \"320px\",\n    margin: \"0 auto 25px auto\"\n  },\n  searchInput: {\n    width: \"100%\",\n    padding: \"12px 15px\",\n    borderRadius: \"12px\",\n    border: \"1px solid #ced4da\",\n    background: \"#f9fbfc\",\n    fontSize: \"15px\",\n    outline: \"none\",\n    boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\"\n  },\n  addButtonWrapper: {\n    textAlign: \"left\",\n    marginBottom: \"25px\"\n  },\n  addButton: {\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"12px\",\n    padding: \"12px 24px\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    cursor: \"pointer\",\n    transition: \"0.25s ease\"\n  },\n  bulkBar: {\n    background: \"#e9f2ff\",\n    border: \"1px solid #c4d9ff\",\n    borderRadius: \"14px\",\n    padding: \"15px 18px\",\n    marginBottom: \"25px\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    flexWrap: \"wrap\",\n    gap: \"14px\",\n    boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\"\n  },\n  bulkText: {\n    fontSize: \"15px\",\n    fontWeight: \"600\",\n    color: \"#0d3b66\"\n  },\n  bulkPanel: {\n    width: \"100%\",\n    background: \"#f7faff\",\n    border: \"1px solid #cfe2ff\",\n    padding: \"20px\",\n    borderRadius: \"14px\",\n    marginTop: \"10px\",\n    boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\"\n  },\n  bulkPanelTitle: {\n    textAlign: \"center\",\n    fontSize: \"18px\",\n    fontWeight: \"700\",\n    marginBottom: \"15px\"\n  },\n  bulkItemBox: {\n    background: \"#ffffff\",\n    border: \"1px solid #dbe5f5\",\n    padding: \"18px\",\n    borderRadius: \"12px\",\n    marginBottom: \"16px\",\n    boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\"\n  },\n  bulkItemTitle: {\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    marginBottom: \"12px\",\n    color: \"#0d3b66\",\n    borderLeft: \"4px solid #007bff\",\n    paddingLeft: \"10px\"\n  },\n  formCard: {\n    borderRadius: \"16px\",\n    padding: \"25px\",\n    marginBottom: \"28px\",\n    background: \"#ffffff\",\n    boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\n    border: \"1px solid #eef2f7\"\n  },\n  formTitle: {\n    fontSize: \"21px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    marginBottom: \"15px\"\n  },\n  formGrid: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\n    gap: \"18px\"\n  },\n  formGroup: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"6px\"\n  },\n  label: {\n    fontWeight: \"600\",\n    fontSize: \"14px\",\n    color: \"#233142\"\n  },\n  input: {\n    padding: \"10px\",\n    borderRadius: \"10px\",\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    transition: \"0.2s ease\",\n    fontSize: \"14px\"\n  },\n  select: {\n    padding: \"10px\",\n    borderRadius: \"10px\",\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    transition: \"0.2s ease\",\n    fontSize: \"14px\"\n  },\n  textarea: {\n    padding: \"10px\",\n    borderRadius: \"10px\",\n    border: \"1px solid #cfd6e0\",\n    background: \"#f8fafc\",\n    transition: \"0.2s ease\",\n    resize: \"none\",\n    minHeight: \"80px\",\n    fontSize: \"14px\"\n  },\n  fileInput: {\n    padding: \"8px\",\n    fontSize: \"13px\"\n  },\n  categoryRow: {\n    display: \"flex\",\n    gap: \"10px\",\n    alignItems: \"center\"\n  },\n  addCategoryBox: {\n    gridColumn: \"1 / -1\",\n    background: \"#f1f7ff\",\n    border: \"1px solid #cfe1ff\",\n    padding: \"16px\",\n    borderRadius: \"12px\"\n  },\n  preview: {\n    width: \"110px\",\n    height: \"110px\",\n    borderRadius: \"12px\",\n    marginTop: \"10px\",\n    objectFit: \"cover\",\n    border: \"1px solid #b7c9e2\"\n  },\n  formActions: {\n    marginTop: \"15px\",\n    display: \"flex\",\n    gap: \"12px\",\n    flexWrap: \"wrap\"\n  },\n  btnPrimary: {\n    background: \"#007bff\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"10px\",\n    padding: \"9px 16px\",\n    cursor: \"pointer\",\n    transition: \"0.25s ease\"\n  },\n  btnSmall: {\n    background: \"#43a047\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"10px\",\n    padding: \"9px 16px\",\n    fontWeight: \"600\",\n    cursor: \"pointer\",\n    transition: \"0.25s ease\"\n  },\n  btnDelete: {\n    background: \"#e63946\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"10px\",\n    padding: \"9px 16px\",\n    fontWeight: \"600\",\n    cursor: \"pointer\",\n    transition: \"0.25s ease\"\n  },\n  btnCancel: {\n    background: \"#adb5bd\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"10px\",\n    padding: \"9px 16px\",\n    fontWeight: \"600\",\n    cursor: \"pointer\",\n    transition: \"0.25s ease\"\n  },\n  csvControls: {\n    borderRadius: \"12px\",\n    padding: \"16px\",\n    background: \"#f7faff\",\n    border: \"1px solid #d8e6ff\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    marginBottom: \"28px\",\n    flexWrap: \"wrap\",\n    gap: \"12px\"\n  },\n  tableCard: {},\n  tableHeader: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"15px\"\n  },\n  tableTitle: {\n    fontSize: \"21px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\"\n  },\n  totalCount: {\n    fontSize: \"15px\",\n    color: \"#6c757d\",\n    fontWeight: \"600\"\n  },\n  tableWrapper: {\n    overflowX: \"auto\"\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\",\n    fontSize: \"14px\"\n  },\n  th: {\n    background: \"#e9f2ff\",\n    padding: \"12px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    textAlign: \"left\",\n    whiteSpace: \"nowrap\"\n  },\n  tr: {\n    borderBottom: \"1px solid #edf2f7\"\n  },\n  td: {\n    padding: \"12px 10px\",\n    whiteSpace: \"nowrap\"\n  },\n  tableImg: {\n    width: \"55px\",\n    height: \"55px\",\n    borderRadius: \"8px\",\n    objectFit: \"cover\",\n    border: \"1px solid #cfd9e5\"\n  },\n  statusActive: {\n    background: \"#93d8ba\",\n    padding: \"7px 12px\",\n    borderRadius: \"8px\",\n    color: \"black\",\n    fontWeight: \"600\",\n    border: \"none\",\n    cursor: \"pointer\"\n  },\n  statusInactive: {\n    background: \"#d9b1b1\",\n    padding: \"7px 12px\",\n    borderRadius: \"8px\",\n    color: \"black\",\n    fontWeight: \"600\",\n    border: \"none\",\n    cursor: \"pointer\"\n  },\n  menuButton: {\n    background: \"#f0f0f0\",\n    border: \"none\",\n    borderRadius: \"6px\",\n    padding: \"6px 12px\",\n    fontSize: \"20px\",\n    fontWeight: \"bold\",\n    cursor: \"pointer\",\n    transition: \"0.2s ease\"\n  },\n  dropdown: {\n    position: \"absolute\",\n    right: \"0\",\n    top: \"35px\",\n    background: \"#fff\",\n    border: \"1px solid #ddd\",\n    borderRadius: \"8px\",\n    boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\n    zIndex: \"100\",\n    minWidth: \"140px\"\n  },\n  dropdownItem: {\n    display: \"block\",\n    width: \"100%\",\n    padding: \"10px 15px\",\n    background: \"transparent\",\n    border: \"none\",\n    textAlign: \"left\",\n    cursor: \"pointer\",\n    fontSize: \"14px\",\n    fontWeight: \"500\",\n    transition: \"0.2s ease\",\n    borderBottom: \"1px solid #f0f0f0\"\n  },\n  dropdownItemDelete: {\n    display: \"block\",\n    width: \"100%\",\n    padding: \"10px 15px\",\n    background: \"transparent\",\n    border: \"none\",\n    textAlign: \"left\",\n    cursor: \"pointer\",\n    fontSize: \"14px\",\n    fontWeight: \"500\",\n    color: \"#e63946\",\n    transition: \"0.2s ease\"\n  },\n  pagination: {\n    marginTop: \"18px\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    gap: \"10px\",\n    flexWrap: \"wrap\"\n  },\n  paginationBtn: {\n    padding: \"9px 13px\",\n    borderRadius: \"8px\",\n    background: \"#fff\",\n    border: \"1px solid #ddd\",\n    cursor: \"pointer\",\n    fontSize: \"14px\"\n  },\n  paginationBtnActive: {\n    padding: \"9px 13px\",\n    borderRadius: \"8px\",\n    background: \"#007bff\",\n    color: \"white\",\n    border: \"1px solid #0062cc\",\n    cursor: \"pointer\",\n    fontSize: \"14px\"\n  },\n  modalOverlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    background: \"rgba(0, 0, 0, 0.5)\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    zIndex: \"1000\",\n    padding: \"20px\"\n  },\n  modal: {\n    background: \"#fff\",\n    borderRadius: \"16px\",\n    padding: \"30px\",\n    maxWidth: \"700px\",\n    width: \"100%\",\n    maxHeight: \"90vh\",\n    overflowY: \"auto\",\n    boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\"\n  },\n  modalTitle: {\n    fontSize: \"22px\",\n    fontWeight: \"700\",\n    color: \"#0d3b66\",\n    marginBottom: \"20px\",\n    textAlign: \"center\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsxDEV","_jsxDEV","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","isMobile","setIsMobile","window","innerWidth","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","difference","validTill","file","editId","setEditId","isCopyMode","setIsCopyMode","showForm","setShowForm","showModal","setShowModal","activeMenu","setActiveMenu","addingCategory","setAddingCategory","newCategoryName","setNewCategoryName","newCategoryImage","setNewCategoryImage","newCategoryPreview","setNewCategoryPreview","addingSub","setAddingSub","newSubName","setNewSubName","newSubImage","setNewSubImage","newSubPreview","setNewSubPreview","selectedItems","setSelectedItems","bulkMode","setBulkMode","csvFile","setCsvFile","csvInputRef","currentPage","setCurrentPage","itemsPerPage","filterCategory","setFilterCategory","filterSubcategory","setFilterSubcategory","filterSubs","setFilterSubs","cat","find","c","_id","fetchCategories","length","fetchItems","handleResize","addEventListener","removeEventListener","res","get","data","success","raw","enriched","map","item","_cat$subcategories","_item$category","sub","s","_item$subcategory","err","console","error","alert","prev","subs","exists","some","handleCreateCategory","trim","fd","FormData","append","post","handleCreateSub","handleChange","e","value","files","target","p","handleSubmit","preventDefault","Object","keys","forEach","k","val","undefined","put","handleEdit","_item$category2","_item$category2$_id","_item$subcategory2","_item$subcategory2$_i","_item$basePrice","_item$difference","toString","split","_item$category3","handleCopyToEdit","_item$category4","_item$category4$_id","_item$subcategory3","_item$subcategory3$_i","_item$basePrice2","_item$difference2","_item$category5","handleDelete","id","confirm","delete","filter","x","handleStatusToggle","newStatus","status","handleBulkDelete","Promise","all","updateLocalItemField","key","handleBulkSave","updates","includes","products","handleCsvSelect","handleImportCsv","inserted","current","handleExportCsv","header","rows","_p$category","_p$subcategory","_p$basePrice","_p$difference","Number","Date","toISOString","image","csvArray","csvContent","r","String","replace","join","encodedUri","encodeURI","link","document","createElement","href","download","now","click","handleExportSelectedCsv","selectedData","_p$category2","_p$subcategory2","_p$basePrice2","_p$difference2","indexOfLast","currentItems","filteredItems","slice","totalPages","Math","max","ceil","style","styles","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","className","type","placeholder","onChange","searchInput","addButton","onClick","disabled","btnDelete","btnPrimary","bulkPanel","bulkPanelTitle","_item$category6","_item$subcategory4","_categories$find","_categories$find$subc","bulkItemBox","bulkItemTitle","formGrid","formGroup","label","input","_catObj$subcategories","_catObj$subcategories2","newCat","catObj","firstSub","select","_item$category7","display","gap","marginTop","btnCancel","formCard","formTitle","onSubmit","required","categoryRow","btnSmall","v","addCategoryBox","accept","URL","createObjectURL","fileInput","src","preview","alt","textarea","formActions","ref","tableCard","tableHeader","tableTitle","totalCount","tableWrapper","table","th","checked","i","_item$category8","_item$subcategory5","tr","td","tableImg","statusActive","statusInactive","toLocaleDateString","position","menuButton","dropdown","dropdownItem","dropdownItemDelete","pagination","paginationBtn","Array","from","_","paginationBtnActive","modalOverlay","modal","stopPropagation","modalTitle","_c","fontSize","fontWeight","color","marginBottom","subtitle","searchBar","maxWidth","margin","width","padding","borderRadius","border","background","outline","boxShadow","addButtonWrapper","textAlign","cursor","transition","bulkBar","justifyContent","alignItems","flexWrap","bulkText","borderLeft","paddingLeft","gridTemplateColumns","flexDirection","resize","minHeight","gridColumn","height","objectFit","csvControls","overflowX","borderCollapse","whiteSpace","borderBottom","right","top","zIndex","minWidth","left","bottom","maxHeight","overflowY","$RefreshReg$"],"sources":["E:/infyle/Grocerry_final/frontend/src/pages/PriceList.jsx"],"sourcesContent":["\r\n\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   // DATA\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n\r\n//   // UI state\r\n//   const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // FORM state\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     difference: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [isCopyMode, setIsCopyMode] = useState(false);\r\n\r\n//   // category/subcategory add UI\r\n//   const [addingCategory, setAddingCategory] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n//   const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n//   const [addingSub, setAddingSub] = useState(false);\r\n//   const [newSubName, setNewSubName] = useState(\"\");\r\n//   const [newSubImage, setNewSubImage] = useState(null);\r\n//   const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n//   // bulk\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   // csv import\r\n//   const [csvFile, setCsvFile] = useState(null);\r\n//   const csvInputRef = useRef();\r\n\r\n//   // pagination\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   // -------------------- FETCH --------------------\r\n//   useEffect(() => {\r\n//     fetchItems();\r\n//     fetchCategories();\r\n\r\n//     const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n//     window.addEventListener(\"resize\", handleResize);\r\n//     return () => window.removeEventListener(\"resize\", handleResize);\r\n//     // eslint-disable-next-line\r\n//   }, []);\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data && res.data.success) setItems(res.data.data || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       alert(\"Could not fetch items\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       alert(\"Could not fetch categories\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- SUBCATEGORY AUTO LOAD --------------------\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     const subs = (cat && cat.subcategories) || [];\r\n//     setSubcategories(subs);\r\n\r\n//     // keep current subcategory if exists in new subs, otherwise reset\r\n//     const exists = subs.some((s) => s._id === form.subcategory);\r\n//     if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//   }, [form.category, categories]);\r\n\r\n//   // -------------------- CREATE CATEGORY --------------------\r\n//   const handleCreateCategory = async () => {\r\n//     if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newCategoryName.trim());\r\n//       if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n//       const res = await axios.post(CATEGORY_URL, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Category created\");\r\n//         setNewCategoryName(\"\");\r\n//         setNewCategoryImage(null);\r\n//         setNewCategoryPreview(null);\r\n//         setAddingCategory(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Category creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create category error\", err);\r\n//       alert(\"Category creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- CREATE SUBCATEGORY --------------------\r\n//   const handleCreateSub = async () => {\r\n//     if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n//     if (!form.category) return alert(\"Select category first\");\r\n\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", newSubName.trim());\r\n//       if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n//       const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(\"Subcategory created\");\r\n//         setNewSubName(\"\");\r\n//         setNewSubImage(null);\r\n//         setNewSubPreview(null);\r\n//         setAddingSub(false);\r\n//         fetchCategories();\r\n//       } else {\r\n//         alert(\"Subcategory creation failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Create sub error\", err);\r\n//       alert(\"Subcategory creation failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- FORM HANDLING --------------------\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files && files.length) {\r\n//       // file input (both image for product and category/sub)\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- SUBMIT (ADD / UPDATE / COPY) --------------------\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       // append all keys (including 0 or empty string when necessary)\r\n//       Object.keys(form).forEach((k) => {\r\n//         const val = form[k];\r\n//         if (val !== undefined && val !== null) {\r\n//           fd.append(k, val);\r\n//         }\r\n//       });\r\n\r\n//       let res;\r\n//       if (isCopyMode) {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Copied as new item\");\r\n//       } else if (editId) {\r\n//         res = await axios.put(`${API_URL}/${editId}`, fd);\r\n//         alert(\"Updated\");\r\n//       } else {\r\n//         res = await axios.post(API_URL, fd);\r\n//         alert(\"Added\");\r\n//       }\r\n\r\n//       // refresh\r\n//       await fetchItems();\r\n//       await fetchCategories();\r\n\r\n//       // reset\r\n//       setForm({\r\n//         name: \"\",\r\n//         category: \"\",\r\n//         subcategory: \"\",\r\n//         description: \"\",\r\n//         basePrice: \"\",\r\n//         difference: \"\",\r\n//         validTill: \"\",\r\n//         file: null,\r\n//       });\r\n//       setEditId(null);\r\n//       setIsCopyMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- EDIT --------------------\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       difference: item.difference ?? \"\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     // preload subs for better UX\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(item._id);\r\n//     setIsCopyMode(false);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // -------------------- COPY --------------------\r\n//   const handleCopyToEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id?.toString() || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice ?? \"\",\r\n//       difference: item.difference ?? \"\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(null);\r\n//     setIsCopyMode(true);\r\n//     window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n//   };\r\n\r\n//   // -------------------- DELETE --------------------\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       alert(\"Delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- STATUS TOGGLE --------------------\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       alert(\"Status update failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- BULK --------------------\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         name: x.name,\r\n//         basePrice: x.basePrice,\r\n//         difference: x.difference,\r\n//         validTill: x.validTill,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       alert(\"Bulk save failed\");\r\n//     }\r\n//   };\r\n\r\n//   // -------------------- CSV IMPORT/EXPORT --------------------\r\n//   const handleCsvSelect = (e) => {\r\n//     setCsvFile(e.target.files[0]);\r\n//   };\r\n\r\n//   const handleImportCsv = async () => {\r\n//     if (!csvFile) return alert(\"Select CSV file\");\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"file\", csvFile);\r\n//       const res = await axios.post(`${API_URL}/import`, fd);\r\n//       if (res.data && res.data.success) {\r\n//         alert(`Imported ${res.data.inserted || 0} items`);\r\n//         setCsvFile(null);\r\n//         if (csvInputRef.current) csvInputRef.current.value = null;\r\n//         fetchItems();\r\n//       } else {\r\n//         alert(\"CSV import failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"CSV import error\", err);\r\n//       alert(\"CSV import failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleExportCsv = async () => {\r\n//     try {\r\n//       const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"prices.csv\";\r\n//       a.click();\r\n//       URL.revokeObjectURL(url);\r\n//     } catch (err) {\r\n//       console.error(\"CSV export error\", err);\r\n//       alert(\"CSV export failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleExportSelectedCsv = () => {\r\n//     if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n//     const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n//     const header = [\r\n//       \"id\",\r\n//       \"name\",\r\n//       \"categoryName\",\r\n//       \"subcategoryName\",\r\n//       \"basePrice\",\r\n//       \"difference\",\r\n//       \"finalPrice\",\r\n//       \"status\",\r\n//       \"validTill\",\r\n//       \"description\",\r\n//       \"imageUrl\",\r\n//     ];\r\n\r\n//     const rows = selectedData.map((p) => [\r\n//       p._id,\r\n//       p.name || \"\",\r\n//       p.category?.name || \"\",\r\n//       p.subcategory?.name || \"\",\r\n//       p.basePrice ?? \"\",\r\n//       p.difference ?? \"\",\r\n//       (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n//       p.status || \"\",\r\n//       p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n//       p.description || \"\",\r\n//       p.image || \"\",\r\n//     ]);\r\n\r\n//     const csvArray = [header, ...rows];\r\n//     const csvContent =\r\n//       \"data:text/csv;charset=utf-8,\" +\r\n//       csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n//     const encodedUri = encodeURI(csvContent);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = encodedUri;\r\n//     link.download = `selected_prices_${Date.now()}.csv`;\r\n//     link.click();\r\n//   };\r\n\r\n//   // -------------------- SEARCH & PAGINATION --------------------\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     return (\r\n//       (item.name || \"\").toString().toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t)\r\n//     );\r\n//   });\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n//   // -------------------- RENDER --------------------\r\n//   return (\r\n//     <div className=\"price-container\">\r\n//       {/* HEADER */}\r\n//       <div className=\"header-section\">\r\n//         <h1>üí∞ Product Management</h1>\r\n//         <p>Manage prices, categories, images, CSV & bulk actions.</p>\r\n//       </div>\r\n\r\n//       {/* SEARCH */}\r\n//       <div className=\"search-bar\">\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product, category or subcategory...\"\r\n//           value={search}\r\n//           onChange={(e) => {\r\n//             setSearch(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//         />\r\n//       </div>\r\n\r\n//       {/* BULK BAR */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-bar\">\r\n//           <span>{selectedItems.length} selected</span>\r\n\r\n//           {!bulkMode ? (\r\n//             <div className=\"bulk-actions\" style={{ display: \"flex\", gap: 10 }}>\r\n//               <button className=\"btn delete\" onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n\r\n//               <button className=\"btn primary\" onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n\r\n\r\n//               <button className=\"btn small\" onClick={handleExportSelectedCsv}>\r\n//                 ‚§ì Export Selected\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div className=\"bulk-panel\">\r\n//               <h3>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} className=\"bulk-edit-item-box\">\r\n//                     <h4>{item.name}</h4>\r\n\r\n//                     <div className=\"form-grid\">\r\n//                       <div className=\"form-group\">\r\n//                         <label>Name</label>\r\n//                         <input\r\n//                           type=\"text\"\r\n//                           value={item.name}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div className=\"form-group\">\r\n//                         <label>Base Price</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.basePrice}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n//                           <div className=\"form-group\">\r\n//   <label>Category</label>\r\n//   <select\r\n//     value={item.category?._id || \"\"}\r\n//     onChange={(e) => {\r\n//       const newCat = e.target.value;\r\n\r\n//       updateLocalItemField(item._id, \"category\", { _id: newCat });\r\n\r\n//       const catObj = categories.find((c) => c._id === newCat);\r\n//       const firstSub = catObj?.subcategories?.[0]?._id || \"\";\r\n\r\n//       updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\r\n//     }}\r\n//   >\r\n//     <option value=\"\">Select Category</option>\r\n//     {categories.map((c) => (\r\n//       <option key={c._id} value={c._id}>\r\n//         {c.name}\r\n//       </option>\r\n//     ))}\r\n//   </select>\r\n// </div>\r\n\r\n// <div className=\"form-group\">\r\n//   <label>Subcategory</label>\r\n//   <select\r\n//     value={item.subcategory?._id || \"\"}\r\n//     onChange={(e) =>\r\n//       updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\r\n//     }\r\n//   >\r\n//     <option value=\"\">Select Subcategory</option>\r\n\r\n//     {categories\r\n//       .find((c) => c._id === item.category?._id)\r\n//       ?.subcategories?.map((s) => (\r\n//         <option key={s._id} value={s._id}>\r\n//           {s.name}\r\n//         </option>\r\n//       ))}\r\n//   </select>\r\n// </div>\r\n//                       <div className=\"form-group\">\r\n//                         <label>Difference</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.difference || 0}\r\n//                           onChange={(e) =>\r\n//                             updateLocalItemField(item._id, \"difference\", Number(e.target.value))\r\n//                           }\r\n//                         />\r\n//                       </div>\r\n\r\n//                       {/* <div className=\"form-group\">\r\n//                         <label>Valid Till</label>\r\n//                         <input\r\n//                           type=\"date\"\r\n//                           value={item.validTill ? item.validTill.split(\"T\")[0] : \"\"}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"validTill\", e.target.value)}\r\n//                         />\r\n//                       </div> */}\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n//                 <button className=\"btn primary\" onClick={handleBulkSave}>\r\n//                   ‚úî Save All\r\n//                 </button>\r\n//                 <button className=\"btn cancel\" onClick={() => setBulkMode(false)}>\r\n//                   ‚úñ Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* FORM */}\r\n//       <div className=\"price-form-card\">\r\n//         <h2>{isCopyMode ? \"üìÑ Save Duplicate Product\" : editId ? \"‚úè Update Product\" : \"‚ûï Add Product\"}</h2>\r\n\r\n//         <form onSubmit={handleSubmit}>\r\n//           <div className=\"form-grid\">\r\n//             {/* NAME */}\r\n//             <div className=\"form-group\">\r\n//               <label>Product Name *</label>\r\n//               <input required name=\"name\" value={form.name} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* CATEGORY */}\r\n//             <div className=\"form-group\">\r\n//               <label>Category *</label>\r\n//               <div className=\"category-row\">\r\n//                 <select\r\n//                   required\r\n//                   name=\"category\"\r\n//                   value={form.category}\r\n//                   onChange={(e) => {\r\n//                     handleChange(e);\r\n//                     // reset subcategory on category change (useEffect will set subs)\r\n//                     setForm((p) => ({ ...p, subcategory: \"\" }));\r\n//                   }}\r\n//                 >\r\n//                   <option value=\"\">Select Category</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 <button type=\"button\" className=\"btn small\" onClick={() => setAddingCategory((v) => !v)}>\r\n//                   {addingCategory ? \"Close\" : \"Add\"}\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {/* ADD CATEGORY UI */}\r\n//             {addingCategory && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>Add New Category</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input\r\n//                     value={newCategoryName}\r\n//                     onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                     placeholder=\"Category name\"\r\n//                   />\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewCategoryImage(e.target.files[0]);\r\n//                       setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                     }}\r\n//                   />\r\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateCategory}>\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//                 {newCategoryPreview && <img src={newCategoryPreview} className=\"categoryPreview\" alt=\"preview\" />}\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* SUBCATEGORY */}\r\n//             <div className=\"form-group\">\r\n//               <label>Subcategory</label>\r\n//               <div className=\"category-row\">\r\n//                 <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length}>\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (\r\n//                     <option value={s._id} key={s._id}>\r\n//                       {s.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n\r\n//                 {form.category && (\r\n//                   <button type=\"button\" className=\"btn small\" onClick={() => setAddingSub((v) => !v)}>\r\n//                     {addingSub ? \"Close\" : \"Add\"}\r\n//                   </button>\r\n//                 )}\r\n//               </div>\r\n//             </div>\r\n\r\n//             {/* ADD SUBCATEGORY UI */}\r\n//             {addingSub && (\r\n//               <div className=\"form-group full-width addCategoryBox\">\r\n//                 <label>Add New Subcategory</label>\r\n//                 <div className=\"category-row\">\r\n//                   <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" />\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\"image/*\"\r\n//                     onChange={(e) => {\r\n//                       setNewSubImage(e.target.files[0]);\r\n//                       setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n//                     }}\r\n//                   />\r\n//                   <button className=\"btn primary\" type=\"button\" onClick={handleCreateSub}>\r\n//                     Create\r\n//                   </button>\r\n//                 </div>\r\n//                 {newSubPreview && <img src={newSubPreview} className=\"categoryPreview\" alt=\"preview\" />}\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* BASE PRICE */}\r\n//             <div className=\"form-group\">\r\n//               <label>Base Price *</label>\r\n//               <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* DIFFERENCE */}\r\n//             <div className=\"form-group\">\r\n//               <label>Difference</label>\r\n//               <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* VALID TILL */}\r\n//             <div className=\"form-group\">\r\n//               <label>Valid Till</label>\r\n//               <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} />\r\n//             </div>\r\n\r\n//             {/* IMAGE */}\r\n//             <div className=\"form-group\">\r\n//               <label>Image</label>\r\n//               <input type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* DESCRIPTION */}\r\n//           <div className=\"form-group full-width\">\r\n//             <label>Description</label>\r\n//             <textarea name=\"description\" value={form.description} onChange={handleChange}></textarea>\r\n//           </div>\r\n\r\n//           {/* ACTIONS */}\r\n//           <div className=\"form-actions\">\r\n//             <button className=\"btn primary\" disabled={loading}>\r\n//               {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : editId ? \"Update\" : \"Add\"}\r\n//             </button>\r\n\r\n//             {(editId || isCopyMode) && (\r\n//               <button\r\n//                 type=\"button\"\r\n//                 className=\"btn cancel\"\r\n//                 onClick={() => {\r\n//                   setEditId(null);\r\n//                   setIsCopyMode(false);\r\n//                   setForm({\r\n//                     name: \"\",\r\n//                     category: \"\",\r\n//                     subcategory: \"\",\r\n//                     description: \"\",\r\n//                     basePrice: \"\",\r\n//                     difference: \"\",\r\n//                     validTill: \"\",\r\n//                     file: null,\r\n//                   });\r\n//                 }}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         </form>\r\n//       </div>\r\n\r\n//       {/* CSV CONTROLS */}\r\n//       <div className=\"csv-controls\">\r\n//         <div>\r\n//           <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} />\r\n//           <button className=\"btn small\" onClick={handleImportCsv}>\r\n//             Import CSV\r\n//           </button>\r\n//         </div>\r\n\r\n//         <div style={{ display: \"flex\", gap: 8 }}>\r\n//           <button className=\"btn primary\" onClick={handleExportCsv}>\r\n//             Export All CSV\r\n//           </button>\r\n\r\n//           <button className=\"btn\" onClick={handleExportSelectedCsv}>\r\n//             Export Selected CSV\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* TABLE */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <h2>üìã Items</h2>\r\n//           <span>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         {!isMobile ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th>Sr</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Subcategory</th>\r\n//                 <th>Base</th>\r\n//                 <th>Diff</th>\r\n//                 <th>Final</th>\r\n//                 <th>Status</th>\r\n//                 <th>Valid Till</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td>{item.image ? <img src={item.image} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n//                   <td>{item.name}</td>\r\n//                   <td>{item.category?.name || \"-\"}</td>\r\n//                   <td>{item.subcategory?.name || \"-\"}</td>\r\n\r\n//                   <td>‚Çπ{item.basePrice}</td>\r\n//                   <td>{item.difference || 0}</td>\r\n//                   <td>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n//                   <td>\r\n//                     <button\r\n//                       className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \" Active\" : \" Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   <td>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n//                   <td className=\"actions\">\r\n//                     <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                       Edit\r\n//                     </button>\r\n\r\n//                     <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                       Delete\r\n//                     </button>\r\n\r\n//                     <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\r\n//                       Copy\r\n//                     </button>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <div className=\"mobile-list\">\r\n//             {currentItems.map((item) => (\r\n//               <div key={item._id} className=\"mobile-card\">\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   checked={selectedItems.includes(item._id)}\r\n//                   onChange={() =>\r\n//                     setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n//                   }\r\n//                 />\r\n\r\n//                 {item.image ? <img src={item.image} alt=\"\" /> : <div>No Image</div>}\r\n\r\n//                 <h3>{item.name}</h3>\r\n\r\n//                 <p>\r\n//                   <b>Category:</b> {item.category?.name || \"-\"}\r\n//                 </p>\r\n\r\n//                 <p>\r\n//                   <b>Subcategory:</b> {item.subcategory?.name || \"-\"}\r\n//                 </p>\r\n\r\n//                 <p>\r\n//                   <b>Base:</b> ‚Çπ{item.basePrice}\r\n//                 </p>\r\n\r\n//                 <p>\r\n//                   <b>Final:</b> ‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}\r\n//                 </p>\r\n\r\n//                 <button className={item.status === \"active\" ? \"status-active\" : \"status-inactive\"} onClick={() => handleStatusToggle(item)}>\r\n//                   {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                 </button>\r\n\r\n//                 <div className=\"actions\">\r\n//                   <button className=\"btn edit\" onClick={() => handleEdit(item)}>\r\n//                     Edit\r\n//                   </button>\r\n\r\n//                   <button className=\"btn delete\" onClick={() => handleDelete(item._id)}>\r\n//                     Delete\r\n//                   </button>\r\n\r\n//                   <button className=\"btn small\" style={{ background: \"#6f42c1\", color: \"white\" }} onClick={() => handleCopyToEdit(item)}>\r\n//                     Copy\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* PAGINATION */}\r\n//         <div className=\"pagination\">\r\n//           <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }, (_, i) => (\r\n//             <button key={i} className={i + 1 === currentPage ? \"active-page\" : \"\"} onClick={() => setCurrentPage(i + 1)}>\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\"\r\nconst API_URL = \"https://grocerrybackend.vercel.app/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.vercel.app/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // FORM state\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    difference: \"\",\r\n    validTill: \"\",\r\n    file: null,\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [isCopyMode, setIsCopyMode] = useState(false);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n  const [addingCategory, setAddingCategory] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n  const [newCategoryImage, setNewCategoryImage] = useState(null);\r\n  const [newCategoryPreview, setNewCategoryPreview] = useState(null);\r\n\r\n  const [addingSub, setAddingSub] = useState(false);\r\n  const [newSubName, setNewSubName] = useState(\"\");\r\n  const [newSubImage, setNewSubImage] = useState(null);\r\n  const [newSubPreview, setNewSubPreview] = useState(null);\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  const [csvFile, setCsvFile] = useState(null);\r\n  const csvInputRef = useRef();\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  const [filterCategory, setFilterCategory] = useState(\"\");\r\nconst [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\nconst [filterSubs, setFilterSubs] = useState([]);\r\n\r\nuseEffect(() => {\r\n  if (!filterCategory) {\r\n    setFilterSubs([]);\r\n    setFilterSubcategory(\"\");\r\n    return;\r\n  }\r\n\r\n  const cat = categories.find(c => c._id === filterCategory);\r\n  setFilterSubs(cat?.subcategories || []);\r\n  setFilterSubcategory(\"\");\r\n}, [filterCategory, categories]);\r\n\r\n\r\n  // useEffect(() => {\r\n  //   fetchItems();\r\n  //   fetchCategories();\r\n\r\n  //   const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n  //   window.addEventListener(\"resize\", handleResize);\r\n  //   return () => window.removeEventListener(\"resize\", handleResize);\r\n  // }, []);\r\n  // 1. Pehle categories load karo\r\nuseEffect(() => {\r\n  fetchCategories();\r\n}, []);\r\n\r\n// 2. Categories load hone ke baad items load karo\r\nuseEffect(() => {\r\n  if (categories.length > 0) {\r\n    fetchItems();\r\n  }\r\n}, [categories]);\r\n\r\n// 3. Resize listener\r\nuseEffect(() => {\r\n  const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n  window.addEventListener(\"resize\", handleResize);\r\n  return () => window.removeEventListener(\"resize\", handleResize);\r\n}, []);\r\n\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n      // if (res.data && res.data.success) setItems(res.data.data || []);\r\n      if (res.data && res.data.success) {\r\n  const raw = res.data.data;\r\n\r\n  // Agar categories abhi load nahi hui = raw items set\r\n  if (!categories.length) {\r\n    setItems(raw);\r\n    return;\r\n  }\r\n\r\n  // Mapping to category + subcategory object\r\n  const enriched = raw.map((item) => {\r\n    const cat = categories.find(\r\n      (c) =>\r\n        c._id === item.category ||\r\n        c._id === item.category?._id\r\n    );\r\n\r\n    const sub = cat?.subcategories?.find(\r\n      (s) =>\r\n        s._id === item.subcategory ||\r\n        s._id === item.subcategory?._id\r\n    );\r\n\r\n    return {\r\n      ...item,\r\n      category: cat\r\n        ? { _id: cat._id, name: cat.name }\r\n        : item.category,\r\n\r\n      subcategory: sub\r\n        ? { _id: sub._id, name: sub.name }\r\n        : item.subcategory,\r\n    };\r\n  });\r\n\r\n  setItems(enriched);\r\n}\r\n\r\n    } catch (err) {\r\n      console.error(\"Fetch items error\", err);\r\n      alert(\"Could not fetch items\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data && res.data.success) setCategories(res.data.categories || []);\r\n    } catch (err) {\r\n      console.error(\"Fetch categories error\", err);\r\n      alert(\"Could not fetch categories\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!form.category) {\r\n      setSubcategories([]);\r\n      setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n      return;\r\n    }\r\n\r\n    const cat = categories.find((c) => c._id === form.category);\r\n    const subs = (cat && cat.subcategories) || [];\r\n    setSubcategories(subs);\r\n\r\n    const exists = subs.some((s) => s._id === form.subcategory);\r\n    if (!exists) setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n  }, [form.category, categories]);\r\n\r\n  const handleCreateCategory = async () => {\r\n    if (!newCategoryName.trim()) return alert(\"Enter category name\");\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"name\", newCategoryName.trim());\r\n      if (newCategoryImage) fd.append(\"image\", newCategoryImage);\r\n\r\n      const res = await axios.post(CATEGORY_URL, fd);\r\n      if (res.data && res.data.success) {\r\n        alert(\"Category created\");\r\n        setNewCategoryName(\"\");\r\n        setNewCategoryImage(null);\r\n        setNewCategoryPreview(null);\r\n        setAddingCategory(false);\r\n        fetchCategories();\r\n      } else {\r\n        alert(\"Category creation failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Create category error\", err);\r\n      alert(\"Category creation failed\");\r\n    }\r\n  };\r\n\r\n  const handleCreateSub = async () => {\r\n    if (!newSubName.trim()) return alert(\"Enter subcategory name\");\r\n    if (!form.category) return alert(\"Select category first\");\r\n\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"name\", newSubName.trim());\r\n      if (newSubImage) fd.append(\"image\", newSubImage);\r\n\r\n      const res = await axios.post(`${CATEGORY_URL}/${form.category}/sub`, fd);\r\n      if (res.data && res.data.success) {\r\n        alert(\"Subcategory created\");\r\n        setNewSubName(\"\");\r\n        setNewSubImage(null);\r\n        setNewSubPreview(null);\r\n        setAddingSub(false);\r\n        fetchCategories();\r\n      } else {\r\n        alert(\"Subcategory creation failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Create sub error\", err);\r\n      alert(\"Subcategory creation failed\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files && files.length) {\r\n      setForm((p) => ({ ...p, file: files[0] }));\r\n    } else {\r\n      setForm((p) => ({ ...p, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!form.name || !form.category || !form.basePrice) {\r\n        alert(\"Name, category & base price are required\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const fd = new FormData();\r\n      Object.keys(form).forEach((k) => {\r\n        const val = form[k];\r\n        if (val !== undefined && val !== null) {\r\n          fd.append(k, val);\r\n        }\r\n      });\r\n\r\n      let res;\r\n      if (isCopyMode) {\r\n        res = await axios.post(API_URL, fd);\r\n        alert(\"Copied as new item\");\r\n      } else if (editId) {\r\n        res = await axios.put(`${API_URL}/${editId}`, fd);\r\n        alert(\"Updated\");\r\n      } else {\r\n        res = await axios.post(API_URL, fd);\r\n        alert(\"Added\");\r\n      }\r\n\r\n      await fetchItems();\r\n      await fetchCategories();\r\n\r\n      setForm({\r\n        name: \"\",\r\n        category: \"\",\r\n        subcategory: \"\",\r\n        description: \"\",\r\n        basePrice: \"\",\r\n        difference: \"\",\r\n        validTill: \"\",\r\n        file: null,\r\n      });\r\n      setEditId(null);\r\n      setIsCopyMode(false);\r\n      setShowModal(false);\r\n      setShowForm(false);\r\n    } catch (err) {\r\n      console.error(\"Save error\", err);\r\n      alert(\"Save failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id?.toString() || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice ?? \"\",\r\n      difference: item.difference ?? \"\",\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n\r\n    setEditId(item._id);\r\n    setIsCopyMode(false);\r\n    setShowModal(true);\r\n    setActiveMenu(null);\r\n  };\r\n\r\n  const handleCopyToEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id?.toString() || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice ?? \"\",\r\n      difference: item.difference ?? \"\",\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n\r\n    setEditId(null);\r\n    setIsCopyMode(true);\r\n    setShowModal(true);\r\n    setActiveMenu(null);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete item?\")) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      setItems((prev) => prev.filter((x) => x._id !== id));\r\n      setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n      setActiveMenu(null);\r\n    } catch (err) {\r\n      console.error(\"Delete error\", err);\r\n      alert(\"Delete failed\");\r\n    }\r\n  };\r\n\r\n  const handleStatusToggle = async (item) => {\r\n    try {\r\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n      await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n      setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n    } catch (err) {\r\n      console.error(\"Status toggle error\", err);\r\n      alert(\"Status update failed\");\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected\");\r\n    if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n    try {\r\n      await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n      setBulkMode(false);\r\n    } catch (err) {\r\n      console.error(\"Bulk delete error\", err);\r\n      alert(\"Bulk delete failed\");\r\n    }\r\n  };\r\n\r\n  const updateLocalItemField = (id, key, value) => {\r\n    setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n  };\r\n\r\n  const handleBulkSave = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected for bulk save\");\r\n\r\n    const updates = items\r\n      .filter((x) => selectedItems.includes(x._id))\r\n      .map((x) => ({\r\n        id: x._id,\r\n        name: x.name,\r\n        basePrice: x.basePrice,\r\n        difference: x.difference,\r\n        validTill: x.validTill,\r\n      }));\r\n\r\n    try {\r\n      await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n      setBulkMode(false);\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"Bulk save error\", err);\r\n      alert(\"Bulk save failed\");\r\n    }\r\n  };\r\n\r\n  const handleCsvSelect = (e) => {\r\n    setCsvFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleImportCsv = async () => {\r\n    if (!csvFile) return alert(\"Select CSV file\");\r\n    try {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", csvFile);\r\n      const res = await axios.post(`${API_URL}/import`, fd);\r\n      if (res.data && res.data.success) {\r\n        alert(`Imported ${res.data.inserted || 0} items`);\r\n        setCsvFile(null);\r\n        if (csvInputRef.current) csvInputRef.current.value = null;\r\n        fetchItems();\r\n      } else {\r\n        alert(\"CSV import failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"CSV import error\", err);\r\n      alert(\"CSV import failed\");\r\n    }\r\n  };\r\n\r\n  // const handleExportCsv = async () => {\r\n  //   try {\r\n  //     const res = await axios.get(`${API_URL}/export`, { responseType: \"blob\" });\r\n  //     const url = window.URL.createObjectURL(new Blob([res.data]));\r\n  //     const a = document.createElement(\"a\");\r\n  //     a.href = url;\r\n  //     a.download = \"prices.csv\";\r\n  //     a.click();\r\n  //     URL.revokeObjectURL(url);\r\n  //   } catch (err) {\r\n  //     console.error(\"CSV export error\", err);\r\n  //     alert(\"CSV export failed\");\r\n  //   }\r\n  // };\r\nconst handleExportCsv = () => {\r\n  if (!items.length) return alert(\"No items to export\");\r\n\r\n  const header = [\r\n    \"id\",\r\n    \"name\",\r\n    \"categoryName\",\r\n    \"subcategoryName\",\r\n    \"basePrice\",\r\n    \"difference\",\r\n    \"finalPrice\",\r\n    \"status\",\r\n    \"validTill\",\r\n    \"description\",\r\n    \"imageUrl\",\r\n  ];\r\n\r\n  const rows = items.map((p) => [\r\n    p._id,\r\n    p.name || \"\",\r\n    p.category?.name || \"\",\r\n    p.subcategory?.name || \"\",\r\n    p.basePrice ?? \"\",\r\n    p.difference ?? \"\",\r\n    (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n    p.status || \"\",\r\n    p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n    p.description || \"\",\r\n    p.image || \"\",\r\n  ]);\r\n\r\n  const csvArray = [header, ...rows];\r\n  const csvContent =\r\n    \"data:text/csv;charset=utf-8,\" +\r\n    csvArray\r\n      .map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n      .join(\"\\n\");\r\n\r\n  const encodedUri = encodeURI(csvContent);\r\n  const link = document.createElement(\"a\");\r\n  link.href = encodedUri;\r\n  link.download = `all_prices_${Date.now()}.csv`;\r\n  link.click();\r\n};\r\n\r\n  const handleExportSelectedCsv = () => {\r\n    if (!selectedItems.length) return alert(\"Select items to export\");\r\n\r\n    const selectedData = items.filter((x) => selectedItems.includes(x._id));\r\n    const header = [\r\n      \"id\",\r\n      \"name\",\r\n      \"categoryName\",\r\n      \"subcategoryName\",\r\n      \"basePrice\",\r\n      \"difference\",\r\n      \"finalPrice\",\r\n      \"status\",\r\n      \"validTill\",\r\n      \"description\",\r\n      \"imageUrl\",\r\n    ];\r\n\r\n    const rows = selectedData.map((p) => [\r\n      p._id,\r\n      p.name || \"\",\r\n      p.category?.name || \"\",\r\n      p.subcategory?.name || \"\",\r\n      p.basePrice ?? \"\",\r\n      p.difference ?? \"\",\r\n      (Number(p.basePrice) + Number(p.difference || 0)) || \"\",\r\n      p.status || \"\",\r\n      p.validTill ? new Date(p.validTill).toISOString().split(\"T\")[0] : \"\",\r\n      p.description || \"\",\r\n      p.image || \"\",\r\n    ]);\r\n\r\n    const csvArray = [header, ...rows];\r\n    const csvContent =\r\n      \"data:text/csv;charset=utf-8,\" +\r\n      csvArray.map((r) => r.map((c) => `\"${String(c).replace(/\"/g, '\"\"')}\"`).join(\",\")).join(\"\\n\");\r\n\r\n    const encodedUri = encodeURI(csvContent);\r\n    const link = document.createElement(\"a\");\r\n    link.href = encodedUri;\r\n    link.download = `selected_prices_${Date.now()}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  // const filteredItems = items.filter((item) => {\r\n  //   const t = search.toLowerCase();\r\n  //   return (\r\n  //     (item.name || \"\").toString().toLowerCase().includes(t) ||\r\n  //     (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n  //     (item.subcategory?.name || \"\").toLowerCase().includes(t)\r\n  //   );\r\n  // });\r\n  \r\n\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n  const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* HEADER */}\r\n      <div style={styles.header}>\r\n        <h1 style={styles.title}>Product Management</h1>\r\n        {/* <p style={styles.subtitle}>Manage prices, categories, images, CSV & bulk actions.</p> */}\r\n      </div>\r\n\r\n      {/* SEARCH */}\r\n      \r\n     <div className=\"mobile-topbar\">\r\n  <input\r\n    type=\"text\"\r\n    placeholder=\"Search product, category or subcategory...\"\r\n    value={search}\r\n    onChange={(e) => {\r\n      setSearch(e.target.value);\r\n      setCurrentPage(1);\r\n    }}\r\n    style={styles.searchInput}\r\n  />\r\n\r\n  <button\r\n    style={styles.addButton}\r\n    onClick={() => {\r\n      setShowForm(!showForm);\r\n      setEditId(null);\r\n      setIsCopyMode(false);\r\n    }}\r\n  >\r\n    {showForm ? \"‚úñ\" : \"Add Product\"}\r\n  </button>\r\n</div>\r\n<div className=\"filter-bar\">\r\n  <select\r\n    value={filterCategory}\r\n    onChange={(e) => setFilterCategory(e.target.value)}\r\n    className=\"filter-select\"\r\n  >\r\n    <option value=\"\">Filter by Category</option>\r\n    {categories.map((c) => (\r\n      <option key={c._id} value={c._id}>{c.name}</option>\r\n    ))}\r\n  </select>\r\n\r\n  <select\r\n    value={filterSubcategory}\r\n    onChange={(e) => setFilterSubcategory(e.target.value)}\r\n    className=\"filter-select\"\r\n    disabled={!filterSubs.length}\r\n  >\r\n    <option value=\"\">Filter by Subcategory</option>\r\n    {filterSubs.map((s) => (\r\n      <option key={s._id} value={s._id}>{s.name}</option>\r\n    ))}\r\n  </select>\r\n\r\n  \r\n</div>\r\n\r\n\r\n      {/* BULK BAR */}\r\n      {selectedItems.length > 0 && (\r\n        // <div style={styles.bulkBar}>\r\n        <div className=\"bulk-bar\">\r\n\r\n          {/* <span style={styles.bulkText}>{selectedItems.length} selected</span> */}\r\n\r\n          {!bulkMode ? (\r\n            // <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\r\n            <div className=\"bulk-actions\">\r\n\r\n              <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n                üóë Bulk Delete\r\n              </button>\r\n\r\n              <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n                ‚úè Bulk Edit\r\n              </button>\r\n\r\n              {/* <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n                ‚§ì Export Selected\r\n              </button> */}\r\n            </div>\r\n          ) : (\r\n            <div style={styles.bulkPanel}>\r\n              <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n              {items\r\n                .filter((item) => selectedItems.includes(item._id))\r\n                .map((item) => (\r\n                  <div key={item._id} style={styles.bulkItemBox}>\r\n                    <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n                    <div style={styles.formGrid}>\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={item.name}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"name\", e.target.value)}\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Base Price</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.basePrice}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))\r\n                          }\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Category</label>\r\n                        <select\r\n                          value={item.category?._id || \"\"}\r\n                          onChange={(e) => {\r\n                            const newCat = e.target.value;\r\n                            updateLocalItemField(item._id, \"category\", { _id: newCat });\r\n                            const catObj = categories.find((c) => c._id === newCat);\r\n                            const firstSub = catObj?.subcategories?.[0]?._id || \"\";\r\n                            updateLocalItemField(item._id, \"subcategory\", { _id: firstSub });\r\n                          }}\r\n                          style={styles.select}\r\n                        >\r\n                          <option value=\"\">Select Category</option>\r\n                          {categories.map((c) => (\r\n                            <option key={c._id} value={c._id}>\r\n                              {c.name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Subcategory</label>\r\n                        <select\r\n                          value={item.subcategory?._id || \"\"}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(item._id, \"subcategory\", { _id: e.target.value })\r\n                          }\r\n                          style={styles.select}\r\n                        >\r\n                          <option value=\"\">Select Subcategory</option>\r\n                          {categories\r\n                            .find((c) => c._id === item.category?._id)\r\n                            ?.subcategories?.map((s) => (\r\n                              <option key={s._id} value={s._id}>\r\n                                {s.name}\r\n                              </option>\r\n                            ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Difference</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.difference || 0}\r\n                          onChange={(e) =>\r\n                            updateLocalItemField(item._id, \"difference\", Number(e.target.value))\r\n                          }\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n              <div style={{ display: \"flex\", gap: 0, marginTop: 12 }}>\r\n                <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n                  ‚úî Save All\r\n                </button>\r\n                <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n                  ‚úñ Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* FORM */}\r\n      {showForm && (\r\n        <div style={styles.formCard}>\r\n          <h2 style={styles.formTitle}>‚ûï Add \r\n            \r\n          </h2>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={styles.formGrid}>\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Product Name *</label>\r\n                <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Category *</label>\r\n                <div style={styles.categoryRow}>\r\n                  <select\r\n                    required\r\n                    name=\"category\"\r\n                    value={form.category}\r\n                    onChange={(e) => {\r\n                      handleChange(e);\r\n                      setForm((p) => ({ ...p, subcategory: \"\" }));\r\n                    }}\r\n                    style={styles.select}\r\n                  >\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((c) => (\r\n                      <option value={c._id} key={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingCategory((v) => !v)}>\r\n                    {addingCategory ? \"Close\" : \"Add\"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {addingCategory && (\r\n                <div style={styles.addCategoryBox}>\r\n                  <label style={styles.label}>Add New Category</label>\r\n                  <div style={styles.categoryRow}>\r\n                    <input\r\n                      value={newCategoryName}\r\n                      onChange={(e) => setNewCategoryName(e.target.value)}\r\n                      placeholder=\"Category name\"\r\n                      style={styles.input}\r\n                    />\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={(e) => {\r\n                        setNewCategoryImage(e.target.files[0]);\r\n                        setNewCategoryPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n                      }}\r\n                      style={styles.fileInput}\r\n                    />\r\n                    <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateCategory}>\r\n                      Create\r\n                    </button>\r\n                  </div>\r\n                  {newCategoryPreview && <img src={newCategoryPreview} style={styles.preview} alt=\"preview\" />}\r\n                </div>\r\n              )}\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Subcategory</label>\r\n                <div style={styles.categoryRow}>\r\n                  <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n                    <option value=\"\">Select Subcategory</option>\r\n                    {subcategories.map((s) => (\r\n                      <option value={s._id} key={s._id}>\r\n                        {s.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  {form.category && (\r\n                    <button type=\"button\" style={styles.btnSmall} onClick={() => setAddingSub((v) => !v)}>\r\n                      {addingSub ? \"Close\" : \"Add\"}\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {addingSub && (\r\n                <div style={styles.addCategoryBox}>\r\n                  <label style={styles.label}>Add New Subcategory</label>\r\n                  <div style={styles.categoryRow}>\r\n                    <input value={newSubName} onChange={(e) => setNewSubName(e.target.value)} placeholder=\"Subcategory name\" style={styles.input} />\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={(e) => {\r\n                        setNewSubImage(e.target.files[0]);\r\n                        setNewSubPreview(e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null);\r\n                      }}\r\n                      style={styles.fileInput}\r\n                    />\r\n                    <button style={styles.btnPrimary} type=\"button\" onClick={handleCreateSub}>\r\n                      Create\r\n                    </button>\r\n                  </div>\r\n                  {newSubPreview && <img src={newSubPreview} style={styles.preview} alt=\"preview\" />}\r\n                </div>\r\n              )}\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Base Price *</label>\r\n                <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Difference</label>\r\n                <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Valid Till</label>\r\n                <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Image</label>\r\n                <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n              </div>\r\n            </div>\r\n\r\n            <div style={styles.formGroup}>\r\n              <label style={styles.label}>Description</label>\r\n              <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n            </div>\r\n\r\n            <div style={styles.formActions}>\r\n              <button style={styles.btnPrimary} disabled={loading}>\r\n                {loading ? \"Saving...\" : \"Add Product\"}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* CSV CONTROLS */}\r\n      {/* <div style={styles.csvControls}>\r\n        <div>\r\n          <input type=\"file\" accept=\".csv\" ref={csvInputRef} onChange={handleCsvSelect} style={styles.fileInput} />\r\n          <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n            Import CSV\r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", gap: 8 }}>\r\n          <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n            Export All CSV\r\n          </button>\r\n\r\n          <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n            Export Selected CSV\r\n          </button>\r\n        </div>\r\n      </div> */}\r\n<div className=\"csv-topbar\">\r\n  <div className=\"csv-row\">\r\n    <input\r\n      type=\"file\"\r\n      accept=\".csv\"\r\n      ref={csvInputRef}\r\n      onChange={handleCsvSelect}\r\n      style={styles.fileInput}\r\n    />\r\n\r\n    <button style={styles.btnSmall} onClick={handleImportCsv}>\r\n      Import\r\n    </button>\r\n\r\n    <button style={styles.btnPrimary} onClick={handleExportCsv}>\r\n      Export All\r\n    </button>\r\n\r\n    <button style={styles.btnSmall} onClick={handleExportSelectedCsv}>\r\n       Selected \r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n      {/* TABLE */}\r\n      <div style={styles.tableCard}>\r\n        <div style={styles.tableHeader}>\r\n          <h2 style={styles.tableTitle}> Items</h2>\r\n          <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n        </div>\r\n\r\n        <div style={styles.tableWrapper}>\r\n          <table style={styles.table}>\r\n            <thead>\r\n              <tr>\r\n                <th style={styles.th}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n                    onChange={() => {\r\n                      if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n                      else setSelectedItems(filteredItems.map((x) => x._id));\r\n                    }}\r\n                  />\r\n                </th>\r\n                <th style={styles.th}>Sr</th>\r\n                <th style={styles.th}>Image</th>\r\n                <th style={styles.th}>Name</th>\r\n                <th style={styles.th}>Category</th>\r\n                <th style={styles.th}>Subcategory</th>\r\n                <th style={styles.th}>Base</th>\r\n                <th style={styles.th}>Diff</th>\r\n                <th style={styles.th}>Final</th>\r\n                <th style={styles.th}>Status</th>\r\n                <th style={styles.th}>Valid Till</th>\r\n                <th style={styles.th}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {currentItems.map((item, i) => (\r\n                <tr key={item._id} style={styles.tr}>\r\n                  <td style={styles.td}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item._id)}\r\n                      onChange={() =>\r\n                        setSelectedItems((prev) => (prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]))\r\n                      }\r\n                    />\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n                  <td style={styles.td}>{item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}</td>\r\n\r\n                  <td style={styles.td}>{item.name}</td>\r\n                  <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n                  <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n                  <td style={styles.td}>‚Çπ{item.basePrice}</td>\r\n                  <td style={styles.td}>{item.difference || 0}</td>\r\n                  <td style={styles.td}>‚Çπ{Number(item.basePrice) + Number(item.difference || 0)}</td>\r\n\r\n                  \r\n\r\n                  <td style={styles.td}>\r\n                    <button\r\n                      style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n                      onClick={() => handleStatusToggle(item)}\r\n                    >\r\n                      {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{item.validTill ? new Date(item.validTill).toLocaleDateString() : \"-\"}</td>\r\n\r\n                  <td style={styles.td}>\r\n                    <div style={{ position: \"relative\" }}>\r\n                      <button\r\n                        style={styles.menuButton}\r\n                        onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n                      >\r\n                        ‚ãÆ\r\n                      </button>\r\n\r\n                      {activeMenu === item._id && (\r\n                        <div style={styles.dropdown}>\r\n                          <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n                            ‚úè Edit\r\n                          </button>\r\n                          <button style={styles.dropdownItem} onClick={() => handleCopyToEdit(item)}>\r\n                            üìÑ Copy\r\n                          </button>\r\n                          <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n                            üóë Delete\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* PAGINATION */}\r\n        <div style={styles.pagination}>\r\n          <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n            Previous\r\n          </button>\r\n\r\n          {Array.from({ length: totalPages }, (_, i) => (\r\n            <button\r\n              key={i}\r\n              style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n              onClick={() => setCurrentPage(i + 1)}\r\n            >\r\n              {i + 1}\r\n            </button>\r\n          ))}\r\n\r\n          <button style={styles.paginationBtn} disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* MODAL FOR EDIT/COPY */}\r\n      {showModal && (\r\n        <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n          <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n            <h2 style={styles.modalTitle}>{isCopyMode ? \" Copy Product\" : \" Edit Product\"}</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formGrid}>\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Product Name *</label>\r\n                  <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Category *</label>\r\n                  <select\r\n                    required\r\n                    name=\"category\"\r\n                    value={form.category}\r\n                    onChange={(e) => {\r\n                      handleChange(e);\r\n                      setForm((p) => ({ ...p, subcategory: \"\" }));\r\n                    }}\r\n                    style={styles.select}\r\n                  >\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((c) => (\r\n                      <option value={c._id} key={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Subcategory</label>\r\n                  <select name=\"subcategory\" value={form.subcategory} onChange={handleChange} disabled={!subcategories.length} style={styles.select}>\r\n                    <option value=\"\">Select Subcategory</option>\r\n                    {subcategories.map((s) => (\r\n                      <option value={s._id} key={s._id}>\r\n                        {s.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Base Price *</label>\r\n                  <input type=\"number\" required name=\"basePrice\" value={form.basePrice} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Difference</label>\r\n                  <input type=\"number\" name=\"difference\" value={form.difference} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Valid Till</label>\r\n                  <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Image</label>\r\n                  <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n                </div>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Description</label>\r\n                <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n              </div>\r\n\r\n              <div style={styles.formActions}>\r\n                <button style={styles.btnPrimary} disabled={loading}>\r\n                  {loading ? \"Saving...\" : isCopyMode ? \"Save Copy\" : \"Update\"}\r\n                </button>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  style={styles.btnCancel}\r\n                  onClick={() => {\r\n                    setShowModal(false);\r\n                    setEditId(null);\r\n                    setIsCopyMode(false);\r\n                    setForm({\r\n                      name: \"\",\r\n                      category: \"\",\r\n                      subcategory: \"\",\r\n                      description: \"\",\r\n                      basePrice: \"\",\r\n                      difference: \"\",\r\n                      validTill: \"\",\r\n                      file: null,\r\n                    });\r\n                  }}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n\r\n  },\r\n  header: {\r\n  \r\n  },\r\n  title: {\r\n    fontSize: \"21px\",\r\n    fontWeight: \"700\",\r\n    color: \"#0d3b66\",\r\n    marginBottom: \"6px\",\r\n  },\r\n  subtitle: {\r\n   fontSize: \"16px\",\r\n  },\r\n  searchBar: {\r\n    maxWidth: \"320px\",\r\n    margin: \"0 auto 25px auto\",\r\n  },\r\n  searchInput: {\r\n    width: \"100%\",\r\n    padding: \"12px 15px\",\r\n    borderRadius: \"12px\",\r\n    border: \"1px solid #ced4da\",\r\n    background: \"#f9fbfc\",\r\n    fontSize: \"15px\",\r\n    outline: \"none\",\r\n    boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.06)\",\r\n  },\r\n  addButtonWrapper: {\r\n    textAlign: \"left\",\r\n    marginBottom: \"25px\",\r\n  },\r\n  addButton: {\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"12px\",\r\n    padding: \"12px 24px\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    cursor: \"pointer\",\r\n    transition: \"0.25s ease\",\r\n  },\r\n  bulkBar: {\r\n    background: \"#e9f2ff\",\r\n    border: \"1px solid #c4d9ff\",\r\n    borderRadius: \"14px\",\r\n    padding: \"15px 18px\",\r\n    marginBottom: \"25px\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    flexWrap: \"wrap\",\r\n    gap: \"14px\",\r\n    boxShadow: \"0 3px 10px rgba(0, 80, 160, 0.1)\",\r\n  },\r\n  bulkText: {\r\n    fontSize: \"15px\",\r\n    fontWeight: \"600\",\r\n    color: \"#0d3b66\",\r\n  },\r\n  bulkPanel: {\r\n    width: \"100%\",\r\n    background: \"#f7faff\",\r\n    border: \"1px solid #cfe2ff\",\r\n    padding: \"20px\",\r\n    borderRadius: \"14px\",\r\n    marginTop: \"10px\",\r\n    boxShadow: \"0 4px 14px rgba(0, 60, 120, 0.08)\",\r\n  },\r\n  bulkPanelTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"18px\",\r\n    fontWeight: \"700\",\r\n    marginBottom: \"15px\",\r\n  },\r\n  bulkItemBox: {\r\n    background: \"#ffffff\",\r\n    border: \"1px solid #dbe5f5\",\r\n    padding: \"18px\",\r\n    borderRadius: \"12px\",\r\n    marginBottom: \"16px\",\r\n    boxShadow: \"0 2px 10px rgba(0, 0, 50, 0.05)\",\r\n  },\r\n  bulkItemTitle: {\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    marginBottom: \"12px\",\r\n    color: \"#0d3b66\",\r\n    borderLeft: \"4px solid #007bff\",\r\n    paddingLeft: \"10px\",\r\n  },\r\n  formCard: {\r\n    borderRadius: \"16px\",\r\n    padding: \"25px\",\r\n    marginBottom: \"28px\",\r\n    background: \"#ffffff\",\r\n    boxShadow: \"0 4px 16px rgba(0, 0, 0, 0.08)\",\r\n    border: \"1px solid #eef2f7\",\r\n  },\r\n  formTitle: {\r\n    fontSize: \"21px\",\r\n    fontWeight: \"700\",\r\n    color: \"#0d3b66\",\r\n    marginBottom: \"15px\",\r\n  },\r\n  formGrid: {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fit, minmax(230px, 1fr))\",\r\n    gap: \"18px\",\r\n  },\r\n  formGroup: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: \"6px\",\r\n  },\r\n  label: {\r\n    fontWeight: \"600\",\r\n    fontSize: \"14px\",\r\n    color: \"#233142\",\r\n  },\r\n  input: {\r\n    padding: \"10px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #cfd6e0\",\r\n    background: \"#f8fafc\",\r\n    transition: \"0.2s ease\",\r\n    fontSize: \"14px\",\r\n  },\r\n  select: {\r\n    padding: \"10px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #cfd6e0\",\r\n    background: \"#f8fafc\",\r\n    transition: \"0.2s ease\",\r\n    fontSize: \"14px\",\r\n  },\r\n  textarea: {\r\n    padding: \"10px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #cfd6e0\",\r\n    background: \"#f8fafc\",\r\n    transition: \"0.2s ease\",\r\n    resize: \"none\",\r\n    minHeight: \"80px\",\r\n    fontSize: \"14px\",\r\n  },\r\n  fileInput: {\r\n    padding: \"8px\",\r\n    fontSize: \"13px\",\r\n  },\r\n  categoryRow: {\r\n    display: \"flex\",\r\n    gap: \"10px\",\r\n    alignItems: \"center\",\r\n  },\r\n  addCategoryBox: {\r\n    gridColumn: \"1 / -1\",\r\n    background: \"#f1f7ff\",\r\n    border: \"1px solid #cfe1ff\",\r\n    padding: \"16px\",\r\n    borderRadius: \"12px\",\r\n  },\r\n  preview: {\r\n    width: \"110px\",\r\n    height: \"110px\",\r\n    borderRadius: \"12px\",\r\n    marginTop: \"10px\",\r\n    objectFit: \"cover\",\r\n    border: \"1px solid #b7c9e2\",\r\n  },\r\n  formActions: {\r\n    marginTop: \"15px\",\r\n    display: \"flex\",\r\n    gap: \"12px\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  btnPrimary: {\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"10px\",\r\n    padding: \"9px 16px\",\r\n\r\n    cursor: \"pointer\",\r\n    transition: \"0.25s ease\",\r\n  },\r\n  btnSmall: {\r\n    background: \"#43a047\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"10px\",\r\n    padding: \"9px 16px\",\r\n    fontWeight: \"600\",\r\n    cursor: \"pointer\",\r\n    transition: \"0.25s ease\",\r\n  },\r\n  btnDelete: {\r\n    background: \"#e63946\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"10px\",\r\n    padding: \"9px 16px\",\r\n    fontWeight: \"600\",\r\n    cursor: \"pointer\",\r\n    transition: \"0.25s ease\",\r\n  },\r\n  btnCancel: {\r\n    background: \"#adb5bd\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"10px\",\r\n    padding: \"9px 16px\",\r\n    fontWeight: \"600\",\r\n    cursor: \"pointer\",\r\n    transition: \"0.25s ease\",\r\n  },\r\n  csvControls: {\r\n    borderRadius: \"12px\",\r\n    padding: \"16px\",\r\n    background: \"#f7faff\",\r\n    border: \"1px solid #d8e6ff\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: \"28px\",\r\n    flexWrap: \"wrap\",\r\n    gap: \"12px\",\r\n  },\r\n  tableCard: {\r\n\r\n\r\n\r\n\r\n  },\r\n  tableHeader: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: \"15px\",\r\n  },\r\n  tableTitle: {\r\n    fontSize: \"21px\",\r\n    fontWeight: \"700\",\r\n    color: \"#0d3b66\",\r\n  },\r\n  totalCount: {\r\n    fontSize: \"15px\",\r\n    color: \"#6c757d\",\r\n    fontWeight: \"600\",\r\n  },\r\n  tableWrapper: {\r\n    overflowX: \"auto\",\r\n  },\r\n  table: {\r\n    width: \"100%\",\r\n    borderCollapse: \"collapse\",\r\n    fontSize: \"14px\",\r\n  },\r\n  th: {\r\n    background: \"#e9f2ff\",\r\n    padding: \"12px\",\r\n    fontWeight: \"700\",\r\n    color: \"#0d3b66\",\r\n    textAlign: \"left\",\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  tr: {\r\n    borderBottom: \"1px solid #edf2f7\",\r\n  },\r\n  td: {\r\n    padding: \"12px 10px\",\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  tableImg: {\r\n    width: \"55px\",\r\n    height: \"55px\",\r\n    borderRadius: \"8px\",\r\n    objectFit: \"cover\",\r\n    border: \"1px solid #cfd9e5\",\r\n  },\r\n  statusActive: {\r\n    background: \"#93d8ba\",\r\n    padding: \"7px 12px\",\r\n    borderRadius: \"8px\",\r\n    color: \"black\",\r\n    fontWeight: \"600\",\r\n    border: \"none\",\r\n    cursor: \"pointer\",\r\n  },\r\n  statusInactive: {\r\n    background: \"#d9b1b1\",\r\n    padding: \"7px 12px\",\r\n    borderRadius: \"8px\",\r\n    color: \"black\",\r\n    fontWeight: \"600\",\r\n    border: \"none\",\r\n    cursor: \"pointer\",\r\n  },\r\n  menuButton: {\r\n    background: \"#f0f0f0\",\r\n    border: \"none\",\r\n    borderRadius: \"6px\",\r\n    padding: \"6px 12px\",\r\n    fontSize: \"20px\",\r\n    fontWeight: \"bold\",\r\n    cursor: \"pointer\",\r\n    transition: \"0.2s ease\",\r\n  },\r\n  dropdown: {\r\n    position: \"absolute\",\r\n    right: \"0\",\r\n    top: \"35px\",\r\n    background: \"#fff\",\r\n    border: \"1px solid #ddd\",\r\n    borderRadius: \"8px\",\r\n    boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\r\n    zIndex: \"100\",\r\n    minWidth: \"140px\",\r\n  },\r\n  dropdownItem: {\r\n    display: \"block\",\r\n    width: \"100%\",\r\n    padding: \"10px 15px\",\r\n    background: \"transparent\",\r\n    border: \"none\",\r\n    textAlign: \"left\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    transition: \"0.2s ease\",\r\n    borderBottom: \"1px solid #f0f0f0\",\r\n  },\r\n  dropdownItemDelete: {\r\n    display: \"block\",\r\n    width: \"100%\",\r\n    padding: \"10px 15px\",\r\n    background: \"transparent\",\r\n    border: \"none\",\r\n    textAlign: \"left\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n    color: \"#e63946\",\r\n    transition: \"0.2s ease\",\r\n  },\r\n  pagination: {\r\n    marginTop: \"18px\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    gap: \"10px\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  paginationBtn: {\r\n    padding: \"9px 13px\",\r\n    borderRadius: \"8px\",\r\n    background: \"#fff\",\r\n    border: \"1px solid #ddd\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"14px\",\r\n  },\r\n  paginationBtnActive: {\r\n    padding: \"9px 13px\",\r\n    borderRadius: \"8px\",\r\n    background: \"#007bff\",\r\n    color: \"white\",\r\n    border: \"1px solid #0062cc\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"14px\",\r\n  },\r\n  modalOverlay: {\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    background: \"rgba(0, 0, 0, 0.5)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    zIndex: \"1000\",\r\n    padding: \"20px\",\r\n  },\r\n  modal: {\r\n    background: \"#fff\",\r\n    borderRadius: \"16px\",\r\n    padding: \"30px\",\r\n    maxWidth: \"700px\",\r\n    width: \"100%\",\r\n    maxHeight: \"90vh\",\r\n    overflowY: \"auto\",\r\n    boxShadow: \"0 10px 40px rgba(0, 0, 0, 0.3)\",\r\n  },\r\n  modalTitle: {\r\n    fontSize: \"22px\",\r\n    fontWeight: \"700\",\r\n    color: \"#0d3b66\",\r\n    marginBottom: \"20px\",\r\n    textAlign: \"center\",\r\n  },\r\n  \r\n  \r\n}\r\n"],"mappings":";;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACxB,MAAMC,OAAO,GAAG,+CAA+C;AAC/D,MAAMC,YAAY,GAAG,mDAAmD;AAExE,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACa,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAACiB,MAAM,CAACC,UAAU,GAAG,GAAG,CAAC;EACjE,MAAM,CAACC,MAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}